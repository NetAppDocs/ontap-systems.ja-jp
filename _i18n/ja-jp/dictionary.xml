<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="a7dd277c916b5584ac7bfa0e2a0e1091" category="summary">NetApp Volume Encryption （ NVE ）を使用してアップグレードするシステム上のボリュームを暗号化する場合。</block>
  <block id="6d23265c57ba430c404cc6f3a940e117" category="doc">ノード 4 でキー管理ツールの設定をリストアします</block>
  <block id="48ce4ace02a7e66e4a302eb34827e7ee" category="paragraph">NetApp Volume Encryption （ NVE ）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。ノード 1 のアグリゲートの ARL がノード 2 からノード 4 に完了すると、暗号化されたボリュームがオフラインになります。</block>
  <block id="594ac9e04c14065852f0e508c7b91ccb" category="paragraph">次の手順を実行して、暗号化設定を新しいノードに同期します。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">手順</block>
  <block id="b58a207eb69ca3cec4fba13daf9dd85a" category="list-text">クラスタプロンプトで次のコマンドを使用して、 OKM の暗号化構成を同期します。</block>
  <block id="0a83ed732b07426c840d56d0ee6e648b" category="paragraph">「セキュリティキーマネージャオンボード同期」</block>
  <block id="9fe909e2cd822e396eda1b615c821ed1" category="list-text">OKM のクラスタ全体のパスフレーズを入力します。</block>
  <block id="91536c39913bd45a62884969813bb360" category="summary">node2 を node4 に置き換える前に、 node2 によって所有されているルート以外のアグリゲートを node3 に再配置する必要があります。</block>
  <block id="43ccb3503988f16a767b1af1e29d2384" category="doc">ルート以外のアグリゲートと NAS データ LIF を node2 から node3 に再配置します</block>
  <block id="022b6cf9ec195b2e8cda97b2b9718dc0" category="paragraph">前のフェーズでチェックが完了すると、 node2 のリソースリリースが自動的に開始されます。ルート以外のアグリゲートと SAN 以外のデータ LIF が node2 から node3 に移行されます。</block>
  <block id="b3fb9233a2435df292df205ef05e46db" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。</block>
  <block id="93847b1108029ddbe22a512a569d1038" category="paragraph">アグリゲートと LIF の移行が完了すると、検証のために処理が一時停止されます。この段階で、ルート以外のアグリゲートと SAN 以外のデータ LIF がすべて node3 に移行されているかどうかを確認する必要があります。</block>
  <block id="0569dcac35411678d2e9cbd8034fea69" category="admonition">アグリゲートおよび LIF のホーム所有者は変更されません。現在の所有者のみが変更されます。</block>
  <block id="cfe36116ee316c8890acf101b35dc90f" category="list-text">次のコマンドを使用して、ルート以外のすべてのアグリゲートがオンラインであること、および node3 でのそれらの状態を確認します。</block>
  <block id="83d84f87db7d89ef611cfd94ad7de568" category="paragraph">「 storage aggregate show -node node3 -state online -root false 」という 2 つのコマンドを実行します</block>
  <block id="e3f90b559d39f13fadeb0be05f3d5fff" category="paragraph">次の例は、 node2 のルート以外のアグリゲートがオンラインになっていることを示しています。</block>
  <block id="6702bf0268c295c6d30a4dc2db82d427" category="paragraph">アグリゲートがオフラインになった場合、または node3 で外部になった場合は、各アグリゲートに対して次のコマンドを実行してそれらのアグリゲートをオンラインにします。</block>
  <block id="a4a2e92e7d5cb408d0448b6d08752d5a" category="paragraph">「 storage aggregate online -aggregate &lt;aggr_name&gt;` 」という名前になります</block>
  <block id="53725b4cb9249d9da8c483a5d9e47db1" category="list-text">node3 で次のコマンドを実行し、出力を調べて、すべてのボリュームがノード 3 でオンラインになっていることを確認します。</block>
  <block id="07b749a6316cb9ade087e2a5f4ea8f62" category="paragraph">volume show -node node3 -state offline`</block>
  <block id="b830851aa263bbc0b84c68604beef993" category="paragraph">node3 にオフラインのボリュームがある場合は、各ボリュームに対して次のコマンドを実行してそれらのボリュームをオンラインにします。</block>
  <block id="6dcd6bf9703c1093c3bd05dbdcd04551" category="paragraph">'volume online -vserver &lt;vserver-name&gt; -volume &lt;volume-name&gt;`</block>
  <block id="a3b6690b513bd53e12723fa3f48d8134" category="paragraph">このコマンドで使用する '&lt;vserver-name&gt; は ' 前の volume show コマンドの出力にあります</block>
  <block id="b8520ff69f6b8ffe5e588c1f7ce8e9be" category="list-text">LIF が正しいポートに移動され、ステータスが「 up 」になっていることを確認します。LIF が 1 つでも停止している場合は、次のコマンドを LIF ごとに 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="84b1ceedff80bb769606c95da23925bc" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-node &lt;nodename&gt; -status-admin up 」という形式で指定します</block>
  <block id="fd8e2fd42f256cad2a3449b8f484fdd3" category="list-text">データ LIF を現在ホストしているポートが新しいハードウェアに存在しない場合は、次のコマンドを使用してブロードキャストドメインから削除します。</block>
  <block id="ee210a0730802d9c055ca601e95c499c" category="paragraph">「 network port broadcast-domain remove-ports 」と入力します</block>
  <block id="6e13fc9d1e75c160461788f1b750083d" category="list-text">次のコマンドを使用して、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="39711e914bc528c59b5d5e3ec8e9bee0" category="paragraph">network interface show -curr-node &lt;node2&gt; -role data</block>
  <block id="de73c7940eaf280bb4c1867652fc7e01" category="summary">正しく設定されるようにするには、 HA ペアを有効にする必要があります。</block>
  <block id="1a4d3feb333aa03c1008e54bae47d8e9" category="doc">新しいコントローラが正しくセットアップされていることを確認します</block>
  <block id="bf029ec4ec6e853d0d08bafbb1c50927" category="paragraph">正しく設定されるようにするには、 HA ペアを有効にする必要があります。さらに、 node3 と node4 が相互のストレージにアクセスできること、およびクラスタ内の他のノードに属するデータ LIF を所有していないことを確認する必要があります。また、 node3 が node1 のアグリゲートを所有しており、 node4 が node2 のアグリゲートを所有していること、および両方のノードのボリュームがオンラインであることを確認する必要があります。</block>
  <block id="ca710412a883d1570696f0510733c7a0" category="list-text">node2 のチェック後、 node2 クラスタのストレージフェイルオーバーとクラスタ HA ペアが有効になります。処理が完了すると、両方のノードに「 Completed 」と表示され、クリーンアップ処理が実行されます。</block>
  <block id="453f290f327bd6918e7f3e5ad760283a" category="list-text">次のコマンドを使用して、ストレージフェイルオーバーが有効になっていることを確認します。</block>
  <block id="751035e5db88d172e881299c202d9b13" category="paragraph">「 storage failover show 」をクリックします</block>
  <block id="715940e961cf53af2ba53d695b5bdb37" category="paragraph">次の例は、ストレージフェイルオーバーが有効になっている場合のコマンドの出力例を示しています。</block>
  <block id="9e6e3ee8077a0815c415187bf7e78b19" category="list-text">次のコマンドを使用して、 node3 と node4 が同じクラスタに属していることを確認します。出力を確認します。</block>
  <block id="494cb4f7976c64f111b74e9089d5bbd5" category="paragraph">「 cluster show 」を参照してください</block>
  <block id="fd3a247231846521133c845ae4c424c0" category="list-text">次のコマンドを使用して、 node3 と node4 が相互のストレージにアクセスできることを確認します。出力を確認します。</block>
  <block id="ca4a5bf327945cfdd4e55b64a87076b5" category="paragraph">「 storage failover show -fields local-missing-disks 、 partner-missing-disks 」というメッセージが表示されます</block>
  <block id="ed63866964a059112ba504e1f09aa077" category="list-text">次のコマンドを使用して、 node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していないことを確認します。</block>
  <block id="6485b14c0e329aebda0c4dcd7d09dbd0" category="paragraph">「 network interface show 」を参照してください</block>
  <block id="a4352e28b13a09b6c13475d7932553c5" category="paragraph">node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していない場合は、次のコマンドを使用してデータ LIF をホーム所有者にリバートします。</block>
  <block id="98ab56275ed98fed50530abdb3a97ee7" category="paragraph">「 network interface revert 」の略</block>
  <block id="7ab52e9ec65b0ed9de963e7f463bdd18" category="list-text">次のコマンドを使用して、 node3 が node1 のアグリゲートを所有していること、および node4 が node2 のアグリゲートを所有していることを確認します。</block>
  <block id="570743d2305de7bd0a4e44c426b2db21" category="paragraph">'storage aggregate show-owner-name&lt;node3 &gt;`</block>
  <block id="75cf0b763a8b4981f23b004d1b96a715" category="paragraph">「 storage aggregate show-owner-name &lt;node4 &gt; 」という形式で指定します</block>
  <block id="1406c72ada453b6b280391ec01df7910" category="list-text">次のコマンドを使用して、オフラインになっているボリュームがないかどうかを確認します。</block>
  <block id="498a7d30e002a0545e05d9bfce9c6fd7" category="paragraph">volume show -node &lt;node3 &gt; -state offline`</block>
  <block id="26391f3798784439b28190a843ccb233" category="paragraph">volume show -node &lt;node4 &gt; -state offline`</block>
  <block id="83b27b00949218cb0d9ec7e1eb1c92ad" category="inline-link-macro">ノードをアップグレードする準備をします</block>
  <block id="7b90e5a79c44186b11106c43fe600ec2" category="list-text">オフラインになっているボリュームがある場合は、セクションで取得したオフラインボリュームのリストと比較します <block ref="94f2dfd916315926f685ba65e48c6e25" category="inline-link-macro-rx"></block>必要に応じて、次のコマンドを使用して、ボリュームごとに 1 回、オフラインボリュームをオンラインにします。</block>
  <block id="f7d167d02c4419aa4a6731264ec3b0f2" category="paragraph">'volume online -vserver &lt;vserver-name&gt; -volume &lt;volume_name&gt;`</block>
  <block id="8b2ba35c1767c4b484add2236c0ffa6c" category="list-text">ノードごとに次のコマンドを使用して、新しいノードの新しいライセンスをインストールします。</block>
  <block id="d68dddaa399afd62872ccc142420c8e8" category="paragraph">'system license add - license-code &lt;license_code, license_code, license_code...&gt;`</block>
  <block id="539b1b58f1be38076506f35eb15e4340" category="paragraph">license-code パラメータには、アルファベットの文字キーをアルファベットの大文字 28 個まで入力できます。ライセンスは一度に 1 つずつ追加することも、複数追加することもできます。各ライセンスキーをカンマで区切って指定することもできます。</block>
  <block id="8fb49e1f692fe82fa4072e7f3b3adc5d" category="list-text">次のいずれかのコマンドを使用して、元のノードから古いライセンスをすべて削除します。</block>
  <block id="3ce96f90e07aec61f73d0c41634c6aa1" category="paragraph">「システムライセンスのクリーンアップ - 未使用 - 期限切れ」</block>
  <block id="10c0851b91ac12edf49186d6d3d1f9e8" category="paragraph">「 system license delete -serial -number &lt;node-serial_number&gt; -package &lt;license_package&gt; 」という 2 つのライセンスがあります</block>
  <block id="39ae417852cfe60b9d822a0279b0ab54" category="list-text">次のコマンドを使用して、期限切れのライセンスをすべて削除します。</block>
  <block id="df1e7bcee84d26ba3ee0e0f129bf90c0" category="paragraph">「システムライセンスのクリーンアップ - 期限切れ」</block>
  <block id="3bf5393fdb78923b044e0b051dee1ce3" category="list-text">次のコマンドを使用して、使用していないライセンスをすべて削除します。</block>
  <block id="32be9f537283877b6e62fd279a4f5513" category="paragraph">'System license clean-up-unused （システムライセンスのクリーンアップ - 未使用） '</block>
  <block id="9501cf64d3b2dae298a8bc24331bd5f4" category="list-text">クラスタから特定のライセンスを削除するには、ノードで次のコマンドを使用します。</block>
  <block id="799bede4cdc5081180edecafa5450710" category="paragraph">「 system license delete -serial-number &lt;node1 serial number&gt; -package * 」という名前になります</block>
  <block id="951f07bea4d8173fd07579bfd41784d7" category="paragraph">「 system license delete -serial-number &lt;node2 serial number&gt; -package * 」のように表示されます</block>
  <block id="9a940b51cdd2b2d508cffc6eecff9e32" category="paragraph">次の出力が表示されます。</block>
  <block id="0b0ab53ca7ce0880a8c5c074d260f0ab" category="paragraph">すべてのパッケージを削除するには 'y' を入力します</block>
  <block id="4ce69e9f9d8587e084bc1b7e003695ac" category="list-text">次のコマンドを使用して出力を調べ、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="f52d44aaa981f34fa588225f9d4cc820" category="paragraph">「 system license show 」を参照してください</block>
  <block id="a4ac3d900221761df4ffa0c14d7cf05c" category="paragraph">の出力と、でキャプチャした出力を比較することもできます <block ref="94f2dfd916315926f685ba65e48c6e25" category="inline-link-macro-rx"></block>。</block>
  <block id="9317939b472b78db666295bd5d822d4c" category="list-text">構成に NetApp Storage Encryption （ NSE ）を使用していた場合、「 setenv. bootarg.storageencryption.support 」コマンドを「 true 」に設定するには、「 kmip.init.maxwait&gt;` variable 」を「 off 」に設定します（手順 27 ）。次のコマンドを使用して、変数をリセットする必要があります。</block>
  <block id="7595b7bfda3a3ae80ea41390c836acf4" category="paragraph">「 diag 」のコマンドは、 systemshell -node &lt;nodename&gt; command sudo kenv -u -p kmip.init.maxwait` です</block>
  <block id="83384f48b367d39b20d627f5230807a9" category="list-text">両方のノードで次のコマンドを使用して SP を設定します。</block>
  <block id="dde01ffa3dbac07014347a80fbf42f2f" category="paragraph">「 system service-processor network modify -node &lt;node_name &gt; 」のように指定します</block>
  <block id="96e2bc47c553dcc4e4a154f6b129069a" category="inline-link-macro">システムアドミニストレーションリファレンス</block>
  <block id="112d3c239cd86d18383aedfae5ed632b" category="inline-link-macro">ONTAP 9.8 コマンド：マニュアルページリファレンス</block>
  <block id="d87938e7e56deeb2324b63cfb0fb5757" category="paragraph">を参照してください <block ref="839332b52391f9eb13d4a6fc107f1e56" category="inline-link-macro-rx"></block> SP およびの詳細については、を参照してください <block ref="17d992424ad253bf21fb1a0ceb91e8d4" category="inline-link-macro-rx"></block> 「 system service-processor network modify 」コマンドの詳細については、を参照してください。</block>
  <block id="c3e44bb7c41d54ab04ed9048fc5b39f1" category="list-text">新しいノードの 1 つで次の操作を実行します。</block>
  <block id="3e5bd7be74c99626dd9c0e9959dfb74f" category="list-text">次のコマンドを使用して advanced 権限レベルに切り替えます。</block>
  <block id="5fd1bcc8472b38442961eb87ca3f844a" category="paragraph">「 advanced 」の権限が必要です</block>
  <block id="6dcd1ebf4390170868ab9bcdfd967581" category="list-text">次のコマンドを入力します。</block>
  <block id="1b4358359b751ff53e2d497527507190" category="paragraph">「 storage failover modify -node &lt;node_name &gt; -CIFS-NDO -duration default | medium | low 」</block>
  <block id="bdaf872fbb56ca73fe6e9dd9a980aba6" category="list-text">システムのワークロードが 50% ～ 75% の場合は、「 m edium 」と入力します。</block>
  <block id="c347ef9cd4bc7e044fc3d1aa22c41ed4" category="list-text">システムのワークロードが 75% ～ 100% の場合は 'low' と入力します</block>
  <block id="c3ad9ea1caccd55758bcc3859594a479" category="list-text">次のコマンドを使用して、 admin レベルに戻ります。</block>
  <block id="d260c71f1d73fe6dce24fae82cd28aca" category="paragraph">「特権管理者」</block>
  <block id="0fbda10a905dbd102127a7a65daf7abd" category="list-text">システムをリブートして、変更が有効になっていることを確認します。</block>
  <block id="26ee87a1606d284ae34dfd890a86b337" category="list-text">新しいノードにスイッチレスクラスタをセットアップする場合は、ネットアップサポートサイトの「 2 ノードスイッチレスクラスタへの移行」の手順に従ってください。</block>
  <block id="27af4227ca8acc558df96e2723ec9b37" category="inline-link-macro">新しいコントローラモジュールで Storage Encryption をセットアップします</block>
  <block id="ac616410952c35e808a3c7ce4ea5b4a7" category="inline-link-macro">古いシステムの運用を停止</block>
  <block id="1f2354221798f71ff84884afad4e486c" category="paragraph">ノード 3 とノード 4 でストレージ暗号化が有効になっている場合は、セクションを完了します <block ref="71c3c6e82ac4cdabf6d82d7b484d2163" category="inline-link-macro-rx"></block>。それ以外の場合は、の項を実行します <block ref="8e60bb3917e01e2c0c3fe74628f3291d" category="inline-link-macro-rx"></block>。</block>
  <block id="62a59e60f8dc64071df571bef45b97de" category="summary">交換したコントローラまたは新しいコントローラの HA パートナーで Storage Encryption が使用されている場合。</block>
  <block id="71dd89b192a133f8ccfd6e18f0397ebc" category="paragraph">交換したコントローラまたは新しいコントローラの HA パートナーで Storage Encryption が使用されている場合は、 SSL 証明書のインストールやキー管理サーバのセットアップなど、新しいコントローラモジュールを Storage Encryption 用に設定する必要があります。</block>
  <block id="1bf6f98fb62d5ca413d6cce101954a5f" category="paragraph">この手順には、新しいコントローラモジュールで実行する手順が含まれています。コマンドは正しいノードで入力する必要があります。</block>
  <block id="7aa4aef633570e557584b795ec5144e9" category="list-text">次のコマンドを使用して、キー管理サーバがまだ使用可能であり、そのステータスと認証キー情報を確認します。</block>
  <block id="a57b36ea9f75076c6744f1f269e29bd8" category="paragraph">「 securitykey-manager show -status 」</block>
  <block id="eeb811dde1344fabc569b67ecd8b95f6" category="paragraph">「セキュリティキーマネージャクエリー」</block>
  <block id="32ce57c242557f5657864f2684cf9a96" category="list-text">前の手順で確認したキー管理サーバを、新しいコントローラのキー管理サーバのリストに追加します。</block>
  <block id="6bdf9080f49ca89e65220e312d51e688" category="list-text">次のコマンドを使用して、キー管理サーバを追加します。</block>
  <block id="d972edad5fb5c103c1c6f1ac23a3cdf1" category="paragraph">「 securitykey-manager-add &lt;key_manager_server_ip_address &gt;` 」</block>
  <block id="74bdef17191283e61278bf225ca4520d" category="list-text">リストされている各キー管理サーバについて、同じ手順を繰り返します。最大 4 台のキー管理サーバをリンクできます。</block>
  <block id="0dd9d4ff0944e970430f96022e169191" category="list-text">次のコマンドを使用して、キー管理サーバが正常に追加されたことを確認します。</block>
  <block id="0e79decb13af5d2dc1cdba7d4607d34c" category="paragraph">「 securitykey -manager show 」を参照してください</block>
  <block id="613e5831fca345289928a52de72937a1" category="list-text">新しいコントローラモジュールで、キー管理セットアップウィザードを実行して、キー管理サーバをセットアップしてインストールします。</block>
  <block id="bbdb53ee65b9a0c8fdb6fdf3661d0fb6" category="paragraph">既存のコントローラモジュールと同じキー管理サーバをインストールする必要があります。</block>
  <block id="3bf7f9a82df0c130b46780052ca49e4c" category="list-text">次のコマンドを使用して、新しいノードでキー管理サーバセットアップウィザードを起動します。</block>
  <block id="0d51f1cd2b3f0ee725fef68026226c50" category="paragraph">「 securitykey-manager setup -node &lt;new_controller_name&gt;` 」のように指定します</block>
  <block id="5560b948b9e6ef0348c58a90d5656939" category="list-text">ウィザードの手順に従って、キー管理サーバを設定します。</block>
  <block id="909e5630fa0cab445f0538f20d1af620" category="list-text">次のコマンドを使用して、リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="441e1cbf2c222517b5366ca827ed309d" category="paragraph">「 securitykey-manager restore -node &lt;new_controller_name&gt;` 」のように指定します</block>
  <block id="b9afc0f55ceae0ffd6b6f1e1c9a8f62e" category="summary">ノード 4 のネットワーク設定を確認したあと、ノード 3 からノード 4 にアグリゲートを再配置します。</block>
  <block id="32d978cffec9875e4d92dc55b84df69b" category="doc">node2 によって所有されているルート以外のアグリゲートと NAS データ LIF を、 node3 から node4 に移動します</block>
  <block id="33b455f1b5d98f0ba5db998a78bbbbe3" category="paragraph">ノード 4 のネットワーク設定を確認し、ノード 3 からノード 4 にアグリゲートを再配置する前に、ノード 2 に現在ノード 3 に属する NAS データ LIF が、ノード 3 からノード 4 に再配置されていることを確認する必要があります。また、ノード 4 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="d2f28697e2bc23acb2a0a646043ffac0" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 4 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="0515b14b743c9032d850e7d789187991" category="list-text">次のコマンドを使用して、再配置処理を再開します。</block>
  <block id="d6fd449bc639f92f27b747fd5b40361d" category="paragraph">「システムコントローラの交換が再開」</block>
  <block id="0088774945c7d5ae5289c2de3632524f" category="paragraph">システムは次のタスクを実行します。</block>
  <block id="8f1335854a57fa62ce5fd7596399825b" category="list-text">クラスタクォーラムチェック</block>
  <block id="9ebfbaf3d8306da9bc975b709c5ec632" category="list-text">システム ID の確認</block>
  <block id="02d365a95e78a8c9b434a9c521f379c8" category="list-text">イメージのバージョンチェック</block>
  <block id="2540df2535b5361f67db0cb18a3f91a5" category="list-text">ターゲットプラットフォームのチェック</block>
  <block id="c8740509193885a8e40f7a7fb84ebff6" category="list-text">ネットワーク到達可能性チェック</block>
  <block id="93328d3894b0eabbdee40ef873079464" category="paragraph">ネットワーク到達可能性チェックのこの段階で処理が一時停止します。</block>
  <block id="ba825b8ec370a1f6fa3b0b9ac48b0036" category="list-text">システムは次のチェックを実行します。</block>
  <block id="e31fb2dedfef9337a9708f375d220030" category="list-text">クラスタの健全性チェック</block>
  <block id="8ea7886b35c3e44ad6fcf3a1535ab9e7" category="list-text">クラスタ LIF のステータスを確認します</block>
  <block id="545969fcc9e42f8cf5ca0598e1ec25f6" category="paragraph">これらのチェックの実行後、システムによって、 node2 によって所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node4 に再配置されます。リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="62ddee6b3b9135e9eda7c5bf96b2d614" category="list-text">次のコマンドを使用して、アグリゲートの再配置処理と NAS データ LIF の移動処理のステータスを確認します。</block>
  <block id="f1e1b94ce2ba7179506b74127da77af2" category="paragraph">「 system controller replace show-sdetails 」というエラーが表示されます</block>
  <block id="ff23473696232fd91c1e2dcb460109e4" category="paragraph">コントローラ交換用手順が一時停止している場合は、エラーがある場合はチェックして修正し、次に「問題 re sume 」をクリックして操作を続行します。</block>
  <block id="e4a5ba6110a9401660bd49252e37d969" category="list-text">必要に応じて、取り外した LIF をリストアしてリバートします。次のコマンドを使用して、削除した LIF を表示します。</block>
  <block id="0b66eef739f727e3f877d8fd0e6b8862" category="paragraph">cluster controller -replacement network ヒエラー（クラスタコントローラ交換ネットワークが取り外されました） -interface show</block>
  <block id="4f67fb175aeac59570c3ee59b2048d49" category="paragraph">LIF が削除された場合は、次のコマンドを使用してホームノードをノード 4 にリストアします。</block>
  <block id="26490175c6a9bb3f68c33041e7c3bd2e" category="paragraph">クラスタ・コントローラ交換ネットワークが取り外されましたインタフェース・リストア -home-node</block>
  <block id="7a3dfdff87bcd05a9bb92e3ef7bb1a40" category="list-text">次のコマンドを使用して、処理を再開し、必要なポストチェックの実行をシステムに求めるプロンプトを表示します。</block>
  <block id="f3bf2563f63e5f2af4793dec3cbb4411" category="paragraph">次のポストチェックが実行されます。</block>
  <block id="9e9f6a103b5a748cadf8dfd54b8e29ac" category="list-text">アグリゲートの再構築チェック</block>
  <block id="ea017e018f3e760c65f3b02f928b8e43" category="list-text">アグリゲートのステータスを確認します</block>
  <block id="08f0db77633fd9c7f12fcd8827332b9d" category="list-text">ディスクのステータスを確認します</block>
  <block id="3c1799bbeb29b748f57f26ac2c4fc6f9" category="list-text">ボリュームチェック</block>
  <block id="017b5062ed4e1498b1fe073b7b8cc546" category="summary">ノード 3 にオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードがある場合</block>
  <block id="bc26b5e5559721e19875fb91dce22cec" category="doc">ノード 3 で FC または UTA / UTA2 設定を設定します</block>
  <block id="7bd5452d2f3a1c07fc54d3a08cc82d64" category="paragraph">ノード 3 にオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードがある場合は、残りの手順を完了する前に設定を行う必要があります。</block>
  <block id="2ad1e670b60bb257ae5313d5009813a5" category="inline-link-macro">ノード 3 の FC ポートを設定</block>
  <block id="b6f436f6398306a921de09279a6a8256" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定してください</block>
  <block id="ef0be082d7ca1bab8630df88ecce644f" category="paragraph">セクションの完了が必要な場合があります <block ref="b48af89854b82411ff58b4642c985df6" category="inline-link-macro-rx"></block>、を参照してください <block ref="e8f8d63644de968e3b5945cef425ba46" category="inline-link-macro-rx"></block>、または両方のセクション。</block>
  <block id="d99657bf946aa6dc77b75f8f378cf072" category="admonition">ネットアップのマーケティング資料では、 UTA2 という用語を CNA アダプタとポートという意味で使用している場合があります。ただし、 CLI では CNA という用語が使用されます。</block>
  <block id="61a70f63b15f41db325598863adb0177" category="inline-link-macro">ノード 3 のインストールを確認</block>
  <block id="133634d291b6dbed9d4ad1cc73bfb71c" category="list-text">ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="e1e3d09a5bb947a8d1b15fc31cc3b167" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="5ff20c188ceb23808ed9b47d8e5637ff" category="inline-link-macro">node3 をインストールしてブートします</block>
  <block id="7c36cf6cad805ba92f2c15221ad65254" category="list-text">ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したストレージアレイを使用するシステムがある場合に、ノード 3 にはオンボードの FC ポート、オンボードの UTA / UTA ポート、または UTA / UTA2 カードがないのであれば、セクションに戻ります <block ref="1619b1d4cec26b9f46f158ed5add4ab0" category="inline-link-macro-rx"></block> 手順 23 で再開します。</block>
  <block id="6ef697f11922be2e4de0971f7d70997f" category="list-title">選択肢</block>
  <block id="8c986217270abd0ebe0e339e0d9d531b" category="list-text"><block ref="8c986217270abd0ebe0e339e0d9d531b" category="inline-link-macro-rx"></block></block>
  <block id="e8f8d63644de968e3b5945cef425ba46" category="list-text"><block ref="e8f8d63644de968e3b5945cef425ba46" category="inline-link-macro-rx"></block></block>
  <block id="8992459eb47b3dc5036bd8be4d821db3" category="paragraph">node3 にオンボードまたは FC アダプタの FC ポートがある場合は、ポートが事前に設定されていないため、ノードを稼働状態にする前にポート設定を設定する必要があります。ポートが設定されていないと、サービスが停止する可能性があります。</block>
  <block id="0dce2bd52df484ed2da8db2ade281eab" category="paragraph">セクションに保存した FC ポート設定の値を node1 で確認しておく必要があります <block ref="94f2dfd916315926f685ba65e48c6e25" category="inline-link-macro-rx"></block>。</block>
  <block id="03ed7b9b905b544f247aa0b92eb8340f" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードがある場合は、で設定します <block ref="e8f8d63644de968e3b5945cef425ba46" category="inline-link-macro-rx"></block>。</block>
  <block id="4499075b12fda8ae40c8f6475349240b" category="paragraph">* 重要 * ：ご使用のシステムにストレージ・ディスクがある場合は、クラスタ・プロンプトでこのセクションにコマンドを入力してください。「 V シリーズシステム」または FlexArray 仮想化ソフトウェアを使用していて、ストレージアレイに接続している場合は、このセクションにメンテナンスモードでコマンドを入力します。</block>
  <block id="5cb12b259721a136cc774cadc7c074c9" category="list-text">ノード 3 の FC 設定と、ノード 1 から以前に取得した設定を比較します。</block>
  <block id="4d65ef8cf84d37cbb99560183afc8431" category="list-text">次のいずれかを実行します。</block>
  <block id="78f6ac180c7bb87b8aee79da36246598" category="cell">アップグレードするシステム</block>
  <block id="a7a589b8e6e6d3aac1d1459d66a748a0" category="cell">次に、</block>
  <block id="61bc24f9f2f24029ba7b04d76f768598" category="cell">ストレージディスクがあります</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="158580b0032f63c5230751175dea0f61" category="paragraph">メンテナンスモード（ブートメニューのオプション 5 ）で、必要に応じて次のいずれかのコマンドを使用して、 node3 の FC ポートを変更します。</block>
  <block id="2a89c3d97b61149625edcb17b1a04ab7" category="list-text">ターゲットポートをプログラムする場合： ucadmin modify -m fc -t target &lt;adapter&gt;`</block>
  <block id="aa6b5e0f3f85521221493b726a4ef498" category="list-text">イニシエータポートをプログラムするには、 ucadmin modify -m fc -t initiator &lt;adapter&gt;`-t' を FC4 タイプ（ターゲットまたはイニシエータ）に設定します。</block>
  <block id="58b0fc39873b9fe983d6b57e06585d6f" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="255973bd444380150c99ab5f810b123d" category="cell">保守モード（ブートメニューのオプション 5 ）で、必要に応じて次のコマンドを使用して、 node3 の FC ポートを変更します。 ucadmin modify -m fc -t initiator -f &lt;adapter_port_name&gt; `-t` は、 FC4 タイプ、ターゲット、またはイニシエータです。* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="dc19afaee728d475a48b658a9c09b990" category="cell">次のコマンドを使用して、新しい設定を確認します。 ucadmin show</block>
  <block id="cbdb28ad6c338a8595170ad066765e68" category="list-text">次のコマンドを使用してメンテナンスモードを終了します。</block>
  <block id="819817945fea31f0c3596c841e685904" category="paragraph">「 halt 」</block>
  <block id="f32a5f93a0f8f4487a3f72a3889a4810" category="list-text">次のコマンドを使用して、 LOADER プロンプトからシステムをブートします。</block>
  <block id="a94e69437db24dee798bbd90bce4ee0a" category="paragraph">「 boot_ontap menu</block>
  <block id="6fbd819a7ffcfac7237456907e32238d" category="list-text">コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="4e0dd5a6524aabaa8ad8173947fbf52a" category="list-text">保守モードのブート・メニューからオプション「 5 」を選択します。</block>
  <block id="672a791e2d7b759dbe3c29aab358eb15" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合は、セクションに進みます <block ref="e8f8d63644de968e3b5945cef425ba46" category="inline-link-macro-rx"></block>。</block>
  <block id="63ad3c4d36a1a9f413872ac57af754a7" category="inline-link-macro">ノード 3 のインストールを確認します</block>
  <block id="14f3fec6e2a9858d19d886a48d0a0345" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="e8f8d63644de968e3b5945cef425ba46" category="inline-link-macro-rx"></block> をクリックして、セクションに移動します <block ref="e5d463aaa9b038b1efee70e147ab4739" category="inline-link-macro-rx"></block>。</block>
  <block id="65388bf37cf8943b6ae990f110dbe576" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="e8f8d63644de968e3b5945cef425ba46" category="inline-link-macro-rx"></block> に戻ります <block ref="1619b1d4cec26b9f46f158ed5add4ab0" category="inline-link-macro-rx"></block> ステップ 23 で再開します。</block>
  <block id="d190fd34bae28aff670090c55eb7e24b" category="paragraph">ノード 3 にオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードが搭載されている場合は、アップグレードしたシステムの使用方法によって、ポートの設定を確認し、場合によっては再設定する必要があります。</block>
  <block id="cb462dbb35ebe0e4c6fef592bf7fd143" category="paragraph">UTA / UTA2 ポートに対応する正しい SFP+ モジュールが必要です。</block>
  <block id="7cda71007d207ef48448dffed511abb8" category="paragraph">FC にユニファイドターゲットアダプタ（ UTA / UTA2 ）ポートを使用する場合は、まずポートの設定を確認する必要があります。</block>
  <block id="55e55fd6d28dec627ac074963cbf9279" category="paragraph">現在のポート設定を確認するには、「 ucadmin show 」コマンドを使用します。</block>
  <block id="b91d8d8d49f32c190d000475eaaf1a99" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UTA2 モードに設定できます。FC モードでは FC イニシエータと FC ターゲットがサポートされます。 UTA / UTA2 モードを使用すると、同じ 10GbE SFP+ インターフェイスを共有する NIC と FCoE のトラフィックを同時に処理でき、 FC ターゲットをサポートできます。</block>
  <block id="7561dbd16073c82eda6418543cdd93ec" category="paragraph">UTA / UTA2 ポートはアダプタまたはコントローラに搭載されている場合がありますが、次の構成になっています。ノード 3 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更してください。</block>
  <block id="7107b4a109094877db55716e76bb317a" category="list-text">コントローラを注文した UTA / UTA2 カードは、注文したパーソナリティを指定するために出荷前に設定されます。</block>
  <block id="494d18d03e7c6fb4b46866273ca75c34" category="list-text">コントローラとは別に発注した UTA / UTA2 カードは、デフォルトの FC ターゲットパーソナリティとして出荷されます。</block>
  <block id="ac077d6a8af47d3f6459bdc75d20144c" category="list-text">新しいコントローラのオンボード UTA / UTA2 ポートは、希望するパーソナリティを持つように出荷する前に設定されます。</block>
  <block id="1acb31a5b3534092750f6ee560e0995c" category="paragraph">* 注意 * ：ストレージディスクがある場合は、メンテナンスモードに指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力します。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合は、このセクションのメンテナンスモードプロンプトでコマンドを入力します。UTA / UTA2 ポートを設定する場合は、メンテナンスモードにする必要があります。</block>
  <block id="acb716cb88324392697eb22eddc7c3a3" category="list-text">[[step1] node3 で次のコマンドを入力して、ポートが現在どのように設定されているかを確認します。</block>
  <block id="8eae44e92f7155cef20bea12cd5a16c8" category="cell">システムの状態</block>
  <block id="e8eedad0c370be864050462beebc8141" category="cell">対処は不要です。</block>
  <block id="5344ecb990fb0b0e60a7b979eeca26cd" category="cell">ucadmin show</block>
  <block id="1f81aa18292065e5242ce30775d96e2c" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="b9372fe4eb2e1f51dc5ecc63ef944026" category="list-text">[[step2] 現在の SFP+ モジュールが目的の用途と一致しない場合は、正しい SFP+ モジュールと交換します。</block>
  <block id="d72066c585919f0b5faa9807de695bf8" category="paragraph">ネットアップの担当者に連絡して、正しい SFP+ モジュールを入手します。</block>
  <block id="cf64c78b7d463ed3f7aa4e4a9d43ca20" category="list-text">[[step3]] 「 ucadmin show 」コマンドの出力を調べ、 UTA / UTA2 ポートに希望するパーソナリティがあるかどうかを確認します。</block>
  <block id="37ba28d857fa9f472bd54799a71b4d1f" category="list-text">[[step4]] 次のいずれかの操作を実行します。</block>
  <block id="2c59ff8f0f110684a1947a7be9c33989" category="cell">UTA / UTA2 ポート</block>
  <block id="2a6b2595426d2565bc2823be04753585" category="cell">希望するパーソナリティがない</block>
  <block id="0011237e8dc98411a0794ba6dddb9989" category="inline-xref">手順 5</block>
  <block id="07d4c533878766923bd46c0ad1c07580" category="cell">に進みます <block ref="861668d9cff26e583cb336053a01f9e4" category="inline-xref-macro-rx"></block>。</block>
  <block id="3fa4c0ba2b210d02bdf49ea3e2812989" category="cell">あなたがほしい人格を持っている</block>
  <block id="c0f1d3db2a584ee59498c0abaa47adf7" category="inline-xref">手順 13</block>
  <block id="c24c89c849360fa759686bcc55215bde" category="cell">手順 5 から 12 を省略して、に進みます <block ref="4dee99626dba3377b9d9c4e83b147efa" category="inline-xref-macro-rx"></block>。</block>
  <block id="e517f479718742d7735088b63cb4b0a6" category="list-text">[[step5] 次のいずれかの操作を実行します。</block>
  <block id="bb8715eb9d3c8fc0a643a55fc3e9ed29" category="cell">を設定する場合</block>
  <block id="c4c1b40245719a0e56eb453401560e8e" category="cell">UTA / UTA2 カードのポート</block>
  <block id="805e47ec7b4ef2165b02c8ff12688343" category="inline-xref">手順 7</block>
  <block id="dd9a20380743fd0be8124656b4d4ab63" category="cell">に進みます <block ref="26f10975298f1040a7b43f7164af041b" category="inline-xref-macro-rx"></block></block>
  <block id="a7f2071dd0b7eee34d97c156132a3210" category="cell">オンボードの UTA/UTA2 ポート</block>
  <block id="d60d761a93da31e724112577c571c923" category="inline-xref">手順 8</block>
  <block id="5979362880fb0beb82ed703473e99fae" category="cell">手順 7 を省略して、に進みます <block ref="9ceac178d2a16e52b0311eab28cd7776" category="inline-xref-macro-rx"></block>。</block>
  <block id="db9102abe2408ee4fea1c2484a886da4" category="list-text">[[step6] アダプタがイニシエータモードの場合、および UTA / UTA2 ポートがオンラインの場合は、次のコマンドを使用して UTA / UTA2 ポートをオフラインにします。</block>
  <block id="b3c0d59f1fa098e490810b0e947e6307" category="paragraph">「 storage disable adapter &lt;adapter_name&gt; 」</block>
  <block id="fff4e24de6543fad49dbe48a7b01e1d1" category="paragraph">ターゲットモードのアダプタは、メンテナンスモードで自動的にオフラインになります。</block>
  <block id="13d2cbaf30ba642416a751e72335fbd5" category="list-text">[[step7] 現在の設定が目的の使用に一致しない場合は、次のコマンドを使用して、必要に応じて設定を変更します。</block>
  <block id="749cabc3295eb5c2617db20882147797" category="paragraph">ucadmin modify -m fc | cna-t initiator | target &lt;adapter_name&gt; `</block>
  <block id="68393ca2b7b9884fdd9f7eea661220e1" category="list-text">「 -m 」はパーソナリティ・モードで、「 fc 」または「 cna 」です。</block>
  <block id="2e23b3b6b4b04a1d678f35eda127d4d6" category="list-text">`-t` は FC4 のタイプ、「 target 」または「 initiator 」です。</block>
  <block id="3f0869d2c33ab7caf7185458236590fe" category="admonition">テープドライブ、 FlexArray 仮想化システム、および MetroCluster 構成には、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="6c0032f71f96f6cbf3306cb2f3897ad4" category="list-text">[[step8] 次のコマンドを使用して、設定を確認します。</block>
  <block id="dbebec5dd2407c06cf693c4932aca95a" category="list-text">[[step9] 次のいずれかのコマンドを使用して、設定を確認します。</block>
  <block id="7487a7c3d23ff8fb7ac97c86902fb023" category="paragraph">次の例の出力は ' アダプタ 1b の FC4 タイプがイニシエータに変更され ' アダプタ 2a および 2b のモードが CNA に変更されていることを示しています</block>
  <block id="b72b45050e36429103ef8a4d16d411be" category="list-text">[[step10]] 次のいずれかのコマンドを入力して、各ポートに 1 回ずつターゲットポートをオンラインにします。</block>
  <block id="9acdc1f2d575ffa9049389142b06720a" category="cell">「 network fcp adapter modify -node &lt;node_name &gt; -adapter &lt;adapter_name&gt; -state up 」の形式で指定します</block>
  <block id="4d6e26003e754a745cf62eed31431aad" category="cell">'fcp config &lt;adapter_name&gt; up'</block>
  <block id="b479e4a9e97e157251ef3d2064ea4380" category="list-text">[[step11]] ポートをケーブル接続します。</block>
  <block id="8eeb6ccf00d6f27741c5b734b3130459" category="list-text">[[step12]] 次のいずれかの操作を実行します。</block>
  <block id="aebf7b50b70ed2ebf2c575a075bd9438" category="cell">に進みます <block ref="e5d463aaa9b038b1efee70e147ab4739" category="inline-link-macro-rx"></block>。</block>
  <block id="f775037aa1f7a8a52b5159236f7449e7" category="inline-link-macro">手順 23</block>
  <block id="6c6b8c59c90f6496076c738e7ff24c94" category="cell">に戻ります <block ref="4469a51edd4697937e9b433996ec0b8b" category="inline-link-macro-rx"></block>。</block>
  <block id="5b2f0e007cd9ea02702aeb62d60c43e0" category="list-text">[[step13]] 次のコマンドを使用してメンテナンスモードを終了します。</block>
  <block id="26ee4be5cb2380ca98e9521456fd341f" category="list-text">[[step14]] ブートメニューへのノードのブート時に 'boot_ontap menu' を実行しますA800 にアップグレードする場合は、に進みます <block ref="3139ad98428111e167d1cbeb5cf5398c" category="inline-xref-macro-rx"></block>。</block>
  <block id="c80b31cc0c13ab0e11a8150100033a02" category="list-text">[[step15]] ノード 3 で、ブートメニューに移動し、 22/7 を使用して、非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで、 node1 のディスクを node3 に再割り当てするには、次の例のように入力します。</block>
  <block id="f91809c39c7c5ad59f2475c5ee644448" category="admonition">上記のコンソールの出力例では、アドバンストディスクパーティショニング（ ADP ）ディスクを使用するシステムの場合は ONTAP からパートナーノード名の入力を求められます。</block>
  <block id="9c709df0d0930ada3ab147bf9abe8f06" category="inline-xref">手順 17</block>
  <block id="e5d8ce1e4e0f9c50b3cbdf452d60972e" category="inline-xref">手順 22</block>
  <block id="f754dab3d8015ef1d19b1781e9dc0cf7" category="list-text">[[step16]] システムが「 no disks found 」というメッセージでリブートループに入ると、システムが FC または UTA/UTA2 ポートをターゲットモードにリセットしたためにディスクを認識できないことを示します。この問題を解決するには、に進みます <block ref="5f1aad4c994d87ede6a84b14e5fc7bca" category="inline-xref-macro-rx"></block> 終了： <block ref="91e8c1ed01f1f8955e4e66087c66bdf6" category="inline-xref-macro-rx"></block>をクリックするか、セクションに移動します <block ref="e5d463aaa9b038b1efee70e147ab4739" category="inline-link-macro-rx"></block>。</block>
  <block id="a556a158a1621945323c5f6b337e6b8e" category="list-text">[[step17]] autoboot 中に Ctrl+C キーを押して 'loader&gt;` プロンプトでノードを停止します</block>
  <block id="d53423601d74fcaf09ac6d9ed50d827a" category="list-text">[[step18]] LOADER プロンプトで、次のコマンドを使用してメンテナンスモードに切り替えます。</block>
  <block id="24655647ccabfd614d439a15f52407aa" category="paragraph">「 boot_ontap maint 」を使用してください</block>
  <block id="7b0df9ce8db61645cca400e062744575" category="list-text">[[step19]] メンテナンスモードで、次のコマンドを使用して、現在ターゲットモードになっている以前に設定されたイニシエータポートをすべて表示します。</block>
  <block id="0e79006c52695f8d4e54aa6765850c1a" category="paragraph">次のコマンドを使用して、ポートをイニシエータモードに戻します。</block>
  <block id="cf3e9bc0a901473a585931eab06fd36e" category="paragraph">ucadmin modify -m fc -t initiator -f &lt;adapter name&gt; `</block>
  <block id="5a220d755d651cfa7ce691a00cd5b016" category="list-text">[[step20]] 次のコマンドを使用して、ポートがイニシエータモードに変更されたことを確認します。</block>
  <block id="2306d3041b8ccfdd71b1322f647aff4d" category="list-text">[[step2]] 次のコマンドを使用して、メンテナンスモードを終了します。</block>
  <block id="53ed6df5803b59e285153d90b661b3e0" category="list-text">[[step22]] LOADER プロンプトのブート時、次のコマンドを使用します。</block>
  <block id="bf1d9c5801bc3674bc765551ff2f2964" category="paragraph">「 boot_ontap 」</block>
  <block id="eedc84ab2e1ed2d5f77ae259bcc2e53d" category="paragraph">これで、ブート時に以前に割り当てられていたすべてのディスクをノードで検出できるようになり、想定どおりにブートできるようになります。</block>
  <block id="1220547ba4d85f01aafbdca81abf8088" category="list-text">[[step23]] 外付けディスクのあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node1 アグリゲートをルートアグリゲートとして設定し、 node1 のルートアグリゲートからブートするようにします。ルート・アグリゲートを設定するには ' ブート・メニューからオプション 5 を選択して ' 保守モードに切り替えます</block>
  <block id="839d6f1820a7da41933656247fa8b2cf" category="admonition">次の手順を記載されている順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。</block>
  <block id="2d74e383435cfe64554575d0ab7faf2a" category="paragraph">次の手順は、 node3 を node1 のルートアグリゲートからブートするように設定します。</block>
  <block id="393c73596c4eabb410418342bf771f48" category="list-text">次のコマンドを使用してメンテナンスモードに切り替えます。</block>
  <block id="91055fecc1724d5546658b4a8a0780a6" category="list-text">次のコマンドを使用して、 node1 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="d54681223c9aa263c12e4a2a2a99ab44" category="paragraph">「 aggr status -r 」</block>
  <block id="16279b00e4653f8ee5c1083aa907350f" category="list-text">次のコマンドを使用して、 node1 アグリゲートのステータスを確認します。</block>
  <block id="39cff9999d84ec4289e4ab2ff2e81c67" category="paragraph">「 aggr status 」を入力します</block>
  <block id="ed8a1a8656c549f7328b38fc3d966074" category="list-text">必要に応じて、次のコマンドを使用して node1 アグリゲートをオンラインにします。</block>
  <block id="83b7dae21419642dd5e031d6fa6f2690" category="paragraph">'aggr_online root_aggr_from_&lt;node1&gt;</block>
  <block id="e47cdd133a3533872433253113e30886" category="list-text">次のコマンドを使用して、 node3 を元のルートアグリゲートからブートできないようにします。</block>
  <block id="1d9aa029b391cb266140104de06a9144" category="paragraph">aggr offline &lt;root_aggr_on_node3&gt;`</block>
  <block id="f90b092cd196ed5263522b03fd956395" category="list-text">次のコマンドを使用して、 node1 ルートアグリゲートを node3 の新しいルートアグリゲートとして設定します。</block>
  <block id="f447db02ef1a999852a59545c4a25c75" category="paragraph">「 aggr options aggr_from_&lt;node1&gt; root 」のように指定します</block>
  <block id="4b70f91d485aa48c29e98a3271e370b6" category="list-text">次のコマンドを使用して、ノード 3 のルートアグリゲートがオフラインになっていること、およびノード 1 からテイクオーバーされたディスクのルートアグリゲートがオンラインになっていること、およびルートに設定されていることを確認します。</block>
  <block id="3d7f94ab24ae28ffe95b85995cdb0a28" category="admonition">前の手順を実行しないと、原因 node3 を内部ルートアグリゲートからブートするか、原因システムで新しいクラスタ構成が存在すると想定するか、あるいはクラスタ構成を特定するように求められる可能性があります。</block>
  <block id="c06377da744f281f74d745bd6cf53c71" category="paragraph">次の例は、コマンドの出力を示しています。</block>
  <block id="3656662210f47dcbe034b998e90c0643" category="summary">ARL を使用して ONTAP 9.8 を実行しているコントローラのペアをアップグレードできるかどうかを確認します。</block>
  <block id="da289ccf0fe9b7b8a0a8c3f55c76c877" category="doc">ARL を使用したコントローラのアップグレードに関するガイドライン</block>
  <block id="748989a9c7bd82e7d1765996607e182c" category="paragraph">ARL を使用して ONTAP 9.8 を実行しているコントローラのペアをアップグレードできるかどうかは、プラットフォーム、および元のコントローラと交換用コントローラの両方の構成によって異なります。</block>
  <block id="da9431cc35c8bdde2930587bdcf661c2" category="section-title">ARL のアップグレードがサポートされます</block>
  <block id="e071734eb612d30829d1149fb460187d" category="paragraph">ARL 手順 for ONTAP 9.8 を使用してノードのペアをアップグレードする場合は、 ARL が元のコントローラと交換用コントローラで実行可能であることを確認する必要があります。</block>
  <block id="da160308e3b4b4a80bf1b72b5bdbedb8" category="inline-link-macro">Hardware Universe</block>
  <block id="25bdbf3bbe517164bd0a266b84c0cb36" category="paragraph">元のシステムでサポートされるすべての定義済みアグリゲートのサイズとディスク数を確認する必要があります。次に、サポートされるアグリゲートサイズとディスク数を、新しいシステムでサポートされるアグリゲートサイズとディスク数と比較する必要があります。この情報は、で確認できます <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block>。新しいシステムでサポートされるアグリゲートサイズとディスク数は、元のシステムでサポートされるアグリゲートサイズとディスク数以上であることが必要です。</block>
  <block id="0ae6b54ffc6c60ea2536313a56f256d9" category="paragraph">元のコントローラを交換したときに、新しいノードが既存のノードとクラスタの一部になることができるかどうかは、クラスタ混在ルールで検証する必要があります。クラスタ混在ルールの詳細については、を参照してください <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block>。</block>
  <block id="bd84475fd667775729ac63a2b2001dc9" category="admonition">内蔵ドライブをサポートするシステム（ FAS2700 または AFF A250 など）をアップグレードする場合でも内蔵ドライブがないときは、手順の in_using アグリゲートの再配置を使用してコントローラハードウェア _ を手動でアップグレードしてください。</block>
  <block id="5dab68a78b9466ced5074675f91c7438" category="paragraph">ARL を使用したコントローラのアップグレードは、 SnapLock Enterprise ボリュームおよび SnapLock Compliance ボリュームが設定されたシステムでサポートされます。</block>
  <block id="cb0385d0286af5544c83edeb7702b741" category="section-title">2 ノードスイッチレスクラスタ</block>
  <block id="69ceb2d36918ef5eab686101ab353f0d" category="paragraph">2 ノードスイッチレスクラスタのノードをアップグレードする場合は、アップグレードの実行中もスイッチレスクラスタのノードをそのまま使用できます。スイッチクラスタに変換する必要はありません。</block>
  <block id="bea87fe3e38e1c2fba92c7b4ca690a9d" category="section-title">ARL のアップグレードはサポートされていません</block>
  <block id="d061d57f2d82b85a7aa74e13aaec4c96" category="paragraph">次のアップグレードは実行できません。</block>
  <block id="70a3b031f6a4e388e4285d647440ec82" category="list-text">元のコントローラに接続されたディスクシェルフをサポートしない交換用コントローラへの接続</block>
  <block id="666858e38bf5748ab62838fee4216e24" category="paragraph">を参照してください <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block> ディスクサポート情報については、を参照してください。</block>
  <block id="d5457a285ea7fce244bde8387644b062" category="list-text">内蔵ドライブを搭載したエントリレベルのコントローラ。たとえば、 FAS 2500 などです。</block>
  <block id="a2539e65a13fda0a8ce497ac0baa63a7" category="inline-link-macro">『 Controller Hardware Upgrade Express Guide 』を参照してください</block>
  <block id="e8bbf639382ea95fc978d8420f1da4ec" category="paragraph">内蔵ドライブを搭載したエントリレベルのコントローラをアップグレードする場合は、手順の volume_in を移動して、 clustered Data ONTAP を実行するノードのペアをアップグレードするを参照してください <block ref="9cc0d5221a9e998f923428a347033ebc" category="inline-link-macro-rx"></block>。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="section-title">トラブルシューティング</block>
  <block id="3ba9e9ec13cd460d912c14b623889b10" category="paragraph">コントローラのアップグレード中に問題が発生した場合は、を参照してください <block ref="b231fd1117eedf854289d13fffbf56ef" category="inline-link-macro-rx"></block> 詳細および解決策については、手順の末尾にあるセクションを参照してください。</block>
  <block id="aaa66a015fd5899ae88e1fe7fce7257c" category="paragraph">発生した問題に対する解決策が見つからない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="d5dcbeb79cc6a2aa334dc821840400c2" category="summary">アグリゲートの再配置（ ARL ）がアップグレード中に別のポイントで失敗することがあります。</block>
  <block id="b02aac451baf6d7b36d981f898537961" category="doc">アグリゲートの再配置に失敗しまし</block>
  <block id="6a537092418b1517855bd9bd8a6c8418" category="summary">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ブートノード 4 をブートして、 ONTAP をインストールする必要があります。</block>
  <block id="1a02fe8fc6a186319dd3345573fc3717" category="doc">ノード 4 をインストールしてブートします</block>
  <block id="75586863c552442d574a9bbfc3a0d408" category="paragraph">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートして、 ONTAP をインストールする必要があります。次に、このセクションで説明するように、ノード 2 のスペアディスク、ルートボリュームに属するディスク、およびプロセスの前にノード 3 に再配置されなかったルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="5f190baddba85177825d174bc2428bc9" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんどが自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。</block>
  <block id="550ffaa7219faf74146770514db0d8e8" category="inline-link-macro">ネットブートを準備</block>
  <block id="31edc329e96c14e95f770c101fc8cb3b" category="paragraph">node2 に同じバージョンの ONTAP 9 がインストールされていない場合は、 node4 をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに格納されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="61665dbc7133bd75f8603aa8031b8059" category="inline-link-macro-rx"></block>。</block>
  <block id="7a262cb0d3d917313c8ba12f996fe83c" category="list-title">重要</block>
  <block id="89023b09a8e04215547178052eb90222" category="inline-link-macro">ノード 4 の FC ポートを設定します</block>
  <block id="113dd8c6d49d13f5871e1cbe53350eb2" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートを確認して設定してください</block>
  <block id="6f4a225b29c0975663d0e4b9e1f4547f" category="inline-xref">手順 1.</block>
  <block id="2f5ad93b7f0dd7bdcdf63542c05e8ebe" category="inline-xref">手順 21</block>
  <block id="4cffbd3d45c5794a1086c5ea8a6efcf0" category="list-text">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続されている FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、これで完了です <block ref="2404dae7899a613545fd901aa9857111" category="inline-xref-macro-rx"></block> から <block ref="79d8c0c5d1f20fd73b9c5cf6c2f16153" category="inline-xref-macro-rx"></block>をクリックしてから、このセクションの指示に従ってください <block ref="e4a308316f89855579fcbb31b7ca4dfa" category="inline-link-macro-rx"></block> およびへ <block ref="f83114d9adca40bee6dbc7b70e5770d9" category="inline-link-macro-rx"></block>、保守モードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="fa7dc806bd5abc3aa70265946d09bc1c" category="inline-xref-macro-rx"></block>。</block>
  <block id="df5267f8e4bbfa9add1dd732e6b68e41" category="inline-link-macro">ノード 4 で FC または UTA / UTA2 設定を設定します</block>
  <block id="b82fd2e9b5f5045e64a07383691ee296" category="list-text">ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了してから、に進む必要があります <block ref="19e1cb1407ac1a7709bf36e64e7fec5d" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="4e94c1cbac3946720a42a1541bf39548" category="list-text">[ 手順 1] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="82952c70726b36a56f0651368cd2be05" category="paragraph">node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="9ef9fab932162728d06bbfd2862c33d9" category="list-text">ノードモデルの _Installation and Setup Instructions _ の手順に従って、ノード 4 をラックに設置します。</block>
  <block id="179ba8fe173567627d42a1a9fc1e6948" category="list-text">ノード 4 をケーブル接続します。 node2 から node4 に接続を移動します。</block>
  <block id="e5c39acdb0f682a22a7b242d48ac3ce5" category="inline-link-macro">FlexArray 仮想化インストール要件およびリファレンスガイド</block>
  <block id="3804b132271e47a4db7521e977b43625" category="inline-link-macro">ONTAP 9 ハイアベイラビリティ構成ガイド</block>
  <block id="28935e867299c9d584c88c8fc1fb8a70" category="paragraph">『 Installation and Setup Instructions 』またはの手順に従って、次の接続をケーブル接続します <block ref="86f7609c999f49f3dc914db25956e703" category="inline-link-macro-rx"></block> ノード 4 のプラットフォームの場合は、該当するディスクシェルフガイドおよびを参照してください <block ref="fce145d95584367b9c4d78d9aa5ffce3" category="inline-link-macro-rx"></block>：</block>
  <block id="7c37472309a8c54b0891c8e95190096e" category="list-text">コンソール（リモート管理ポート）</block>
  <block id="f0012d7dc9fbefbb11bb69cd6932aef8" category="list-text">クラスタポート</block>
  <block id="b2d2606b76cd5df666c2b6a0f4bfc496" category="list-text">データポート</block>
  <block id="f35c347c4cb65015138a4d291827b1a1" category="list-text">クラスタポートとノード管理ポート</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="list-text">ストレージ</block>
  <block id="e6627a49532995a915815645abe1e3bc" category="list-text">SAN 構成： iSCSI イーサネットおよび FC スイッチポート</block>
  <block id="0046d599de2c63ac6aee024be099994d" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカード / FC-VI カードまたはインターコネクト / FC-VI ケーブルの接続を node2 から node4 に移動する必要はありません。MetroCluster 構成の場合は、 FC-VI ケーブルの接続を node2 から node4 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="ffb09ffc35bea252e4e21d97d6400ddf" category="list-text">ノード 4 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="994bdd0bc026ec99be435de25a9ecc3d" category="admonition">node4 をブートすると、次の警告メッセージが表示される場合があります。</block>
  <block id="d728df788701a4dbee2b7991f0468dad" category="list-text">手順 4 で警告メッセージが表示された場合は、次の操作を実行します。</block>
  <block id="3e1ef1763b3680d2c8fbf0a8ea19db9b" category="list-text">NVRAM バッテリ低下以外の問題を示すコンソールメッセージがないか確認し、必要に応じて対処します。</block>
  <block id="d73910b693432e337843357586f3e39f" category="list-text">バッテリの充電と起動プロセスが完了するまで待ちます。</block>
  <block id="0573ce38d8bd51f54c3a7724754e89f1" category="admonition-title">注意：この遅延は無視しないでください。バッテリの充電に失敗すると、データが失われる可能性があります。</block>
  <block id="75426af04160a0d2e55ed266c798f00e" category="admonition">を参照してください <block ref="61665dbc7133bd75f8603aa8031b8059" category="inline-link-macro-rx"></block>。</block>
  <block id="f47f57e3434d00c4cb0ddb03933b3fc5" category="list-text">次のいずれかを実行してネットブート接続を設定します。</block>
  <block id="d1adb867eac5534b9fe3de6b0b271291" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。アップグレードの実行中にデータ LIF IP を使用しないでください。データ LIF が停止する可能性があります。</block>
  <block id="3a325cd28eedfb6e2a8828a9cc5043a2" category="cell">動的ホスト構成プロトコル（ DHCP ）の状態</block>
  <block id="c1325f6903ebb5ebb2bb519a73ddb1b0" category="cell">作業</block>
  <block id="5bda814c4aedb126839228f1a3d92f09" category="cell">実行中です</block>
  <block id="aee2adde97afad89c105aeb72e6320b3" category="cell">ブート環境プロンプトで次のコマンドを使用して、自動的に接続を設定します。 ifconfig e0M -auto</block>
  <block id="84435c8fed125c1f06699e20bdcee63d" category="cell">実行されていません</block>
  <block id="de9354e54a4c11f4eec6e3f3a44be9a1" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。 ifconfig e0M -addr= &lt;filer_addr&gt; -mask= &lt;netmask&gt; -gw= &lt;gateway&gt; -dns= &lt;dns_addr&gt; domain= &lt;dns_domain&gt; `&lt;filer_addr&gt;`&lt;netmask&gt;` はストレージシステムのネットワークマスクです。「 &lt;gateway&gt;` 」は、ストレージシステムのゲートウェイです。「 &lt;dns_addr&gt; 」は、ネットワーク上のネームサーバの IP アドレスです。このパラメータはオプションです。「 &lt;dns_domain&gt; 」は DNS ドメイン名です。このパラメータはオプションです。* 注 * ：インターフェイスによっては、他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="15fe98426987c07cba715dffbfb96c7e" category="list-text">ノード 4 でネットブートを実行します。</block>
  <block id="0ba2b3e0a887666765eb2d690768c576" category="cell">用途</block>
  <block id="383b9c142d0ac9c95fc6323618a87c9b" category="cell">FAS/AFF8000 シリーズシステム</block>
  <block id="8385f026f91d6fc14fd02b225112bac8" category="cell">netboot\http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/netboot/kernel`</block>
  <block id="edc91455dc5116cbd53031ff17548c91" category="cell">その他すべてのシステム</block>
  <block id="1e3f57d872237ce4621e377ee8ff6896" category="cell">netboot\http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz`</block>
  <block id="8034469a98cb8171e1d88d330266e9b3" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、手順 1 の「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所に配置する必要があります <block ref="61665dbc7133bd75f8603aa8031b8059" category="inline-link-macro-rx"></block>。</block>
  <block id="85bd8aebb41cb27f7bc364e977313958" category="admonition">トランクを中断しないでください。</block>
  <block id="45b788b600b6973bddaa17d7d85de037" category="list-text">起動メニューからオプション（ 7 ） Install new software first （新しいソフトウェアを最初にインストール）を選択します。</block>
  <block id="adcfa58e9fef1d45cc4bd403ac68eb9f" category="paragraph">このメニューオプションを選択すると、新しい ONTAP イメージがブートデバイスにダウンロードおよびインストールされます。</block>
  <block id="734f579e8fa44e795a2d8f03940b3b8e" category="admonition">次のメッセージは無視してください 'This 手順 is not supported for Non-Disruptive Upgrade on an HA pair'コントローラのアップグレードではなく、 ONTAP による環境の無停止アップグレードも記録されています。新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールすると、正しいイメージがインストールされない場合があります。この問題環境 All ONTAP リリース</block>
  <block id="0b22fb8d0feec85055f45c8c4a298766" category="list-text">手順を続行するかどうかを確認するメッセージが表示されたら、「 y 」と入力し、パッケージの入力を求められたら URL を入力します。</block>
  <block id="84ea00dba7c6a1cf0426e58385307e4f" category="paragraph">http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz` にアクセスします</block>
  <block id="7b3f6c26774d36cd594edf297f0f8f57" category="list-text">次の手順を実行してコントローラモジュールをリブートします。</block>
  <block id="7043cc5b7b924f62a8af6f3d2e706c77" category="list-text">次のプロンプトが表示されたら 'n' を入力してバックアップ・リカバリをスキップします</block>
  <block id="330edabea721cfdb93e4a4aed8cd1730" category="list-text">次のプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="504d065328326a8677a260e4447bea63" category="paragraph">コントローラモジュールはリブートしますが、ブートメニューで停止します。これは、ブートデバイスが再フォーマットされたことにより、構成データのリストアが必要なためです。</block>
  <block id="ca95d6295c1b1cab041926d491fa54ba" category="list-text">ブート・メニューからメンテナンス・モード「 5 」を選択し、ブートを続行するように求めるプロンプトが表示されたら「 y 」と入力します。</block>
  <block id="f7165489b9b742b79c1edc66a3adf2a0" category="list-text">次のコマンドを使用して、コントローラとシャーシが HA として構成されていることを確認します。</block>
  <block id="70cfb57c22486ea2d08d331675532dce" category="paragraph">「 ha-config show 」</block>
  <block id="d66825c57ef1d03f12142772b5cb7bae" category="paragraph">次に 'ha-config show コマンドの出力例を示します</block>
  <block id="8d88ee8626e30313013b223ba409abaa" category="admonition">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="55c802ca03b1fc5b58c1d59d28131125" category="list-text">コントローラとシャーシが HA として構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="6c3f17b59ca4781564b9e4a1526324f4" category="paragraph">「 ha-config modify controller 」を参照してください</block>
  <block id="dd89cc637fcb9494346abfa250ac6820" category="paragraph">HA 構成変更シャーシ HA</block>
  <block id="236df8dd892b4bd6bb01e86747337e6f" category="paragraph">MetroCluster 構成の場合は、次のコマンドを使用してコントローラとシャーシを変更します。</block>
  <block id="911c90c39145c3c3c0d524809f4a16c8" category="paragraph">「 ha-config modify controller mcc 」</block>
  <block id="1d3bd99dc4d12eba418aa32c0e69ed77" category="paragraph">「 ha-config modify chassis mcc 」</block>
  <block id="318cb6d625a1adf2c19ba7bed20d4061" category="list-text">次のコマンドを使用してメンテナンスモードを終了します。</block>
  <block id="106cd92eb2d2b994c9a8675214fd438c" category="paragraph">ブート環境のプロンプトで Ctrl+C を押し、 AUTOBOOT を中断します。</block>
  <block id="2903a296e962981622f9fbb34fe3dbde" category="list-text">[[Step15]] ノード 3 で、次のコマンドを使用して、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="0dbad5b96349237116f63f0f389bd7f4" category="paragraph">「食事」</block>
  <block id="68dd867f743672fe385fd727b406983a" category="list-text">node4 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="3e72511c09e554faf49052f79d627689" category="paragraph">「日付」</block>
  <block id="e0dcb67cb9fbe2eca84263866e93758f" category="list-text">必要に応じて、次のコマンドを使用して node4 に日付を設定します。</block>
  <block id="833ce90830a0406f310191c0da1f76da" category="paragraph">'Set date &lt;mm/dd/yyyy&gt;`</block>
  <block id="aa03f64841cdad6f19ac1550e1ad8c29" category="list-text">node4 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="667f3a6a11750e110d0c1442d2aa20e7" category="paragraph">「時間」</block>
  <block id="844393b53f7901c9253dcd2d1a0517b1" category="list-text">必要に応じて、次のコマンドを使用して node4 に時間を設定します。</block>
  <block id="25a249a3cdba620e6eba67639be13589" category="paragraph">時刻を設定します</block>
  <block id="74696d3b09b6d742230a7bf13c661b5f" category="list-text">必要に応じて、次のコマンドを使用して、 node4 にパートナーシステム ID を設定します。</block>
  <block id="50e811b2a9396215b344a15d01fc1fea" category="paragraph">'setenv partner-sysid &lt;node2 _sysid&gt;`</block>
  <block id="e02ed2f754f906507b04045b6d64c6a8" category="list-text">設定を保存します。</block>
  <block id="4efce637d6ec3bc2a69f403fd39b9b41" category="paragraph">'aveenv</block>
  <block id="a0abc7261c0fb200627ac78f93b08090" category="list-text">[Step2]] 新しいノードのブートローダーでは、「 partner-sysid 」パラメータを設定する必要があります。node4 の場合、「 partner-sysid 」は node3 のものでなければなりません。次のコマンドを使用して 'partner-sysid' の node3 を確認します</block>
  <block id="fbe3b6f75f2d8164c601fbd0fdb2d3cd" category="paragraph">printenv partner-sysid</block>
  <block id="a566a7773caad8e1452ad7591dace303" category="cell">システムの状態</block>
  <block id="b0d05d370a8e827d5c1d1e92258a25b2" category="cell">ディスクがあり、バックエンドストレージがない</block>
  <block id="591411226b213d9f7725e9ea7c71a472" category="cell">に進みます <block ref="fa7dc806bd5abc3aa70265946d09bc1c" category="inline-xref-macro-rx"></block>。</block>
  <block id="c9d3e45a02f36166b1f2d250fefe0e40" category="cell">は、 V シリーズシステム、または FlexArray 仮想化ソフトウェアがストレージアレイに接続されたシステムです</block>
  <block id="055b7aa27b43043d10c451ccaeff6974" category="list-text">セクションに移動します <block ref="19e1cb1407ac1a7709bf36e64e7fec5d" category="inline-link-macro-rx"></block> をクリックし、このセクションのサブセクションを完了します。</block>
  <block id="55a6283675d98fefe1a382b2a5aff637" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="fa7dc806bd5abc3aa70265946d09bc1c" category="inline-xref-macro-rx"></block>。</block>
  <block id="340156df6d6753b1e8aa84113b4a83e9" category="paragraph">* 重要 * ： V シリーズまたは FlexArray 仮想化ソフトウェアで ONTAP をブートする前に、オンボード FC ポート、 CNA オンボードポート、 CNA カードを再設定する必要があります。</block>
  <block id="d1443596c33bb4e09a1ed7fb618c57ca" category="list-text">[[Step23]] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="d86d0e7d3d0c0a0df158445c8dbe92fd" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="e4a308316f89855579fcbb31b7ca4dfa" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="626097c557d64952b56d6d6e63d3ad8e" category="list-text">FC イニシエータポートをストレージアレイに新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="c90869b8dd8fd41fd210932364a2caf7" category="paragraph">手順については、ストレージアレイおよびゾーニングに関するドキュメントを参照してください。</block>
  <block id="20285adb42be1ddc0c2df8f7a2de7595" category="list-text">ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループの World Wide Port Name （ WWPN ；ワールドワイドポート名）値を変更する。</block>
  <block id="a2b95adba38da1a033c4cae3447040cc" category="paragraph">新しいコントローラモジュールを設置すると、各オンボード FC ポートに関連付けられている WWPN の値が変更されます。</block>
  <block id="23eacbaf200afc53fbaaaaa3d6705308" category="list-text">スイッチベースのゾーニングを使用している場合は、新しい WWPN 値が反映されるようにゾーニングを調整します。</block>
  <block id="20cba2cce8bf251a0de11e5d6bbe7c02" category="list-text">この構成で NetApp Storage Encryption （ NSE ）を使用している場合、ノード 1 の構成のロード後にブートループが発生しないようにするには、「 bootargen.storageencryption.support 」コマンドを「 true 」に設定し、「 kmip.init.maxwait` 」変数を「 off 」に設定する必要があります。</block>
  <block id="0ab3dc62b58693ac60ff9111f9d60a74" category="paragraph">'etenv bootarg.storageencryption.support true</block>
  <block id="461db791196d5961d2d12d83cd09d8ef" category="paragraph">'etenv kmip.init.maxwait off</block>
  <block id="b727396c4b982dd058d36cf687f34a4f" category="list-text">次のコマンドを使用して、ノードをブートメニューにブートします。</block>
  <block id="fb89a7ef586904dc37e09f10f3f0ec64" category="inline-link-macro">手順 15</block>
  <block id="2b0c71240fabf2d0a0d6aa17087fc5d6" category="paragraph">FC または UTA / UTA2 設定がない場合は、を実行します <block ref="6b152c20af1c8ba3fcf66a2e78a16388" category="inline-link-macro-rx"></block> ノード 4 が node2 のディスクを認識できるようにします。</block>
  <block id="9f6c1c59e595c7b6b493f92b24930c14" category="inline-link-macro">ノード 4 で FC または UTA / ut2 の設定を行います</block>
  <block id="2ca91a400830d0cc0086e96a51715554" category="list-text">MetroCluster 構成の場合、 V シリーズシステムおよび FlexArray 仮想化ソフトウェアがストレージアレイに接続されたシステムノードに接続されているディスクを検出するためには、 node4 にある FC ポートまたは UTA / UTA2 ポートを設定して設定する必要があります。このタスクを完了するには、セクションに進んでください <block ref="68e88a3cd80d57386df7e62e183f5294" category="inline-link-macro-rx"></block>。</block>
  <block id="c9c93a19732545b8a8812f3665050df3" category="summary">アップグレード後は、すぐにストレージ暗号化を設定する必要があります。</block>
  <block id="26678fb639f40f31f518f926dd61b9ab" category="doc">ストレージ暗号化用の外部キー管理サーバの IP アドレスを取得します</block>
  <block id="7acef9ce6b481d82dc187cf0cd0ba769" category="paragraph">アップグレード後は、すぐにストレージ暗号化を設定し、クラスタ全体の認証キーを確立して、以前のノードレベルの認証キーを置き換える必要があります。</block>
  <block id="3f4ec080b2021bda3aa571a5e22a721e" category="list-text">次のコマンドを使用して、キー管理サーバとの通信に必要なクライアントとサーバのセキュアソケットレイヤ（ SSL ）証明書をインストールします。</block>
  <block id="6b3a21077187795e57ca156a1f7425b1" category="paragraph">「セキュリティ証明書のインストール」</block>
  <block id="cbb3eece6687c0e5f34c4dd9eec3d644" category="list-text">各ノードで次のコマンドを使用して、すべてのノードでストレージ暗号化を設定します。</block>
  <block id="36b59c92319c91ef4b062f7a5735609c" category="paragraph">「セキュリティキーマネージャの設定」</block>
  <block id="65de00a8e302559ffc774756d2f45b6f" category="list-text">次のコマンドを使用して、各キー管理サーバの IP アドレスを追加します。</block>
  <block id="4ddacc4fe876ce1520a863683e858a54" category="paragraph">「セキュリティキーマネージャの追加」</block>
  <block id="a0e16315c615f1ffb7ea7917002c5ebe" category="list-text">次のコマンドを使用して、クラスタ内のすべてのノードで同じキー管理サーバが設定され使用可能になっていることを確認します。</block>
  <block id="e5b3e8638e7440dde3a413f172675dd9" category="list-text">次のコマンドを使用して、クラスタ全体の新しい認証キーを作成します。</block>
  <block id="16ad807911a8c9b345c579c4bcb340cb" category="paragraph">「 securitykey-manager create-key 」を選択します</block>
  <block id="cf838fadddca3730f4efc72c1c3c093c" category="list-text">新しい認証キー ID をメモします。</block>
  <block id="ab893dc08471dccfa540322bea4bf69f" category="list-text">次のコマンドを使用して、すべての自己暗号化ドライブのキーを新しい認証キーに変更します。</block>
  <block id="6228599495561d44995cb3ef3f353e9b" category="paragraph">「 storage encryption disk modify -disk * -data-key-id &lt;authentication_key_id&gt;` 」</block>
  <block id="d3632885c406f1fdf833bfa7e1f0af27" category="section-title">KMIP サーバを使用して認証を管理します</block>
  <block id="37edd24368a6d3b3ef46638abcb37233" category="paragraph">ONTAP 9.8 では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="238aec95a63d1a9491fe7f04cb92d176" category="list-text">次のコマンドを使用して、新しいコントローラを追加します。</block>
  <block id="e6f04682f232152502b55694d0528032" category="list-text">次のコマンドを使用して、キー管理ツールを追加します。</block>
  <block id="1565a7df8a43704649d43cf763c37d9a" category="list-text">次のコマンドを使用して、キー管理サーバが設定され、クラスタ内のすべてのノードから使用できることを確認します。</block>
  <block id="ddd3648b4ff881bff470e16ed91f43ec" category="list-text">次のコマンドを使用して、リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="1cdcb35bc0549da482556496121fbed8" category="list-text">次のコマンドを使用して、すべての自己暗号化ディスクのキーを新しい認証キーに変更します。</block>
  <block id="bf0679d0cb7aea4f9f1e7253a96643cf" category="paragraph">'storage encryption disk modify -disk * [-data-key-id nonMSID AK</block>
  <block id="5129605118eb7621624d0ff0a17cf3b3" category="list-text">連邦情報処理標準（ FIPS ）を使用する場合は、次のコマンドを使用して、すべての自己暗号化ディスクのキーを新しい認証キーに変更します。</block>
  <block id="5beb4b8523f6870e231ec55cdf442a39" category="paragraph">「 storage encryption disk * modify -disk * [-fips-key-id nonAK 」」</block>
  <block id="666d41f92db6a2191af16e999d035f4f" category="section-title">オンボードキーマネージャを使用してストレージ暗号化を管理します</block>
  <block id="54279af53279de10320508d0526f332e" category="paragraph">OKM は暗号キーを管理できます。OKM を使用する場合は、アップグレードを開始する前にパスフレーズとバックアップ資料を記録しておく必要があります。</block>
  <block id="259c8a53b900b4102babb5d05e113f67" category="list-text">パスフレーズを安全な場所に保存します。</block>
  <block id="19077cc2690337623f542cbef7fae627" category="list-text">リカバリ用のバックアップを作成します。次のコマンドを実行して出力を保存します。</block>
  <block id="d1599347e2c1e8206cd8017da7de3ee0" category="paragraph">「 key-manager onboard show-backup 」を選択します</block>
  <block id="63ce5117a618b44a9a730ed25c154d96" category="section-title">SnapMrerror 関係の休止（オプション）</block>
  <block id="8e2255ca1830e4b8f59bef03c0eaa4e7" category="paragraph">交換手順を進める前に、すべての SnapMirror 関係が休止状態になっていることを確認する必要があります。休止された SnapMirror 関係は、リブート後およびフェイルオーバー後も休止状態のままです。</block>
  <block id="e7c267219e312e103ff9e2c946e70665" category="list-text">次のコマンドを使用して、デスティネーションクラスタの SnapMirror 関係のステータスを確認します。</block>
  <block id="5bab70a374b8d81dfb1cf1f910800c2a" category="paragraph">「 Snapmirror show 」のように表示されます</block>
  <block id="d61bacc5fb74b7c02dc15d185df875b9" category="admonition">このステータスが「 Transferring 」の場合は、次のコマンドを使用して転送を中止する必要があります。「 snapmirror abort -destination-path vserver &lt;vserver name&gt; 」</block>
  <block id="d5560010a4b579866a98e0b680b5c248" category="paragraph">SnapMirror 関係が Transferring 状態でない場合は、中止は失敗します。</block>
  <block id="ed662f4696868f5d80fe9998763cd98a" category="list-text">次のコマンドを使用して、クラスタ間のすべての関係を休止します。</block>
  <block id="839e7ff3d7f7c6c8b5b42b0480b183b6" category="paragraph">'snapmirror quiesce -destination-path vserver &lt;vserver name&gt; 」を指定します</block>
  <block id="f4b0e9bc470ad2b8ac6c955fe361607e" category="summary">アップグレード前に休止していた SnapMirror 転送を再開し、 SnapMirror 関係を再開できます。</block>
  <block id="140c4ad72e426b76f7e15699ae078635" category="doc">SnapMirror 処理を再開します</block>
  <block id="5f561bedca26d8d072e51e5a351d1918" category="paragraph">アップグレード前に休止していた SnapMirror 転送を再開し、 SnapMirror 関係を再開できます。更新はアップグレードの完了後にスケジュールどおりに実行されます。</block>
  <block id="7fc3f5f5195f699ab95ec48565a40ad4" category="list-text">次のコマンドを使用して、デスティネーションの SnapMirror のステータスを確認します。</block>
  <block id="db7c2a00f8c278c1dcfe48c17962cd43" category="list-text">次のコマンドを使用して、 SnapMirror 関係を再開します。</block>
  <block id="52167f27ac641afda13c59903c8be219" category="paragraph">「 snapmirror resume -destination – vserver &lt;vserver_name&gt;` 」のように指定します</block>
  <block id="14c464f3076760dd0c7480550e4464d7" category="summary">ノード 2 を撤去するには、ノード 2 を適切にシャットダウンし、ラックまたはシャーシから取り外す必要があります。</block>
  <block id="befd434b83717d2b7bd83967d66e9157" category="doc">ノード 2 を撤去</block>
  <block id="2a6561787d019392ed8915740a8cbb85" category="list-text">次のコマンドを使用して処理を再開します。</block>
  <block id="21d67404cbc8811a82f375c6eb59ce82" category="paragraph">ノードは自動的に停止します。</block>
  <block id="deb0c649717df2b352162aaccc90b075" category="paragraph">アップグレードの完了後に、 node2 の運用を停止できます。を参照してください <block ref="8e60bb3917e01e2c0c3fe74628f3291d" category="inline-link-macro-rx"></block>。</block>
  <block id="964b0454175f6a1894f796b6a8fc4f59" category="summary">手順のさまざまな段階で問題が発生する可能性があります。</block>
  <block id="e33c48b52ab7d302b4af41aca3bbe858" category="doc">手順の複数の段階で発生する可能性のある問題</block>
  <block id="84508423fbb2d015c45d8207837aede4" category="section-title">予期しない「 storage failover show 」コマンドの出力が表示されます</block>
  <block id="9fae6006c452841a1b4104d26127eccf" category="paragraph">手順の実行中に、すべてのデータアグリゲートをホストするノードがパニック状態になったり、誤ってリブートされたりした場合は、リブート、パニック状態、電源再投入の前後に「 storage failover show 」コマンドの出力が想定外に表示されることがあります。</block>
  <block id="8a503ef07edf673987e764eff646e0d0" category="paragraph">ステージ 2 、ステージ 3 、ステージ 4 、またはステージ 5 の「 storage failover show 」コマンドの出力結果に予期しないものが表示されることがあります。</block>
  <block id="4e873fccdf7f54c0486cf43e1300ab3f" category="paragraph">次の例は、すべてのデータアグリゲートをホストするノードでリブートやパニックが発生していない場合の「 storage failover show 」コマンドの出力を示しています。</block>
  <block id="b19cffa247e3fb2147fa3eb145c4247f" category="paragraph">次の例は、リブートまたはパニック後の「 storage failover show 」コマンドの出力例を示しています。</block>
  <block id="399a9894ac45311024aba0a4f4cd1197" category="paragraph">ノードが部分的なギブバック状態にあること、およびストレージフェイルオーバーが無効になっていることを示す出力が表示されますが、このメッセージは無視してもかまいません。</block>
  <block id="3794e9e48df4b7a93a3321f2477f7880" category="paragraph">対処は不要です。ノードペアのアップグレード手順に進みます。</block>
  <block id="12e5dea4b29b66ec41d8307d3502847c" category="summary">ステージ 3 では、 node3 をインストールしてブートします。</block>
  <block id="3f765691a1037f4fcf966c679a3f3a4a" category="doc">ステージ 3 ：node3 をインストールしてブートします</block>
  <block id="f6fb20eca8c0d2026e6fe206142772b0" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、ノード 1 のクラスタポートとノード管理ポートがノード 3 でオンラインになったことを確認し、ノード 3 のインストールを確認します。SAN 以外のデータ LIF と、ノード 1 に属するルート以外のアグリゲートは、ノード 2 からノード 3 に移動されます。</block>
  <block id="1619b1d4cec26b9f46f158ed5add4ab0" category="list-text"><block ref="1619b1d4cec26b9f46f158ed5add4ab0" category="inline-link-macro-rx"></block></block>
  <block id="c1d98918f251b16ee7804a1a99dc8cb2" category="list-text"><block ref="c1d98918f251b16ee7804a1a99dc8cb2" category="inline-link-macro-rx"></block></block>
  <block id="e5d463aaa9b038b1efee70e147ab4739" category="list-text"><block ref="e5d463aaa9b038b1efee70e147ab4739" category="inline-link-macro-rx"></block></block>
  <block id="7ce57c4ce051863fc414ccd402a178f5" category="inline-link-macro">ノード 3 でキー管理ツールの設定をリストアします</block>
  <block id="8a8ad9dde196f4a3aa7b69f49a062e95" category="list-text"><block ref="8a8ad9dde196f4a3aa7b69f49a062e95" category="inline-link-macro-rx"></block></block>
  <block id="840820d31f6c078aeb1567ce302bdd05" category="inline-link-macro">ノード 1 で所有されているルート以外のアグリゲートと NAS データ LIF を、ノード 2 からノード 3 に移動します</block>
  <block id="ffc6f037d0c9e8912cf30d6829e534a6" category="list-text"><block ref="ffc6f037d0c9e8912cf30d6829e534a6" category="inline-link-macro-rx"></block></block>
  <block id="b23f00f19a53ab820bfe8b7098e820ce" category="summary">system controller replace コマンドを使用して、 ONTAP 9.8 を実行しているコントローラハードウェアをアップグレードします</block>
  <block id="2bad09e43b905b96c969ce2f2e47553c" category="doc">「 system controller replace 」コマンドを使用して、 ONTAP 9.8 を実行しているコントローラハードウェアをアップグレードします</block>
  <block id="e8869ea54056dd530c02573ded44d739" category="paragraph">このガイドでは、システムを停止することなくコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="a1cb64b8e71e447ebb7fcb878b7b8879" category="paragraph">ONTAP 9.8 を実行しているノードペアで、ルート以外のアグリゲートを元のノードから同じクラスタ内の新しいノードに移行することにより、コントローラハードウェアを無停止でアップグレードできます。アップグレード中は、アップグレード対象のノードでホストされているデータにアクセスできます。</block>
  <block id="60b36970c08352c3c476769f29561cf4" category="paragraph">この手順では、 Aggregate Relocation （ ARL ；アグリゲートの再配置）と呼ばれる方法を使用します。 ARL を使用すると、 HA 構成を活用して、ルート以外のアグリゲートの所有権をノード間で移動できます（ルートが同じクラスタ内のストレージを共有している場合）。</block>
  <block id="73df6067ad433973d674881dda3dc967" category="summary">ステージ 6 で、新しいノードが正しくセットアップされていることを確認します。</block>
  <block id="d48dfd29ad21ccd1c5cfa50ed99cd89e" category="doc">ステージ 6 ：アップグレードを完了します</block>
  <block id="4abe369009e998078072172b842bd207" category="paragraph">ステージ 6 で、新しいノードが正しくセットアップされていることを確認します。新しいノードの 1 つにユニファイドターゲットアダプタがある場合は、ポート設定をすべてリストアする必要があり、場合によってはアダプタの使用方法の変更が必要になることがあります。また、新しいノードで暗号化が有効になっている場合はストレージ暗号化もセットアップする必要があります。</block>
  <block id="b81d64bc331b1e2e60b2cef595c6ddf8" category="inline-link-macro">MetroCluster FC 構成のアップグレードを完了します</block>
  <block id="78337bb469acc9834c0a4f1200f56dd8" category="list-text"><block ref="78337bb469acc9834c0a4f1200f56dd8" category="inline-link-macro-rx"></block></block>
  <block id="bba9ced3eb73a12c00cf91e9e344d3d7" category="list-text"><block ref="bba9ced3eb73a12c00cf91e9e344d3d7" category="inline-link-macro-rx"></block></block>
  <block id="71c3c6e82ac4cdabf6d82d7b484d2163" category="list-text"><block ref="71c3c6e82ac4cdabf6d82d7b484d2163" category="inline-link-macro-rx"></block></block>
  <block id="da7d6f53a5e074768e000aca830b3bfa" category="inline-link-macro">新しいコントローラモジュールで NetApp Volume Encryption をセットアップします</block>
  <block id="6408fc5f6c6699d7daa3b0c94bcdeb91" category="list-text"><block ref="6408fc5f6c6699d7daa3b0c94bcdeb91" category="inline-link-macro-rx"></block></block>
  <block id="8e60bb3917e01e2c0c3fe74628f3291d" category="list-text"><block ref="8e60bb3917e01e2c0c3fe74628f3291d" category="inline-link-macro-rx"></block></block>
  <block id="d98c7080288afd2fa147ed918ba1b385" category="list-text"><block ref="d98c7080288afd2fa147ed918ba1b385" category="inline-link-macro-rx"></block></block>
  <block id="685f08a5b99430f3e9a6b908131fd4c3" category="summary">交換したコントローラまたは新しいコントローラの HA パートナーが NetApp Volume Encryption を使用している場合。</block>
  <block id="0f36176e72d67a1afa95c79c3e1a12de" category="paragraph">交換したコントローラまたは新しいコントローラの HA パートナーが NetApp Volume Encryption （ NVE ）を使用している場合は、新しいコントローラモジュールを NVE 用に設定する必要があります。</block>
  <block id="d38fed7bb4bf7b2cd414582a337f388f" category="list-text">キー管理サーバがまだ使用可能であり、ステータスと認証キー情報が正しいことを確認します。</block>
  <block id="1a59e73da663791d8cc1a4162cc79daa" category="cell">ONTAP バージョン</block>
  <block id="394247ac369fff4729d586172906244e" category="cell">使用するコマンド</block>
  <block id="127cae73d2b4d7758b4c0a0e3f49ba5f" category="cell">ONTAP 9.6 以降</block>
  <block id="97d64be0988671e53d352ae4aa93eaf6" category="cell">「 securitykey manager key query -node node 」を参照してください</block>
  <block id="85b2cc925922ee961d8156414096bb8d" category="cell">ONTAP 9.5 以前</block>
  <block id="afa9cce4f8e9d7e0dc9a3f8278517e40" category="cell">「 securitykey -manager key show 」を参照してください</block>
  <block id="01a72c63e79e1fcc9b3e0cac4fb2bf75" category="list-text">前の手順で確認したキー管理サーバを新しいコントローラのキー管理サーバリストに追加します。</block>
  <block id="b0b1f7cd7ad16c151d90a8783f1752db" category="list-text">リンクされたすべてのキー管理サーバから新しいノードに認証キーをリストアします。</block>
  <block id="08ac1a2fb254b60e9c511fe04b6536d0" category="cell">外部キーマネージャ（ EKM ）</block>
  <block id="ca1ca50323446209228f3f72af231354" category="cell">「 securitykey-manager external restore 」このコマンドには、 OKM のパスフレーズが必要です</block>
  <block id="a9849e92b148965a7bbb6c14d0afbcd0" category="cell">オンボードキーマネージャ（ OKM ）</block>
  <block id="841196916665de2571df2fa230353881" category="paragraph">認証キーを使用できなかったか、外部キー管理サーバにアクセスできなかったためにボリュームがオフラインになっていないかを確認します。次のコマンドを使用して、ボリュームをオンラインに戻します。</block>
  <block id="6d507e4601f1378ea8dbc7446cb265dd" category="paragraph">「 volume online 」と入力します</block>
  <block id="1153d5d087ce8e64810354b376fd67cd" category="summary">ノード 1 を撤去するには、自動処理を再開して、ノード 2 で HA ペアを無効にし、 Lonode1 を適切にシャットダウンします。</block>
  <block id="93d6a78ca650a17d67b6a45ca81b7f3f" category="doc">ノード 1 を撤去</block>
  <block id="15ae34c4770749f2042d550a9e6558a0" category="paragraph">ノード 1 を撤去するには、自動処理を再開して、ノード 2 と HA ペアを無効にし、ノード 1 を適切にシャットダウンします。あとでノード 1 をラックまたはシャーシから取り外す必要があります。</block>
  <block id="bc1742c74df9fcc42dfd04db0540d6b7" category="list-text">次のコマンドを使用して、ノード 1 が停止されたことを確認します。</block>
  <block id="b6cbeac15790ede2ca7c473d0604fdb1" category="paragraph">アップグレードが完了したら、 node1 の運用を停止できます。を参照してください <block ref="8e60bb3917e01e2c0c3fe74628f3291d" category="inline-link-macro-rx"></block>。</block>
  <block id="2d5a70198b86012f50adf28d146a05be" category="summary">ステージ 4 で、ルート以外のすべてのアグリゲートが node2 から node3 に再配置されます。</block>
  <block id="7bc7e56fe8ddd27289de0794179c5451" category="doc">ステージ 4 ：ノード 2 の移動と撤去</block>
  <block id="d4d422ac28594b1bddb2c593ae821f17" category="paragraph">ステージ 4 では、ルート以外のすべてのアグリゲートが node2 から node3 に再配置され、 node2 で所有されている SAN 以外のデータ LIF が node3 に移動されます。ノード 2 の必要な情報を記録してから、 node2 を撤去する必要があります。</block>
  <block id="3957e03cfda2dcf05cfe239a9b6b2245" category="list-text"><block ref="3957e03cfda2dcf05cfe239a9b6b2245" category="inline-link-macro-rx"></block></block>
  <block id="835a71ffd6f4a3964989583b0e2633f4" category="list-text"><block ref="835a71ffd6f4a3964989583b0e2633f4" category="inline-link-macro-rx"></block></block>
  <block id="22ea33bc6c6dca2de7665008209005ee" category="summary">このガイドでは、 HA ペアのストレージコントローラを新しいコントローラにアップグレードする方法について説明します。</block>
  <block id="2e4e187dce2e8970e167f157b1040ef2" category="doc">アグリゲートの再配置ガイドを使用するかどうかを決定します</block>
  <block id="afced07d58498bf37f5ac5e4787fe0e9" category="paragraph">このマニュアルでは、 HA ペアのストレージコントローラを新しいコントローラにアップグレードし、既存のデータとディスクはすべて維持する方法について説明します。これは複雑な手順であり、経験豊富な管理者のみが使用する必要があります。</block>
  <block id="8a5876fc5aff9d4ba29b01b35732f36b" category="paragraph">このマニュアルは、次のような状況で使用することを想定しています。</block>
  <block id="0254a2717286f49eac846482fe37bc8a" category="list-text">ONTAP 9.8 を実行している。</block>
  <block id="5d07aebfbe36ac522f2e416e3efcad81" category="list-text">新しいコントローラを新しい HA ペアとしてクラスタに追加し、ボリューム移動を使用してデータを移行する必要はありません。</block>
  <block id="0218d5b45eb7cfed65f2674d40f1e479" category="list-text">ONTAP の管理経験があり、 diagnostic 権限モードで作業する場合のリスクが十分にあります。</block>
  <block id="3c7466988f8b9287732208137373b802" category="list-text">MetroCluster 構成をアップグレードする場合は、 4 ノード以上の FC 構成であり、すべてのノードで ONTAP 9.8 を実行しています。</block>
  <block id="a72462c08c5bf7cce76e9fa18cdf8700" category="inline-link-macro">『 MetroCluster アップグレード、移行、および拡張ガイド』</block>
  <block id="5c9573e0d7a34c3cfb26db9f9354a9ce" category="paragraph">MetroCluster IP 設定のアップグレードについては、を参照してください <block ref="bb7ef8f95645255fd63bda26e8cf0d00" category="inline-link-macro-rx"></block>。</block>
  <block id="f25ecc85a7d953e00ca5f626eeed2a96" category="admonition">この手順では、 NetApp Storage Encryption （ NSE ）および NetApp Volume Encryption （ NVE ）を使用できます。</block>
  <block id="2b378caa5145e2c7adf8d8e9a477ac03" category="paragraph">次の表に、コントローラのアップグレードでサポートされるモデルマトリックスを示します。</block>
  <block id="f37bbd4cc778d5861294352bef9c1c7f" category="cell">古いコントローラ</block>
  <block id="cfdade9e474e805958704ec0836f18ac" category="cell">交換用コントローラ</block>
  <block id="8c06a9afcd20cc8675f878a8e07e16ab" category="cell">FAS8020 、 FAS8040 、 FAS8060 、 FAS8080</block>
  <block id="c86ccf041137a3e913e3e89ed65dbff5" category="cell">FAS8200 、 FAS8300 、 FAS8700 、 FAS9000</block>
  <block id="96e7c50f9e1d1f9b66d5ab1dbe5d047a" category="cell">AFF8020 、 AFF8040 、 AFF8060 、 AFF8080</block>
  <block id="34a20edcb9328546b8a5f23795f35b92" category="cell">AFF A300 、 AFF A400 、 AFF A700 、 AFF A800 *</block>
  <block id="c37feb3492d999b3f216448183986be2" category="cell">FAS8200</block>
  <block id="33f30bea35826525ddc350a931a3e60e" category="cell">FAS8700 、 FAS9000 、 FAS8300</block>
  <block id="c78a423f3132ee2ac4f4f4c1fa5d4859" category="cell">AFF A300</block>
  <block id="7010740b589a6730f87d5fcedfcd0abc" category="cell">AFF A700 、 AFF A800 * 、 AFF A400</block>
  <block id="4852954d031f57b417813707e91dd5bd" category="admonition">コントローラのアップグレードモデルの組み合わせが上記の表にない場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="0083da0657f029386d4dd54adc7e7631" category="inline-link-macro">ノード 3 の UTA / UTA2 ポートを確認して設定し、手順 23 を実行します</block>
  <block id="f67f192cd82e6b4f9a7acfc19a4286b5" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートの確認と設定、手順 23</block>
  <block id="93491adf85ea282cfe0c7125f025c90f" category="list-text">A800 システムに必要な追加手順については、セクションの「 A800 」を参照している手順を参照してください <block ref="4a6bfe6a62ba240adccf3a2b33efa3db" category="inline-link-macro-rx"></block>または <block ref="bbd1ffa0c143d6a108996dc2f07d0723" category="inline-link-macro-rx"></block>。</block>
  <block id="774a065cb3548cc61fb0ec3bc1494fbe" category="inline-link-macro">ONTAP 9 ドキュメンテーション・センター</block>
  <block id="d88b3ffa1ad4af16e4f56f5653cfa84a" category="paragraph">コントローラハードウェアを別の方法でアップグレードして、ボリュームの移動を希望する場合は、を使用してください <block ref="9cc0d5221a9e998f923428a347033ebc" category="inline-link-macro-rx"></block> 代わりに、を参照してください <block ref="292163533a147210a514360785f12599" category="inline-link-macro-rx"></block> ONTAP 9 製品ドキュメントにアクセスするには、以下の手順を実行</block>
  <block id="b180c3a6690338cc8cfaeb6b4c37008c" category="summary">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。</block>
  <block id="80f347da1888e440d3f1755d2e9ca001" category="paragraph">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。そのあと、このセクションで説明するように、ノード 1 のスペアディスク、ルートボリュームに属するディスク、およびその前の手順でノード 2 に再配置されなかったルート以外のアグリゲートを再割り当てする必要があります。</block>
  <block id="cabcb5ad3a57db50c098cbabe3b6d8c5" category="paragraph">再配置処理はこのフェーズの開始時に一時停止されます。このプロセスはほとんど自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。また、 SAN LIF がノード 3 に正常に移動したことを確認する必要があります。</block>
  <block id="d3569e9c14f07d7684dcc0e8f1b714ab" category="paragraph">ノード 1 にインストールされている ONTAP 9 のバージョンが異なる場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="61665dbc7133bd75f8603aa8031b8059" category="inline-link-macro-rx"></block>。</block>
  <block id="5f56b9ee14bb00ec66c65389cd2e7591" category="list-text">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、を完了する必要があります <block ref="a21f3b2098abe7275d608a6a9c864195" category="inline-xref-macro-rx"></block> から <block ref="e3c5e60b4239704a2e70f19799b9b009" category="inline-xref-macro-rx"></block>をクリックしてから、このセクションの指示に従います <block ref="8c986217270abd0ebe0e339e0d9d531b" category="inline-link-macro-rx"></block> および <block ref="e8f8d63644de968e3b5945cef425ba46" category="inline-link-macro-rx"></block> 必要に応じて、メンテナンスモードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="3139ad98428111e167d1cbeb5cf5398c" category="inline-xref-macro-rx"></block>。</block>
  <block id="98ed937d1a233f5842b98541cb239ee5" category="list-text">ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了して、にアクセスする必要があります <block ref="8c986217270abd0ebe0e339e0d9d531b" category="inline-link-macro-rx"></block> および <block ref="e8f8d63644de968e3b5945cef425ba46" category="inline-link-macro-rx"></block> セクションで、クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="e694ffdf4927373e2452f8ed83ed44a4" category="list-text">[[step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="2c6541bc32b15b7aae8bab68f0ca5874" category="paragraph">ノード 1 とノード 2 が別々のシャーシに搭載されている場合は、ノード 3 をノード 1 と同じラックの場所に設置できます。ただし、 node1 が node2 の同じシャーシに設置されている場合は、 node3 を専用のラックスペースに配置する必要があります。その場合は、 node1 の場所に近い場所に配置することを推奨します。</block>
  <block id="29c2b1d89a2c1fb12556096fc5b5d9f9" category="list-text">[[step2] ノードモデルの * 設置およびセットアップ手順 * に従って、ラックにノード 3 をインストールします。</block>
  <block id="e642674ff2b68ba9c6309b786d87c4f9" category="admonition">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 と node3 をシャーシに設置します。そうしないと、ノードをブートしたときにノードがデュアルシャーシ構成と同じように動作し、 node4 をブートした場合、ノード間のインターコネクトは稼働しません。</block>
  <block id="5528857f98fded77afccd9d97a9a0711" category="list-text">[[step3]] ケーブルノード 3 を接続し、ノード 1 からノード 3 に接続を移動します。</block>
  <block id="4c4ac907348b91d2c9ac0330e07430a2" category="paragraph">『セットアップガイド』またはを使用して、次の配線を行います <block ref="86f7609c999f49f3dc914db25956e703" category="inline-link-macro-rx"></block> node3 プラットフォームについて、該当するディスクシェルフガイド、およびを参照してください <block ref="fce145d95584367b9c4d78d9aa5ffce3" category="inline-link-macro-rx"></block>：</block>
  <block id="a237c9d74ab3870e45b318a1071c10f4" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカードまたはクラスタインターコネクトケーブルの接続を node1 から node3 に移動する必要はない場合があります。MetroCluster 構成の場合、 FC-VI ケーブルの接続を node1 から node3 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="398c19d15dc5160b9d5d197fabfe0bca" category="list-text">[[step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="db32660dfabf573a3553146b10c4b358" category="paragraph">両方のノードを同じシャーシに搭載したシステムにアップグレードする場合は、 node4 もリブートします。ただし、 node4 のブートはあとで破棄することができます。</block>
  <block id="93bd68c37b47b8665f3fe8bb9add087f" category="admonition">node3 をブートすると、次の警告メッセージが表示される場合があります。</block>
  <block id="7882a4b556b6996eaf604413a9e602d9" category="inline-xref">手順 4</block>
  <block id="327f074dcd0116fe45e96ad17501349a" category="list-text">[[step5] 」という警告メッセージがに表示される場合 <block ref="a4882b71f5935aea43154f35b1a6d350" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="340b2cb6f890104de63ad67a09f43086" category="admonition">* 遅延をオーバーライドしないでください * 。 * バッテリーの充電に失敗すると、データが失われるおそれがあります * 。を参照してください <block ref="61665dbc7133bd75f8603aa8031b8059" category="inline-link-macro-rx"></block>。</block>
  <block id="d583a56b378186283bc180e8dfcdad82" category="list-text">[[step6] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="c05c7a2303ef34ab95234ebadd79fc8f" category="cell">ブート環境プロンプトで次のコマンドを使用して、自動的に接続を設定します。 ifconfig e0M -auto</block>
  <block id="96e59e91cef900d59b3ce93f663391f3" category="cell">ブート環境プロンプトで次のコマンドを使用して、接続を手動で設定します。 ifconfig e0M -addr= &lt;filer_addr&gt; -mask= &lt;netmask&gt; -gw= &lt;gateway&gt; -dns= &lt;dns_addr&gt; domain= &lt;dns_domain&gt; `&lt;filer_addr&gt;`&lt;netmask&gt;` はストレージシステムのネットワークマスクです。「 &lt;gateway&gt;` 」は、ストレージシステムのゲートウェイです。「 &lt;dns_addr&gt; 」は、ネットワーク上のネームサーバの IP アドレスです。このパラメータはオプションです。「 &lt;dns_domain&gt; 」は、 Domain Name Service （ DNS ；ドメインネームサービス）ドメイン名です。このパラメータはオプションです。* 注 * ：インターフェイスによっては、他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="48060f068bd1fae855e05859f04c5e3f" category="list-text">[[step7] node3 でネットブートを実行します。</block>
  <block id="f806530cf3b45af78df526f1094bd3e0" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所を指します <block ref="61665dbc7133bd75f8603aa8031b8059" category="inline-link-macro-rx"></block>。</block>
  <block id="00a7cfe4f4da76897b759c2fe0aa87e4" category="list-text">[[step8]] ブートメニューからオプション [(7) 新しいソフトウェアを最初にインストールする ] を選択します</block>
  <block id="f0546cfa67e11944c3c115c55c0d74c6" category="list-text">[[step9]] 手順を続行するかどうかを確認するメッセージが表示された場合は、「 y 」と入力し、パッケージのプロンプトが表示されたら URL を入力します。</block>
  <block id="b420e8eb0083114b740da33989940785" category="list-text">[[step10] コントローラモジュールをリブートするには、次の手順を実行します。</block>
  <block id="dab98833427c3d8aa8eeb5d6db41328b" category="paragraph">バックアップ設定を今すぐ復元しますか ? {y|n}`</block>
  <block id="78531eca4abf30d4c07d610d913a17b4" category="list-text">次のプロンプトが表示されたら 'y' と入力して再起動します</block>
  <block id="3cab3f136b2c476f859a364c003079c3" category="paragraph">' 新しくインストールしたソフトウェアの使用を開始するには ' ノードを再起動する必要があります今すぐリブートしますか？{y|n}`</block>
  <block id="665b6d787a8576ee10e9c9cee3583341" category="list-text">[[step11]] ブートメニューからメンテナンスモード「 5 」を選択し、起動を続行するように求めるプロンプトが表示されたら「 y 」と入力します。</block>
  <block id="822492abb31be3af3c5ef9e03f837fef" category="list-text">[[step12]] 次のコマンドを使用して、コントローラとシャーシが HA として設定されていることを確認します。</block>
  <block id="51c448ec2d072d0227e5d83964636a54" category="list-text">[[step13]] コントローラとシャーシが HA として設定されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="901d6f263055480c317d4fb73367242e" category="list-text">[[step14]] 次のコマンドを使用して、メンテナンスモードを終了します。</block>
  <block id="40b70e432cec417877bce1160c94e7d1" category="list-text">[[step15]] node2 で、次のコマンドを使用してシステムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="f68146a357d007c5719e57f0df2f6cea" category="list-text">[step16]] on node3 で、ブート環境のプロンプトで次のコマンドを使用して日付を確認します。</block>
  <block id="514d59f6bfe33257f09b3284bc0e0e88" category="list-text">[[step17]] 必要に応じて、次のコマンドを使用して、 node3 の日付を設定します。</block>
  <block id="a35c7561d833fab42eb0820cd7256987" category="list-text">[step18]] on node3 で、ブート環境のプロンプトで次のコマンドを使用して時間を確認します。</block>
  <block id="baf657561f00e2317ed875c046ecf04f" category="list-text">[[step19]] 必要に応じて、次のコマンドを使用して、 node3 の時間を設定します。</block>
  <block id="7f5317fe7f1086a3ecd999e737898e88" category="list-text">[[step20]] 必要に応じて、次のコマンドを使用して、 node3 にパートナーシステム ID を設定します。</block>
  <block id="9b0061842e9b4b978c7b1f439fbd5125" category="paragraph">'setenv partner-sysid &lt;node2 _sysid&gt;`</block>
  <block id="9a665749d52d15cc00e5dbd8de070139" category="list-text">[step2]] 新しいノードのブートローダーで 'partner-sysid' パラメータを設定する必要がありますnode3 の場合、「 partner-sysid 」は node2 のものである必要があります。次のコマンドを使用して 'partner-sysid' の node3 を確認します</block>
  <block id="b7b77c4a8d173f38e98b19b6fa156359" category="paragraph">printenv partner-sysid</block>
  <block id="62ac7cf3796c3e4bbe3285d1976b1c2c" category="list-text">[[step22]] 次のいずれかの操作を実行します。</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">説明</block>
  <block id="dabc7422e73e40e627546bedcc5b454c" category="cell">に進みます <block ref="3139ad98428111e167d1cbeb5cf5398c" category="inline-xref-macro-rx"></block></block>
  <block id="74c497c4741babe01069b2689c6f6d96" category="inline-link-macro">ノード 3 で FC または UTA / UTA2 設定を設定します</block>
  <block id="e86f621febc99ddab0195f5f05568e08" category="list-text">セクションに移動します <block ref="cb8a8fa5f7925ca8b3746fff5285473e" category="inline-link-macro-rx"></block> をクリックし、このセクションのサブセクションを完了します。</block>
  <block id="1ec1507884e522d42b22966f04309116" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="3139ad98428111e167d1cbeb5cf5398c" category="inline-xref-macro-rx"></block>。</block>
  <block id="e5b2b8d4f2c36968154eb99e73011604" category="list-text">[[step23]] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="72797da0a6dd02827100892ec56ff0f7" category="inline-link-macro">ノード 3 で FC ポートを設定しています</block>
  <block id="76fef0258c09a87fd4b88a18f7fc6207" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="f70f149eedc7d02fc590b5893f57e9ad" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="c72fdddc98e37cd5e62f25b9974065fc" category="list-text">[[step24]] ストレージアレイに FC イニシエータポートを新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="3ba1b014c973048d41b40e37b1cfeb69" category="list-text">[[step25]] ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループで、 World Wide Port Name （ WWPN ）値を変更します。</block>
  <block id="be6df649a349785ed8ec2a552e7c8903" category="list-text">[[step26]] スイッチベースのゾーニングを使用する構成の場合は、ゾーニングを調整して新しい WWPN 値を反映します。</block>
  <block id="76e2b1ef0b0a726203126fcf7ef71a45" category="list-text">[[step27]] NetApp Storage Encryption （ NSE ）がこの構成で使用されている場合、「 setenvarg.storageencryption.support 」コマンドは「 true 」に設定する必要があります。「 kmip.init.maxwait` 」変数は、 node1 構成のロード後にブートループが発生しないように「 off 」に設定する必要があります。</block>
  <block id="2f9758bb2cf060c406de214568f0d242" category="list-text">[[step28]] 次のコマンドを使用して、ブートメニューからノードをブートします。</block>
  <block id="ad5fe31629462430777c30250624a4fc" category="inline-link-macro">ノード 3 の手順 15 で UTA / UTA2 ポートを確認して設定します</block>
  <block id="1b2f442cbaf0caadd58b415472b4a803" category="paragraph">FC または UTA / UTA2 設定がない場合は、を実行します <block ref="a79d79d8bed5cbfea64fddf94ad4ee68" category="inline-link-macro-rx"></block> ノード 3 がノード 1 のディスクを認識できるようにします。</block>
  <block id="6b67f345cce4e3d0174c82f41977064c" category="list-text">[step29] FlexArray 仮想化ソフトウェアがストレージアレイに接続されている MetroCluster 構成、 V シリーズシステム、およびシステムについて、ノードに接続されているディスクを検出するために、ノード 3 の FC ポートまたは UTA / UTA2 ポートを設定する必要があります。このタスクを完了するには、セクションに進んでください <block ref="c1d98918f251b16ee7804a1a99dc8cb2" category="inline-link-macro-rx"></block>。</block>
  <block id="46b044633ef6f16ddbc579c9f0bbaa7c" category="summary">これはテストの概要です</block>
  <block id="5889ed673e50bf5bb2f31df8c0d66478" category="summary">Fabric MetroCluster 構成でアップグレードを開始する前に、</block>
  <block id="e7323a54c9f53a295a2c4d707c7b3fce" category="doc">MetroCluster 構成の健全性を確認</block>
  <block id="57b41b4e6b26c5d81b64f649f73c20f8" category="paragraph">Fabric MetroCluster 構成でアップグレードを開始する前に、 MetroCluster 構成の健全性をチェックして、正常に動作することを確認する必要があります。</block>
  <block id="45b074dad328c980b5542326d8a35285" category="list-text">次のコマンドを使用して、 MetroCluster コンポーネントが正常であることを確認します。</block>
  <block id="b39709ac0ef947bdc090084f89c2ad94" category="paragraph">「 MetroCluster check run 」のようになります</block>
  <block id="f005234d35c44406394bfc86ede22866" category="paragraph">この処理はバックグラウンドで実行されます。</block>
  <block id="2a5fbc402ff4a1c026c937ca08441422" category="list-text">MetroCluster チェックの実行オペレーションが完了したら ' 次のコマンドを使用して結果を表示します</block>
  <block id="e3ccf677e56366a417a172944cdd9599" category="paragraph">MetroCluster チェックショー</block>
  <block id="070a4bbedae89743ad2f6646a3f23205" category="paragraph">約 5 分後に、次の結果が表示されます。</block>
  <block id="f64554c8f67e219a4c294d4f9e13de5c" category="list-text">次のコマンドを使用して、実行中の MetroCluster チェック処理のステータスを確認します。</block>
  <block id="fbd55aa6c7d3ee9ec90836dfa01b62d2" category="paragraph">MetroCluster オペレーション履歴 show -job-id 38`</block>
  <block id="2f5dc5231215e1becf893a212ca2f4ef" category="list-text">次のコマンドを使用して、ヘルスアラートがないことを確認します。</block>
  <block id="838f9a3aa0c54c620c1dab5cccc98ca5" category="paragraph">「 system health alert show 」というメッセージが表示されます</block>
  <block id="8c0489611df3c9267665a7d99d204fa2" category="summary">LIF の移行後、ステージ 2 、ステージ 3 、またはステージ 5 で移行後にオンラインにならない場合があります。</block>
  <block id="06d473a91334306e0ea337d0cf403b02" category="doc">LIF の移行が失敗しました</block>
  <block id="8fc5e587b615f796c0e6e519e500f09c" category="list-text">ポートの MTU サイズがソースノードと同じであることを確認します。</block>
  <block id="f1dc53f85f175f3393f82fdfda459a06" category="paragraph">たとえば、ソースノードのクラスタポートの MTU サイズが 9000 の場合、デスティネーションノードは 9000 にする必要があります。</block>
  <block id="0be497933ebed90434432b1367f6ac50" category="list-text">ポートの物理的な状態が「所有」である場合は、ネットワークケーブルの物理的な接続を確認します。</block>
  <block id="eb04decd1d026d2a659ebfb3bc27a9e2" category="summary">ノード 3 のインストールの確認</block>
  <block id="853a38843b4d12d75ba15c53177a9637" category="paragraph">node1 の物理ポートが、 node3 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node3 は、アップグレード後にクラスタ内の他のノードおよびネットワークと通信できるようになります。</block>
  <block id="bc407a0ada7e83021d05ff7bcc09d6d5" category="paragraph">から新しいノードのポートに関する情報を取得します <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block>。このセクションの後半の情報を使用します。</block>
  <block id="3e1a89708cfe8d08896ed24a0d0be5e8" category="paragraph">物理ポートのレイアウトは、ノードのモデルによって異なる場合があります。新しいノードがブートすると、 ONTAP は、自動的にクォーラムに参加するためにクラスタ LIF をホストするポートを判別しようとします。</block>
  <block id="e81669be921c5bd20d872e337c5b204d" category="paragraph">node1 の物理ポートが node3 の物理ポートに直接マッピングされていない場合は、次のセクションを参照してください <block ref="871101a3a410248482eefafa62332b63" category="inline-xref-macro-rx"></block> ネットワーク接続を修復するために使用する必要があります。</block>
  <block id="3e0da2be1046cdf5d552f8adaa98c3ae" category="paragraph">node3 のインストールとブートが完了したら、正しくインストールされていることを確認する必要があります。node3 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="60d0d1447a22e8eb1a7dd321b2eec56f" category="paragraph">手順のこの時点で、 node3 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="dfcf569eaa927a8ae2862b1d6237c4d4" category="list-text">次のコマンドを使用して、ノード 3 がクォーラムに参加していることを確認します。</block>
  <block id="0f452669c01e49cb27b82dac8c6f9656" category="paragraph">cluster show -node node3 -fields health`</block>
  <block id="a5c25ebe0ba44233d498c66cb77e22f2" category="paragraph">「 health 」フィールドの出力は「 true 」でなければなりません。</block>
  <block id="c94abf3de6c49d4ca1f1b4188576f36e" category="list-text">次のコマンドを使用して、 node3 が node2 と同じクラスタに含まれていること、および node3 が正常であることを確認します。</block>
  <block id="b3f3a0e3e16f407c072321de6936bb87" category="list-text">次のコマンドを使用して、 advanced 権限モードに切り替えます。</block>
  <block id="248f892426f89c07bc5999439096f3e0" category="paragraph">「高度」</block>
  <block id="a7482c3d64af222d43f7c45fbbe19e5f" category="list-text">次のコマンドを使用して、コントローラの交換処理のステータスを確認し、ノード 1 を停止する前と同じ状態で新しいコントローラの取り付けやケーブルの移動の物理タスクを実行できることを確認します。</block>
  <block id="8005ab9a73c38cc367636a0ec9e8fa35" category="paragraph">「 system controller replace show 」と表示されます</block>
  <block id="218d1d2c084970e58ed8b40b9940967e" category="list-text">MetroCluster システムを使用している場合は、交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成が正常な状態である必要があります。を参照してください <block ref="e3d28e9e05862b41999f2936501ebd43" category="inline-link-macro-rx"></block>。</block>
  <block id="cc3fae395501f043309fdf0319483db7" category="paragraph">手順 6 に進む前に、 MetroCluster ノード node3 でクラスタ間 LIF を再設定し、クラスタピアリングを調べて MetroCluster ノード間の通信をリストアすることを確認します。</block>
  <block id="d0b15ca69d5b7ac66ee88fbd3523a0ce" category="paragraph">次のコマンドを使用して、 MetroCluster ノードのステータスを確認します。</block>
  <block id="ecada3140a47012aab89f14c63ba9190" category="paragraph">MetroCluster node show</block>
  <block id="158df1168b205cd4f462c584fe94051a" category="list-text">次のコマンドを使用して、コントローラの交換処理を再開します。</block>
  <block id="2a2c4f4e7fd268d1d4c0dda8807d69e2" category="list-text">コントローラの交換は一時停止し、次のメッセージが表示されます。</block>
  <block id="df707e7f3bf510f8eda6e81fa41cf3ce" category="admonition">このガイドでは、 VLAN 、 ifgrp 、およびブロードキャストドメインの作成に関するセクションの名前が、 node3 のネットワーク設定の名前が _Restore に変更されています。</block>
  <block id="6f399bf4f62f96a02d91e295630626e7" category="list-text">コントローラの交換を一時停止状態にした状態で次のセクションに進んで、ノードのネットワーク設定をリストアします。</block>
  <block id="4ab15a5901ac29ba8b22502370d01f1b" category="section-title">ノード 3 でネットワーク設定をリストア</block>
  <block id="50aa547709666157235d709c3c40d254" category="paragraph">node3 がクォーラムにあり、 node2 と通信できることを確認したら、 node1 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node3 にあることを確認します。また、 node3 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="31170ccbfb4f57181759032218d5fe88" category="inline-link-macro">ONTAP 9 ネットワーク管理ガイド</block>
  <block id="6d010a137f21b95223102a401a47ed0d" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="4acfce26e4c9287fa50f5c5a9d818db4" category="inline-link-macro-rx"></block>。</block>
  <block id="feba0b87d85f33bf07f3f8b61a6c650a" category="list-text">[[step1] 次のコマンドを使用して、アップグレードした node1 上のすべての物理ポート（ node3 と呼ばれます）を一覧表示します。</block>
  <block id="8e80c0200aab07655785cb1bec3cc1b7" category="paragraph">network port show -node node3</block>
  <block id="7d18d6d6569ac51a685a80b4877c4f98" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、インターフェイスグループメンバーポート、 VLAN ベースポート、または LIF をホストするスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="698ba9c7ea609460c6a8e38a3d7ce47c" category="list-text">[step2] 次のコマンドを使用して、クラスタのブロードキャストドメインを一覧表示します。</block>
  <block id="3723e98cfe679a4d7a6a396b19de8982" category="paragraph">「 broadcast-domain show 」</block>
  <block id="fa323e7b23a87d19368644754f3f3d11" category="list-text">[[step3]] 次のコマンドを使用して、 node3 のすべてのポートの到達可能性をリストします。</block>
  <block id="5e805181dd219e5299df90fe82dbae5d" category="paragraph">「 network port reachability show 」のように表示されます</block>
  <block id="a4780c06a89c299119583f29f32ac093" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="e940af53f7d36aaa1ead918494c5c508" category="paragraph">上記の例では、 node1 _ node3 はコントローラの交換後にブートしたばかりです。一部のポートは想定されるブロードキャストドメインに到達できないため、修復が必要です。</block>
  <block id="d8c7ef2c85a7a25537cac9242cffa1bd" category="paragraph">'network port reachability repair-node &lt;node_name &gt; -port &lt;port_name&gt; ’</block>
  <block id="5b3590915b0de4e44a7e6eecff6a5a24" category="paragraph">次のような出力が表示されます。</block>
  <block id="926bbd76240f31054ef4744babd679da" category="paragraph">上記の警告メッセージは、到達可能性ステータスのポートで、現在配置されているブロードキャストドメインの到達可能性ステータスとは異なる可能性がある場合に表示されます。ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="9119170c03a257bc65a7eeaac3022986" category="paragraph">次のコマンドを使用して、すべての物理ポートが想定どおりに到達できることを確認します。</block>
  <block id="763c4b6560b672163a09cf2e67ba8d89" category="paragraph">到達可能性の修復が実行されると、 ONTAP は正しいブロードキャストドメインにポートを配置しようとします。ただし、ポートの到達可能性を判別できず、既存のどのブロードキャストドメインにも属していない場合、 ONTAP はこれらのポート用に新しいブロードキャストドメインを作成します。</block>
  <block id="475bdd7eeca873ac007d2e8d1ed1d0d7" category="list-text">[[step5] インターフェイスグループの設定が新しいコントローラの物理ポートレイアウトと一致しない場合は、次の手順に従って変更します。</block>
  <block id="a0c9e092b3640057dbbb2fad95c8d7be" category="list-text">最初に、インターフェイスグループのメンバーポートにする物理ポートを、それぞれのブロードキャストドメインメンバーシップから削除する必要があります。これを行うには、次のコマンドを使用します。</block>
  <block id="a7f60658094ae5cd0040096989b61fd4" category="paragraph">「 network port broadcast-domain remove-ports -broadcast-domain &lt;broadcast-domain_name&gt; -ports &lt;node_name ： port_name&gt; 」という形式で指定します</block>
  <block id="994e94a4c4f782b78cbc1338d420e089" category="list-text">次のコマンドを使用して、インターフェイスグループにメンバーポートを追加します。</block>
  <block id="a53c80be8dbadd4ecfb18eacac1d405c" category="paragraph">「 network port ifgrp add -port &lt;node_name &gt; -ifgrp &lt;ifgrp&gt; -port &lt;port_name&gt; 」の形式で指定します</block>
  <block id="0abff6a62b49a7204a8ea4607845ec05" category="list-text">インターフェイスグループは、最初のメンバーポートが追加されてから約 1 分後にブロードキャストドメインに自動的に追加されます。</block>
  <block id="024d7648058890605a7a03bd32714b91" category="list-text">次のコマンドを使用して、インターフェイスグループが適切なブロードキャストドメインに追加されたことを確認します。</block>
  <block id="d8f93cb99c84b71cefbdf673772842c8" category="paragraph">「 network port reachability show -node &lt;node_name &gt; -port &lt;ifgrp&gt; 」の形式で指定します</block>
  <block id="78c17820b3f1666fe682806666adfaa4" category="paragraph">インターフェイスグループの到達可能性ステータスが「 OK 」でない場合は、次のコマンドを使用して適切なブロードキャストドメインに割り当てます。</block>
  <block id="39f16ed05d559ba39f10f8313fdbdbf7" category="paragraph">「 network port broadcast-domain add-ports -broadcast-domain &lt;broadcast_domain_name&gt; -ports &lt;node:port&gt;` 」の形式で指定します</block>
  <block id="cb5bf72c08bc8139f3d3b440a9e7819b" category="list-text">[step6] 適切な物理ポートを 'Cluster' ブロードキャストドメインに割り当てるには ' 次の手順に従います</block>
  <block id="4fa02207949b327defb07a75015b6ba5" category="list-text">次のコマンドを使用して ' クラスタブロードキャストドメインに到達可能なポートを判別します</block>
  <block id="a2904a68bb127cf5751716be508a8cd4" category="paragraph">「 network port reachability show-reachable-broadcast-domain Cluster ： Cluster 」</block>
  <block id="4a60959ffcc7b5a5c96fd844367e2fcf" category="list-text">次のコマンドを使用して ' クラスタブロードキャストドメインに到達可能なポートを修復します到達可能性ステータスが OK でない場合 ' そのポートを修復します</block>
  <block id="9c0ec98274edaf49b54f8a682182e736" category="paragraph">'network port reachability repair-node &lt;node_name &gt; -port &lt;port_name&gt; ’</block>
  <block id="1a385242d9fb60423161c8ec41af6b34" category="list-text">[[step7] 次のいずれかのコマンドを使用して、残りの物理ポートを正しいブロードキャストドメインに移動します。</block>
  <block id="fc794a16843cc25cbaf14628270ab5d2" category="paragraph">「 network port broadcast-domain remove-port 」のようになります</block>
  <block id="db5edb9657d0577afb5f42b19b5b760f" category="paragraph">「 network port broadcast-domain add-port 」と入力します</block>
  <block id="ce885b3d303810e3d85ace1f89c4a065" category="paragraph">到達不能または予期しないポートが存在しないことを確認します。次のコマンドを使用し、出力を調べて、すべての物理ポートの到達可能性ステータスを確認し、ステータスが「 OK 」であることを確認します。</block>
  <block id="add7de11dea94372ab92280144dd2eae" category="paragraph">「 network port reachability show-detail` 」と表示されます</block>
  <block id="652d99b8bb896eacc70cc28d4cea6df9" category="list-text">[[step8] 次の手順を使用して、取り外された可能性のある VLAN を復元します。</block>
  <block id="f24690e54f316db66c2926980f2199ff" category="list-text">次のコマンドを使用して、削除された VLAN を表示します。</block>
  <block id="25b072f1ccd78f519330142d52dcdabc" category="paragraph">「 displaced-vlans show 」を参照してください</block>
  <block id="551f04031696758c1c256f1c90e57b39" category="paragraph">次のような出力が表示されます。</block>
  <block id="4ce70b1cc6016ee742451edb1c226478" category="list-text">次のコマンドを使用して、以前のベースポートから取り外された VLAN をリストアします。</block>
  <block id="525a1c0d24b5d4c8e9116b07730aee42" category="paragraph">「 dispaced-vlans restore 」を参照してください</block>
  <block id="e08a0549a69b4bf0d4b807833ac0b586" category="paragraph">次に、インターフェイスグループ a0a から削除された VLAN を同じインターフェイスグループにリストアする例を示します。</block>
  <block id="f222081117a7c9410603cf0e49475859" category="paragraph">次に、ポート e0e 上の取り外された VLAN を E0h にリストアする例を示します。</block>
  <block id="2a31dfadfe9a33da55e9d278be8596a4" category="paragraph">VLAN の復元が成功すると、指定された宛先ポートに、取り外された VLAN が作成されます。デスティネーションポートがインターフェイスグループのメンバーである場合、またはデスティネーションポートがダウンしている場合、 VLAN のリストアは失敗します。</block>
  <block id="aad2ee0340b449143fc7eaa87d78ba8b" category="paragraph">新しくリストアした VLAN が適切なブロードキャストドメインに配置されるまで約 1 分待ちます。</block>
  <block id="0d659399d58c646652e9fc4a4b40b32f" category="list-text">必要に応じて、「 dispaced-vlans show 」出力に含まれていないが、他の物理ポートに設定する必要がある VLAN ポート用に、新しい VLAN ポートを作成します。</block>
  <block id="15d3f7289459cadee8fa890171f70a33" category="list-text">[[step9] すべてのポート修復が完了したら、次のコマンドを使用して空のブロードキャストドメインを削除します。</block>
  <block id="8cb8d05546274856c8c2cb56b7cd62ac" category="paragraph">'broadcast-domain delete -broadcast-domain &lt;broadcast_domain_name&gt;`</block>
  <block id="033259d4680e9721b6e56691dfc778fe" category="list-text">[[step10] ] 次のコマンドを使用して、ポートの到達可能性を確認します。</block>
  <block id="63fe88791a357ac0ce2d8525afc99e01" category="list-text">次のコマンドを使用して、すべてのポートがブロードキャストドメインに配置されたことを確認します。</block>
  <block id="47cd03a2fa721b9f4f83dca38829afea" category="paragraph">「 network port show 」のように表示されます</block>
  <block id="27f8deebdeb6d0eda41bc875bbb038cc" category="list-text">次のコマンドを使用して、ブロードキャストドメイン内のすべてのポートに正しい Maximum Transmission Unit （ MTU ；最大伝送ユニット）が設定されていることを確認します。</block>
  <block id="3ef90a77774be1f83d79d3a57d347bee" category="paragraph">「 network port broadcast-domain show 」</block>
  <block id="bf3f92b1cc4c69581f2185ebf4603ed4" category="list-text">次の手順に従って、リストアが必要な SVM および LIF のホームポートがある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="19de6d359bf95e7f554e0aef8496ed6c" category="list-text">次のコマンドを使用して、削除された LIF を表示します。</block>
  <block id="b24b42eec37d4f62111bc66268ece07c" category="paragraph">「 dispaced-interface show 」</block>
  <block id="0d5b2e314d8c2b27c73937fb2c6772d6" category="list-text">次のコマンドを使用して、 LIF のホームノードとホームポートをリストアします。</block>
  <block id="942a2e20bfd5086873f5ad24de65d688" category="paragraph">「配置されたインターフェイス restore -home-node &lt;node_name &gt; -vserver &lt;vserver_name&gt; -lif -name &lt;lif_name&gt;` 」のようになりました</block>
  <block id="4288666924e9210fcb305970ab5bb16c" category="list-text">次のコマンドを使用して、すべての LIF にホームポートがあり、管理上の理由で稼働していることを確認します。</block>
  <block id="d5a3621c2468f29ad4fa0ab73f4bd80a" category="paragraph">network interface show -fields home-port 、 status-admin</block>
  <block id="53bf10d232214698fea58c12013ebb0b" category="summary">ステージ 1 では、アップグレードのためのノードを準備し、一連の事前確認を実行する必要があります。</block>
  <block id="81605039a97ca73a232818034b412a87" category="doc">ステージ 1 ：アップグレードを準備</block>
  <block id="6c0e9c6d05c6f91d2edf95d8ad8f212d" category="paragraph">ステージ 1 では、アップグレードのためのノードを準備し、一連の事前確認を実行する必要があります。ストレージ暗号化のためにディスクのキー変更が必要になる場合があります。また、新しいコントローラをネットブートする準備を行う必要があります。</block>
  <block id="94f2dfd916315926f685ba65e48c6e25" category="list-text"><block ref="94f2dfd916315926f685ba65e48c6e25" category="inline-link-macro-rx"></block></block>
  <block id="a458f1a1bdbd6378f6a49101c110f3e2" category="list-text"><block ref="a458f1a1bdbd6378f6a49101c110f3e2" category="inline-link-macro-rx"></block></block>
  <block id="29b9e15ece46f3444e3509682e2aee9f" category="summary">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。</block>
  <block id="e2ad41f74e04c371eb256f2ff6f29e96" category="paragraph">ノード 3 とノード 4 を手順の後半で物理的にラックに設置したあと、ネットブートが必要になることがあります。「 netboot 」という用語は、リモート・サーバに保存されている ONTAP イメージからブートすることを意味します。ネットブートの準備を行うときは、システムがアクセスできる Web サーバに、 ONTAP 9 ブート・イメージのコピーを配置する必要があります。</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="list-title">作業を開始する前に</block>
  <block id="1d32dacc20fe1feb077659fd0bebdc03" category="list-text">システムから HTTP サーバにアクセスできることを確認します。</block>
  <block id="0373910e51252c7b97dcbea9f4942604" category="inline-link-macro">mysupport.netapp.com</block>
  <block id="d18d3fdc9de81c7f47b85e4268cc47b0" category="list-text">使用するプラットフォームに必要なシステムファイルと、適切なバージョンの ONTAP を the NetApp Support Site at からダウンロードする必要があります <block ref="e6e7a1a3b0c0c8a4d26c43c6ec1e93a1" category="inline-link-macro-rx"></block>。</block>
  <block id="48ab14af4b0090253431ed38e4cc2440" category="paragraph">元のコントローラと同じバージョンの ONTAP 9 がインストールされていない場合は、新しいコントローラをネットブートする必要があります。新しいコントローラをそれぞれ取り付けたら、 Web サーバに保存されている ONTAP 9 イメージからシステムをブートします。その後、以降のシステムブートで使用するブートメディアデバイスに正しいファイルをダウンロードできます。</block>
  <block id="103ec41a89beb368e3357fad5f451a92" category="list-text">ネットアップサポートサイトのソフトウェアダウンロードセクションから適切な ONTAP ソフトウェアをダウンロードし、「 &lt;ONTAP_version&gt;_image.tgz 」ファイルを Web にアクセスできるディレクトリに保存します。</block>
  <block id="5b1b8c3f072422a936e63f0d977e41e0" category="list-text">Web にアクセスできるディレクトリに移動し、必要なファイルが利用可能であることを確認します。</block>
  <block id="9136934e518dd35933bb2332f534ab8d" category="cell">次のコマンドを使用して、「 &lt;ONTAP_version&gt;_image.tgz 」ファイルの内容をターゲットディレクトリに展開します。 `tar-zxvf &lt;ONTAP_version&gt;_image.tgz `* Note: Windows で内容を展開する場合は、 7-Zip または WinRAR を使用してネットブートイメージを抽出します。ディレクトリの一覧には、カーネル・ファイル「 netboot/ kernel 」を含むネットブート・フォルダが含まれている必要があります</block>
  <block id="9162c7c3302da709d20d7af79c5dd94a" category="cell">ディレクトリの一覧に次のファイルが含まれている必要があります。 `&lt;ONTAP_version&gt;_image.tgz *Note*: 「 &lt;ONTAP_version&gt;_image.tgz 」ファイルの内容を抽出する必要はありません。</block>
  <block id="843ab277685630f82095416c5b9ae5a1" category="inline-link-macro">ステージ 3</block>
  <block id="3510cbb504803f6d51a38904df9cd393" category="paragraph">のディレクトリの情報を使用します <block ref="a4ac929e8d9516e71dbee962220fb3eb" category="inline-link-macro-rx"></block>。</block>
  <block id="1ccbd6f617ebfa1f7b6d1b6f16222909" category="summary">ノード 1 の移転および撤去</block>
  <block id="bbbe961bb71cae13cea3f5b878f4dbb9" category="doc">ステージ 2 ：移行してノード 1 を撤去</block>
  <block id="a87bccd109d187061a4e62dfad783508" category="paragraph">ステージ 2 で、ノード 1 のアグリゲートと LIF をノード 2 に再配置し、ノード 1 の情報を記録してから、ノード 1 を廃棄します。このプロセスはほとんど自動化されており、処理は一時停止してステータスを確認できます。この処理は手動で再開する必要があります。</block>
  <block id="7de24b16e7313de118da7559fecd8fd4" category="inline-link-macro">ノード 1 が所有するルート以外のアグリゲートと NAS データ LIF をノード 2 に再配置します</block>
  <block id="26d8a835bd371c5fa1c7d39b4f3d99fd" category="list-text"><block ref="26d8a835bd371c5fa1c7d39b4f3d99fd" category="inline-link-macro-rx"></block></block>
  <block id="ffe4503bdcec876d56d2c3e2cf5fcecb" category="list-text"><block ref="ffe4503bdcec876d56d2c3e2cf5fcecb" category="inline-link-macro-rx"></block></block>
  <block id="61665dbc7133bd75f8603aa8031b8059" category="list-text"><block ref="61665dbc7133bd75f8603aa8031b8059" category="inline-link-macro-rx"></block></block>
  <block id="a1bf01274d938e19b1e43eb57fc3c557" category="summary">MetroCluster 構成のスイッチオーバー、修復、スイッチバックの処理を検証する必要があります。</block>
  <block id="9759ad3dfabdb9631ec5fba47d71c313" category="doc">スイッチオーバー、修復、スイッチバックを検証</block>
  <block id="1025c690847593de32961ac3c15bacbd" category="inline-link-macro">『 MetroCluster 管理およびディザスタリカバリガイド』</block>
  <block id="a908b4effccc807f524f5774b19d7125" category="paragraph">に記載されているネゴシエートスイッチオーバー、修復、スイッチバックの手順を使用します <block ref="26c4438b8d1b96b75d0e5192c822b491" category="inline-link-macro-rx"></block>。</block>
  <block id="8bd97ccee6af0cbb00432913fef95f69" category="summary">をクリックしてノードペアをアップグレードします。</block>
  <block id="15577d2c813239ab53fdc6f35d8a1dc5" category="doc">ノードペアをアップグレードします</block>
  <block id="5634325c9c7a1ed8bb239cc0f0ecea96" category="paragraph">ノードペアをアップグレードするには、元のノードを準備し、元のノードと新しいノードの両方で一連の手順を実行する必要があります。その後、元のノードの運用を停止できます。</block>
  <block id="405ab80b96586360ea83735c37305935" category="summary">ノード 4 のインストールを確認します</block>
  <block id="26f21c512ab4d5d4b123c5b8a953bb85" category="paragraph">node2 の物理ポートが node4 の物理ポートに正しくマッピングされていることを確認する必要があります。これにより、 node4 はアップグレード後にクラスタ内の他のノードおよびネットワークと通信できるようになります。</block>
  <block id="085f23a7aa2a9d87a6bfa26f727889e5" category="paragraph">新しいノードのポートに関する情報を取得します <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block>。このセクションの後半の情報を使用します。</block>
  <block id="98ba93dd4de23479aa574bba16f17db7" category="paragraph">node2 の物理ポートが node4 の物理ポートに直接マッピングされない場合は、次のセクションに続きます <block ref="364d871b05cd34ae9893fc6fc54b8984" category="inline-xref-macro-rx"></block> ネットワーク接続を修復するために使用する必要があります。</block>
  <block id="e39c239523fa2335eed92e50ae0e2208" category="paragraph">ノード 4 のインストールとブートが完了したら、ノード 4 が正しくインストールされていることを確認する必要があります。ノード 4 がクォーラムに参加するのを待ってから、再配置処理を再開する必要があります。</block>
  <block id="ed944478e87ce6285850bdd8efb0399a" category="paragraph">手順のこの時点で、ノード 4 がクォーラムに参加する間、処理が一時停止します。</block>
  <block id="ce902fee688db8f3044977579e83f0c8" category="list-text">次のコマンドを使用して、ノード 4 がクォーラムに参加していることを確認します。</block>
  <block id="4395613c979349d83b9f7a1fd64ad821" category="paragraph">cluster show -node node4 -fields health`</block>
  <block id="b2286139ad110c7f5f191c5e83f862da" category="list-text">次のコマンドを使用して、 node4 が node3 と同じクラスタに含まれていること、および node4 が正常であることを確認します。</block>
  <block id="354ac7a660cb2593b5e01489c9eed2f2" category="list-text">コントローラ交換処理のステータスを確認し、次のコマンドを使用して、 node2 を停止する前の状態で一時停止状態になっていること、および新しいコントローラの取り付けやケーブルの移動の物理タスクを実行するために停止していたことを確認します。</block>
  <block id="aa6d61d6e9f0e398c1d9b8fee35a64dd" category="list-text">MetroCluster システムを使用している場合は、交換したコントローラが MetroCluster 構成に対して正しく設定されていることを確認します。 MetroCluster 構成が正常な状態である必要があります。を参照してください <block ref="e3d28e9e05862b41999f2936501ebd43" category="inline-link-macro-rx"></block>。</block>
  <block id="8de494438fd804fafa8f3da92ae9d6e7" category="admonition">このガイドでは、 VLAN 、 ifgrp 、およびブロードキャストドメインのセクションの再作成について、名前が「 _node4 にあるネットワーク設定の復元」に変更されています。</block>
  <block id="ad642c9296b70fbec2ff690ecca7088a" category="section-title">ノード 4 のネットワーク設定をリストアします</block>
  <block id="51c7cb1cccc939f5c24359054f6e087c" category="paragraph">node4 がクォーラムにあり、 node3 と通信できることを確認したら、 node2 の VLAN 、インターフェイスグループ、およびブロードキャストドメインが node4 にあることを確認します。また、ノード 4 のすべてのネットワークポートが正しいブロードキャストドメインに設定されていることを確認します。</block>
  <block id="c676f2fa5f1e0884bfd01f75061fabbb" category="list-text">次のコマンドを使用して、アップグレードされた node2 （ node4 ）にある物理ポートをすべて表示します。</block>
  <block id="932f91b355fe820e44bf7015a07fe9d1" category="paragraph">「 network port show -node node4 」</block>
  <block id="7201bec4fa4ce45284b39257c7ebc9bd" category="paragraph">ノードのすべての物理ネットワークポート、 VLAN ポート、およびインターフェイスグループポートが表示されます。この出力から、 ONTAP によって「 Cluster 」ブロードキャストドメインに移動された物理ポートを確認できます。この出力を使用して、インターフェイスグループメンバーポート、 VLAN ベースポート、または LIF をホストするスタンドアロンの物理ポートとして使用するポートを決定できます。</block>
  <block id="536b4705f2e8d08ffb5b1417a4988ec8" category="list-text">次のコマンドを使用して、クラスタ上のブロードキャストドメインを表示します。</block>
  <block id="a5016f5a3ad10eb1e5566540c7930e63" category="list-text">次のコマンドを使用して、 node4 にあるすべてのポートの到達可能性をリストします。</block>
  <block id="b60798a4e8624ef10969a61bd2f1a5a7" category="paragraph">コマンドの出力例を次に示します。</block>
  <block id="84bdf9c97b15a3e6ea78416bdc99e1ee" category="paragraph">上記の例では、 node2 _node4 がコントローラの交換後にブートされたとします。到達可能性のない複数のポートがあり、到達可能性スキャンを保留しています。</block>
  <block id="b784d8e9f422428eac76c9239f75fe91" category="paragraph">次のような出力が表示されます。</block>
  <block id="6da5520b869a50ed547a761fe1f0e10e" category="paragraph">上記の警告メッセージは、到達可能性ステータスのポートで、現在配置されているブロードキャストドメインの到達可能性ステータスとは異なる可能性がある場合に表示されます。</block>
  <block id="2b17ef3c860c2adf63f0265d9181acce" category="paragraph">ポートと回答 'y' または 'n' の接続を適宜確認します</block>
  <block id="6c2174965c1dafdd591752b78b10faa9" category="list-text">インターフェイスグループの設定が新しいコントローラの物理ポートレイアウトと一致しない場合は、次の手順に従って設定を変更します。</block>
  <block id="d8f20787d5ec4fcacf599bd56be2bbd1" category="paragraph">「 network port broadcast-domain remove-ports -broadcast-domain &lt;broadcast_domain_name&gt; -ports &lt;node_name ： port_name&gt; 」の形式で指定します</block>
  <block id="a1f794c27a81b33245cd8b0a81b4c628" category="list-text">次の手順に従って ' 適切な物理ポートを Cluster ブロードキャスト・ドメインに割り当てます</block>
  <block id="094336d39f674644064e82381591f883" category="list-text">次のいずれかのコマンドを使用して、残りの物理ポートを正しいブロードキャストドメインに移動します。</block>
  <block id="67d13fe1d5e641d73d6e558118a0902a" category="list-text">次の手順を実行して、取り外された可能性のある VLAN を復元します。</block>
  <block id="224ff4c0450f0016f9e5890884002971" category="list-text">次のコマンドを使用して、ポートのすべての修復が完了したら、空のブロードキャストドメインを削除します。</block>
  <block id="0f6198f1bf2d581387fad8176727e48b" category="list-text">次のコマンドを使用して、ポートに到達できるかどうかを確認します。</block>
  <block id="ad308d03b899659ad0f618c14cf12629" category="list-text">次のコマンドを使用して、リストアが必要な SVM および LIF のホームポートがある場合は、それらを指定して LIF のホームポートをリストアします。</block>
  <block id="25eba25d46b248412419096677ce3a09" category="list-text">次のコマンドを使用して、 LIF のホームポートをリストアします。</block>
  <block id="6fc1b223ae855f26a231da135db5ea87" category="paragraph">「配置されたインターフェイス restore -home-node &lt;node_name &gt; -vserver &lt;vserver_name&gt; -lif -name &lt;lif_name&gt;` 」のようになりました</block>
  <block id="8e698b8d4467a7a6309118b19a3aa168" category="summary">新しいハードウェアを設置するための特別なツールが必要です。また、アップグレードプロセス中に他のドキュメントを参照する必要があります。</block>
  <block id="0e635d7a91ccc4eccdfb03e35353c899" category="doc">必要な工具とドキュメント</block>
  <block id="c3b94594408530dae098d84cd0931315" category="paragraph">新しいハードウェアを設置するための特別なツールが必要です。また、アップグレードプロセス中に他のドキュメントを参照する必要があります。また、コントローラのアップグレードを完了するために必要な情報を記録しておく必要があります。情報を記録するためのワークシートが用意されています。</block>
  <block id="c4cd2838020f3d163cb45dd2d33de6b2" category="paragraph">アップグレードを実行するには、次の工具が必要です。</block>
  <block id="5fa8c0eb2f030795135e9d47077f239b" category="list-text">アースストラップ</block>
  <block id="230a7914d7f06a8506c29d7466cb12cd" category="list-text">No.2 プラスドライバ</block>
  <block id="0945359809dad1fbf3dea1c95a0da951" category="cell">文書化</block>
  <block id="c1df1da7a1ce305a3b60af9d5733ac1d" category="cell">内容</block>
  <block id="2a4f547c7b73b569b09f737f8754554f" category="cell">ONTAP 9 ソフトウェアセットアップガイド</block>
  <block id="143871839967c0ce4b560d72275287ae" category="cell">ネットアップシステムをセットアップおよび設定する方法について説明します</block>
  <block id="dec0306e681fc720cf31bc4851ebcee4" category="cell">ONTAP 9 システムアドミニストレーションリファレンス</block>
  <block id="14c80bdc64113a62decfea4eb6a57bbb" category="cell">ONTAP システムの管理方法、 CLI インターフェイスの使用方法、クラスタへのアクセス方法、ノードの管理方法などについて説明します</block>
  <block id="ed46df6261cf79571fbaa1f60a71ddce" category="cell">ONTAP 9 アップグレードおよびリバート / ダウングレードガイド</block>
  <block id="1b2e223d7b0a739342036d545c07be1e" category="cell">ONTAP のダウンロードとアップグレードの手順については、を参照してください</block>
  <block id="604e3b21e20d2e3d15be71c643b54e69" category="cell">ONTAP 9 ディスクとアグリゲートパワーガイド</block>
  <block id="a9c61f520e8d4a33f7c7b87e132bfa13" category="cell">ONTAP 物理ストレージの管理方法、アグリゲートを作成、拡張、および管理する方法、 Flash Pool アグリゲートを使用する方法、ディスクを管理する方法、および RAID ポリシーを管理する方法について説明します</block>
  <block id="0fa0071d4364b9114c15a5d2758f2577" category="cell">ONTAP 9 論理ストレージ管理ガイド</block>
  <block id="61adb7de4bb785562416ba83d166f89a" category="cell">ボリューム、 FlexClone ボリューム、ファイルと LUN 、 FlexCache ボリュームを使用して論理ストレージリソースを効率的に管理する方法について説明します。 重複排除、圧縮、 qtree 、およびクォータ</block>
  <block id="63495c9c7dc0832fca9ef908516e005a" category="cell">新しいノードのモデルの『 Installation and Setup Instructions 』</block>
  <block id="5cde7c50f5816b4da70e9eb41a64819b" category="cell">新しいシステムの設置とケーブル接続の手順について説明します</block>
  <block id="d4665f62b50f9e25c35dea93f10c5a47" category="cell">FlexArray 仮想化インストール要件およびリファレンスガイド</block>
  <block id="59f35d9f3417e72e504a84b5becddcb7" category="cell">FlexArray 仮想化システムのケーブル接続手順とその他の情報について説明します</block>
  <block id="e9a08380ac48c4cddc2ba1523ab880f9" category="cell"><block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block></block>
  <block id="98ab25573042ac7a8765a9c4007041eb" category="cell">トラブルシューティングに役立つシステム LED およびシステムメッセージについて説明します</block>
  <block id="9dbb52531fd950a6ee1e03d590e98929" category="cell">該当するディスクシェルフガイドを参照してください</block>
  <block id="cb232dd594ad24e9077e9aaa120c03ac" category="cell">ディスクシェルフの設置と監視、およびディスクシェルフデバイスの交換の手順について説明します</block>
  <block id="1988e9c8cf124cb346a67d52ea613567" category="cell">『 ONTAP 9 SAN アドミニストレーションガイド』</block>
  <block id="4b2900e27b905268746bc80b2df554b3" category="cell">SAN 環境向けに iSCSI プロトコルや FC プロトコルを設定および管理する方法について説明しています</block>
  <block id="9660abd0b48a5f9635c3e498547f1163" category="cell">ONTAP 9 SAN 構成ガイド</block>
  <block id="af4b5a97e667c3c209e365c7dfa3e34c" category="cell">FC と iSCSI のトポロジと配線方式について説明します</block>
  <block id="434d0878e4f3a503cf18decd97a3f528" category="paragraph">ネットアップサポートサイトには、ネットワークインターフェイスカード（ NIC ）やシステムで使用するその他のハードウェアに関するドキュメントも含まれています。また、にも含まれています <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block>をクリックします。このコマンドは、新しいシステムでサポートされるハードウェアに関する情報を提供します。を参照してください <block ref="292163533a147210a514360785f12599" category="inline-link-macro-rx"></block> ONTAP 9 製品ドキュメントにアクセスするには、以下の手順を実行</block>
  <block id="6af295d62e510174dc8b78d80e744fc4" category="summary">ONTAP 9.8 を実行しているノードのペアでは、コントローラハードウェアを無停止でアップグレードできます。</block>
  <block id="8fb4b518ce39a0704f920c9d4f2f7b77" category="doc">アグリゲートの再配置を使用してコントローラハードウェアをアップグレードする</block>
  <block id="88eee2e6d438ad3ba132fc6cdf4398d7" category="paragraph">手順の実行中に、交換用コントローラハードウェアを使用して元のコントローラハードウェアをアップグレードし、ルート以外のアグリゲートの所有権を切り替えます。アグリゲートをノードからノードに複数回移行して、アップグレード手順全体を通じて少なくとも 1 つのノードがアグリゲートからデータを提供していることを確認します。また、処理を続行する前に、データ論理インターフェイス（ LIF ）を移行し、新しいコントローラのネットワークポートをインターフェイスグループに割り当てます。</block>
  <block id="c8ad6059ef689a9cdbc7a1076619df45" category="admonition">このドキュメントでは、元のノードの名前は _node1_AND _node2 _ で、新しいノードの名前は _node3 _ と _node4 _ です。説明されている手順では、 node1 は node3 に置き換えられ、 node2 は node4 に置き換えられます。_node1_、 _node2 、 _node3 _ 、および _node4 _ という用語は、元のノードと新しいノードを区別するためだけに使用されます。手順を使用するときは、元のノードと新しいノードの実際の名前を置き換える必要があります。ただし実際には、ノードの名前は変更されません。 node3 には node1 という名前が付けられ、 node4 にはコントローラハードウェアのアップグレード後に node2 という名前が付けられます。本ドキュメントでは、 FlexArray 仮想化ソフトウェアを搭載した「 _systems 」という用語は、これらの新しいプラットフォームに属するシステムを意味します。V シリーズシステムという用語は、ストレージアレイに接続可能な独立したハードウェアシステムを指します</block>
  <block id="32de3fe80cc3182e6d21291decbf392a" category="inline-link-macro">ARL アップグレードの概要</block>
  <block id="2b5992c45bfbea896711ff945a4844aa" category="list-text">この手順は複雑で、 ONTAP の高度な管理スキルがあることを前提としています。また、を読んで理解する必要があります <block ref="4839d43871fe29773e86f5cefcab0e32" category="inline-link-macro-rx"></block> および <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block> アップグレード開始前のセクション。</block>
  <block id="bc0c3600d83329affdb0d85df2aeac56" category="list-text">この手順は、交換用コントローラハードウェアが新しく購入され、使用されていないことを前提としています。使用済みのコントローラを「 wipeconfig 」コマンドで準備するために必要な手順は、この手順には含まれていません。交換用コントローラハードウェアを以前に使用していた場合は、テクニカルサポートに問い合わせる必要があります。特に、コントローラが Data ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="3f95c69711726ab20c6ad2092e62e13d" category="list-text">この手順を使用して、ノードが 3 つ以上あるクラスタでコントローラハードウェアをアップグレードできます。ただし、クラスタ内のハイアベイラビリティ（ HA ）ペアごとに手順を個別に実行する必要があります。</block>
  <block id="fe7e90598f62277a0b85475b75c57d4b" category="list-text">この FlexArray システム、 V シリーズシステム、 AFF システム、および手順環境 FAS 仮想化ソフトウェアを搭載したシステムです。必要なライセンスがインストールされていれば、 ONTAP 9.5 以降にリリースされた FAS システムをストレージアレイに接続できます。既存の V シリーズシステムは、 ONTAP 9.5 でサポートされます。V シリーズのサポートマトリックスを参照してください <block ref="e9a08380ac48c4cddc2ba1523ab880f9" category="inline-link-macro-rx"></block> ストレージアレイモデルと V シリーズモデルに関する情報が表示されます。</block>
  <block id="9ac92b97b9314fe7c9c80b03c2f61746" category="list-text">この手順環境システムは、 4 ノードの NetApp MetroCluster 構成以上を実行しています。MetroCluster 構成サイトは物理的に異なる場所に設置できるため、 HA ペアの場合は各 MetroCluster サイトでコントローラの自動アップグレードを個別に実行する必要があります。</block>
  <block id="2aa5c93d9c496fa51aae1bd50988ffb1" category="list-text">AFF A320 システムからアップグレードする場合は、ボリューム移動を使用してコントローラハードウェアをアップグレードするか、テクニカルサポートにお問い合わせください。ボリューム移動を行う場合は、を参照してください <block ref="9cc0d5221a9e998f923428a347033ebc" category="inline-link-macro-rx"></block>。</block>
  <block id="fac54699f861d36d543f619170eba56f" category="summary">アップグレード後は、ネットアップサポートサイトから古いシステムの運用を停止できます。</block>
  <block id="12a1856797218081c363d4151a746a51" category="paragraph">アップグレード後は、ネットアップサポートサイトから古いシステムの運用を停止できます。システムの運用を停止すると、そのシステムは動作していないことがネットアップに通知され、サポートデータベースから削除されます。</block>
  <block id="9d2169c1c2855b78a7aeaa4f42d27dc7" category="inline-link-macro">ネットアップサポートサイト</block>
  <block id="64415bc101bc035c5a6933833b0626cd" category="list-text">に移動します <block ref="e60beeaa103c7cce7039865bf593f639" category="inline-link-macro-rx"></block> ログインします。</block>
  <block id="eb020d21f20b70e49bbe4ebed52b9e29" category="list-text">メニューから [ 製品 ]&gt;[ マイ製品 ] を選択します。</block>
  <block id="4d0016e281d3a86d70ae083a04a5da95" category="list-text">[ インストール済みシステムの表示 *] ページで、システムに関する情報の表示に使用する *Selection Criteria* を選択します。</block>
  <block id="700d67d065f1bd740439eef879e00b77" category="paragraph">次のいずれかを選択してシステムを検索できます。</block>
  <block id="9738c15508e7d3e2fce3396706fc65c8" category="list-text">シリアル番号（ユニットの背面に記載）</block>
  <block id="fce1b48d1133d34e0a4d5fdc15e8638b" category="list-text">所在地のシリアル番号</block>
  <block id="fd719eec8decd496851f7b087029e913" category="list-text">[* 出発 ] をクリックします</block>
  <block id="a35129a35ab8aae79ad1750a3753888c" category="paragraph">シリアル番号を含むクラスタ情報が表に表示されます。</block>
  <block id="b5554c834fafdd1adbf8f16933521491" category="list-text">テーブルでクラスタを見つけ、 Product Tool Set （製品ツールセット）ドロップダウンメニューから * Decommission this system * （このシステムのデコミッション）を選択します。</block>
  <block id="7cb7e7951b479387ad32001aab9f53b2" category="summary">システムがクラッシュする場合–リブート、パニック状態、または電源の再投入が行われます。</block>
  <block id="d75bd21e9af20a5036c0fbf461bc4e2d" category="doc">リブート、パニック、電源再投入</block>
  <block id="446d36fba2e507d61203c02578774ece" category="paragraph">アップグレードの各段階で、システムがクラッシュする（リブート、パニック状態、または電源の再投入）場合があります。</block>
  <block id="dec0e91cad029c9d2b55e8bd32c88e76" category="paragraph">これらの問題の解決策は、状況によって異なります。</block>
  <block id="343eae749a23fb17ef6cdd38fd2da8f5" category="section-title">事前チェックフェーズでのリブート、パニック、電源再投入</block>
  <block id="8bea04524c5e6dcfb6d21a849345ee30" category="section-title">HA ペアを有効にして事前チェックフェーズの前にノード 1 またはノード 2 がクラッシュした場合</block>
  <block id="738ee8bcfd939a32f3de7df5814c6eba" category="paragraph">事前チェックフェーズの前にノード 1 またはノード 2 がクラッシュした場合は、再配置されたアグリゲートがなく、 HA ペア構成が有効なままになります。</block>
  <block id="0dd6e0ba50acfc16218ced7b92e813f1" category="paragraph">テイクオーバーとギブバックは正常に実行されます。</block>
  <block id="809ecf0f76cd48f719608b879e540f19" category="list-text">コンソールで、システムで発行された EMS メッセージを確認し、推奨される対処方法を実行します。</block>
  <block id="0accdb9af8ee9902e6e12e8ad3c69dd6" category="list-text">ノードペアのアップグレード用手順に進みます。</block>
  <block id="32042e1cae255d52d27eb7e6f102079f" category="section-title">最初のリソースリリースフェーズでリブート、パニック、電源再投入が発生した場合</block>
  <block id="a929dc8c44e0a4c66070b18005fcda69" category="section-title">HA ペアを有効にすると、リソースの最初のリリースフェーズでノード 1 がクラッシュします</block>
  <block id="17b207ac883ad6c7c60e4c67b540500b" category="paragraph">一部またはすべてのアグリゲートがノード 1 からノード 2 に再配置されており、 HA ペアが有効なままです。node2 は、ノード 1 のルートボリュームと再配置されていないルート以外のアグリゲートをテイクオーバーします。</block>
  <block id="658aff35f1b2ef5bf804a6eaa8bd8834" category="paragraph">再配置されたアグリゲートの所有権は、ホーム所有者が変更されていないためにテイクオーバーされたルート以外のアグリゲートの所有権と同じになります。</block>
  <block id="6ccd7f2e78c66d169bbf302fa0cd170e" category="paragraph">node1 の状態が「 waiting for giveback 」になると、 node2 はノード 1 のルート以外のすべてのアグリゲートをギブバックします。</block>
  <block id="15ea5ecb42f5a766ef591c29b45aac5f" category="list-text">ノード 1 がブートすると、ノード 1 のルート以外のすべてのアグリゲートがノード 1 に戻されます。次のコマンドを使用して、 node1 から node2 へのアグリゲートの手動での再配置を実行する必要があります。「 storage aggregate relocation start -node node1 -destination node2 -aggregate-list * -ndocontroller -upgrade true</block>
  <block id="db2e31afa00c26dc29029e29d8ff4e9f" category="section-title">HA ペアを無効にすると、リソースの最初のリリースフェーズでノード 1 がクラッシュします</block>
  <block id="a3ab092ff29c94a2c1dce4e8e58fbab8" category="paragraph">node2 はテイクオーバーしませんが、ルート以外のすべてのアグリゲートから引き続きデータを提供しています。</block>
  <block id="84604a4d07dcc33bcf3def32522ced97" category="list-text">ノード 1 を起動します。</block>
  <block id="07fcb95304f9b9b6a7b8e09bf3a43b90" category="section-title">リソースの最初のリリースフェーズで HA ペアを有効にした状態で node2 に障害が発生する</block>
  <block id="ea41d430c1801092eb658fc92447fa77" category="paragraph">ノード 1 の一部またはすべてのアグリゲートが node2 に再配置されています。HA ペアが有効になります。</block>
  <block id="4ef90a16749941dcc42841a4d350f4e3" category="paragraph">ノード 1 で、ノード 2 のすべてのアグリゲートと、ノード 2 に再配置された独自のアグリゲートがテイクオーバーされます。ノード 2 がブートすると、アグリゲートの再配置が自動的に完了します。</block>
  <block id="f377056f049a875748f0f1fb62e593b9" category="list-text">node2 を起動します。</block>
  <block id="a84419db35cfbd1052a6e3367b3e6550" category="section-title">リソースの最初のリリースフェーズと HA ペアの無効化後に、ノード 2 がクラッシュします</block>
  <block id="3902e7586591847461eb93ec52677583" category="paragraph">ノード 1 ではテイクオーバーが実行されません。</block>
  <block id="209379c90008402bff9e43e926d726f5" category="paragraph">node2 のブート中に、すべてのアグリゲートでクライアントが停止します。</block>
  <block id="fb4e509950818b78317fa6b0f32c946e" category="list-text">残りのノードペアのアップグレード用手順に進みます。</block>
  <block id="c69c252a29e4c40de646b133d6b89286" category="section-title">最初の検証フェーズでリブート、パニック、または電源の再投入が発生した場合</block>
  <block id="eee0c63ddb8a9ee96da6fcbaee95750f" category="section-title">HA ペアを無効にして最初の検証フェーズで node2 がクラッシュします</block>
  <block id="3acacc48f49902e35f2acd0532846558" category="paragraph">HA ペアがすでに無効になっているため、ノード 2 のクラッシュ後にノード 3 はテイクオーバーしません。</block>
  <block id="4d671d2255fc765ecb0c9754a61e9e19" category="section-title">HA ペアを無効にして初回の検証フェーズでノード 3 がクラッシュした場合</block>
  <block id="26bf9df43caced35a52d77376336d969" category="list-text">ノード 3 を起動します。</block>
  <block id="b37a13b468d5049d51c1794bdee782ea" category="section-title">最初のリソース再取得フェーズでのリブート、パニック、電源再投入</block>
  <block id="cdf0fa097138599db352e67f83f4d60e" category="section-title">アグリゲートの再配置中にリソースを再取得する最初のフェーズでノード 2 がクラッシュする</block>
  <block id="e15376fba96131cecfad3a743435774e" category="paragraph">node2 の一部またはすべてのアグリゲートがノード 1 からノード 3 に再配置されています。node3 は、再配置されたアグリゲートからデータを提供します。HA ペアが無効になっているため、テイクオーバーはありません。</block>
  <block id="27685d530ae8434b4b7c343805519a62" category="paragraph">再配置されなかったアグリゲートのクライアントが停止しています。ノード 2 のブート時に、ノード 1 のアグリゲートがノード 3 に再配置されます。</block>
  <block id="afac1d41da19c91d8c537c0dd081b509" category="section-title">アグリゲートの再配置中に、最初のリソースのリ回復フェーズでノード 3 がクラッシュする</block>
  <block id="4309a6885186e1d672df942c1ef7364c" category="paragraph">node2 によるアグリゲートのノード 3 への再配置中にノード 3 がクラッシュした場合、ノード 3 のブート後も処理が続行されます。</block>
  <block id="c5689b790d4c37b77d1d9d0b5eb653e8" category="paragraph">node2 では残りのアグリゲートの処理が続行されますが、 node3 の起動中にすでに node3 に再配置されたアグリゲートでクライアントが停止する可能性があります。</block>
  <block id="c3ed2d002fa1511e957ac4f0f379ab64" category="list-text">コントローラのアップグレードに進みます。</block>
  <block id="c99650cbb2e9705200e0c65ef8112d66" category="section-title">チェック後のフェーズでリブート、パニック、電源再投入が発生した場合</block>
  <block id="cd64011aa9e337fac4267ca724c07c1a" category="section-title">チェック後のフェーズで node2 または node3 がクラッシュする</block>
  <block id="6cc3572daebdd8b0893f33d359db3778" category="paragraph">HA ペアが無効になっているため、テイクオーバーは行われません。リブートしたノードに属するアグリゲートでクライアントが停止しています。</block>
  <block id="79671f1c69add8723a6562ea9207f36a" category="list-text">ノードを起動します。</block>
  <block id="453e1c1e18302a590c41d9e178962389" category="section-title">リソースの 2 つ目のリリースフェーズでリブート、パニック、電源の再投入が発生した場合</block>
  <block id="48824f490a3d91487cefde6c844f77c8" category="section-title">リソースの 2 つ目のリリースフェーズでノード 3 がクラッシュする</block>
  <block id="6fdf83c70d5ac6354046a77aed7edf87" category="paragraph">node2 によるアグリゲートの再配置中にノード 3 がクラッシュした場合、ノード 3 のブート後もタスクは続行されます。</block>
  <block id="5731c7830057407975be490c2494fb1f" category="paragraph">node2 で残りのアグリゲートの処理は続行されますが、 node3 と node3 の独自のアグリゲートにすでに再配置されたアグリゲートでは、 node3 のブート中にクライアントが停止することがあります。</block>
  <block id="c025602fb85c6101c2c2b73f3aee8c22" category="list-text">コントローラのアップグレード手順に進みます。</block>
  <block id="98b7194c3f7e4d897e4fd26d695e1854" category="section-title">2 番目のリソースリリースフェーズで node2 がクラッシュします</block>
  <block id="5824934e067c33bb3114baa4a8cf9ec5" category="paragraph">アグリゲートの再配置時にノード 2 がクラッシュした場合、ノード 2 はテイクオーバーされません。</block>
  <block id="8e080faf36569e4b034dc52f5a78a0c9" category="paragraph">ノード 3 は再配置されたアグリゲートを引き続き提供しますが、ノード 2 が所有するアグリゲートではクライアントの停止が発生します。</block>
  <block id="7ece8f4248b2db8509ecfad31259ec79" category="section-title">2 回目の検証フェーズで、リブート、パニック、または電源の再投入が発生した場合</block>
  <block id="844787e278f2aed416a608ecf8da2f42" category="section-title">2 回目の検証フェーズでノード 3 がクラッシュした場合</block>
  <block id="78d45d4102c6b7fa82c29a7ee6d3feac" category="paragraph">このフェーズで node3 がクラッシュした場合は、 HA ペアがすでに無効になっているため、テイクオーバーは実行されません。</block>
  <block id="9776e59ce7d904cfd8633f152b0e9840" category="paragraph">node3 がリブートするまでは、すべてのアグリゲートのクライアントが停止します。</block>
  <block id="0e9646babd06b1afc68db209c8b7e8cc" category="section-title">2 番目の検証フェーズ中にノード 4 がクラッシュした場合</block>
  <block id="06581dc290bb90ebdc3bff784e74c05b" category="paragraph">このフェーズでノード 4 がクラッシュした場合は、テイクオーバーは実行されません。node3 は、アグリゲートからデータを提供します。</block>
  <block id="320ac33a3a3ed82ed96ef3dd7d173ed9" category="paragraph">ノード 4 のリブートまでルート以外のアグリゲートがすでに再配置されています。</block>
  <block id="d2dec120c917320cae7461e84d91f23c" category="list-text">ノード 4 を起動します。</block>
  <block id="510e98cf2edb71945018bbd3f1de261d" category="paragraph">NetApp Volume Encryption （ NVE ）を使用してアップグレードするシステムのボリュームを暗号化する場合は、暗号化設定を新しいノードに同期する必要があります。ノード 1 のアグリゲートの ARL がノード 2 からノード 3 に完了すると、暗号化されたボリュームがオフラインになります。</block>
  <block id="969f0a2571a7738a949482044a778723" category="summary">いずれかのアグリゲートに再配置の失敗や再配置が拒否された場合は、アグリゲートを手動で再配置する必要があります。</block>
  <block id="97075c537f59de355c8d44c57697ef74" category="doc">障害が発生したアグリゲートを再配置するか</block>
  <block id="1a246f70242ad6a20257f6b2816e32b7" category="paragraph">いずれかのアグリゲートに再配置が失敗した場合、または拒否されている場合は、アグリゲートを手動で再配置するか、必要に応じて拒否またはデスティネーションのチェックを無視する必要があります。</block>
  <block id="d5b52813fd23e774f0e560e7d8ecc452" category="paragraph">エラーが原因で再配置処理が一時停止します。</block>
  <block id="b10c9e2a07f0bd22d85f72c5fb19d122" category="list-text">イベント管理システム（ EMS ）のログで、アグリゲートの再配置に失敗した理由や拒否された理由を確認します。</block>
  <block id="01cbdaa18620ad6d965f125b9ad9b1a7" category="list-text">次のコマンドを使用して、障害が発生したアグリゲートまたは拒否されたアグリゲートを再配置</block>
  <block id="f31ceb40ff7b8a0764fb7750bb94fd7b" category="paragraph">「 storage aggregate relocation start -node &lt;node1&gt; -destination &lt;node2&gt; aggregate-list &lt;aggr_name&gt; -nd-controller-upgrade true 」の形式で指定します</block>
  <block id="4f6da995dc4a823a0d6529c9d724b695" category="list-text">プロンプトが表示されたら、「 y 」と入力します。</block>
  <block id="d5f8db2e1eae8ada3af51a497dead90d" category="list-text">再配置は、次のいずれかの方法で強制的に実行できます。</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">オプション</block>
  <block id="bca8a20f71b5dee00fa30d0570b83068" category="cell">拒否チェックの無視</block>
  <block id="63e95f3a5b822c0e1e5f710174695047" category="cell">次のコマンドを使用します。「 storage aggregate relocation start -node node1 -destination node2 -aggregate-list &lt;aggr_list&gt; -nd-controller-upgrade true -override-vetoes true 」</block>
  <block id="1b27217f602bc4090b93bc2c72ec2c38" category="cell">デスティネーションチェックの無効化</block>
  <block id="2b0aaee5d2bb595c0dd13e304bb34c55" category="cell">次のコマンドを使用します。「 storage aggregate relocation start -node node1 -destination node2 -aggregate-list &lt;aggr_list&gt; -nd-controller-upgrade true -override-vetoes true -override-destination-checks true 」</block>
  <block id="26a8fc3a58ee2e1f4b9b0219f3203837" category="summary">ステージ 5 で、 node4 をインストールしてブートし、 node2 のクラスタポートとノード管理ポートを node4 にマッピングします。</block>
  <block id="5eb59651a7213cf4ae352b4c3ee57a36" category="doc">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="e6cd3f4f7e85ced0a9a0f950fd761aa0" category="paragraph">ステージ 5 で、 node4 をインストールしてブートし、 node2 のクラスタポートとノード管理ポートを node4 にマッピングし、 node4 のインストールを確認します。node2 によって所有されている NAS データ LIF を node3 から node4 に移動し、 node2 のアグリゲートを node3 から node4 に再配置します。</block>
  <block id="1b3ff9ea37d4986ce34f2a6478db309f" category="list-text"><block ref="1b3ff9ea37d4986ce34f2a6478db309f" category="inline-link-macro-rx"></block></block>
  <block id="19e1cb1407ac1a7709bf36e64e7fec5d" category="list-text"><block ref="19e1cb1407ac1a7709bf36e64e7fec5d" category="inline-link-macro-rx"></block></block>
  <block id="f694066eff0c2ca8cd3a02623214690d" category="list-text"><block ref="f694066eff0c2ca8cd3a02623214690d" category="inline-link-macro-rx"></block></block>
  <block id="c9d83ff9b793f09ced9acfc606a50fe2" category="list-text"><block ref="c9d83ff9b793f09ced9acfc606a50fe2" category="inline-link-macro-rx"></block></block>
  <block id="a11ec3ccb8b10002318b3342187c386c" category="inline-link-macro">ルート以外のアグリゲートおよび node2 によって所有される NAS データ LIF を、 node3 から node4 に再設定します</block>
  <block id="2d6eacb78dc5ccfe6fab43f6aa67b27e" category="list-text"><block ref="2d6eacb78dc5ccfe6fab43f6aa67b27e" category="inline-link-macro-rx"></block></block>
  <block id="37ca8b383b926ae9880b1b535c90290a" category="summary">ONTAP コマンドラインで次のコマンドを入力して、コントローラの交換プロセスを開始します。</block>
  <block id="f163cd0bda37780c7a24303611dc0185" category="paragraph">ノードをアップグレードする準備として、次の手順を実行する必要があります。</block>
  <block id="6510eaf8fd7e9800a5b7d62b06dc6e9c" category="list-text">ONTAP コマンドラインで次のコマンドを入力して、コントローラの交換プロセスを開始します。</block>
  <block id="f65104a2552945130cb62829d56eac5e" category="paragraph">「 system controller replace start-nodes &lt;Node_name&gt; 」のように入力します</block>
  <block id="dae991e7b6526863385fd89479e87f53" category="admonition">このコマンドは、 advanced 権限レベルの「 set -privilege advanced 」でのみ実行できます</block>
  <block id="53d5140b9db74b84bdd8037a6063ec88" category="paragraph">次の出力が表示されます。</block>
  <block id="9843edc4af038cb41e5ce95e9aad1e03" category="list-text">「 y 」キーを押すと、次の出力が表示されます。</block>
  <block id="ffc467f3c2a85173d4529548d72d41b9" category="paragraph">システムでは次の事前確認が実行され、あとで手順で使用するために各事前確認の出力が記録されます。</block>
  <block id="495aa5c508241f1eca40fd503bc73196" category="cell">事前チェック</block>
  <block id="688df3b12b34ef0608e319ff169390d4" category="cell">クラスタの健常性チェック</block>
  <block id="2ebe98702ab3694ec3ccfe3e623a124e" category="cell">クラスタ内のすべてのノードが正常であることを確認します。</block>
  <block id="56beb58e6d547196c5aa44214e93ccaa" category="cell">MCC クラスタチェック</block>
  <block id="f8c3b8dcbd883dc2841679a94feb852a" category="cell">システムが MetroCluster 構成かどうかを確認します。MetroCluster 構成かどうかが自動的に検出され、特定の事前確認と検証チェックが実行されます。4 ノードの MetroCluster FC 構成のみがサポートされます。2 ノード MetroCluster 構成と 4 ノード MetroCluster の IP 構成では、チェックが失敗します。MetroCluster 構成がスイッチオーバーされている場合、チェックは失敗します。</block>
  <block id="b14360b478956e0213006307a2213b01" category="cell">アグリゲートの再配置ステータスチェック</block>
  <block id="23ecfd4d5c38f058d2a5b47f3a17a9b2" category="cell">アグリゲートの再配置がすでに実行中であるかどうかを確認します。別のアグリゲートの再配置を実行中の場合、チェックは失敗します。</block>
  <block id="2fb16648e5e222f12729fb8c953149b5" category="cell">モデル名のチェック（ Model Name Check</block>
  <block id="84599dff045e3f86049bc2022bf4b930" category="cell">この手順でコントローラモデルがサポートされているかどうかを確認します。モデルがサポートされていない場合、タスクは失敗します。</block>
  <block id="67c4a102a7629dddfcaf5472ead63dd6" category="cell">クラスタクォーラムチェック</block>
  <block id="b26031d08c55750f9480d081320ddcbe" category="cell">交換するノードがクォーラムにあることを確認します。ノードがクォーラムを構成していない場合は、タスクが失敗します。</block>
  <block id="833b60ce00de23efdd84aaf2257b1cd3" category="cell">イメージのバージョンチェック</block>
  <block id="366f79ac2a714dd82ba5dd9b17a31d55" category="cell">交換するノードで同じバージョンの ONTAP が実行されていることを確認します。ONTAP イメージのバージョンが異なると、タスクは失敗します。新しいノードには、元のノードと同じバージョンの ONTAP 9.8 をインストールする必要があります。新しいノードに別のバージョンの ONTAP がインストールされている場合は、設置後に新しいコントローラをネットブートする必要があります。を参照してください <block ref="2306b060dda44ca496eae792a0e62a17" category="inline-link-macro-rx"></block> ONTAP のアップグレード手順については、を参照してください</block>
  <block id="4f324d87f2095ea7b3cb652dd2dc4b10" category="cell">HA ステータスチェック</block>
  <block id="0ec2a475eb3cc7052a2df9d912b429a5" category="cell">交換する両方のノードがハイアベイラビリティ（ HA ）ペア構成になっているかどうかを確認します。コントローラでストレージフェイルオーバーが有効になっていない場合、タスクは失敗します。</block>
  <block id="13953a740d52280d2268524a1a4a3535" category="cell">アグリゲートステータスチェック</block>
  <block id="d2be5a07810282eec1226ecdcabc0e8d" category="cell">ホーム所有者でないアグリゲートを交換するノードが所有している場合、そのタスクは失敗します。ローカル以外のアグリゲートを所有するノードは使用しないでください。</block>
  <block id="6244df7e25591403b0d5255577576eb4" category="cell">ディスクステータスチェック</block>
  <block id="04ae6128bf947dba9f2e16b5ffa540fa" category="cell">交換するノードに不足しているディスクまたは障害が発生しているディスクがある場合、タスクは失敗します。足りないディスクがある場合は、を参照してください <block ref="32ad4279d8decdf54b42d53297728513" category="inline-link-macro-rx"></block>、 <block ref="2170dc6efac5d76f8ef2dd44719cb594" category="inline-link-macro-rx"></block>および <block ref="fce145d95584367b9c4d78d9aa5ffce3" category="inline-link-macro-rx"></block> を参照してください <block ref="292163533a147210a514360785f12599" category="inline-link-macro-rx"></block> をクリックして HA ペアのストレージを設定します。</block>
  <block id="320bc2c593ebed7e970715ea3832bc2e" category="cell">データ LIF ステータスチェック</block>
  <block id="9433521f789681a1a8fd76815674c438" category="cell">交換するノードにローカル以外のデータ LIF があるかどうかを確認します。ホーム所有者でないデータ LIF がノードに含まれないようにしてください。ローカル以外のデータ LIF がいずれかのノードに含まれている場合、タスクは失敗します。</block>
  <block id="eb694fc97d0bfef2c84584a29b318d85" category="cell">クラスタ LIF ステータス</block>
  <block id="ce7612b7485886dbb77994528256ffe5" category="cell">両方のノードでクラスタ LIF が動作しているかどうかを確認します。クラスタ LIF が停止している場合は、タスクは失敗します。</block>
  <block id="35a80eab14772418cca0ff3317910419" category="cell">ASUP ステータスチェック</block>
  <block id="166dc880ac0c6c0bb26663235da7e471" category="cell">ASUP 通知が設定されていないと、タスクは失敗します。コントローラの交換用手順を開始する前に ASUP を有効にする必要があります。</block>
  <block id="d39a17fff59bba71c24822f913f16591" category="cell">CPU 利用率チェック</block>
  <block id="3478400e352864eaa33992de6e976ca8" category="cell">交換するノードの CPU 利用率が 50% を超えていないかどうかを確認します。CPU 使用率がかなりの時間にわたって 50% を超えると、タスクは失敗します。</block>
  <block id="1a0a7ab1ebbc5d1d73b48be5c234810d" category="cell">アグリゲートの再構築チェック</block>
  <block id="7830789d964e8c8cf3a370b1d0299a28" category="cell">いずれかのデータアグリゲートで再構築が実行されているかどうかを確認しますアグリゲートの再構築を実行中の場合、タスクは失敗します。</block>
  <block id="c17c89f5ba46492be395e9f071e013ae" category="cell">ノードアフィニティジョブチェック</block>
  <block id="83aecfe9d4bf515a2ec45766e28a4ce0" category="cell">ノードアフィニティジョブが実行されているかどうかを確認します。ノードアフィニティジョブが実行中の場合、チェックは失敗します。</block>
  <block id="3ae0a94222b6d6378899ff73d1aad6e3" category="list-text">コントローラの交換処理が開始されて事前確認が完了すると、処理が一時停止するため、ノード 3 の設定時に必要になる可能性がある出力情報を収集できます。</block>
  <block id="3f906c041fb469b2794aa7ce7964b2a7" category="list-text">システムコンソールで、コントローラの交換用手順の指示に従って、次のコマンドセットを実行します。</block>
  <block id="6c7905cfbf20ac44387cca492e010687" category="paragraph">次のコマンドの出力を個別に実行して保存する必要があります。</block>
  <block id="2a29db167c3a03336a9b63367df61117" category="list-text">vserver services name-service dns show</block>
  <block id="adb6c9273650502325bd84641dded06a" category="list-text">network interface show -curr-node &lt;nodename&gt; -role &lt;cluster 、 intercluster 、 node-mgmt 、 cluster-mgmt 、 data &gt;</block>
  <block id="8ba3dc8f2e507a70633697dc60de2269" category="list-text">network port show -node &lt;node_name &gt; -type physical</block>
  <block id="4b6d2742fe44e19ae334198040aa33ef" category="list-text">service-processor show -node * -instance の各コマンドを実行します</block>
  <block id="54435116abb139647e98feb1031829db" category="list-text">network fcp adapter show -node &lt;node_name &gt;</block>
  <block id="21ae3cd30d3faa7f1f8d97766b196a1a" category="list-text">network port ifgrp show の設定</block>
  <block id="cbd335576ebae1caff82003d00697c97" category="list-text">system node show -instance -node &lt;node_name &gt;</block>
  <block id="a0ce199a837f76798ed0619d2ef94065" category="list-text">run -node &lt;node_name &gt;sysconfig</block>
  <block id="fac031b53ff277f8625f50e090a47475" category="list-text">storage aggregate show -node &lt;node_name &gt;</block>
  <block id="fbbf7d037bc226399100b8f4ea551e3a" category="list-text">volume show -node &lt;node_name &gt;</block>
  <block id="9a58231354c6d959f08b17d7fdb9350f" category="list-text">storage array config show -switch &lt;switch_name&gt; のように表示されます</block>
  <block id="760bdf3d6f89d3bd7422272872fc8ec1" category="list-text">system license show -owner &lt;node_name &gt;</block>
  <block id="46353f4e0bb2c136591c37c9eeedcf40" category="list-text">storage encryption disk show のコマンド</block>
  <block id="6b6f6c1a8bc1fede794cda92ed140953" category="list-text">security key-manager backup show のコマンドは</block>
  <block id="001642cb897a8bebce3210207b7e81af" category="list-text">security key-manager external show のコマンド</block>
  <block id="6afea099b023b1bd5f51935ccb31ce0a" category="list-text">security key-manager external show-status のこと</block>
  <block id="27c32000aa45c9243e8b444a27636832" category="list-text">reachability show-detailability</block>
  <block id="9cad135052afca91f1dd4b9f0372c825" category="admonition">オンボードキーマネージャ（ OKM ）を使用する NetApp Volume Encryption を使用している場合、キー管理ツールのパスフレーズを使用して、あとで手順でキー管理ツールの再同期を完了してください。</block>
  <block id="22afa574ce25ee7b49bc951eecd7f0ac" category="section-title">ARL の事前確認に失敗した場合は、アグリゲートの所有権を修正</block>
  <block id="7a29204c210eec42f3d01bebd9b483ba" category="paragraph">アグリゲートステータスチェックに失敗した場合は、パートナーノードが所有するアグリゲートをホーム所有者ノードに戻し、事前確認プロセスを再度開始する必要があります。</block>
  <block id="13438714af5f265a69cdb9fb6fc028f5" category="list-text">次のコマンドを使用して、パートナーノードが現在所有しているアグリゲートをホーム所有者ノードに戻します。</block>
  <block id="0620f85959e7122e0e62c6193df806f8" category="paragraph">「 storage aggregate relocation start -node &lt;source_node&gt; -destination &lt;destination-node&gt; -aggregate -list * 」のように表示されます</block>
  <block id="a11f98389b5ef65f9666f05434e8bca8" category="list-text">次のコマンドを使用して、 node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）であるアグリゲートを所有していないことを確認します。</block>
  <block id="ed33c4e76a67735c4a0e87361685f44c" category="paragraph">「 storage aggregate show -nodes &lt;node_name &gt; -is-home false -fields owner-&lt;name&gt; 、 home-name 、 state</block>
  <block id="74aa132d7caa1904dc30e16328313124" category="paragraph">次の例は、アグリゲートの現在の所有者とホーム所有者の両方がノードにある場合のコマンドの出力例を示しています。</block>
  <block id="bd965e38a0c9cf27aa1bde099308e23f" category="section-title">完了後</block>
  <block id="716ae6d3100d9fe9a05d4602099875b6" category="paragraph">次のコマンドを使用して、コントローラの交換プロセスを再起動する必要があります。</block>
  <block id="794df3791a8c800841516007427a2aa3" category="section-title">使用許諾</block>
  <block id="05a46531537373667ec97f48a0268bca" category="paragraph">クラスタをセットアップする際、セットアップウィザードでクラスタベースのライセンスキーを入力するように求められます。ただし、一部の機能には追加のライセンスが必要です。ライセンスは、 1 つ以上の機能を含むパッケージとして発行されます。クラスタで使用する各機能のキーは、クラスタ内の各ノードに独自に設定する必要があります。</block>
  <block id="0716a66a70e59256281f4030c078ce04" category="paragraph">新しいライセンスキーがない場合は、クラスタで現在ライセンスされている機能を新しいコントローラで使用できます。ただし、ライセンスされていない機能をコントローラで使用するとライセンス契約に違反する可能性があるため、アップグレードの完了後に新しいコントローラのライセンスキーをインストールする必要があります。</block>
  <block id="3fd889980eb5b562e1bd6cb1bb4cced8" category="paragraph">ONTAP 9.8 用の新しい 2 文字のライセンスキーは、で入手できます <block ref="e60beeaa103c7cce7039865bf593f639" category="inline-link-macro-rx"></block>。キーは、 _ ソフトウェアライセンス _ の _ マイサポート _ セクションにあります。必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="d202da01ce49771212ff5a916d7301b9" category="paragraph">ライセンスの詳細については、を参照してください <block ref="839332b52391f9eb13d4a6fc107f1e56" category="inline-link-macro-rx"></block> を参照してください <block ref="292163533a147210a514360785f12599" category="inline-link-macro-rx"></block>。</block>
  <block id="f316c2b1c3180013cd06406baadfb7d6" category="summary">アップグレード手順の最後に、 node3 はアグリゲートの新しいホームノードである必要があります。</block>
  <block id="64f7904c016a035f1928a2cbeea82ab1" category="doc">アグリゲートは、アップグレードの完了後、ノード 1 にもともと存在していたものとノード 4 によって所有されます</block>
  <block id="2e352bfe9deb78b924bf0f5e67164c3c" category="paragraph">アップグレード手順の最後に、 node3 は、元々ホームノードとしてノード 1 を使用していたアグリゲートの新しいホームノードである必要があります。このパスはアップグレード後に再配置できます。</block>
  <block id="2cf6fa2f1aa97f868355968dffa896a3" category="paragraph">次の状況で、アグリゲートが正常に再配置されず、ノード 1 がノード 3 ではなくホームノードとしてノード 1 になっている可能性があります。</block>
  <block id="eabfe2534554b27bddeea073dc85fdef" category="list-text">ステージ 3 で、アグリゲートが node2 から node3 に再配置されている場合。</block>
  <block id="b64ff0aed650d75434d24e770d7ac535" category="paragraph">再配置する一部のアグリゲートのホームノードが node1 に含まれている。たとえば、このようなアグリゲートのことを aggr_node_A_1 と呼びます。ステージ 3 で aggr_node_A_1 の再配置が失敗し、強制的に再配置を実行できない場合は、アグリゲートは node2 で残ります。</block>
  <block id="10088c57d34f3ff8d01259d9bf23a10e" category="list-text">ステージ 4 のあとで、 node2 を node4 に置き換える場合。</block>
  <block id="3727ce4dce304c5ffcdfab64f1361e18" category="paragraph">node2 を交換すると、 aggr_node_A_1 が、 node3 ではなく node4 にあるホームノードとしてオンラインになります。</block>
  <block id="2fd96d1cbc3f38a4d51b34fc38bb9795" category="paragraph">ストレージフェイルオーバーを有効にしたあと、ステージ 6 に続けて所有権に関する誤った問題を修正するには、次の手順を実行します。</block>
  <block id="d6c8a4ac010370637fda6aa00c4ecb61" category="list-text">次のコマンドを使用して、アグリゲートのリストを取得します。</block>
  <block id="482c91d6a5bf35c82ea857455c024d88" category="paragraph">「 storage aggregate show -nodes &lt;node4 &gt; -is-home true 」という 2 つの意味があります</block>
  <block id="69aeb97e68d779e078d70b2209787e83" category="paragraph">正しく再配置されていないアグリゲートを特定するには、セクションで取得した node1 のホーム所有者を含むアグリゲートのリストを参照してください <block ref="94f2dfd916315926f685ba65e48c6e25" category="inline-link-macro-rx"></block> コマンドの出力と比較してください。</block>
  <block id="812a9848cb16db698df2fcc8c7caae5b" category="list-text">手順 1 の出力と、セクションで確認した node1 用の出力を比較します <block ref="94f2dfd916315926f685ba65e48c6e25" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="f2bf75566771406c6ded668ee425d550" category="list-text">次のコマンドを使用して、 node4 に残っているアグリゲートを再配置します。</block>
  <block id="65a8c99f14b76057940b416927d170c9" category="paragraph">「 storage aggregate relocation start -node &lt;node4 &gt; -aggr &lt;aggr_node_A_1 &gt; -destination &lt;node3 &gt;"</block>
  <block id="19289925f6f4d12d2796b14d773968dd" category="paragraph">この再配置中は '-nd-controller-upgrade パラメータを使用しないでください</block>
  <block id="60656064cbcf2e1519ecbe0028959c9a" category="list-text">次のコマンドを使用して、アグリゲートのホーム所有者が node3 になっていることを確認します。</block>
  <block id="efe0e1623e3de58285e110eadbfa034a" category="paragraph">「 storage aggregate show -aggregate &lt;aggr1 、 aggr2 、 aggr3...&gt; -fields home-name 」のように指定します</block>
  <block id="3b6b92b0cbab52f7f27f444cda7f83aa" category="paragraph">「 &lt;aggr1 、 aggr2 、 aggr3_&gt; 」は、 node1 が元のホーム所有者であるアグリゲートのリストです。</block>
  <block id="0ff4f26e03c087491de24c0370828b1a" category="paragraph">node3 がホーム所有者でないアグリゲートは、手順 3 と同じ再配置コマンドを使用して node3 に再配置できます。</block>
  <block id="1997edef0e8dc4dfe6a4e9bb54326b4c" category="summary">コントローラのアップグレード中に、コントローラは別のコントローラに交換されます。</block>
  <block id="d345c906575e21a898123708bebd7b5c" category="doc">コントローラのアップグレードプロセスの自動化</block>
  <block id="211dd20476c70813f998487d2564ac39" category="paragraph">コントローラのアップグレード時に、コントローラは、より新しい、またはより強力なプラットフォームを実行する別のコントローラに交換されます。このガイドの以前のバージョンには、完全に手動で構成されるコントローラの無停止更新プロセスに関する手順が含まれていました。このガイドでは、自動化された新しい手順の手順を説明します。この手順では、ネットワークポートの到達可能性チェックを自動化し、コントローラのアップグレードをさらに簡易化します。</block>
  <block id="d88ce1078b12ccecbaaa871291ee2c05" category="paragraph">手動での作業は時間がかかり複雑でしたが、この簡易化された手順では、アグリゲートの再配置を使用してコントローラの更新を実装できるため、 HA ペアの無停止アップグレードをより効率的に実行できます。特に、検証、情報収集、および事後チェックに関連する手動手順は大幅に少なくなります。</block>
  <block id="12f0aff6b7931a4b46dc6629c132816a" category="summary">手順の処理中に、ステージ 2 、ステージ 3 、またはステージ 5 で ARL が失敗することがあります。</block>
  <block id="80e4215c73ac3899bde16fde12fcb7aa" category="doc">アグリゲートの再配置エラーの確認</block>
  <block id="5f1a63352c537579794f3a3c507ca8fb" category="list-text">次のコマンドを入力し、出力を確認します。</block>
  <block id="535fb4b2db5d261fd8e82fde21d267f2" category="paragraph">「 storage aggregate relocation show 」を参照してください</block>
  <block id="e0fafb56752a62a2c5a8a941a4fa2864" category="paragraph">「 storage aggregate relocation show 」コマンドを実行すると、正常に再配置されたアグリゲートと再配置されなかったアグリゲート、および障害の原因が表示されます。</block>
  <block id="85dae5feb66033271bbd3fea4eca5f7e" category="list-text">コンソールで EMS メッセージを確認します。</block>
  <block id="fe96c3f5ae23f058575d629b1b1befa1" category="list-text">「 storage aggregate relocation show 」コマンドの出力と EMS メッセージの出力に応じて、適切な方法を実行します。</block>
  <block id="b3663b253690ee49735db122d80571d6" category="list-text">「 storage aggregate relocation start 」コマンドの「 override-vetoes 」オプションまたは「 override-vetoes destination-checks 」オプションを使用して、アグリゲートまたはアグリゲートの強制的な再配置を実行します。</block>
  <block id="6d50991a352614d565931490ef78b642" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="17d992424ad253bf21fb1a0ceb91e8d4" category="inline-link-macro-rx"></block>。</block>
  <block id="0dcbb9ad75076c111ef077218e8532c1" category="summary">ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。</block>
  <block id="ddfd90d1a40dc38efcde3d45c070506d" category="paragraph">ARL を使用してノードをアップグレードする前に、手順の動作について理解しておく必要があります。このドキュメントでは、手順をいくつかの段階に分けて説明します。</block>
  <block id="7526cf9eecac88850b8e7b400f897378" category="paragraph">手順では、交換用コントローラハードウェアを使用して元のコントローラハードウェアを一度に 1 台ずつアップグレードし、 HA ペア構成を利用してルート以外のアグリゲートの所有権を切り替えます。すべてのルート以外のアグリゲートで、アップグレード後の正しいノードである最終デスティネーションに到達するために、 2 つの再配置を実行する必要があります。</block>
  <block id="dbbdd31aeee0756ad9d276a1eca618f8" category="paragraph">各アグリゲートにはホーム所有者と現在の所有者があります。ホーム所有者はアグリゲートの実際の所有者であり、現在の所有者は一時的な所有者です。</block>
  <block id="64c6da2436465d11573858d46056b95d" category="cell">段階</block>
  <block id="b72f5020c23dbd9ffc6d4450f84ec5f3" category="cell">ステージ 1 ：アップグレードの準備</block>
  <block id="707253335c75396f2f03f01d02cd611a" category="list-text">事前確認を実行して、処理が実行可能であることを確認します。</block>
  <block id="f03174f8fd409d7574b9f2016f96604d" category="list-text">事前確認が失敗した場合にアグリゲートの所有権を修正</block>
  <block id="0edc7061270b8cba6c4b291d98e9b404" category="list-text">クラスタベースライセンスキーを入力します。</block>
  <block id="dfeec1b537b43dc0ea5606e832f48af2" category="list-text">ストレージ暗号化の IP アドレスを取得します。</block>
  <block id="58119f526d64656dd48685b7def3abf2" category="list-text">KMIP サーバを使用して認証を管理します。</block>
  <block id="5c43723af4fc43b85ff273259b771bc0" category="list-text">オンボードキーマネージャ（ OKM ）を使用してストレージ暗号化を管理します。</block>
  <block id="c8e64b81bcc97d8861a9f55fcb0ae9e6" category="list-text">SnapMirror 関係を休止します（オプション）。</block>
  <block id="9b7c5fc0588fe7d63e81b1258a1b7a71" category="paragraph">ステージ 1 終了時のアグリゲートの所有権：</block>
  <block id="b309c38149cc0e7b5e0bdcbbb02d7372" category="list-text">node1 は、 node1 アグリゲートのホーム所有者と現在の所有者です。</block>
  <block id="c9441f483586640407720ae97b71e4aa" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します。</block>
  <block id="2751979c348fa4496d4f5e77b42bd6f7" category="cell">ステージ 2 ：ノード 1 の再配置と撤去</block>
  <block id="248ca24967f7bb9be3cc045e68b6dabe" category="list-text">ルート以外のアグリゲートを node1 から node2 に再配置します。</block>
  <block id="fe43f44a817b4a8a1c1b0fbab66f1668" category="list-text">ノード 1 が所有する SAN 以外のデータ LIF を node2 に再配置します。</block>
  <block id="f6eec92be77ff6719e538b7c51a97f55" category="list-text">障害が発生したアグリゲートを再配置するか、</block>
  <block id="faaafe46b0a9b962f0146097c9e28518" category="list-text">ノード 1 を撤去</block>
  <block id="023ab2fff87c666eab071e675efdacaf" category="list-text">netbooting を準備します（オプション）。</block>
  <block id="7544a9f5c9c9ff572c11f753aae7dedf" category="paragraph">ステージ 2 終了時のアグリゲートの所有権：</block>
  <block id="80056829ceb7237c21b4536a01885e13" category="list-text">node2 には、 node1 アグリゲートの現在の所有者を指定します。</block>
  <block id="f6e6ad572d16caa52deed3eeb7ca0ff5" category="list-text">node2 には、 node2 アグリゲートのホーム所有者と現在の所有者を指定します。</block>
  <block id="34c13ce480fd28c643a03477e436ea69" category="cell">ステージ 3 ：ノード 3 をインストールしてブートします</block>
  <block id="2ecf50ce071750046e33889f76b4ddf1" category="list-text">node3 をインストールしてブートします。</block>
  <block id="19fa01b5e1d74520ad0be1fb6bf1fc09" category="list-text">FC または（統合ネットワークアダプタ）の CNA 構成を設定します。</block>
  <block id="95b4c137787b29e51c74b71475d203dd" category="list-text">FC ポートを設定</block>
  <block id="b9dd5a9a2b21507e0342ef620ec6824d" category="list-text">UTA / UTA2 ポートを確認して設定してください。</block>
  <block id="8de9e3207ca31bee139241ad4fc0650f" category="list-text">ノード 3 が正常にインストールされていることを確認</block>
  <block id="e60e41c512cd3f2ad332e91763d4d2a5" category="list-text">ノード 3 のネットワーク設定をリストアします。</block>
  <block id="6b01c45aa39022f8fcfff3f90434c89c" category="list-text">ノード 1 で所有している SAN 以外のデータ LIF をノード 2 からノード 3 に移動します。</block>
  <block id="fd37436f77e7bb0f803c1afad985d422" category="list-text">node1 で所有されているルート以外のアグリゲートを node2 から node3 に再配置します。</block>
  <block id="ff8f4c5aae9f0216fa1c088e4c636ab0" category="paragraph">ステージ 3 終了時のアグリゲートの所有権：</block>
  <block id="d58c33bf48643b15350ce1c80bb474d8" category="list-text">node3 は、 node1 アグリゲートのホームの所有者であること、および現在の所有者であること。</block>
  <block id="c8add178229dab0c27c0edec3be3ed3a" category="cell">ステージ 4 ： node2 の再配置と撤去</block>
  <block id="04bf2293479cb8cadbf0c59e985f585e" category="list-text">ルート以外のアグリゲートを node2 から node3 に再配置します。</block>
  <block id="6ab2fb4ca5571833687af9b24c03405b" category="list-text">node2 に所有されている SAN 以外のデータ LIF をノード 3 に再配置します。</block>
  <block id="8f4919c4d65b1afa5ab9c7d7757a53af" category="list-text">ノード 2 を撤去</block>
  <block id="d517ee6c427837d3874a695e344df510" category="paragraph">ステージ 4 終了時のアグリゲートの所有権：</block>
  <block id="312d1c4e0e8f2ca55c86dd955ac42bff" category="list-text">node3 は、 node1 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="6ccf9360cf25c371211dcaee52075b0c" category="list-text">node2 には、 node2 アグリゲートのホーム所有者を指定します。</block>
  <block id="7c9dc4aa3c862a50866dfa4bf1cad537" category="list-text">node3 は、 node2 アグリゲートの現在の所有者です。</block>
  <block id="6c02f76a0894d55a982cb5450ab57f22" category="cell">ステージ 5 ：ノード 4 をインストールしてブートします</block>
  <block id="f709cec4fcbf35e8bd7dc6e974d17d00" category="list-text">ノード 4 をインストールしてブートします。</block>
  <block id="c62822fe3e3275534a8fb949d6c66e6c" category="list-text">ノード 4 で FC または CNA の設定を行います。</block>
  <block id="57bf5699914e63878247f19a25930b05" category="list-text">ノード 4 が正常にインストールされていることを確認</block>
  <block id="1ed5ba60b18e0aad565c48c7e13368fc" category="list-text">ノード 4 のネットワーク構成をリストアします</block>
  <block id="2c9672ea46aeb54c5860dc07332bc88b" category="list-text">node2 によって所有されている SAN 以外のデータ LIF を node3 から node4 に再配置し、 node4 にある SAN LIF を確認します。</block>
  <block id="ae88ee721c31093785205944b85aa4ee" category="paragraph">ステージ 5 終了時のアグリゲートの所有権：</block>
  <block id="478c619523c38faa7066d2d25b446a3d" category="list-text">node3 は、 node1 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="c2583ec3499fda8ccfebbd517d0af4e6" category="list-text">node4 は、 node2 に属していたアグリゲートのホーム所有者および現在の所有者です。</block>
  <block id="f76e06dd184bc4ee38bfcca355bec6fd" category="cell">ステージ 6 ：アップグレードを完了する</block>
  <block id="b112f13cf4b353be9d52a7a0591716fd" category="list-text">システムが正しく設定されていることを確認します。</block>
  <block id="6849ebd666f25feda5374c9954336e52" category="list-text">新しいコントローラモジュールで Storage Encryption をセットアップします。</block>
  <block id="ab04d447601d753d6450dcae75a3b355" category="list-text">新しいコントロールモジュールで NetApp Volume Encryption をセットアップします。</block>
  <block id="f6575cd6c144b0fafc0a4706e44b7184" category="list-text">古いシステムの運用を停止</block>
  <block id="01f95e082b71c8b8f530696c5c1e79f6" category="list-text">必要に応じて NetApp SnapMirror の処理を再開</block>
  <block id="cdd3eef7b8578a295d456f9eaf566e58" category="summary">ノード 3 でネットワーク構成を確認したら、ノード 2 からノード 3 にアグリゲートを再配置します。</block>
  <block id="338e1133e592584bd1dc26b643cbe02f" category="paragraph">ノード 3 のネットワーク設定を確認し、ノード 2 からノード 3 にアグリゲートを再配置する前に、ノード 2 に現在あるノード 1 に属する NAS データ LIF が node2 からノード 3 に再配置されたことを確認する必要があります。また、ノード 3 に SAN LIF が存在することも確認する必要があります。</block>
  <block id="f329a7087048b2fb128acd99205356e2" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 3 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="a29257abbaad84467babad354360d285" category="paragraph">これらのチェックの実行後、 node1 で所有されているルート以外のアグリゲートと NAS データ LIF が新しいコントローラ node3 に再配置されます。リソースの再配置が完了すると、コントローラの交換処理が一時停止します。</block>
  <block id="6b63a169d7b58dab073cd5e6b620fc2d" category="paragraph">LIF が削除された場合は、次のコマンドを使用して、ホームノードをノード 3 にリストアします。</block>
  <block id="b7041cc3a3bab5f1b9192a9fcb805812" category="summary">MetroCluster FC 構成の場合は、ディザスタリカバリ / フェイルオーバーサイトのノードを交換する必要があります。</block>
  <block id="01a591d046b462278053f73d43eaefe4" category="paragraph">MetroCluster FC 構成の場合は、できるだけ早くディザスタリカバリ / フェイルオーバーサイトのノードを交換する必要があります。コントローラモデルの不一致が原因でディザスタリカバリのミラーリングがオフラインになるため、 MetroCluster 構成内のコントローラモデルの不一致はサポートされません。2 番目のサイトでノードを交換するときに MetroCluster チェックをバイパスするには、コマンドの --skip-metro-check true を使用します。</block>
  <block id="c39ea8ae7ab96639c1566b21005a53e1" category="summary">ネットアップサポートサイトから入手できる Config Advisor ツールを使用できます。</block>
  <block id="f1b92e8f33cf66355b4b9762bf95256b" category="doc">MetroCluster 構成エラーがないかどうかを確認します</block>
  <block id="7111f40126e236c3f7858ae25ad53307" category="paragraph">ネットアップサポートサイトで入手できる Config Advisor ツールを使用して、代表的な構成エラーがないかどうかを確認できます。</block>
  <block id="4765d4c84ae977a0d2fd9458912cf094" category="paragraph">Config Advisor は、構成の検証や健常性のチェックに使用できるツールです。データ収集とシステム分析のために、セキュアなサイトにもセキュアでないサイトにも導入できます。</block>
  <block id="0109999bfef624f78c3dcf4fb94f11ba" category="admonition">Config Advisor のサポートには制限があり、オンラインでしか使用できません。</block>
  <block id="865e9b4ef52f3b0d3050c8b3c14eb660" category="inline-link-macro">Active IQ Config Advisor</block>
  <block id="32a404f0f31163f59d88f2d052711ecf" category="list-text">をダウンロードします <block ref="02685666481d8fcfc63d60bb8f2d7352" category="inline-link-macro-rx"></block> ツール。</block>
  <block id="6afe954858ef53a16278f4735833c1a5" category="list-text">Active IQ Config Advisor を実行し、出力を確認して推奨された方法で問題に対処します。</block>
  <block id="eeb639c3d3a71ea32a9414c5e5e05d42" category="summary">ノード 1 をノード 3 に交換する前に、ルート以外のアグリゲートを移動する必要があります。</block>
  <block id="dd019fbf939676387b29c50185dd26bb" category="paragraph">ノード 1 をノード 3 に交換する前に、ルート以外のアグリゲートと NAS データ LIF をノード 1 からノード 2 に移動してから、ノード 1 のリソースをノード 3 に移動する必要があります。</block>
  <block id="231d6537090582d94372987139e9087b" category="paragraph">この処理は、タスクの開始時にすでに一時停止されている必要があります。手動で再開する必要があります。</block>
  <block id="356fd2e8c1c464dccb700641317d2900" category="admonition">アグリゲートおよび LIF のホーム所有者は変更されず、現在の所有者のみが変更されます。</block>
  <block id="dc84d077beb77f7f63fcf90bdccc812c" category="list-text">次のコマンドを使用して、アグリゲートの再配置と NAS データ LIF の移動の処理を再開します。</block>
  <block id="44d6ab00bef397f6537d95a47a570251" category="paragraph">ルート以外のアグリゲートと NAS データ LIF はすべて、 node1 から node2 に移行されます。</block>
  <block id="1a5ea8528c363200c81b97bf8f1cbdc7" category="paragraph">処理が一時停止することで、ノード 1 のルート以外のアグリゲートと SAN 以外のデータ LIF がすべて node2 に移行されているかどうかを確認できます。</block>
  <block id="43661f4c70db27cdfea85162a88660c4" category="list-text">処理が中断されたまま、次のコマンドを使用して、ルート以外のすべてのアグリゲートが node2 上のそれぞれの状態でオンラインになっていることを確認します。</block>
  <block id="9c328071e0321bfbe1d164cac2c22ebd" category="paragraph">「 storage aggregate show -node &lt;node2&gt; -state online -root false 」のように表示されます</block>
  <block id="761df4f887d66569090abb51e2ec705f" category="paragraph">アグリゲートがオフラインになった場合、または node2 で外部になった場合は、各アグリゲートに対して 1 回、 node2 で次のコマンドを使用してアグリゲートをオンラインにします。</block>
  <block id="f999b6b276f2c64e10bfb3630f92f94c" category="list-text">node2 で次のコマンドを使用し、出力を調べて、すべてのボリュームがオンラインであることを確認します。</block>
  <block id="b3b5d42abc670ac795f4b90cfc221655" category="paragraph">volume show -node &lt;node2&gt; -state offline`</block>
  <block id="074f2db71729d7f84803e85e33520125" category="paragraph">node2 上にオフラインのボリュームがある場合は、各ボリュームに対して 1 回、 node2 で次のコマンドを使用してオンラインにします。</block>
  <block id="8c0f6eba4a2b3bef1eeefc2c5a412d5a" category="paragraph">このコマンドで使用する「 &lt;vserver -name&gt; 」は、前の volume show コマンドの出力に含まれています。</block>
  <block id="9d3161968a4b5d5a467ded6255629741" category="list-text">LIF が 1 つでも停止している場合は、各 LIF に対して次のコマンドを実行して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="ec91f2dd66cb691d783fba58df9e214d" category="summary">ノードペアのアップグレード中に障害が発生する可能性があります。</block>
  <block id="9fd68cc494a9f57cae67ac737ab1370f" category="paragraph">ノードペアのアップグレード中に障害が発生する可能性があります。ノードがクラッシュする、アグリゲートが再配置されない、または LIF が移行されない可能性があります。障害の原因とその解決策は、アップグレード手順の実行中に障害が発生したタイミングによって異なります。</block>
  <block id="148cb01915f73b429fb4402cc046fed1" category="paragraph">手順の各フェーズについては、セクションの表を参照してください <block ref="57e14e08755134bb6fef9ad899bb58ee" category="inline-link-macro-rx"></block>。発生する可能性のある障害の情報は、手順のフェーズ別に表示されます。</block>
  <block id="291e8826d2b19041a0543b448060f314" category="paragraph">ノード 4 でオンボードの FC ポート、オンボードのユニファイドターゲットアダプタ（ UTA / UTA2 ）ポート、または UTA / UTA2 カードが使用されている場合は、残りの手順を完了する前に設定する必要があります。</block>
  <block id="3a1c9ff3b61fc7974ebcd7a1576841ce" category="paragraph">完了する必要がある場合があります <block ref="e4a308316f89855579fcbb31b7ca4dfa" category="inline-link-macro-rx"></block>、 <block ref="f83114d9adca40bee6dbc7b70e5770d9" category="inline-link-macro-rx"></block>、または両方のセクション。</block>
  <block id="733dccee9c3996eac175c74d7df58045" category="inline-link-macro">ノード 4 の設置とブート</block>
  <block id="cbab6d0aadc6694aef8d0ec78a8d7f45" category="admonition">ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクが搭載されたシステムをアップグレードする場合は、に進みます <block ref="f694066eff0c2ca8cd3a02623214690d" category="inline-link-macro-rx"></block>。ただし、 V シリーズシステムを使用している場合や FlexArray 仮想化ソフトウェアを使用していて、ストレージアレイに接続している場合に、 node4 にはオンボードの FC ポート、オンボードの UTA / UTA2 ポート、 UTA / UTA2 カードがない場合は、に戻る必要があります <block ref="e1cdeb83e1976a7e853b163ee26d3201" category="inline-link-macro-rx"></block> ステップ 22 でセクションを再開します。ノード 4 に十分なラックスペースがあることを確認してください。node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="e4a308316f89855579fcbb31b7ca4dfa" category="list-text"><block ref="e4a308316f89855579fcbb31b7ca4dfa" category="inline-link-macro-rx"></block></block>
  <block id="f83114d9adca40bee6dbc7b70e5770d9" category="list-text"><block ref="f83114d9adca40bee6dbc7b70e5770d9" category="inline-link-macro-rx"></block></block>
  <block id="cd7dd5075be56af4a3298feff04bb98a" category="paragraph">ノード 4 にオンボードまたは FC アダプタのいずれかの FC ポートがある場合は、ポートが事前に構成されていないため、ノードを稼働状態にする前にポートの設定を行う必要があります。ポートが設定されていないと、サービスが停止する可能性があります。</block>
  <block id="e924d268e6beb8d3d89f18a90dd8d9f9" category="paragraph">セクションに保存した node2 の FC ポート設定の値を確認しておく必要があります <block ref="94f2dfd916315926f685ba65e48c6e25" category="inline-link-macro-rx"></block>。</block>
  <block id="ac6ef9b42d869c3911e52e8691306c08" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 アダプタが搭載されている場合は、で設定します <block ref="f83114d9adca40bee6dbc7b70e5770d9" category="inline-link-macro-rx"></block>。</block>
  <block id="b075444cf1672de101272f1c40d6530b" category="paragraph">* 重要 * ：ご使用のシステムにストレージ・ディスクがある場合は、クラスタ・プロンプトでこのセクションにコマンドを入力する必要があります。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがストレージアレイに接続されたシステムの場合は、このセクションのメンテナンスモードでコマンドを入力します。</block>
  <block id="fb3f66b3a8d32dace037f5fc64cdcb39" category="cell">「 system node hardware unified-connect show 」コマンドを使用します</block>
  <block id="e74c3e16ce027a70a9ed5b69517af243" category="cell">次のコマンドを使用します。 ucadmin show</block>
  <block id="c5c0e497c3f1186f3d1cfecfc658c546" category="paragraph">システムには、システム上のすべての FC アダプタと統合ネットワークアダプタに関する情報が表示されます。</block>
  <block id="ede48791c6a4d48413c294cc39314600" category="list-text">ノード 4 の FC 設定とノード 1 から前に取得した設定を比較します。</block>
  <block id="aff764c911b4541452722d04dd817822" category="paragraph">次のいずれかのコマンドを使用して、必要に応じて node4 の FC ポートを変更します。</block>
  <block id="2835fab11f16b1e6b7950115632ebd62" category="list-text">イニシエータポートをプログラムするには、 ucadmin modify -m fc -t initiator &lt;adapter&gt; を使用します</block>
  <block id="2b82f33f2fca28990565d495f9d55cd3" category="paragraph">`-t` は FC4 のタイプで ' ターゲットまたはイニシエータです</block>
  <block id="e232209385eb7b98921ecdbaacea8f75" category="cell">必要に応じて、次のいずれかのコマンドを使用して、 node4 の FC ポートを変更します。 ucadmin modify -m fc -t initiator -f &lt;adapter_port_name&gt; `-t` は、 FC4 タイプ、ターゲット、またはイニシエータです。* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="f3ee9b289c7b437cc8c3738378219c2d" category="list-text">このセクションをスキップして、に進みます <block ref="f694066eff0c2ca8cd3a02623214690d" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="05f0b322edfcec7724f0be57734c3c56" category="list-text">に進みます <block ref="f83114d9adca40bee6dbc7b70e5770d9" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="6c7a7e3cf84ede169573b6ba6732f22e" category="list-text">node4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、 section_Check をスキップして UTA / UTA2 ポートを設定し、 node4 に戻ってブートノードを再開します <block ref="0079456745a775e1bbe83d8f5f3879c2" category="inline-link-macro-rx"></block>。</block>
  <block id="69e973a9aba58ba3c0012cb107497fbd" category="paragraph">ノード 4 でオンボード UTA / UTA2 ポートまたは UTA / UTA2A カードが使用されている場合は、アップグレードしたシステムの使用方法に応じて、ポートの設定を確認して設定する必要があります。</block>
  <block id="c0caef2dbd4158cab9473c4f3805c920" category="paragraph">UTA / UTA2 ポートは、ネイティブの FC モードまたは UTA / UT2A モードに設定できます。FC モードは FC イニシエータと FC ターゲットをサポートします。 UTA / UTA2 モードを使用すると、 NIC と FCoE の同時トラフィックで同じ 10GbE SFP+ インターフェイスを共有し、 FC ターゲットをサポートすることができます。</block>
  <block id="8076deb73ec5b74885a5b14258d5df96" category="paragraph">UTA / UTA2 ポートはアダプタまたはコントローラ上に次の構成で配置されます。</block>
  <block id="da3b32a8a5f86ee9c63b2d0328f453e3" category="list-text">UTA / UTA2 カードは、コントローラと同時に注文しても、希望するパーソナリティを持つ未設定の状態で出荷されます。</block>
  <block id="9fca14a117603ee6762ebe968e8cedec" category="list-text">新しいコントローラのオンボード UTA / UTA2 ポートは、要求したパーソナリティを持つように（出荷前に）設定されています。</block>
  <block id="898667c4cb95b7e44aafe17e4edf0567" category="paragraph">ただし、ノード 4 の UTA / UTA2 ポートの設定を確認し、必要に応じて変更してください。</block>
  <block id="504b32f9515b15fa8407335de4be00e7" category="paragraph">* 注意 * ：ストレージディスクがある場合は、メンテナンスモードに指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力します。ストレージアレイに接続された MetroCluster FC システム、 V シリーズシステム、または FlexArray 仮想化ソフトウェアを搭載したシステムがある場合、 UTA / UTA2 ポートを設定するにはメンテナンスモードにする必要があります。</block>
  <block id="5113998ac3c679e0d1220f045f54831f" category="list-text">ノード 4 で次のいずれかのコマンドを使用して、ポートが現在どのように設定されているかを確認します。</block>
  <block id="e1a8971092776bc2e25be6babad152ab" category="cell">「 system node hardware unified-connect show 」を参照してください</block>
  <block id="64da799aef6205bb6034c61f1f25c391" category="list-text">現在の SFP+ モジュールが目的の用途と一致しない場合は、正しい SFP+ モジュールに交換します。</block>
  <block id="89d66b059cd78c250aa205de02793541" category="list-text">ucadmin show コマンドの出力結果を調べ、 UTA / UTA2 ポートが希望するパーソナリティに対応しているかどうかを確認します。</block>
  <block id="d4a3eb778a9003e6551eb488099a389d" category="cell">CNA ポートの状況</block>
  <block id="2b7d6e150b1ad9a7324920d58add53e8" category="cell">に進みます <block ref="41c022824608ca37267e3212853fde36" category="inline-xref-macro-rx"></block>。</block>
  <block id="ed528e1897322b6f9d3ae5cee092d168" category="cell">手順 5 から 12 を省略して、に進みます <block ref="209c5aacdd4638183f37956eba312035" category="inline-xref-macro-rx"></block>。</block>
  <block id="30a868238f55d1d59e57331a33e79d19" category="list-text">[[Step5] 次のいずれかの操作を行います。</block>
  <block id="00558b45b3379fbfeee090bb3fc8abd9" category="cell">に進みます <block ref="7d9b1c67755aa16612302b9c355c6813" category="inline-xref-macro-rx"></block></block>
  <block id="fa41cb483f8360a7d59c8b696fb02b49" category="cell">手順 7 を省略して、に進みます <block ref="607aa23bcc4188751f11a440d7cfdfe4" category="inline-xref-macro-rx"></block>。</block>
  <block id="6d7d662b72a0f3cc51587f92267e8ede" category="list-text">アダプタがイニシエータモードで UTA / UTA2 ポートがオンラインの場合は、次のコマンドを使用して UTA / UTA2 ポートをオフラインにします。</block>
  <block id="8705313723fb2dd32f08af233e2289a4" category="list-text">[[Step7] 現在の設定が目的の使用方法と一致しない場合は、必要に応じて次のコマンドを使用して設定を変更します。</block>
  <block id="d014763bc3b52aee3850e01f8065200f" category="list-text">「 -m' 」はパーソナリティ・モードである FC または 10 GbE UTA です。</block>
  <block id="0f699653050619b444ac1605f3b71952" category="list-text">[[Step8] 次のコマンドを使用して設定を確認します。</block>
  <block id="010139319ae662f192792aba00c5a63f" category="list-text">次のいずれかのコマンドを使用して設定を確認します。</block>
  <block id="4cf4d3bfbda859f7fbe3247599afeba5" category="list-text">次のいずれかのコマンドをポートごとに 1 回入力して、ターゲットポートをオンラインにします。</block>
  <block id="b50635aa317c4f94943cbad3bf2ffdf2" category="list-text">ポートをケーブル接続します。</block>
  <block id="2f9e5b600497e991136b340ad3d95269" category="cell">に進みます <block ref="f694066eff0c2ca8cd3a02623214690d" category="inline-link-macro-rx"></block>。</block>
  <block id="5183e0a51a2803bd82cfb83c4040f112" category="cell">に戻ります <block ref="1619b1d4cec26b9f46f158ed5add4ab0" category="inline-link-macro-rx"></block> ステップ 23 で再開します。</block>
  <block id="b1770e3e9f16e83da5b9947f639e4f13" category="list-text">[[Step13 、 Step 13]] 次のコマンドを使用してメンテナンスモードを終了します。</block>
  <block id="204783b1ca658239a7b205df8e2d83dd" category="paragraph">「 boot_ontap menu</block>
  <block id="de81a1c588b1b95fdd8a4a333eeae4b9" category="paragraph">A800 にアップグレードする場合は、に進みます <block ref="fa7dc806bd5abc3aa70265946d09bc1c" category="inline-xref-macro-rx"></block></block>
  <block id="8daafd1de2ac95dd77afb1ec17e9b1f2" category="list-text">[[Step15]] ノード 4 でブートメニューに移動し、 22/7 を使用して非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで node2 と入力し、次の例のように node2 のディスクを node4 に再割り当てします。</block>
  <block id="ef6fe409d27a4f09810025db30744ed4" category="list-text">「 no disks found 」というメッセージが表示されてシステムがリブートループに入ると、システムが FC ポートまたは UTA/UTA2 ポートをターゲットモードにリセットしたため、ディスクが認識されないことを示します。これを解決するには、に進みます <block ref="0c8df7d679ee9d5c7ff34a354bf955fc" category="inline-xref-macro-rx"></block> 終了： <block ref="39250fdd2ade726a19cb2044252beb70" category="inline-xref-macro-rx"></block> または、セクションに移動します <block ref="f694066eff0c2ca8cd3a02623214690d" category="inline-link-macro-rx"></block>。</block>
  <block id="ebdea8e770813d0fc27333271895e3ab" category="list-text">[[Step17]] autoboot 中に Ctrl+C キーを押して 'loader&gt;` プロンプトでノードを停止します</block>
  <block id="7055309e280f6393c40e03e37c753033" category="list-text">LOADER プロンプトで、次のコマンドを使用してメンテナンスモードに切り替えます。</block>
  <block id="1977624184bad5bb2c4686086e5533bb" category="list-text">保守モードで次のコマンドを使用して、以前に設定したすべてのイニシエータポートをターゲットモードで表示します。</block>
  <block id="32e64bfc9eaa52cd3ef419a69f542d85" category="list-text">次のコマンドを使用して、ポートがイニシエータモードに変更されたことを確認します。</block>
  <block id="44e03e3f81d4e3e20c3339df5596b507" category="list-text">[[Step22]] ローダープロンプトで次のコマンドを使用して起動します。</block>
  <block id="b95ee0410132c4ed119eeaed71772b7f" category="list-text">[[Step23]] 外付けディスクのあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、ノード 2 のアグリゲートをルートアグリゲートとして設定して、ノード 2 のルートアグリゲートからノード 2 のノード 4 ノード 4 がブートするようにします。ルート・アグリゲートを設定するには ' ブート・メニューからオプション 5 を選択して ' 保守モードに切り替えます</block>
  <block id="534c28a3529827f81e0580e98c2c91b5" category="paragraph">次の手順では、 node4 に node2 のルートアグリゲートからブートするよう設定しています。</block>
  <block id="80ea489c9fe3e248776ed04c3374b13e" category="list-text">次のコマンドを使用して、 node2 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="bceb8f6bf2ef6f67a08ea5f6823b050c" category="list-text">次のコマンドを使用して、 node2 アグリゲートのステータスを確認します。</block>
  <block id="861d5850e7f44d03a56066581a70a27a" category="list-text">必要に応じて、次のコマンドを使用して node2 アグリゲートをオンラインにします。</block>
  <block id="b64fc01bc73df9f024483d0ebe029c8f" category="paragraph">'aggr_online root_aggr_from_&lt;node2&gt;] を選択します</block>
  <block id="f6af6ee83903c7fbac361fed3a52124e" category="list-text">次のコマンドを使用して、 node4 に元のルートアグリゲートからブートされないようにします。</block>
  <block id="99748e6869c558cd84e1f7cd78209e7e" category="paragraph">'aggr offline &lt;root_aggr_on_node4 &gt;`</block>
  <block id="12ac6a4c07728084e1d485ddbc6e01fa" category="list-text">次のコマンドを使用して、 node2 のルートアグリゲートを node4 の新しいルートアグリゲートとして設定します。</block>
  <block id="fb7c6c0ffab0377659471575f7daad3e" category="paragraph">「 aggr options aggr_from_&lt;node2&gt; root 」のように指定します</block>
  <block id="bc999de7a280fbfd90fd9794fdc85710" category="list-text">次のコマンドを使用して、 node4 のルートアグリゲートがオフラインになっていること、 node2 から昇格されたディスクのルートアグリゲートがオンラインになっていること、および root に設定されていることを確認します。</block>
  <block id="6bab8b4510fec23b1120be927a0bfea7" category="admonition">前の手順を実行しない場合は、原因 node4 から内部ルートアグリゲートをブートするか、原因システムが新しいクラスタ構成が存在すると想定するか、あるいはクラスタ構成を特定するように求められる可能性があります。</block>
  <block id="b72c69a60f695309089392e6d394557c" category="doc">NX-OS ソフトウェアおよび RCF のインストール</block>
  <block id="7731c8a45a101fea978a6844183a8e0b" category="section-title">Cisco Nexus 9336C-FX2 クラスタスイッチに NX-OS ソフトウェアと RCF をインストールします</block>
  <block id="44cdf2e7271b8e2fcbb9adb04d66c093" category="paragraph">Cisco NX-OS ソフトウェアとリファレンス構成ファイル（ RCF ）は、 Cisco Nexus 9336C-FX2 クラスタスイッチにインストールする必要があります。</block>
  <block id="3a03c0112ae32bf170b77bdb16df275a" category="paragraph">クラスタスイッチに NX-OS ソフトウェアと RCF をインストールする前に、次の条件が満たされている必要があります。</block>
  <block id="c9f785db14b6fdfb7deea12d689be994" category="list-text">クラスタが完全に機能している必要があります（ログにエラーがあるなどの問題が発生していない）。</block>
  <block id="73b841d07a1301889e57bfc407d7e585" category="list-text">NX-OS だけをインストールして現在の RCF バージョンをそのまま使用する場合は、目的のブートイメージを反映するように、 RCF で必要なブート設定を確認または設定しておく必要があります。</block>
  <block id="7515327f81ebe9201b9f520ffe1eed07" category="list-text">現在のブートイメージを反映するようにブート設定を変更する必要がある場合は、あとでリブートしたときに正しいバージョンがインスタンス化されるように、 RCF を再適用する前に変更する必要があります。</block>
  <block id="080a81921746ffb2fe914bc2bd49f08e" category="list-text">RCF のインストール時に必要なスイッチへのコンソール接続が必要です。</block>
  <block id="70399670eb37f7ebf7bbd91e15766e17" category="inline-link">Cisco イーサネットスイッチ</block>
  <block id="9ba7e74098b77999866a4e29fb3a2ad2" category="list-text">サポートされている ONTAP 、 NX-OS 、および RCF のバージョンについては、 Cisco イーサネットスイッチのページにあるスイッチ互換性の表を参照してください。を参照してください<block ref="5c27bdff6f5cc32ce77bb635aee5a3ec" category="inline-link-rx"></block> を参照してください。</block>
  <block id="a8f8edb7442235385b4a149af7d45b04" category="list-text">RCF のコマンド構文と、 NX-OS のバージョンにあるコマンド構文との間には、コマンドの依存関係が存在する場合があります。</block>
  <block id="454d8bacc17503d670940b88fdf44b2a" category="inline-link">Cisco Nexus 9000 シリーズスイッチ</block>
  <block id="93bcc5669f0e6711d6aba3689fb32eee" category="list-text">Cisco スイッチのアップグレードおよびダウングレード手順の詳細については、 Cisco の Web サイトで入手可能な、適切なソフトウェアおよびアップグレードガイドを参照しておく必要があります。を参照してください<block ref="be7ba65926f2f461bdeaf4115306601b" category="inline-link-rx"></block> を参照してください。</block>
  <block id="0e9e9e2c6f88c5f4c53342802b95a81a" category="list-text">最新の RCF が必要です。</block>
  <block id="1231369e1218613623e1b520c27ce190" category="section-title">初期セットアップ</block>
  <block id="3a5235a970574c03c491ba816b7efcc5" category="paragraph">この手順の例では、 2 つのノードを使用します。これらのノードは、 A400 コントローラに応じて 2 つの 100GbE クラスタインターコネクトポート e3a と e3b を使用します。を参照してください<block ref="e8018b6e740a667345f4bcc94e4023fc" category="inline-link-rx"></block> をクリックして、プラットフォームのクラスタポートが正しいことを確認します。</block>
  <block id="1a5fbb9c78227a044a7d11a646c64e2a" category="admonition">コマンド出力は、 ONTAP のリリースによって異なる場合があります。</block>
  <block id="08a3b4f30cd799b9c46ef942ae0f647d" category="paragraph">この手順の例では、スイッチとノードで次の命名法を使用しています。</block>
  <block id="21cdd5286ad338ac1e1ff083d62b5d6d" category="list-text">2 つの Cisco スイッチの名前は、 _CS1_AND _CS2__ です。</block>
  <block id="6169ae5d5db5b009247efff892416b21" category="list-text">ノード名は _cluster1-01 と _cluster1-02 _ です。</block>
  <block id="14cce8700b380b41ee7141783958adc0" category="list-text">クラスタ LIF の名前は、 cluster1-02 および cluster1-01_clus1_clus1_clus2_cluster1 については、 cluster1-01 および _cluster1-02 _clus1_and _cluster1-02 _clus2_cluster2 についてはとなります。</block>
  <block id="47260d8977bfed7fc2ab803dd06d671b" category="list-text">cluster1 ： * &gt; プロンプトは、クラスタの名前を示します。</block>
  <block id="f0db4a1725ddf2683998fa54fd370447" category="admonition">手順では、 ONTAP コマンドと Cisco Nexus 9000 シリーズスイッチコマンドの両方を使用する必要があります。特に明記されていないかぎり、 ONTAP コマンドを使用します。</block>
  <block id="49bbe8c2f71c4791413418d964b2b67e" category="list-text">[[step1] このクラスタで AutoSupport が有効になっている場合は、 AutoSupport メッセージ「システムノード AutoSupport invoke -node * -type all -message MAINT= x h ’を呼び出して、ケースの自動作成を抑制します</block>
  <block id="50a6450efe6f48e63fe6cdc703ef260f" category="paragraph">x は、メンテナンス時間の長さ（時間単位）です。</block>
  <block id="87a3bb7a9a30a69bb1b97bb3f2eb5329" category="list-text">[[step2] 権限レベルを advanced に変更します。続行するかどうかを尋ねられたら、「 y 」と入力します。「 set -privilege advanced 」</block>
  <block id="4f21ff6f61e1071606649c4871ef7bf7" category="paragraph">advanced のプロンプト（ * &gt; ）が表示されます。</block>
  <block id="27cc2dbd07956c633e69ce2c76dc9459" category="list-text">[[step3] 各クラスタインターコネクトスイッチの各ノードで設定されているクラスタインターコネクトインターフェイスの数を表示します。「 network device-discovery show -protocol cdp</block>
  <block id="9a2e9547e1f8cfdcb2f137afb07f156e" category="list-text">[[step4] 各クラスタインターフェイスの管理ステータスまたは動作ステータスを確認します。</block>
  <block id="812c73458a9bcfba11e9f9ce18f5d870" category="list-text">ネットワーク・ポートの属性を表示します network port show – ipspace Cluster</block>
  <block id="73fa057e8ea70ff9fcaebfa5fb04c0df" category="list-text">LIF に関する情報を表示します。「 network interface show -vserver Cluster</block>
  <block id="4c6b6e8d0256a57f802a767c3cda666d" category="list-text">[[step5] リモートクラスタ LIF に ping を実行します :cluster ping-cluster -node node-name`</block>
  <block id="425edecc172c1a104da4a8a9f52919c4" category="list-text">[[step6] すべてのクラスタ LIF で auto-revert コマンドが有効になっていることを確認します。「 network interface show -vserver Cluster -fields auto-revert</block>
  <block id="f680b3f7a1e59ca77ebee96ca084b070" category="list-text">[[step7] 次のコマンドを使用して、スイッチ関連のログファイルを収集するためのイーサネットスイッチヘルスモニタのログ収集機能を有効にします。</block>
  <block id="6724e1022893a9633cfb2312f0732331" category="list-text">「システムスイッチイーサネットログセットアップ - パスワード」</block>
  <block id="59f5de53d0bcaeeb4e4e9818bbf75f18" category="list-text">「システムスイッチのイーサネットログの有効化」</block>
  <block id="c0f264a6f90e5505b277b8a8526dbfba" category="admonition">これらのコマンドのいずれかでエラーが返される場合は、ネットアップサポートにお問い合わせください。</block>
  <block id="115f48600c555ef0c26ae33b9c750836" category="section-title">Cisco Nexus 9336C-FX2 クラスタスイッチに NX-OS ソフトウェアをインストールします</block>
  <block id="e32f30672bced30275c59561547bb9ca" category="paragraph">この手順を使用して、 Cisco Nexus 9336C-FX2 クラスタスイッチに NX-OS ソフトウェアをインストールできます。</block>
  <block id="315023ecf41390bf3da5256a508a3f74" category="list-text">[[step1] クラスタスイッチを管理ネットワークに接続します。</block>
  <block id="0ad4621be6ed680f656c10d66806f36d" category="list-text">[step2] NX-OS ソフトウェアおよび RCF をホストするサーバへの接続を確認するには、 ping コマンドを使用します。</block>
  <block id="df388e62dd393d7a7a4ecd0894d8991b" category="paragraph">次の例では、スイッチが IP アドレス「 172.19.2.1 」のサーバに接続できることを確認します。</block>
  <block id="980488afb0b91fa49e08977b96694389" category="list-text">[[step3] NX-OS ソフトウェアおよび EPLD イメージを Nexus 9336C-FX2 スイッチにコピーします。</block>
  <block id="b58ca1d337150f9579b9262d528aa7ac" category="list-text">[[step4]] NX-OS ソフトウェアの実行中のバージョンを確認します : 'how version`</block>
  <block id="375e9b6b1ba3b7632a630ee8ec094411" category="list-text">[[step5] NX-OS イメージをインストールします。</block>
  <block id="fae0bfa2a533f948ea8bab875acb2ef9" category="admonition">イメージファイルをインストールすると、スイッチをリブートするたびにロードされます。</block>
  <block id="a35e2c8e813cfa4f98b971dbb32cfbcb" category="list-text">[[step6] スイッチのリブート後に NX-OS ソフトウェアの新しいバージョンを確認します : 'how version`</block>
  <block id="ad02163f2b7e000ab6eb0f542bcdfb95" category="list-text">[[step7] EPLD イメージをアップグレードし、スイッチをリブートします。</block>
  <block id="f3bf0508f81cb16d8f1183a5babd44ab" category="list-text">[[step8] スイッチのリブート後に再度ログインし、新しいバージョンの EPLD が正常にロードされたことを確認します。</block>
  <block id="c4d4380c105d86618a1c8e5e7e278abc" category="section-title">Cisco Nexus 9336C-FX2 クラスタスイッチに RCF をインストールします</block>
  <block id="58fdd965128fa855a145ee5285e3f421" category="paragraph">RCF は、 Nexus 9336C-FX2 クラスタスイッチを初めてセットアップしたあとにインストールできます。この手順を使用して、クラスタスイッチの RCF バージョンをアップグレードすることもできます。</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="section-title">このタスクについて</block>
  <block id="59d98c4371d8b96126b918b6e485c9d7" category="list-text">2 つの Cisco スイッチの名前は 'CS1' および CS2' です</block>
  <block id="17c77507bb5bee4b130dcc96474dd7aa" category="list-text">ノード名は「 cluster1-01 」、「 cluster1-02 」、「 cluster1-02 」、「 cluster1-02 」、および「 cluster1-02 」です。</block>
  <block id="184da567032abe3561c5d2ad05b67cc6" category="list-text">クラスタ LIF の名前は、「 cluster1-01 _ clus1 」、「 cluster1-01 _ clus2 」、「 cluster1-02 _ clus1 」、「 cluster1-02 _ clus2 」、「 cluster1-03_clus1 」です。 「 cluster1-03_clus2` 」、「 cluster1-02 」、「 cluster1-04_clus1 」、「 cluster1-04_clus2 」。</block>
  <block id="6f59ffb0aff1eef7e0d6e4639fc8b552" category="list-text">[[step1] クラスタスイッチに接続されている各ノードのクラスタポートを表示します。「 network device-discovery show 」を参照してください</block>
  <block id="57bb9a852f73263e3b799b55fcc31118" category="list-text">[[step2] 各クラスタポートの管理ステータスおよび動作ステータスを確認します。</block>
  <block id="4a72d00c859a5662166fde201a6f8401" category="list-text">[[step3]] すべてのクラスタポートが正常な状態で稼働していることを確認します : 「 network port show – role cluster 」</block>
  <block id="1efe831e4027761116f05afe4a76b490" category="list-text">[[step4]] すべてのクラスタインターフェイス（ LIF ）がホームポートにあることを確認します：「 network interface show -role cluster 」</block>
  <block id="e6eb77b46f5038fe2be7c6a3e46fd5e8" category="list-text">[[step5] クラスタが両方のクラスタスイッチの情報を表示することを確認します： 'system cluster-switch show-is-monitoring -enabled -operational true</block>
  <block id="119f0d0479f9941f749052021f33ac87" category="list-text">[[step6] ] クラスタ LIF での自動リバートを無効にします。</block>
  <block id="2014cf2f27a4e96e96bad19ce837c9d7" category="list-text">[step7] クラスタスイッチ cs2 で、ノードのクラスタポートに接続されているポートをシャットダウンします。</block>
  <block id="9bd7b09d3a604bde6a4f23c6e7264720" category="list-text">[[step8] クラスタ LIF が、クラスタスイッチ cs1 でホストされているポートに移行されていることを確認します。この処理には数秒かかることがあります。「 network interface show -role cluster 」のように表示されます</block>
  <block id="f7844b627d275305d802a9082359ba58" category="list-text">[[step9] クラスタが正常であることを確認します : cluster show</block>
  <block id="ff2853f03b66c4604ca015098ade032e" category="list-text">[[step10] スイッチ cs2 の構成をクリーニングし、基本的なセットアップを実行します。</block>
  <block id="1504cf88a17b3708e24bb6d08d1219aa" category="list-text">設定を消去します。この手順では、スイッチへのコンソール接続が必要です。</block>
  <block id="a60e6126941c3f2e1aeab2b7f1fd5da6" category="list-text">スイッチの基本設定を実行します。</block>
  <block id="3665b3f0fc7160f9eec0fa81485c0fda" category="inline-link">Cisco Nexus 9000 シリーズ NX-OS コマンドリファレンスガイド</block>
  <block id="a6eb32320381dab7fc6dcf483ed01eaa" category="list-text">[[step11]] FTP 、 TFTP 、 SFTP 、または SCP のいずれかの転送プロトコルを使用して、 RCF をスイッチ cs2 のブートフラッシュにコピーします。Cisco コマンドの詳細については、『』の該当するガイドを参照してください<block ref="ddab0e4c59f1173186c88b8e6d2844d1" category="inline-link-rx"></block>。</block>
  <block id="4ec9c300967777e19db00635cec839a4" category="paragraph">この例は、 TFTP を使用して、スイッチ cs2 のブートフラッシュに RCF をコピーする方法を示しています。</block>
  <block id="1cfc3a092f0e63fac946beaaf955f2f2" category="list-text">[[step12]] 以前にブートフラッシュにダウンロードした RCF を適用します。Cisco コマンドの詳細については、『』の該当するガイドを参照してください<block ref="ddab0e4c59f1173186c88b8e6d2844d1" category="inline-link-rx"></block>。</block>
  <block id="2a187aceff13c243d7f89e5b96b7f2cf" category="paragraph">この例は、スイッチ cs2 にインストールされている RCF ファイル「 Nexus_9336C_RCF_v1.6 -Cluster-HA-Breakout .txt 」を示しています。</block>
  <block id="7fdc0c62cb85afeb6470d9bfc6ecf80c" category="list-text">[[step13]] 'How banner motd コマンドのバナー出力を調べますスイッチの設定と動作を適切に行うには、次の手順を参照して実行する必要があります。</block>
  <block id="5a7ad2c453ed3535cf40e5c895ce66b6" category="list-text">[[step14]] RCF ファイルが正しい新しいバージョンであることを確認します :'how running-config</block>
  <block id="47c173b91782927bfc36acfeeaec5f9f" category="paragraph">出力をチェックして正しい RCF があることを確認する場合は、次の情報が正しいことを確認してください。</block>
  <block id="2a4c49daad6f24fc930342baa230202a" category="list-text">RCF バナー</block>
  <block id="f867470f4d681a0d1ba65ec5afb71681" category="list-text">ノードとポートの設定</block>
  <block id="5bd909d2aabb76836e8fdad730968abb" category="list-text">カスタマイズ</block>
  <block id="6581e275d5beff2b5ac80574ca81f3ef" category="paragraph">出力内容はサイトの構成によって異なります。ポートの設定を確認し、インストールした RCF に固有の変更がないかリリースノートを参照してください。</block>
  <block id="f84dbe517c4cab37d96220b08c6a7430" category="list-text">RCF のバージョンとスイッチの設定が正しいことを確認したら、 running-config ファイルを startup-config ファイルにコピーします。</block>
  <block id="1d7efc47666ab70e4a9a2f49059d6f36" category="paragraph">Cisco コマンドの詳細については、『』の該当するガイドを参照してください<block ref="ddab0e4c59f1173186c88b8e6d2844d1" category="inline-link-rx"></block>。</block>
  <block id="0b2d5b5929738c77eb7339e80be204b4" category="list-text">[[step16]] スイッチ cs2 をリブートします。スイッチのリブート中にノードで報告される「クラスタポートが停止している」イベントは無視してかまいません。</block>
  <block id="8c100710ef7da1c5a25caac2ea22990b" category="list-text">[[step17]] 同じ RCF を適用し、実行中の設定をもう一度保存します。</block>
  <block id="94424f8858d01ed962dd87641b9776a6" category="list-text">[[step18]] クラスタのクラスタポートの健常性を確認します。</block>
  <block id="dd731ffd2ea93d5d4f7a6ec37ae136dc" category="list-text">クラスタ内のすべてのノードで e0d ポートが正常に稼働していることを確認します。「 network port show -role cluster 」</block>
  <block id="a8b215fa6b6d814a7e68d02c02b35409" category="list-text">クラスタからスイッチのヘルスを確認します（ LIF が e0d にホームでないため、スイッチ cs2 が表示されない可能性があります）。</block>
  <block id="e3b96995522578c69012ad7e2f0b94cd" category="admonition">スイッチにロードした RCF バージョンによっては、 cs1 スイッチコンソールで次の出力が表示されることがあります。</block>
  <block id="7975bfd302a0d902636cf58d15d4b6ba" category="list-text">[[step19]] クラスタスイッチ cs1 で、ノードのクラスタポートに接続されているポートをシャットダウンします。次の例では、手順 1 の出力例を使用しています。</block>
  <block id="276b12f283110f76d275def982eccbee" category="list-text">[step20] クラスタ LIF がスイッチ cs2 でホストされているポートに移行されたことを確認しますこの処理には数秒かかることがあります。「 network interface show -role cluster 」のように表示されます</block>
  <block id="e0d0ae7057b201d97ec22f91ff82d2f2" category="list-text">[[step2]] クラスタが正常であることを確認します : 'cluster show`</block>
  <block id="010322043e6a0f2cb377ddc319acddfc" category="list-text">[[step22]] スイッチ cs1 で手順 7 から 14 を繰り返します。</block>
  <block id="9baf7dc8ac289c210d4e50f17e9a797c" category="list-text">クラスタ LIF で自動リバートを有効にします。</block>
  <block id="7d570f5616c08513ff751b28be7d62ef" category="list-text">[[step24]] スイッチ cs1 をリブートします。これは、クラスタ LIF のホームポートへのリバートをトリガーする際に行います。スイッチのリブート中にノードで報告される「クラスタポートが停止している」イベントは無視してかまいません。</block>
  <block id="a648d759b45a2e063a5bb5f0ce05aaa0" category="list-text">[[step25]] クラスタポートに接続されているスイッチポートが稼働していることを確認します。</block>
  <block id="7fd9069a29ec1f3894e4bf3f8e46af56" category="list-text">[[step26]] CS1 と CS2 の間の ISL が機能していることを確認します : 'how port-channel summary</block>
  <block id="7e07a9e5464a35d66ee24e131cbf4591" category="list-text">[[step27]] クラスタ LIF がホームポートにリバートされたことを確認します。「 network interface show -role cluster 」</block>
  <block id="97d338e8c659dde4173ceb593a7ccc43" category="list-text">[step28]] クラスタが正常であることを確認します : cluster show</block>
  <block id="309143a0feb1ae92f31c8e20212e99bb" category="list-text">[[step29]] リモートクラスタインタフェースに ping を実行して接続を確認します : cluster ping-cluster -node local</block>
  <block id="e03b30f7a942f40e3ef9fa2dd25c4910" category="section-title">Cisco Nexus 9336C-FX2 ストレージスイッチに RCF をインストールします</block>
  <block id="d52af4db26cdc6972cb223d9c6949efd" category="paragraph">リファレンス構成ファイル（ RCF ）は、 Cisco Nexus 9336C-FX2 ストレージスイッチでアップグレードできます。</block>
  <block id="dd94efc46ba7285ebf184360d8bd2069" category="paragraph">ストレージスイッチの RCF をアップグレードする前に、次の条件が満たされている必要があります。</block>
  <block id="1ddd8cd97d47781400c93ef2648320ac" category="list-text">スイッチが完全に機能している必要があります（ログにエラーがないか、または同様の問題が発生していないか）。</block>
  <block id="67972398f3f6e677fdd5abecabee47b1" category="list-text">NX-OS だけをインストールして現在の RCF バージョンをそのまま使用する場合は、目的のブートイメージを反映するように、 RCF で必要なブート変数を確認または設定しておく必要があります。</block>
  <block id="14fbade2b67035c34eec7534fb6c6b2c" category="list-text">現在のブートイメージを反映するようにブート変数を変更する必要がある場合は、あとでリブートしたときに正しいバージョンがインスタンス化されるように、 RCF を再適用する前に変更する必要があります。</block>
  <block id="b75409ad20561d6d1e0855c872352b91" category="list-text">Cisco ストレージのアップグレードおよびダウングレード手順の詳細なドキュメントについては、 Cisco の Web サイトで入手可能な、適切なソフトウェアおよびアップグレードガイドを参照しておく必要があります。を参照してください<block ref="be7ba65926f2f461bdeaf4115306601b" category="inline-link-rx"></block> を参照してください。</block>
  <block id="cb3b33954945611e0ba8b2628e06d629" category="inline-link">Cisco イーサネットスイッチ</block>
  <block id="e69be1a8940ded4a86c983ea41ce101b" category="list-text">100GbE ポートの数は、で使用可能なリファレンス構成ファイル（ RCF ）で定義されています<block ref="78ccdd0a3e16d4d44b95043dbee8e2db" category="inline-link-rx"></block> ページ</block>
  <block id="d846658fd20202f0bde85173d25b3b6e" category="section-title">手順のまとめ</block>
  <block id="4d8d9a10a7f6c1d3adfc89b70d043ef4" category="list-text">スイッチとポートのヘルスステータスの確認（手順 1~4 ）</block>
  <block id="9a10130122f7ab40e88397de07680473" category="list-text">NX-OS イメージを Cisco スイッチ st2 にダウンロードし、リブートします（手順 5 ～ 8 ）。</block>
  <block id="f1e72cccd81c54e9702d2a17ef6741d6" category="list-text">RCF を Cisco スイッチ st2 にコピーする（手順 9-12 ）</block>
  <block id="fc914b7596e28ac17c34ab6409e4f76e" category="list-text">スイッチとポートのヘルスステータスを再確認する（手順 13 ~ 15 ）</block>
  <block id="b499c115983c87d2abc585368ecc8a68" category="list-text">Cisco スイッチ st1 について、手順 1 ～ 15 を繰り返します。</block>
  <block id="0296e3820f6a9017b3c45707a6679765" category="list-text">2 つのストレージスイッチの名前は _st1_and _st2__ です。</block>
  <block id="14c42e4d59f29697cd3c577b2c4d3d88" category="list-text">ノードは、 _ node1 _ と _ node2 _ です。</block>
  <block id="408a56ead85ecd9cd97d37a71b3aca37" category="list-text">このクラスタで AutoSupport が有効になっている場合は、 AutoSupport メッセージを呼び出してケースの自動作成を抑制します。「 system node AutoSupport invoke -node * -type all -message MAINT= xh</block>
  <block id="67c35d4cbdd5f01430776df014c4e83a" category="list-text">ストレージスイッチが使用可能であることを確認します。「 system switch ethernet show</block>
  <block id="be506e00d8c5a0f90848df43aaec57d1" category="list-text">[[step3]] ノードポートが正常で動作していることを確認します。「 storage port show -port-type enet 」</block>
  <block id="0bfcedc4c29046eab84a685e19eaaccb" category="list-text">[[step4] クラスタにストレージスイッチやケーブル接続の問題がないことを確認します：「 system health alert show -instance 」</block>
  <block id="3b8e340f7708513e47cdb40f8f417da8" category="list-text">[[step5] NX-OS イメージをスイッチ st2 にダウンロードします。</block>
  <block id="e7b725ded309e5f01ca39f1b7b8e4c37" category="list-text">システムイメージをインストールして、次回スイッチ st2 をリブートしたときに新しいバージョンがロードされるようにします。次の出力に示すように、スイッチは 10 秒後に新しいイメージでリブートされます。</block>
  <block id="0fb405635f99323f477dd34eaaaec21a" category="list-text">[[step7] 設定を保存します。</block>
  <block id="45ce5d616a97b4db0322e968ac3c0d3a" category="paragraph">次の例に示すように、システムをリブートするように求められます。</block>
  <block id="3b02f68343abf714cab240ec36648aa3" category="list-text">[[step8] 新しい NX-OS バージョン番号がスイッチ上にあることを確認します。</block>
  <block id="67589acf00f7ba71ca9338bb4e0fd1bb" category="list-text">[[step9] スイッチ st2 の RCF をスイッチのブートフラッシュにコピーします。 FTP 、 HTTP 、 TFTP 、 SFTP 、 SCP のいずれかの転送プロトコルを使用します。</block>
  <block id="bd7cf284a4de162c778c840fe7671baa" category="paragraph">次に、 HTTP を使用して、 RCF をスイッチ st2 のブートフラッシュにコピーする例を示します。</block>
  <block id="6e8b6368cdfe3dac206d3c34fea35245" category="list-text">[[step10] 以前にブートフラッシュにダウンロードした RCF を適用します。「 copy bootflash` 」</block>
  <block id="860bb58c533209a1a0e1a5a81daa9d56" category="paragraph">次の例は、 RCF ファイル「 Nexus_9336C_rcf_v1.6 -Storage.txt 」をスイッチ st2 にインストールする例を示しています。</block>
  <block id="124b319394ac2a4c7e0b96f784f3482c" category="list-text">[[step11]] RCF ファイルが正しい新しいバージョンであることを確認します :'how running-config</block>
  <block id="783607b7834c86426414bd326eac9af8" category="paragraph">* 重要： * 「 How banner motd 」コマンドのバナー出力で、「重要な注意事項」セクションの指示を読んで、スイッチの設定と操作が適切であることを確認してください。</block>
  <block id="ae568f7135a27b32b7e8bb3a276bd2ef" category="list-text">[[step12]] ソフトウェアのバージョンとスイッチの設定が正しいことを確認したら、スイッチ st2 の startup-config ファイルに running-config ファイルをコピーします。</block>
  <block id="1db78193f459bb20425c02c98a5d89e0" category="paragraph">Cisco コマンドの詳細については、『』の該当するガイドを参照してください<block ref="ddab0e4c59f1173186c88b8e6d2844d1" category="inline-link-rx"></block>。</block>
  <block id="2b5da61174f57535e5ac41ebce733b08" category="paragraph">次に 'running-config' ファイルが 'artup-config ファイルに正常にコピーされた例を示します</block>
  <block id="1b124e5a5283fd46117154de1b61cb91" category="list-text">[[step13]] 再起動後にストレージスイッチが使用可能であることを再確認します : 'system switch ethernet show</block>
  <block id="9d06968b9f870f0296b812437f447140" category="list-text">[[step14]] リブート後にスイッチポートが正常で動作していることを確認します。「 storage port show -port-type enet 」</block>
  <block id="ba8d8d5f101d57e32f0f1ea1e503148e" category="list-text">[[step15]] クラスタにストレージスイッチやケーブル接続に問題がないことを再確認します : 'system health alert show-instance</block>
  <block id="544cf4bb505f4a2b3281aab49c8c1d04" category="list-text">[[step16]] スイッチ st1 の手順に対して、この手順を繰り返します。</block>
  <block id="d96137d6b55b18690724fa521ebda2f1" category="list-text">ケースの自動作成を抑制した場合は、 AutoSupport メッセージ「 system node AutoSupport invoke -node * -type all -message MAINT=end 」を呼び出して作成を再度有効にします</block>
  <block id="34a5a87b0cc4e8609dc123f3eda8ae15" category="section-title">Cisco Nexus 9336C-FX2 共有スイッチに RCF をインストールします</block>
  <block id="111819cdc8331282a1e7d94476ab33fd" category="paragraph">ONTAP 9.9.9..1 から、 Cisco Nexus 9336C-FX2 スイッチを使用して、ストレージとクラスタの機能を共有スイッチシナリオに結合できます。</block>
  <block id="7630744f4654dfae7fcf3a382ce4f001" category="list-text">クラスタスイッチが完全に機能している必要があります（ログにエラーがあるなどの問題が発生していない）。</block>
  <block id="b1d65cecd9473fe90e922dee86b6e267" category="list-text">ストレージスイッチが完全に機能している必要があります（ログにエラーが記録されていないか、または同様の問題が発生していないことが必要です）。</block>
  <block id="0d67bfb67ba8f3b70c336fd689fcf72d" category="list-text">2 つのストレージスイッチの名前は _sh1_and _sh2_.</block>
  <block id="5d300e999224578cbf19f9938e2ceb44" category="list-text">ここで使用した例は、新しいスイッチに共有 RCF をロードします。</block>
  <block id="9a71e23595ce0b2db0bd8400f0f7a5f8" category="list-text">FTP 、 HTTP 、 TFTP 、 SFTP 、 SCP のいずれかの転送プロトコルを使用して、スイッチ sh2 上の RCF をスイッチブートフラッシュにコピーします。</block>
  <block id="3295046e59c21cadabd536af253fa5a6" category="paragraph">次に、 HTTP を使用して、 RCF をスイッチ sh2 のブートフラッシュにコピーする例を示します。</block>
  <block id="9359f59d81c8af8607852bd1a7e767bf" category="list-text">[step2] 以前にブートフラッシュにダウンロードした RCF を適用します。</block>
  <block id="1355622915562d855ddc30354a805a3d" category="paragraph">次に、スイッチ sh2 に RCF ファイル「 Nexus_9336C_RCF_v1.7-Cluster-HA-Storage.txt 」をインストールする例を示します。</block>
  <block id="1d9b11f893d3d9bba5e105e250f26c4e" category="list-text">[[step3]] RCF ファイルが正しい新しいバージョンであることを確認します : 'how running-config</block>
  <block id="10a6ccf9fc171d58769bff43b7d0e672" category="list-text">[[step4]] ソフトウェアのバージョンとスイッチの設定が正しいことを確認したら、スイッチ sh2 の startup-config ファイルに「 running-config 」ファイルをコピーします。</block>
  <block id="d8130767192c2723846f89cb58f48dc3" category="list-text">[[step5] スイッチ sh1 の手順に対して、この を繰り返します。</block>
  <block id="62bb127cfc33134b4b7ba3eb79ae05f3" category="doc">ストレージスイッチを再利用して、 SAT ストレージを備えたスイッチクラスタから移行する</block>
  <block id="5542e924104d087ae00a02e0143b2f6b" category="section-title">ストレージスイッチを移行します</block>
  <block id="29c04d28b21adc7e1a7b356455c263a4" category="inline-image-macro">スイッチ接続</block>
  <block id="7424e91fe1d742657d5ad736cc938704" category="paragraph">ストレージスイッチを再利用することで、 HA ペア 1 のストレージスイッチが共有スイッチになります。* スイッチ接続 * の配線図<block ref="6a2cf54f6a37518ec42d92fd7fd3e59c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09de4d47ba4a61383fa6bd8275ea0013" category="list-text">HA ペア 1 （および HA ペア 2 ）のストレージ構成が正しいこと、およびエラーがないことを確認します。「 system switch ethernet show</block>
  <block id="514085dcc3bcd7f871a43182b26fc37f" category="list-text">[step2] HA ペア 1 、 NSM224 パス A ケーブルをストレージスイッチ A から HA ペア 1 の NSM224 ストレージポート、ストレージスイッチ A のパス A に移動します</block>
  <block id="9adac45c8f65af4ce2b61c1a4a107e6f" category="list-text">HA ペア 1 のノード A から、 HA ペア 1 の場合は NSM224 ストレージポート、ストレージスイッチ A にケーブルを接続します</block>
  <block id="0e537830f3d70ee3a080b4d98d4c355a" category="list-text">HA ペア 1 のノード B から、ストレージスイッチ A の HA ペア 1 のノード B の NSM224 ストレージポートにケーブルを接続します</block>
  <block id="9585534fcb2acd1761f1ba9070b7baf0" category="list-text">HA ペア 1 に接続されたストレージスイッチ A が「 storage port show -port type enet 」と表示されていることを確認します</block>
  <block id="6b4eb003d068fdec4d54fd55af67485b" category="list-text">[[step6] 共有スイッチ A のストレージ RCF を共有 RCF ファイルに置き換えます。を参照してください <block ref="41062cda0a6ae510a0f118eb961870a4" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="dfaf1e0c7a26db603d75c12484eecbe5" category="list-text">HA ペア 1 に接続されたストレージスイッチ A が正常であることを確認します。「 system health alert show -instance 」</block>
  <block id="cc173b3b8d39723f6f1a95f88f27699a" category="list-text">[[step8] HA ペア 1 、 NSM224 パス B のケーブルをストレージスイッチ B から HA ペア 1 の共有 NS224 ストレージポートに移動し、パス B をストレージスイッチ B に移動します</block>
  <block id="5d5108c830c67272c71b7aadba12e4b2" category="list-text">HA ペア 1 のノード A のパス B から、 HA ペア 1 の共有ストレージポート、ノード A のパス B にケーブルを接続します</block>
  <block id="53b39cfff16d9870da3ecc23bf2f95ba" category="list-text">HA ペア 1 、ノード B 、パス B から、ストレージスイッチ B の HA ペア 1 、ノード B 、パス B の共有ストレージポートにケーブルを接続します</block>
  <block id="ce8c521f1923b2dd332b3fc771e23d2a" category="list-text">HA ペア 1 に接続されたストレージスイッチ B が正常であることを確認します。「 system health alert show -instance 」</block>
  <block id="7d2bca8f6a7efb4ad8be7d3f7b9740a4" category="list-text">[[step12]] 共有スイッチ B のストレージ RCF ファイルを共有 RCF ファイルで置き換えます。を参照してください <block ref="41062cda0a6ae510a0f118eb961870a4" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="607592482c84ee6e3ab8d00221a34400" category="list-text">[[step14]] HA ペア 1 のストレージ構成が正しいことを確認し、エラーがないことを確認します。「 system switch ethernet show 」</block>
  <block id="447638ceee95556dee2fdf9379e52c28" category="list-text">[[step15]] 共有スイッチ A と共有スイッチ B の間に ISL をインストールします。</block>
  <block id="8a6725809e9d102de1fa5e1c7d8c431d" category="inline-link-macro">Cisco Nexus 9336C-FX2 共有スイッチを交換します</block>
  <block id="afa9b8e6dc90129b62dcb7f7e629ccaf" category="list-text">[step16] スイッチ交換用の手順と共有の RCF を使用して、既存のクラスタスイッチから共有スイッチにクラスタネットワークを移行します。新しい共有スイッチ A は「 cs1 」です。新しい共有スイッチ B は「 cs2 」です。を参照してください <block ref="cbb16447b88abbf626db4295a94e10df" category="inline-link-macro-rx"></block> および <block ref="41062cda0a6ae510a0f118eb961870a4" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="87ee7302cf3c1ada159d4d2696688b0d" category="list-text">スイッチドネットワーク設定が有効であることを確認します。「 network port show 」</block>
  <block id="412d467b5f15dc1967df2c5af126e62d" category="list-text">使用されていないクラスタスイッチを削除します。</block>
  <block id="936648102dd0e64a9748e863cad7bbdd" category="list-text">未使用のストレージスイッチを取り外します。</block>
  <block id="7bd0358c3b996edfe19bd3da912bde62" category="doc">Cisco Nexus 9336C-FX2 共有スイッチ</block>
  <block id="c07d0e299690131f90afb07e5d847e3f" category="paragraph">障害のある Nexus 9336C-FX2 共有スイッチの交換は、無停止手順（ NDU ）です。</block>
  <block id="c4ceb27b488ee8c76dddf465a267e6fb" category="paragraph">現在の環境および交換用スイッチでスイッチの交換を実行する前に、次の条件が満たされている必要があります。</block>
  <block id="60a085daee18baa4f76424f459638014" category="list-text">既存のクラスタとネットワークインフラ：</block>
  <block id="bed48f8d78fae83f8dbfe9776b8a6b05" category="list-text">既存のクラスタで、少なくとも 1 つのクラスタスイッチが完全に接続されており、完全に機能することを確認する必要があります。</block>
  <block id="e99dfadc7ffd3ecaddd1986a48465f46" category="list-text">すべてのクラスタポートが稼働している必要があります。</block>
  <block id="b59349f8fffc7ea477834852e7e20892" category="list-text">すべてのクラスタ LIF （論理インターフェイス）が、 * up * で、ホームポートにある必要があります。</block>
  <block id="50680f60b6b5a21bd37f50f4b636dad7" category="list-text">ONTAP cluster ping-cluster -node node1 コマンドは、すべてのパスで基本的な接続と larger than PMTU communication が成功したことを示す必要があります。</block>
  <block id="6f523f9e785067d3925b0aec1c87ae91" category="list-text">Nexus 9336C-FX2 交換スイッチ：</block>
  <block id="ff47b0585e566a73f653682a2d21e5b0" category="list-text">交換用スイッチの管理ネットワーク接続が機能している必要があります。</block>
  <block id="50c541fa74de2f5af11460d3ea9124a7" category="list-text">交換用スイッチへのコンソールアクセスが確立されている必要があります。</block>
  <block id="cb941c5ab2121b66b6edc811bef1cf7f" category="list-text">ノード接続はポート 1/1~1/34 です。</block>
  <block id="22886c387dcbb159cf76a09acea002be" category="list-text">ポート 1/35 および 1/36 では、すべてのスイッチ間リンク（ ISL ）ポートを無効にする必要があります。</block>
  <block id="8d0dde131d3467b69599db1c22cbb114" category="list-text">必要なリファレンス構成ファイル（ RCF ）と NX-OS オペレーティングシステムのイメージスイッチをスイッチにロードする必要があります。</block>
  <block id="da3d2259355bee77531cdb315e049db9" category="list-text">STP 、 SNMP 、 SSH などの以前のサイトのカスタマイズは、すべて新しいスイッチにコピーする必要があります。</block>
  <block id="54bb024ba08d8f7e48b6be56f6a3301a" category="paragraph">クラスタ LIF を移行するコマンドは、そのクラスタ LIF がホストされているノードで実行する必要があります。</block>
  <block id="81d35344bbcd7f7963f3f312f27c7c0a" category="list-text">既存の Nexus 9336C-FX2 スイッチの名前は、 _sh1_and _sh2__ です。</block>
  <block id="9c96a9c93a3fb315e851f1ec0f1b4ccf" category="list-text">新しい Nexus 9336C-FX2 スイッチの名前は _newsh1_and _newsh2_です 。</block>
  <block id="faae0adf04bd789e302814634c2ad2b8" category="list-text">ノード名は _node1_AND _node2 _ です。</block>
  <block id="62c81a751ae46177c5688fd86330d69f" category="list-text">各ノードのクラスタポートの名前は _e3a および _e3b _ です。</block>
  <block id="2b37f98166c30979ac9a6361c70e9ddd" category="list-text">クラスタ LIF 名は、 node1 の場合は「 node1_clus1' 」、ノード 1 の場合は「 node1_clus1' 」、 node2 の場合は「 node2 _ clus2 」です。</block>
  <block id="1fc4d07624650dec28e2c1708226b30b" category="list-text">すべてのクラスタノードへの変更を求めるプロンプトは、 cluster1 ： * &gt; です。</block>
  <block id="94373e8833b452b5d7fcbeabe9edc3f3" category="admonition">次の手順は、次のネットワークトポロジに基づいています。</block>
  <block id="cc36844d7ce51a41c37bee302ed701b1" category="list-text">このクラスタで AutoSupport が有効になっている場合は、 AutoSupport メッセージを呼び出してケースの自動作成を抑制します。「 system node AutoSupport invoke -node * -type all -message MAINT= xh</block>
  <block id="859f21c0207e314111f0afb2da6d115e" category="list-text">オプション：スイッチ newsh2 に適切な RCF とイメージをインストールし、必要なサイトの準備を行います。</block>
  <block id="2d5ce426423eeeead4f35769cd8b1b27" category="inline-xref">手順 3</block>
  <block id="8dc7f184015d8c790de3fb26a2bc3f3c" category="list-text">必要に応じて、新しいスイッチ用に、 RCF および NX-OS ソフトウェアの適切なバージョンを確認、ダウンロード、およびインストールします。新しいスイッチが正しくセットアップされており、 RCF および NX-OS ソフトウェアの更新が不要であることを確認した場合は、に進みます <block ref="6f5e80c5f38b7c17bfcb05f65cf8fc44" category="inline-xref-macro-rx"></block>。</block>
  <block id="d809d21bd67582c1334d95ab6c3a0098" category="list-text">ネットアップサポートサイトのネットアップクラスタおよび管理ネットワークスイッチリファレンス構成ファイルの概要ページにアクセスします。</block>
  <block id="df1f10867a66c2ecf7cead01d3984b7b" category="list-text">Cluster Network and Management Network Compatibility Matrix のリンクをクリックし、必要なスイッチソフトウェアのバージョンを確認します。</block>
  <block id="a03622205af9039cab7ee299edb23fc9" category="list-text">ブラウザの戻る矢印をクリックして概要ページに戻り、 [ 続行 ] をクリックしてライセンス契約に同意し、 [ ダウンロード ] ページに移動します。</block>
  <block id="3c16440f77643f58d4491055591e88b7" category="list-text">ダウンロードページの手順に従って、インストールする ONTAP ソフトウェアのバージョンに対応した正しい RCF ファイルと NX-OS ファイルをダウンロードします。</block>
  <block id="b02cd310686a37dfef491f23f468fd28" category="list-text">[[step3]] 新しいスイッチで admin としてログインし、ノードクラスタインターフェイス（ポート 1/1~1/34 ）に接続するすべてのポートをシャットダウンします。交換するスイッチが機能せず、電源がオフになっている場合は、に進みます <block ref="a4882b71f5935aea43154f35b1a6d350" category="inline-xref-macro-rx"></block>。クラスタノードの LIF は、各ノードのもう一方のクラスタポートにすでにフェイルオーバーされている必要があります。</block>
  <block id="628224310a08199c5d7d0b910365045c" category="list-text">[[step4]] すべてのクラスタ LIF で自動リバートが有効になっていることを確認します。network interface show -vserver Cluster -fields auto-revert を実行します</block>
  <block id="97fadeb84f4ed9ad0e75935498cb829f" category="list-text">[[step5] すべてのクラスタ LIF が通信できることを確認します。 cluster ping-cluster &lt;node name&gt;</block>
  <block id="01327bf2293f5b2888e56a1495b8ffa5" category="list-text">[[step6] Nexus 9336C-FX2 スイッチ sh1 の ISL ポート 1/35 および 1/36 をシャットダウンします。</block>
  <block id="e81924e502449ac3559ac6842e5fc9a4" category="list-text">[[step7] すべてのケーブルを Nexus 9336C-FX2 sh2 スイッチから取り外し、 Nexus C9336C-FX2 newsh2 スイッチの同じポートに接続します。</block>
  <block id="4f93e9535cb45064d78404c6ed6ed904" category="list-text">sh1 スイッチと newsh2 スイッチの間で ISL ポート 1/35 と 1/36 を起動し、ポートチャネルの動作ステータスを確認します。</block>
  <block id="9976ce3dd89716631075e314d8369a88" category="paragraph">ポートチャネルは Po1 （ SU ）を示し、メンバーポートは Eth1/35 （ P ）および Eth1/36 （ P ）を示している必要があります。</block>
  <block id="73d481b40707b0f3a0419c8059e5dfbc" category="paragraph">次の例では、 ISL ポート 1/35 および 1/36 をイネーブルにし、スイッチ sh1 のポートチャネルの概要を表示します。</block>
  <block id="a28ce6ee9bc3de994458e6f603c8d76e" category="list-text">[[step9] すべてのノードでポート e3b が稼働していることを確認します「 network port show ipspace Cluster 」</block>
  <block id="334475bfa8e7e4525a49f9da2f5d9b5e" category="paragraph">出力は次のようになります。</block>
  <block id="18b9420ed8fd66077342b0c040b213e9" category="list-text">[[step10]] 前の手順で使用したノードで、 network interface revert コマンドを使用して、前の手順でポートに関連付けられているクラスタ LIF をリバートします。</block>
  <block id="425e638245787e6e714da707fc01c142" category="paragraph">この例では、 Home の値が true でポート番号が e3b である場合、ノード 1 の LIF node1_clus2 は正常にリバートされています。</block>
  <block id="b926ce3dbb7009689ed024c9ea8aba02" category="paragraph">次のコマンドは、 node1 の LIF node1_clus2 をホームポート e3a に返し、両方のノードの LIF に関する情報を表示します。両方のクラスタインターフェイスの Is Home 列が * true であり、この例では e3a および node1 の e3b で正しいポート割り当てが示されている場合、最初のノードの起動は成功します。</block>
  <block id="4f8b2be8127e6d97f5b4419778adab69" category="list-text">[[step11]] クラスタ内のノードに関する情報を表示します : 'cluster show`</block>
  <block id="08ceb55af9899d85ad284fdb01eb8069" category="paragraph">次の例では、このクラスタのノード node1 と node2 のノードの健常性が true であることを示します。</block>
  <block id="6dff419ea570b4438706290945b04e81" category="list-text">[[step12]] すべての物理クラスタポートが起動していることを確認します :`network port show ipspace Cluster`</block>
  <block id="bd81aada2ea6a286ef6e1f36bc2ca511" category="list-text">[[step13]] すべてのクラスタ LIF が通信できることを確認します :'cluster ping-cluster</block>
  <block id="f201a9e1ffb2df5af2dc8e3c602cb68b" category="list-text">[[step14]] 次のクラスタネットワーク構成を確認します : 「 network port show 」</block>
  <block id="ecf7f1372c92c494288fb60fab64253c" category="list-text">[[step15]] 次のコマンドを使用して、スイッチ関連のログファイルを収集するためのイーサネットスイッチヘルスモニタログ収集機能を有効にします。</block>
  <block id="d02e46aca2a59543c305eb64a888f4d8" category="list-text">「システムスイッチイーサネットログセットアップパスワード」</block>
  <block id="47c9a5350c58460bee8ad418789973be" category="list-text">[[step16]] 古いスイッチ sh2 のストレージポートを新しいスイッチ newsh2 に移動します。</block>
  <block id="da9b9083935bcd0e31bcb793c35eec52" category="list-text">HA ペア 1 の共有スイッチ newsh2 に接続されたストレージが正常であることを確認します。</block>
  <block id="039397de8f69cec6c8dbc4dce1344c56" category="list-text">HA ペア 2 の共有スイッチ newsh2 に接続されたストレージが「 storage port show -port-type enet 」が正常であることを確認します</block>
  <block id="7d61c65bb047647c5964e4cd03a064fc" category="list-text">[[step19]] シェルフが正しくケーブル接続されていることを確認します。「 storage shelf port show -fields remote-device 、 remote-port`</block>
  <block id="c2a284bf2fca5ec22fc7906608176420" category="list-text">[[step20]] 古いスイッチ sh2 を削除します。</block>
  <block id="c99d140356a40ad59a42b6a0463510af" category="list-text">スイッチ sh1 と新しいスイッチ newsh1 について、上記の手順を繰り返します。</block>
  <block id="d828933791a5e7d1ea631c7a04ff2147" category="list-text">ケースの自動作成を抑制した場合は、 AutoSupport メッセージを呼び出して再度有効にします。「 system node AutoSupport invoke -node * -type all -message MAINT=end</block>
  <block id="31a64a44fce8ed03b7b71b06a1ddc567" category="doc">ストレージスイッチを再利用して、 SAT ストレージを搭載したスイッチレス構成から移行する</block>
  <block id="e468dc98f46520dafb81c4a2860e35f5" category="list-text">[[step2] ノードポートが正常で動作していることを確認します。「 storage port show -port-type enet 」</block>
  <block id="a61fb4ee9862ad3ca2ace374860efe47" category="list-text">[[step3] HA ペア 1 の NSM224 パス A ケーブルをストレージスイッチ A から HA ペア 1 の共有 NS224 ストレージポートに移動します。このストレージスイッチ A のパス A</block>
  <block id="13edd7f420c2674d548b2a52a6da2adb" category="list-text">HA ペア 1 のノード A から、ストレージスイッチ A 上の HA ペア 1 のノード A の共有ストレージポートへケーブルを接続します</block>
  <block id="8fa35651fd65d802f471c470966f21ec" category="list-text">HA ペア 1 のノード B から、ストレージスイッチ A の HA ペア 1 のノード B の共有ストレージポートへケーブルを接続します</block>
  <block id="a791669229b197424a1c53af3c935995" category="list-text">[[step7] 共有スイッチ A のストレージ RCF を共有 RCF ファイルに置き換えます。を参照してください<block ref="f6e7f441bcff51ec3d8080f15010fd4c" category="inline-link-rx"></block> を参照してください。</block>
  <block id="ea77aeb98674be7fb36ce74bd1108462" category="list-text">[[step9] HA ペア 1 、 NSM224 パス B のケーブルをストレージスイッチ B から HA ペア 1 の共有 NS224 ストレージポートに移動し、ストレージスイッチ B へのパス B を移動します</block>
  <block id="ded104c4c31658cbea5c009e1de22984" category="list-text">[[step13]] 共有スイッチ B のストレージ RCF ファイルを共有 RCF ファイルで置き換えます。を参照してください <block ref="41062cda0a6ae510a0f118eb961870a4" category="inline-link-macro-rx"></block> を参照してください。</block>
  <block id="533661dac93384c9c5129a0888e57a1d" category="list-text">[[step16]] スイッチレスクラスタからスイッチ使用のクラスタへの HA ペア 1 の変換。共有 RCF で定義されているクラスタポートの割り当てを使用します。を参照してください <block ref="2cdb0ef9b29e3206865e37e4f43be394" category="inline-link-macro-rx"></block>を参照してください。</block>
  <block id="512a76427a65e27ffb75015bb7a6951e" category="list-text">スイッチドネットワーク設定が有効であることを確認します。「 network port show 」</block>
  <block id="467a501ced0eaaee20142a975e074f95" category="doc">2 つの新しい共有スイッチを追加して、 DAT ストレージを使用したスイッチ構成から移行します</block>
  <block id="c501aa902a1c1cd5955cebe45bc1fc25" category="section-title">DAT ストレージを使用したスイッチ構成からの移行</block>
  <block id="2439b6cc5b5d5f5ed61e8755a528a9b0" category="paragraph">一部の古い Cisco Nexus クラスタスイッチを Cisco Nexus 9336C-FX2 共有スイッチに交換する場合は、特定の設定情報、ポート接続、およびケーブル接続要件に注意する必要があります。</block>
  <block id="8c0efb8b0ce576c4e0176ea2d8cf7d54" category="list-text">サポートされるスイッチは次のとおりです。</block>
  <block id="f0936c8d947d6fc9958bb86b9f3f74f8" category="list-text">Nexus 9336C-FX2</block>
  <block id="ee9afd7df5d1f09abe628235a0bbd29c" category="list-text">Nexus 3232C</block>
  <block id="8a60f61abd0c966314d5200a93ab4133" category="list-text">スイッチは、ノードへの接続に次のポートを使用します。</block>
  <block id="a1e2c6ab24c27a74cee460bdfe527877" category="list-text">Nexus 9336C-FX2 ：</block>
  <block id="872199943acdea4294f0d4075d3561f0" category="list-text">ポート 1-3 ：ブレークアウトモード（ 10G × 4 ）クラスタ内ポート、内部 e1/1/4 、 e1/2/1~4 、 e1/3~4</block>
  <block id="348fe175e1a1ed27a74f3d8ce41e8b48" category="list-text">ポート 4-6 ：ブレークアウトモード（ 4x25G ）クラスタ内 / HA ポート、内部 e1/4/1-4 、 e1/5/1-4 、 e1/6/1~4</block>
  <block id="a884c1d4a4c581995c17b4b28afe16f8" category="list-text">ポート 7-34 ： 40/100GbE Intra-Cluster/HA ポート、 int E1/7-34</block>
  <block id="6623dc8ad86ae4f35f90a10a54b59362" category="list-text">Nexus 3232C ：</block>
  <block id="421f92c2458c0927a7ee05290951e3bd" category="list-text">ポート 1~30 ： 10 / 40 / 100GbE</block>
  <block id="a197a8451e6cdff83ec4ac0465632cab" category="list-text">スイッチは、次のスイッチ間リンク（ ISL ）ポートを使用します。</block>
  <block id="1fae59cef223580d13c9e4f1b2caa312" category="list-text">ポート int e1/35-36 ： Nexus 9336C-FX2</block>
  <block id="c6bbb6b6ae9f7905fd3e101a028feee1" category="list-text">ポート e1/31~32 ： Nexus 3232C</block>
  <block id="71b02efdbb3ccc6ece3fc351c656e1be" category="list-text">Hardware Universe には、すべてのクラスタスイッチでサポートされているケーブル接続に関する情報が含まれています。</block>
  <block id="6e28d8a516c0943fdffa37f9887142fa" category="paragraph">を参照してください<block ref="e8018b6e740a667345f4bcc94e4023fc" category="inline-link-rx"></block> を参照してください。</block>
  <block id="f3f2b4cbf3d4788e920cd6184c2ec2c1" category="list-text">Nexus 9336C-FX2 スイッチの一部のポートを 100GbE で実行するように設定しておきます。</block>
  <block id="6e561db011e3b584885cf33faa6d2c5b" category="list-text">ノードから Nexus 9336C-FX2 スイッチへの 100GbE 接続を計画、移行、文書化しておきます。</block>
  <block id="dd0cd60b35163e25bde3016a4a636b26" category="list-text">この手順でサポートされている ONTAP および NX-OS のバージョンは、 Cisco Ethernet Switches のページに記載されています。を参照してください<block ref="78ccdd0a3e16d4d44b95043dbee8e2db" category="inline-link-rx"></block>。</block>
  <block id="f1b3b711c92578bab963ea6eeb2ccaa0" category="list-text">ONTAP クラスタから Cisco Nexus 9336C-FX2 ネットワークスイッチへ、無停止で他の Cisco クラスタスイッチを移行できます。</block>
  <block id="8639553459142d294e15b12c7435701f" category="list-text">既存のスイッチネットワークが適切にセットアップされ、機能している必要があります。</block>
  <block id="fd55eeed7121bd5c5fcc7054cf0fa600" category="list-text">ノンストップオペレーションを実現するには、すべてのポートが up * 状態である必要があります。</block>
  <block id="4ec6857207c98f065042e4807684adff" category="list-text">Nexus 9336C-FX2 スイッチは、適切なバージョンの NX-OS がインストールされ、リファレンス構成ファイル（ RCF ）が適用された状態で設定され、動作している必要があります。</block>
  <block id="3ea429d694342171e655186acd3ade7b" category="list-text">既存のネットワーク構成には次のものが必要です。</block>
  <block id="4911fe5a5a61a43546dd84d203eacf1c" category="list-text">両方の古い Cisco スイッチを使用する、完全に機能している冗長なネットアップクラスタ。</block>
  <block id="c3f3714ca8555fda13d1cbc127147867" category="list-text">古い Cisco スイッチと新しいスイッチの両方への管理接続とコンソールアクセス。</block>
  <block id="41fa0b0c8361b00ebbc45803272d5d99" category="list-text">クラスタ LIF がすべてホームポートにある状態の * up * 状態のクラスタ LIF がすべて表示されています。</block>
  <block id="0c61adc358ee3db0e5a57be6cd5a4b8e" category="list-text">ISL ポートが有効で、他の Cisco スイッチ間および新しいスイッチ間でケーブル接続されている。</block>
  <block id="b253ba9e78963a8167fcf6f56cc98c6d" category="list-text">既存の Cisco Nexus 3232C クラスタスイッチは、 _c1_AND _c2_ です。</block>
  <block id="b2646cdedb4f910d9c6995d6f8d1ae4c" category="list-text">新しい Nexus 9336C-FX2 スイッチは、 _sh1_and _sh2_ です。</block>
  <block id="b207d92313ec20f7c27adca3d1ae552c" category="list-text">クラスタ LIF は、ノード 1 では _node1_clus1_AND _node1_clus2_on 、ノード 2 では _node2_clus1_and _node2_clus2_on です。</block>
  <block id="77ac8435970d914eb19cfe4422ce47dd" category="list-text">最初にスイッチ c2 をスイッチ sh2 に交換し、次にスイッチ c1 をスイッチ sh1 に交換します。</block>
  <block id="8df6d09a602fca4aa18fe9e0b5e94fd4" category="list-text">このクラスタで AutoSupport が有効になっている場合は、 AutoSupport メッセージを呼び出してケースの自動作成を抑制します。「 system node AutoSupport invoke -node * -type all -message MAINT= x h</block>
  <block id="1b75649d1b9ec0a73e309fd9b384b32a" category="list-text">各クラスタポートの管理ステータスと動作ステータスを確認します。</block>
  <block id="cbe561eed93dd859c54d10fcf42becf6" category="list-text">すべてのクラスタポートが正常な状態で稼働していることを確認します。「 network port show – role cluster 」</block>
  <block id="6bd9f902861cef254a9b1cd5a0b78a4b" category="list-text">[[step7] C2 スイッチをシャットダウンします。</block>
  <block id="87da8bea7ed0dbbc94399550a077b570" category="list-text">[[step8] クラスタ LIF が、クラスタスイッチ sh1 でホストされているポートに移行したことを確認します。「 network interface show -role cluster 」この処理には数秒かかることがあります。</block>
  <block id="9ee2b21f2d226532d76345aed1bd5bb3" category="list-text">[[step9] スイッチ c2 を新しいスイッチ sh2 に交換し、新しいスイッチをケーブル接続し直します。</block>
  <block id="4ea2b5ab515b2bb50c23558fce34feca" category="list-text">ポートが sh2 でバックアップされていることを確認します。* 注 * LIF はスイッチ c1 にあります。</block>
  <block id="ff95ac04495597119a55479b8bf29792" category="list-text">c1 スイッチをシャットダウンします。</block>
  <block id="91a2ec2e8a3cf37f0719c1d12fff393a" category="list-text">[[step12]] クラスタ LIF が、クラスタスイッチ sh2 でホストされているポートに移行されたことを確認します。これには数秒かかることがあります。</block>
  <block id="b18702a6dcc683ab56156e15eec2de44" category="list-text">[[step13]] スイッチ c1 を新しいスイッチ sh1 に交換し、新しいスイッチをケーブル接続し直します。</block>
  <block id="311d44668904b18ff8a6fd016d97a280" category="list-text">ポートが sh1 でバックアップされていることを確認します。* LIF がスイッチ C2 に接続されたままであることに注意してください。</block>
  <block id="fc35a9ec43fa15619b7584ce5c4daa8a" category="list-text">クラスタ LIF で自動リバートを有効にします。</block>
  <block id="c3c853dbaf3555c7b2a32f7228459b7f" category="list-text">[step16]] クラスタが正常であることを確認します : cluster show</block>
  <block id="eac9e7086f92a026c0dbe06001206204" category="doc">Cisco 共有スイッチのセットアップおよび設定ガイド</block>
  <block id="949a9350bf341b8fa64977aa3c2584c5" category="section-title">ONTAP でサポートされるスイッチ</block>
  <block id="641d7ad5c2ec29d01cc93211bd6393b9" category="paragraph">ONTAP 9.9.9..1 から、 Cisco Nexus 9336C-FX2 スイッチを使用して、ストレージとクラスタの機能を共有スイッチシナリオに結合できます。3 つ以上のノードで ONTAP ネットワークを構築する場合は、サポートされているネットワークスイッチが 2 つ必要です。</block>
  <block id="8a5fdb7aa013af2f886a0745ecad55fa" category="paragraph">次の Cisco 共有ネットワークスイッチがサポートされています。</block>
  <block id="7a132c4084cb90373827f0625aad2cb0" category="paragraph">Cisco Nexus 9336C-FX2 スイッチ（ X190200/X190210 ）は、スイッチに付属の標準ブラケットを使用して、ネットアップシステムキャビネットまたは他社製キャビネットに設置できます。</block>
  <block id="5dfcb593b3c7fd66ae6fded55e29ddb1" category="paragraph">次の表に、 9336C-FX2 スイッチ、ファン、および電源装置の部品番号と概要を示します。</block>
  <block id="b8d29742df41ef40fca1e44a7b490835" category="cell">パーツ番号</block>
  <block id="90dc16eea9a08fad9923a5ebde819373" category="cell">X190200-CS-PE</block>
  <block id="4e46dbb7e3c204d6d9c269325f2e7bce" category="cell">N9K-9336C-FX2 、 CS 、 PTSX 、 36PT10/25/40/100GQSFP28</block>
  <block id="f1d41ec97ee9c525034c6804bfbb8e9a" category="cell">X190200-CS-PI</block>
  <block id="2dec7a1b3423c75b9d0606e9404dbc31" category="cell">N9K-9336C-FX2 、 CS 、 PSIN 、 36PT10/25/40/100GQSFP28</block>
  <block id="0f554c96d2e3a75bed7665e692c123a2" category="cell">X190210-FE-PE のこと</block>
  <block id="2c658a7cb78d78536a7a4d6a7ac007d7" category="cell">N9K-9336C 、 FTE 、 PTSX 、 36PT10/25/40/100GQSFP28</block>
  <block id="06bdfa4eeb4673a88109b189e8032086" category="cell">X190210-FE-PI</block>
  <block id="9067c6465253e023e1e8646348d031f3" category="cell">N9K-9336C 、 FTE 、 PSIN 、 36PT10/25/40/100GQSFP28</block>
  <block id="40e4cea49f9ea9bc784da2baf73a6aca" category="cell">X190002</block>
  <block id="6f68e5248a6396152e6ecda783007cf8" category="cell">アクセサリキット X190001/X190003</block>
  <block id="ea7579a6b12b271555314d6a489bd89e" category="cell">X-NXA-PAC1100W-PE2</block>
  <block id="e9a1f9ab973fed58606279d050d11c9e" category="cell">N9K-9336C AC 1100W PSU - ポート側排気</block>
  <block id="946836662a4a46cf1b1e4f3c18bfe440" category="cell">X-NXA-PAC1100W-PI2</block>
  <block id="8f6684e0f9fcae69e5cb12059d86a616" category="cell">N9K-9336C AC 1100W PSU - ポート側吸気</block>
  <block id="127add51913b4b79891c2e48b56b1c02" category="cell">X-NXA-FAN-65CFM-pe</block>
  <block id="9f20b68dcb3f25905807b00fdbdc4368" category="cell">N9K-9336C 65CFM 、ポート側排気</block>
  <block id="afb5efd2052a5d24db3e141e498b20de" category="cell">X-NXA-FAN-65CFM-pi</block>
  <block id="464c69327917d32444dfaf4ff328f5d5" category="cell">N9K-9336C 65CFM 、ポート側吸気</block>
  <block id="f1375f4dce82b7173addf1ef166c2ebc" category="section-title">スイッチを設定します</block>
  <block id="7b6ae48e36dd3d7cf6fae83bada46583" category="paragraph">必要な設定情報とドキュメントをまだ入手していない場合は、共有スイッチを設定する前に、その情報を収集する必要があります。</block>
  <block id="64079ae841ec2c52072b6eaa6b66b5c7" category="list-text">該当する NX-OS およびリファレンス構成ファイル（ RCF ）リリースをダウンロードするには、インストールサイトで HTTP 、 FTP 、または TFTP サーバにアクセスできる必要があります。</block>
  <block id="dbbe2f3bc9da97414c113e97541ae09c" category="list-text">必要な共有スイッチのドキュメントを用意しておく必要があります。</block>
  <block id="83246b8752de9805863d58348a7becf5" category="paragraph">を参照してください <block ref="6df9ca1b18f4b9116f2a66ddb44807b0" category="inline-xref-macro-rx"></block> を参照してください。</block>
  <block id="f50beb2085f83031ea688c993be24975" category="list-text">必要なコントローラのドキュメントと ONTAP のドキュメントを用意しておく必要があります。</block>
  <block id="ce5a4a36cafe8a250cdeaae60cd5a4e3" category="inline-link">NetApp ONTAP のドキュメント</block>
  <block id="2243b8e536a25b6d6ed20924db099bcd" category="paragraph">を参照してください<block ref="78748c5793a1c2ef085ba3ee47bcce15" category="inline-link-rx"></block>。</block>
  <block id="f5d8da8c6150aa3c502eaea4ba2ab505" category="list-text">該当するライセンス、ネットワークと設定情報、およびケーブルが必要です。</block>
  <block id="7f7491a5440c3793bf09afc3c2fcb114" category="list-text">記入済みのケーブル接続ワークシートが必要です。</block>
  <block id="e281702f30e7a8e688ac1081ea3d6c99" category="admonition">このガイドでは、ケーブル接続図に加えて、推奨されるポート割り当てとネットワークのセットアップに使用できる空白のワークシートを含むサンプルワークシートも提供しています。詳細については、を参照してください<block ref="e8018b6e740a667345f4bcc94e4023fc" category="inline-link-rx"></block>。</block>
  <block id="1771b579c10634da9a764a221c18f7e1" category="paragraph">すべての Cisco 共有スイッチは、シスコの工場出荷時のデフォルト設定で出荷されます。これらのスイッチには、 NX-OS ソフトウェアの最新バージョンもありますが、 RCF はロードされていません。</block>
  <block id="2b25dfab590bd1b93981f3144798e49c" category="paragraph">* 注意： * 該当するネットアップ RCF は、からダウンロードする必要があります<block ref="1ccfcc282c22bbf629043880b6e3d7b2" category="inline-link-rx"></block> 受信したスイッチの場合。</block>
  <block id="8c4271e6faf2cea4cfc8e5b7108d8ee9" category="section-title">手順</block>
  <block id="b01c82f53d899ee81ba67bfac6270f54" category="inline-link">Cisco Nexus 9336C-FX2 クラスタスイッチとパススルーパネルのネットアップキャビネットへの設置</block>
  <block id="d3e18e6cda55c62cb1229ed70a876467" category="list-text">ラックにスイッチとコントローラを配置を参照してください<block ref="90faa892a4d50a53b0a7930f42b5c315" category="inline-link-rx"></block> スイッチをネットアップキャビネットに設置する手順については、ガイドを参照してください。</block>
  <block id="78e6dfddb13e04b530aa5e137fbcffcb" category="list-text">スイッチとコントローラの電源をオンにします。</block>
  <block id="6ee5954a9939ee0324616b71255a1ea7" category="list-text">[[step3]] で提供された情報に基づいて、スイッチの初期設定を実行します <block ref="4e098ee0fc4ed6ae0122d7d616100d24" category="inline-xref-macro-rx"></block>。</block>
  <block id="d51ed7f10b5732d6e9ec975c89648212" category="list-text">セットアップの最後に表示される画面で選択した設定を確認し、設定を保存します。</block>
  <block id="39ea6d6c5412ec7e0e17dd391cd35f3a" category="list-text">スイッチのソフトウェアバージョンを確認し、必要に応じてネットアップ対応バージョンのソフトウェアをスイッチにダウンロードします。</block>
  <block id="7b1d1185b835814de783483f686e9825" category="inline-link">シスコ</block>
  <block id="1721782515e043c452981cc8c95c8b19" category="paragraph">ネットアップ対応バージョンのサポートソフトウェアをダウンロードする場合は、 NetApp Network Switch Reference Configuration File もダウンロードし、に保存した構成とマージする必要があります <block ref="6f5e80c5f38b7c17bfcb05f65cf8fc44" category="inline-xref-macro-rx"></block>。ファイルと手順は、からダウンロードできます<block ref="5c27bdff6f5cc32ce77bb635aee5a3ec" category="inline-link-rx"></block> ページ独自のスイッチがある場合は、を参照してください<block ref="352cc6d5e14cbc28943a82cb55bedc13" category="inline-link-rx"></block> サイト</block>
  <block id="afb48a56af012ba490b6f0c683ca069d" category="section-title">必要な設定情報</block>
  <block id="2b561d0cd2038d9a28bd819d497f4f68" category="paragraph">構成には、スイッチに適した数とタイプのケーブルとコネクタが必要です。最初に設定するスイッチのタイプに応じて、付属のコンソールケーブルを使用してスイッチのコンソールポートに接続する必要があります。また、特定のネットワーク情報を指定する必要があります。</block>
  <block id="3d8c1e9dc9abd665a6d51aff697d9586" category="section-title">すべてのスイッチに必要なネットワーク情報</block>
  <block id="601b1c0673eb2ee2db12a0f15d9e12c3" category="list-text">すべてのスイッチ設定には、次のネットワーク情報が必要です。</block>
  <block id="31ecd7552867bf00e0a88fbcbfd147a0" category="list-text">管理ネットワークトラフィック用の IP サブネット</block>
  <block id="77918707dd3c6ba610a21dee1c40ef85" category="list-text">各ストレージシステムコントローラおよび該当するすべてのスイッチのホスト名と IP アドレス</block>
  <block id="3cce89e076695683c3ae0c299fd7edcd" category="list-text">ほとんどのストレージシステムコントローラは、イーサネットサービスポート（レンチマーク）に接続することで、 e0M インターフェイスを介して管理されます。AFF A800 システムおよび AFF A700 システムでは、 e0M インターフェイスは専用のイーサネットポートを使用します。</block>
  <block id="667cf55da9f4ccd45815c0c40a5e0099" category="list-text">を参照してください<block ref="e8018b6e740a667345f4bcc94e4023fc" category="inline-link-rx"></block> 最新情報については、を参照してください。</block>
  <block id="c8e6e23ad9289f83b629ddee385c1fe2" category="section-title">Cisco Nexus 9336C-FX2 スイッチに必要なネットワーク情報</block>
  <block id="52d1e2b26c863c666558b2b8fde1904d" category="paragraph">Cisco Nexus 9336C-FX2 スイッチの場合は、スイッチの初回起動時に、次の初期セットアップに関する質問に適切な応答を指定する必要があります。サイトのセキュリティポリシーでは、有効にする応答とサービスを定義しています。</block>
  <block id="2587dca3500f5170d53254d138053d6d" category="list-text">自動プロビジョニングを中止して通常のセットアップを続行しますか？（はい / いいえ）</block>
  <block id="6bba2a7f2881fffd3aea0b613c328174" category="paragraph">* yes * と応答します。デフォルトは no です</block>
  <block id="a0fe248777b36898477c1cf8df11c23e" category="list-text">セキュアなパスワード標準を適用しますか？（はい / いいえ）</block>
  <block id="8c028235a9cfd5a0f09aeb396a9b7f59" category="paragraph">* yes * と応答します。デフォルトは yes です。</block>
  <block id="081cec44dcb55858c91c17808a56de55" category="list-text">admin のパスワードを入力します。</block>
  <block id="ea8436264afe2287f0833f0688dd6efe" category="paragraph">デフォルトのパスワードは admin です。新しい強力なパスワードを作成する必要があります。</block>
  <block id="65c4602baaace1fd0023f51ddbf338a1" category="paragraph">脆弱なパスワードは拒否される可能性があります。</block>
  <block id="98a5741f83891dc4008aac780e84c9dd" category="list-text">基本設定ダイアログを開きますか？（はい / いいえ）</block>
  <block id="6488892cb9bcadbed18ad604a60e7a41" category="paragraph">スイッチの初期設定時に * yes * と応答します。</block>
  <block id="dbd217512b7a9153f50f2161c224f890" category="list-text">別のログインアカウントを作成しますか？（はい / いいえ）</block>
  <block id="6b0fcde5d66c70198c244a1b351e7e3c" category="paragraph">回答は、代替管理者に関するサイトのポリシーに依存します。デフォルトは no です</block>
  <block id="6b35b6b49fa17b4a4d2e810bfc77436d" category="list-text">読み取り専用の SNMP コミュニティストリングを設定しますか？（はい / いいえ）</block>
  <block id="de890fdd4bec2fd13d76947dd5372353" category="paragraph">* no * と応答します。デフォルトは no です</block>
  <block id="4f138867c5cb7d8f99271fe0353e931b" category="list-text">読み取り / 書き込み SNMP コミュニティストリングを設定しますか？（はい / いいえ）</block>
  <block id="8c9d69e3b2c93a43b00bff0af8146dfa" category="list-text">スイッチ名を入力します。</block>
  <block id="bdfcc5e6eb78e2d514e5179d5703228a" category="paragraph">スイッチ名は 63 文字までの英数字に制限されます。</block>
  <block id="821f2f9c33bb431a6cd65e0fef74f5a8" category="list-text">アウトオブバンド（ mgmt0 ）管理構成で続行しますか。（はい / いいえ）</block>
  <block id="7a9270d9e1d419cd8b0403fdc8da27a6" category="paragraph">そのプロンプトで * yes * （デフォルト）と応答します。mgmt0 IPv4 address: プロンプトで、 IP アドレス ip_address を入力します</block>
  <block id="03c612e50ace48a3e1166082ab8693e9" category="list-text">default-gateway を設定？（はい / いいえ）</block>
  <block id="1bda92ccae06fac8b1581ef867dd4838" category="paragraph">* yes * と応答します。default-gateway: プロンプトの IPv4 アドレスに、 default_gateway と入力します。</block>
  <block id="7c16b3b3191c66111f174fa6cd64c257" category="list-text">IP の詳細オプションを設定しますか？（はい / いいえ）</block>
  <block id="b935eabb00c8caa6dfe6647bdaafc35a" category="list-text">Telnet サービスを有効にしますか？（はい / いいえ）</block>
  <block id="0254cee13f2faa192208ae286c4d48bc" category="list-text">SSH サービスを有効にしますか？（はい / いいえ）</block>
  <block id="d6ac208fad263d998215866318843863" category="admonition">ログ収集機能にクラスタスイッチヘルスモニタ（ CSHM ）を使用する場合は、 SSH が推奨されます。セキュリティを強化するには、 SSHv2 も推奨されます。</block>
  <block id="cf0438cf1f16dd8541401b40f77b205f" category="list-text">[[step14]] 生成する SSH キーの種類を入力します (DSA/RSA/rsa1) 。デフォルトは rsa です。</block>
  <block id="4affd6f79bcfe129021bccfab36973db" category="list-text">キービット数（ 1024~2048 ）を入力します。</block>
  <block id="1f4ae51721a7026132603d022ea2df2e" category="list-text">NTP サーバを設定？（はい / いいえ）</block>
  <block id="08ff2edeaa4e170065051a38d109eba7" category="list-text">デフォルトのインターフェイスレイヤ（ L3/L2 ）を設定します。</block>
  <block id="e2f3727963ac32e24fcabf07e61b1aa6" category="paragraph">* L2 * と応答します。デフォルトは L2 です。</block>
  <block id="da419bea93e82de29680266a222627b3" category="list-text">デフォルトのスイッチポートインターフェイスステート（ shut / noshut ）を設定します。</block>
  <block id="4fc74edbc8417f3d40873f742eeb2be0" category="paragraph">noshut * と応答します。デフォルトは noshut です。</block>
  <block id="fbcb89f3f4d929634a3871ee899f2db3" category="list-text">CoPP システムプロファイルを設定する（ strict/moderm/lenenter/dense ）：</block>
  <block id="e2c3fe0d0a1b29bd32c331be18cb7fa1" category="paragraph">* strict * と応答します。デフォルトは strict です。</block>
  <block id="6ac87be8b3add0a420ea74735127e444" category="list-text">設定を編集しますか？（はい / いいえ）</block>
  <block id="63380e79f39db6a40b46be28e461cc74" category="paragraph">この時点で新しい設定が表示されます。入力した設定を確認し、必要な変更を行います。設定に問題がなければ、プロンプトで no と応答します。設定を編集する場合は、 * yes * と応答します。</block>
  <block id="a526dfe64cb7296ac27bcc4595f2063f" category="list-text">この設定を使用して保存しますか？（はい / いいえ）</block>
  <block id="5a54e42dd698c598e59f9b64356c9418" category="paragraph">* yes * と応答して、設定を保存します。これにより、キックスタートイメージとシステムイメージが自動的に更新されます。</block>
  <block id="8ebeb0aa57e41e8e582e0d2bd7d57e8e" category="admonition">この段階で設定を保存しないと、次回スイッチをリブートしたときに変更が有効になりません。</block>
  <block id="82024d6a2c01f0a8732caf928f9407bf" category="inline-link">『 Cisco Nexus 9336C-FX2 Installation and Upgrade Guide 』</block>
  <block id="f5cfc940c5ab0e780c503445cb40f82d" category="paragraph">スイッチの初期設定の詳細については、次のガイドを参照してください。<block ref="c68d672ce672475dc8c9199a02c5303f" category="inline-link-rx"></block>。</block>
  <block id="9bceb8dc888693f3c7bf8c3da3644598" category="section-title">共有スイッチに必要なドキュメント</block>
  <block id="e2cd1c4a8333627097591821747e2b1b" category="paragraph">ONTAP ネットワークを設定するには、特定のスイッチとコントローラに関するドキュメントが必要です。</block>
  <block id="c89388ccd8b3630466c7de50bd9dbd2d" category="inline-link">Cisco Nexus 9000 シリーズスイッチのサポート</block>
  <block id="9f74bb1a4ed2d5fe3c6d27623df1cf32" category="paragraph">Cisco Nexus 9336C-FX2 共有スイッチをセットアップするには、を参照してください<block ref="ccf9a5ebd47a9c01263e95d2949e4af7" category="inline-link-rx"></block> ページ</block>
  <block id="45efd3c6a0810c7e08d1daeb80d4b5e2" category="cell">ドキュメントタイトル</block>
  <block id="15d9978fa28b29e838c1a90820c21d36" category="inline-link-macro">Nexus 9000 Series Hardware Installation Guide 』を参照してください</block>
  <block id="7d4653ec512f04431d73bb9bf8ab903c" category="cell"><block ref="7d4653ec512f04431d73bb9bf8ab903c" category="inline-link-macro-rx"></block></block>
  <block id="d482b8a15ff350479bf4e58fa1d0c597" category="cell">サイト要件、スイッチハードウェアの詳細、およびインストールオプションに関する詳細情報を提供します。</block>
  <block id="61c15c69cf2811ab0e1cb8c85647bfb0" category="inline-link-macro">Cisco Nexus 9000 シリーズスイッチのソフトウェア構成ガイド</block>
  <block id="34e06dbc7cc868b884fe9747d3b10d78" category="cell"><block ref="406d19524d83e268495b19398b2a04e1" category="inline-link-macro-rx"></block> （スイッチにインストールされている NX-OS リリースのガイドを選択）</block>
  <block id="c32dd8e179950b695efe572ce0d49497" category="cell">スイッチを ONTAP 動作用に設定する前に必要なスイッチの初期設定に関する情報を提供します。</block>
  <block id="7a045983474b52b846c64f72c59ca06f" category="inline-link-macro">『 Cisco Nexus 9000 Series NX-OS Software Upgrade and Downgrade Guide 』</block>
  <block id="67a545ee7ed12190d95c50b1a1eacfbc" category="cell"><block ref="aa09b860dff7f72abc3bda8db3d666b6" category="inline-link-macro-rx"></block> （スイッチにインストールされている NX-OS リリースのガイドを選択）</block>
  <block id="0ae88cfdc1291667d39f8cc8a6cea783" category="cell">必要に応じてスイッチを ONTAP 対応スイッチソフトウェアにダウングレードする方法について説明します。</block>
  <block id="4e404eb7ac7195fae9c37d2b922bc5a6" category="inline-link-macro">Cisco Nexus 9000 シリーズ NX-OS コマンドリファレンスマスターインデックス</block>
  <block id="7d533cfa6de3a4dfd1037ee47cb73507" category="cell"><block ref="7d533cfa6de3a4dfd1037ee47cb73507" category="inline-link-macro-rx"></block></block>
  <block id="371b47d7397bde0e771e29bb3f8e7dce" category="cell">シスコが提供するさまざまなコマンドリファレンスへのリンクを示します。</block>
  <block id="c3853edf42a69088b4d9bbbac526c549" category="inline-link-macro">Cisco Nexus 9000 MIB リファレンス</block>
  <block id="715d43e03b2e674edf8ceffb487a5160" category="cell"><block ref="715d43e03b2e674edf8ceffb487a5160" category="inline-link-macro-rx"></block></block>
  <block id="8492478ce2831efd2b6e8ac6c4cd63c4" category="cell">Nexus 9000 スイッチの管理情報ベース（ MIB ）ファイルについて説明します。</block>
  <block id="6df290f9dcd0fa9e4528333108190ed0" category="inline-link-macro">Nexus 9000 Series NX-OS System Message Reference 』を参照してください</block>
  <block id="e6470039e9bf2059219eca51f0ff61d8" category="cell"><block ref="e6470039e9bf2059219eca51f0ff61d8" category="inline-link-macro-rx"></block></block>
  <block id="035c54dd334ae57f4307cababd0f5695" category="cell">Cisco Nexus 9000 シリーズスイッチのシステムメッセージ、情報メッセージ、およびリンク、内部ハードウェア、またはシステムソフトウェアの問題の診断に役立つその他のメッセージについて説明します。</block>
  <block id="c561c2d54fd2bd6a81edc6ce1b0c7d7d" category="inline-link-macro">『 Cisco Nexus 9000 Series NX-OS Release Notes 』</block>
  <block id="b3c830c1f46c78e5e5bfa160bf68597f" category="cell"><block ref="2ac6309dec20e42c583f3092a07361f2" category="inline-link-macro-rx"></block> （スイッチにインストールされている NX-OS リリースのノートを選択してください）</block>
  <block id="3f848203c9750d4f021c704fcabe3a7c" category="cell">Cisco Nexus 9000 シリーズの機能、バグ、および制限事項について説明します。</block>
  <block id="3a9c214d82ea0f7f835b71b5f4850c6b" category="inline-link-macro">Cisco Nexus 9000 シリーズの適合規格および安全性に関する情報</block>
  <block id="83a1f0b32ba6ed26d00737e3faf8fc2e" category="cell"><block ref="83a1f0b32ba6ed26d00737e3faf8fc2e" category="inline-link-macro-rx"></block></block>
  <block id="fdffc0fdf626802f6fc29cff36498ecf" category="cell">Nexus 9000 シリーズスイッチの国際的な適合規格、安全性、および法令に関する情報を提供します。</block>
  <block id="fd063930033e8c3d34fa893faa14f4ee" category="section-title">Cisco Nexus 9336C-FX2 のケーブル配線の詳細</block>
  <block id="5a5c48f7dd282373e89a35f202529de4" category="paragraph">次のケーブル接続図は、コントローラとスイッチの間のケーブル接続を完了するためのものです。</block>
  <block id="9396df2779b04c41024b11d80dbae215" category="paragraph">* スイッチ接続 *<block ref="6a2cf54f6a37518ec42d92fd7fd3e59c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4e4e9a3c74ffafdd7400bec54125834f" category="inline-image-macro">直接接続</block>
  <block id="0d0747a0392a0d4f6a81b1d260386050" category="paragraph">共有スイッチストレージポートを使用する代わりにストレージを直接接続型としてケーブル接続する場合は、直接接続型の図 * Direct-Attached * を使用します<block ref="6c2050d09711322397bf2564af018947" category="inline-image-macro-rx" type="image"></block></block>
  <block id="894b4eb288cb9e47b7d37a64253de1ff" category="section-title">Cisco Nexus 9336C-FX2 ケーブル接続ワークシート</block>
  <block id="d2aa2982691bcb6b044696b6691d5677" category="paragraph">サポート対象のプラットフォームを文書化する場合は、入力済みのケーブル接続ワークシートの例を参考にして、空白のケーブル接続ワークシートに記入する必要があります。</block>
  <block id="3d7fd5afdd3e2a9008c8eb6e9d19e41c" category="inline-image-macro">ケーブル接続ワークシート</block>
  <block id="7bfa22cf35645d8a9b2e335b3ee5f0b0" category="paragraph">各スイッチペアのポート定義の例を次に示します。<block ref="5965a3db7e52c18148f117f0240c1e3f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4cd361459ea2bb087ed6c989579796c7" category="paragraph">ここで、</block>
  <block id="6518b73e43d19c30b6b829ae25fe0227" category="list-text">100G ISL 経由でスイッチ A ポート 35</block>
  <block id="ad8373aefb70ebebc60fc801181d19ad" category="list-text">100G ISL 経由でスイッチ A ポート 36</block>
  <block id="bd63d33de8f32e9e7d399fa9645015b1" category="list-text">100G ISL 経由でスイッチ B ポート 35</block>
  <block id="27e9b823e7c71b4d7a3ecbd09ffb2838" category="list-text">100G ISL 経由でスイッチ B ポート 36</block>
  <block id="9cfc8a50f07804d5007c52c4a385e3a2" category="section-title">空白のケーブル接続ワークシート</block>
  <block id="9ec84c8a49c539fada5b23f8acb3e112" category="paragraph">空白のケーブル接続ワークシートを使用して、クラスタ内のノードとしてサポートされるプラットフォームを文書化できます。Hardware Universe の Supported Cluster Connections テーブルでは、プラットフォームで使用されるクラスタポートが定義されています。</block>
  <block id="eff06c6a47d34c39807f7ae5e22214f9" category="paragraph"><block ref="eff06c6a47d34c39807f7ae5e22214f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b7167dcb288bc483f270fcd135c332ec" category="doc">2 つの新しい共有スイッチを追加して、 DAT ストレージを持つスイッチレスクラスタから移行します</block>
  <block id="8dfca7fe51402f701fd524d9f91fe93f" category="section-title">DAT ストレージを使用したスイッチレスクラスタからの移行</block>
  <block id="867937cadaaec41c51512879188ec686" category="paragraph">2 ノードスイッチレスクラスタを、 Cisco Nexus 9336C-FX2 クラスタスイッチを使用するクラスタに無停止で移行する場合は、特定の構成情報、ポート接続、およびケーブル接続要件に注意する必要があります。使用する手順は、各コントローラに 2 つの専用クラスタネットワークポートがあるか、 1 つのクラスタポートがあるかによって異なります。ここで説明するプロセスは、すべてのノードで光ポートまたは Twinax ポートを使用しているが、ノードでクラスタネットワークポートにオンボード 10Gb BASE-T RJ45 ポートが使用されている場合は、このスイッチではサポートされない。</block>
  <block id="3002e37b8f67b01b4af288a109aca522" category="paragraph">ほとんどのシステムでは、各コントローラに 2 つの専用クラスタネットワークポートが必要です。を参照してください <block ref="5c27bdff6f5cc32ce77bb635aee5a3ec" category="inline-link-rx"></block> を参照してください。</block>
  <block id="ccc533253625ec3fd1cd1ad3dd395ae6" category="paragraph">既存の 2 ノードスイッチレスクラスタ環境を使用している場合は、 Cisco Nexus 9336C-FX2 スイッチを使用して 2 ノードスイッチクラスタ環境に移行し、 3 ノード以上にクラスタを拡張できます。</block>
  <block id="0fd8ea58e8899f870165c3b59ed22856" category="list-text">2 ノードスイッチレス構成：</block>
  <block id="085e7d788f517113effde29af6642887" category="list-text">2 ノードスイッチレス構成が適切にセットアップされて機能している必要があります。</block>
  <block id="2f41f17756f8fddf0c8be18682cabbff" category="list-text">ノードで ONTAP 9.8 以降が実行されている必要があります。</block>
  <block id="3f5b599f12e68f8800bbe21877e029a3" category="list-text">すべてのクラスタポートが「 up 」状態である必要があります。</block>
  <block id="1ad1a22c4ab697b9deb6c2c5bdb1a3e7" category="list-text">すべてのクラスタ LIF （論理インターフェイス）が、 * up * 状態で、 * home * ポートにある必要があります。</block>
  <block id="d305083cf7fe064c7db2cab89646c634" category="list-text">Cisco Nexus 9336C-FX2 スイッチの構成：</block>
  <block id="3c5f7860b8066b3514dea9b2552a9d4e" category="list-text">両方のスイッチに管理ネットワーク接続が必要です。</block>
  <block id="76cac7e2c6e9eff307fb502a7b332f78" category="list-text">クラスタスイッチへのコンソールアクセスが必要です。</block>
  <block id="2a839505baafe2b51fb269fdd1c3743f" category="list-text">Nexus 9336C-FX2 ノード間スイッチおよびスイッチ間接続には、 TwinAx ケーブルまたはファイバケーブルを使用する必要があります。</block>
  <block id="6f3b723bb63a293caab80c9adb46a550" category="list-text">ネットアップ<block ref="e8018b6e740a667345f4bcc94e4023fc" category="inline-link-rx"></block> ケーブル接続の詳細については、を参照してください。</block>
  <block id="ec7d25e213daa7f81e88019951528eb6" category="list-text">スイッチ間リンク（ ISL ）ケーブルは、 9336C-FX2 スイッチの両方でポート 1/35 および 1/36 に接続する必要があります。</block>
  <block id="c2bbc5d95e76d30fb3bb8d87ee2785b2" category="list-text">9336C-FX2 スイッチの初期カスタマイズが完了している必要があります。次のようにします。</block>
  <block id="c7d4c68f782244f8c6c32355393a6897" category="list-text">9336C-FX2 スイッチは最新バージョンのソフトウェアを実行しています</block>
  <block id="4d5d52ebdf89c61ce4aac15a41a8f4a5" category="list-text">リファレンス構成ファイル（ RCF ）がスイッチに適用されている場合</block>
  <block id="db390e5df1a38c520a6fb770cc881fd2" category="list-text">SMTP 、 SNMP 、 SSH などのサイトのカスタマイズは、新しいスイッチで設定する必要があります。</block>
  <block id="c68522049bdb09573c2acd021df2a207" category="paragraph">この手順の例では、クラスタスイッチとノードで次の命名法を使用しています。</block>
  <block id="c07128d57bd3c1ce08b02f5c43857935" category="list-text">9336C-FX2 スイッチの名前は、 _CS1_および CS2__ です。</block>
  <block id="7ca131e501c9ca4de543fee222e1706e" category="list-text">クラスタ SVM の名前は、 _node1 と _node2 _ です。</block>
  <block id="e9ebd9f08e1d9e69098dfaf4a7e4d306" category="list-text">LIF の名前は、ノード 1 では _node1_clus1_AND _node1_clus2_on 、ノード 2 では _node2_clus1_and _node2_clus2_on です。</block>
  <block id="8f8e91158015f3d9f135060666e921be" category="list-text">この手順で使用されているクラスタポートは、 AFF A400 コントローラに準拠した _e3a および _e3b です。。<block ref="e8018b6e740a667345f4bcc94e4023fc" category="inline-link-rx"></block> プラットフォームの実際のクラスタポートに関する最新情報が含まれます。</block>
  <block id="1dc52a814aa197a34b98c9ba1ddb669d" category="list-text">このクラスタで AutoSupport が有効になっている場合は、 AutoSupport メッセージを呼び出してケースの自動作成を抑制します。「 system node AutoSupport invoke -node * -type all -message MAINT= xh 」</block>
  <block id="6ffe43c64e0e1693bc8124a4c0c9e1bc" category="paragraph">x は、メンテナンス時間の長さ（時間単位）です。</block>
  <block id="3be5556789dd2176db5a102e0d58ea77" category="admonition">AutoSupport メッセージはテクニカルサポートにこのメンテナンスタスクについて通知し、メンテナンス時間中はケースの自動作成が停止されます。</block>
  <block id="ab69441454502f4c7d26f429bd4cc498" category="list-text">新しいクラスタスイッチ cs1 と cs2 の両方で、すべてのノード側ポート（ ISL ポートではない）を無効にします。ISL ポートを無効にしないでください。</block>
  <block id="5cbbd10ee541ea50b17f62d450697283" category="paragraph">次の例は、スイッチ cs1 でノードに接続されたポート 1~34 が無効になっていることを示しています。</block>
  <block id="439da491db6adba89cca8ac6262e8e93" category="list-text">[[step4] 2 つの 9336C-FX2 スイッチ cs1 と cs2 間の ISL と ISL 上の物理ポートがポート 1/35 と 1/36 ：「 How port-channel summary」 で稼働していることを確認します</block>
  <block id="586cc436ce07054393e126c7fb79a385" category="paragraph">次の例は、スイッチ cs1 上の ISL ポートが up になっていることを示しています。</block>
  <block id="0cf21251d72221c424510009df39cc04" category="paragraph">次の例は、スイッチ cs2 上の ISL ポートが up になっていることを示しています。</block>
  <block id="ef2ccb267101c1bb4550a0a88ba15fef" category="list-text">[[step5] 隣接デバイスのリストを表示します :'How CDP Neighbors'</block>
  <block id="585048ec3e4d793fb863dfd03ca0bd5b" category="paragraph">このコマンドは、システムに接続されているデバイスに関する情報を提供します。次の例は、スイッチ cs1 上の隣接デバイスを示しています。</block>
  <block id="1b6af97ed2dc264f0a8d2be382e6228a" category="paragraph">次の例は、スイッチ cs2 上の隣接デバイスを表示します。</block>
  <block id="38696044bbd71d082ffea97d1d197778" category="list-text">[[step6] すべてのクラスタポートが up であることを確認します「 network port show -ipspace Cluster 」</block>
  <block id="608cd165bc6f1d8f9bc81d0ba9d4d6f9" category="paragraph">各ポートで、 Link には up 、 Health Status には healthy と表示されるはずです。</block>
  <block id="9fca3b421a2bdacefaa47574b6560351" category="list-text">[[step7] すべてのクラスタ LIF が稼働していることを確認します「 network interface show -vserver Cluster 」</block>
  <block id="8b805e029d1651596a1c4788eae9405c" category="paragraph">各クラスタ LIF は 'Is Home' に true を表示し 'Status Admin/Oper は up/up と表示する必要があります</block>
  <block id="a0c660e29f0d8175447e446b2a7b6605" category="list-text">[[step8] すべてのクラスタ LIF で自動リバートが有効になっていることを確認します。 network interface show -vserver Cluster -fields auto-revert を実行します</block>
  <block id="e8c46fad206eb807356b6c21b63d9b11" category="list-text">[[step9] ：ノード 1 のクラスタポート e3a からケーブルを外し、クラスタスイッチ cs1 のポート 1 に e3a に接続します。これには、 9336C-FX2 スイッチでサポートされている適切なケーブル接続を使用します。</block>
  <block id="b4bd63b9f9f57a91f3a35d2a15d07dec" category="list-text">9336C-FX2 スイッチでサポートされている適切なケーブル接続を使用して、ノード 2 のクラスタポート e3a からケーブルを外し、クラスタスイッチ cs1 のポート 2 に e3a を接続します。</block>
  <block id="13926c16a2339f39a7e2d4218d47d10b" category="list-text">クラスタスイッチ cs1 のすべてのノード側ポートを有効にします。</block>
  <block id="20c7b5e5752f5c1d50d2cad076f86369" category="paragraph">次の例は、スイッチ cs1 でポート 1/1~1/34 が有効になっていることを示しています。</block>
  <block id="48960e0d1676fd6ac78ff83c8eacebcf" category="list-text">[[step12]] すべてのクラスタ LIF が「 Is Home 」の場合、「 network interface show -vserver Cluster 」で「 up 」、「 operational 」、および「 display as true 」になっていることを確認します</block>
  <block id="64fa94ed984230f1b8ea17b502d4973c" category="paragraph">次の例は、ノード 1 とノード 2 のすべての LIF が * up * で、 Is Home の結果が * true であることを示しています。</block>
  <block id="6867fef4b6bd2de211b840e3bbbfade4" category="list-text">[[step13]] クラスタ内のノードのステータスに関する情報を表示します : 'cluster show`</block>
  <block id="dbae8c204d7835be187f0c26e601f21a" category="paragraph">次の例は、クラスタ内のノードの健全性と参加資格に関する情報を表示します。</block>
  <block id="7123a4fa209592c981816b0f845b643b" category="list-text">[[step14]] ノード 1 のクラスタポート e3b からケーブルを外し、 9336C-FX2 スイッチでサポートされている適切なケーブルを使用して、クラスタスイッチ cs2 のポート 1 に e3b を接続します。</block>
  <block id="dbe6c5e5ec08f66cb9d9bbbf7537cf60" category="list-text">ノード 2 のクラスタポート e3b からケーブルを外し、 9336C-FX2 スイッチでサポートされている適切なケーブルを使用して、クラスタスイッチ cs2 のポート 2 に e3b を接続します。</block>
  <block id="52912772c11becd9a50cbf825e907f87" category="list-text">クラスタスイッチ cs2 のすべてのノード側ポートを有効にします。</block>
  <block id="368868489a1f6f26e1e93bfe93468574" category="paragraph">次の例は、スイッチ cs2 でポート 1/1~1/34 が有効になっていることを示しています。</block>
  <block id="ed6ec2ced3bd6b1417ffd6a307d602f3" category="list-text">[[step17]] すべてのクラスタポートが up であることを確認します :`network port show -ipspace Cluster`</block>
  <block id="16d1eb4a10035952002efa1467d33598" category="paragraph">次の例は、ノード 1 とノード 2 のすべてのクラスタポートが up になっていることを示しています。</block>
  <block id="c782f73b93588e1653a37c6028144e87" category="list-text">[[step18]] すべてのインターフェイスが Is Home`: `network interface show -vserver Cluster` の true を表示することを確認します</block>
  <block id="d674fde4628671c3e1078935d12e7997" category="admonition">この処理が完了するまでに数分かかることがあります。</block>
  <block id="1ab96d1849f7724eb8af60316f393f9f" category="paragraph">次の例は、ノード 1 とノード 2 のすべての LIF が * up * であり、 Is Home の結果が true であることを示しています。</block>
  <block id="2c36065908c2490cce62720c9153e948" category="list-text">[[step19]] 両方のノードが各スイッチに 1 つずつ接続されていることを確認します : 'How CDP neighbors'</block>
  <block id="1464260572606bd5f01302103114d67a" category="paragraph">次の例は、両方のスイッチの該当する結果を示しています。</block>
  <block id="fde24d4314549f5a2de46d76d84388d3" category="list-text">[[step20]] クラスタ内で検出されたネットワークデバイスに関する情報を表示します : 「 network device-discovery show -protocol cdp`</block>
  <block id="4ab68595b7465febd6b674ceb462fb7f" category="list-text">[[step21] HA ペア 1 （および HA ペア 2 ）のストレージ構成が正しいことを確認し、エラーがないことを確認します。「 system switch ethernet show 」</block>
  <block id="44025ac545f24dd0dd008b70219b2399" category="list-text">[[step22]] 設定が無効であることを確認します : 「 network options switchless-cluster show 」</block>
  <block id="00168480378876e963201494f9fdc956" category="admonition">コマンドが完了するまでに数分かかることがあります。3 分間の有効期間が終了することを通知するアナウンスが表示されるまで待ちます。</block>
  <block id="f1d50a679b7b3d0967aafba21d2b1454" category="paragraph">次の例では 'false' の出力は ' 構成設定が無効になっていることを示しています</block>
  <block id="f760d9a9bbefbc3a767c22c2b480d748" category="list-text">[step23]] クラスタ内のノードメンバーのステータスを確認します : cluster show</block>
  <block id="00786e5e7924c0ff19f6286d0cfea575" category="paragraph">次の例は、クラスタ内のノードの健全性と参加資格に関する情報を表示します。</block>
  <block id="a5817a6e7f672b3ab5b3f7c1f755970d" category="list-text">[[step24]] クラスタネットワークが完全に接続されていることを確認します : cluster ping-cluster -node node-name`</block>
  <block id="6796b0a81714f43b4554e21da2a05f84" category="list-text">[[step25]] 特権レベルを admin に戻します : 'et -privilege admin</block>
  <block id="b76e651d2878af6de8e2d66f88169399" category="list-text">次のコマンドを使用して、スイッチ関連のログファイルを収集するためのイーサネットスイッチヘルスモニタログ収集機能を有効にします。</block>
  <block id="ac46a1398372944aea67e370678c8675" category="section-title">共有スイッチを設定します</block>
  <block id="a4c011bd7e730e27cada0f1372a5d1bb" category="list-text">2 つの共有スイッチの名前は、 _sh1_AND _sh2__ です。</block>
  <block id="c85e7af53b23deb42e32c92201cdaea6" category="admonition">手順 ONTAP では、特に記載がない限り、 ONTAP コマンドと Cisco Nexus 9000 シリーズスイッチコマンドの両方を使用する必要があります。</block>
  <block id="937b84fb8d649c3a0225267e2159fd55" category="list-text">[step2] ストレージノードポートが正常で動作していることを確認します。「 storage port show -port-type enet 」</block>
  <block id="93c4ea5521c5219f8fcb4eae38057d8f" category="list-text">[[step3]] HA ペア 1 、 NSM224 パス A のポートを sh1 ポート範囲 11-22 に移動します。</block>
  <block id="c15bf25e0c95da8c6317ef9824bb4edf" category="list-text">HA ペア 1 の node1 のパス A から sh1 のポート範囲 11-22 にケーブルを接続します。たとえば、 AFF A400 のパス A のストレージポートは e0c です。</block>
  <block id="91dc1507413f0a7e116492e9ab8b7e01" category="list-text">HA ペア 1 、 node2 、パス A から sh1 のポート範囲 11-22 へケーブルを接続します。</block>
  <block id="cd0f27c3f159ed1171da091e36806cc9" category="list-text">ノードポートが正常で動作していることを確認します。「 storage port show -port-type enet</block>
  <block id="c561445c147c82877b795542e3e5188f" category="list-text">[[step7] クラスタにストレージスイッチやケーブル接続の問題がないことを確認します：「 system health alert show -instance 」</block>
  <block id="f1e05ce4b31fb04295120bd05a4743a2" category="list-text">[[step8] HA ペア 1 、 NSM224 パス B のポートを sh2 ポート範囲 11-22 に移動します</block>
  <block id="daf5a083f03ec28ca196624f5c0b70c6" category="list-text">HA ペア 1 、 node1 、パス B から sh2 のポート範囲 11-22 にケーブルを接続します。たとえば、 AFF A400 のパス B ストレージポートは e5b になります。</block>
  <block id="775cb9e0c66cbcbeb5ea42fe8437f948" category="list-text">HA ペア 1 、 node2 、パス B から sh2 のポート範囲 11-22 にケーブルを接続します。</block>
  <block id="aaf491248ed0270fc32ff08f982aac46" category="list-text">[[step12]] HA ペア 1 のストレージ構成が正しいことを確認し、エラーがないことを確認します。「 system switch ethernet show 」</block>
  <block id="0ca03e80958632a5b480196fc36f2814" category="list-text">[[step13]] 未使用の（コントローラ）セカンダリストレージポートを HA ペア 1 でストレージからネットワークに再設定します。複数の NS224 が直接接続されている場合は、ポートを再設定する必要があります。</block>
  <block id="07943fe8945ea223af7602f694f03c79" category="paragraph">ストレージポートをブロードキャストドメインに配置するには、次の手順を実行します。</block>
  <block id="8f61ee87422ee53849c366ca3c1c6ce5" category="list-text">「 network port broadcast-domain create 」（必要に応じて新しいドメインを作成）</block>
  <block id="e6e1d4c2a0821261ad22649783a49131" category="list-text">「 network port broadcast-domain add-ports 」（既存のドメインにポートを追加する）</block>
  <block id="00f1aa07463199047fef449f663dd76d" category="list-text">[[step14]] ケースの自動作成を抑制した場合は、 AutoSupport メッセージを呼び出して再度有効にします。「 system node AutoSupport invoke -node * -type all -message MAINT=end`</block>
  <block id="7b2171ea7fd7b4ef8056cbed017bdddd" category="doc">ONTAP 9.8 システムのマニュアル</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="sidebar">概要</block>
  <block id="3ffee04e4bb020103f1bece18c2ac58e" category="sidebar">コントローラのアップグレードプロセスを自動化する</block>
  <block id="eee953986530407bd81dc7dec37f7151" category="sidebar">ステージ 1 アップグレードの準備</block>
  <block id="d410001785d5e6cf46422378e7dc305f" category="sidebar">ステージ 2 ：ノード 1 の再配置および廃止</block>
  <block id="db0f435716365df4f28208e723c02179" category="sidebar">ステージ 3 ：ノード 3 のインストールとブート</block>
  <block id="cd93c6e9e61b2d31c781ea8786cb4e81" category="sidebar">ステージ 4 再配置と撤去 node2</block>
  <block id="62e340083f3c5febba2fa693ce759a1a" category="sidebar">ステージ 5 Install and boot node4</block>
  <block id="ded1f8eb21bf382d51471642d150b8d5" category="sidebar">ステージ 6 アップグレードを完了する</block>
  <block id="bdbf296139657929f989f110dccebbd3" category="sidebar">アグリゲートの再配置に失敗していないかどうか</block>
  <block id="cdb3662e6ecd47991de3008672ab3eb8" category="paragraph">node2 に同じバージョンの ONTAP 9 がインストールされていない場合は、 node4 をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに格納されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="09702fca7923997e0da2187b92badbd9" category="list-text">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続されている FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、これで完了です <block ref="72a284a0ab19d0d6976ab9f3aa1bfc65" category="inline-xref-macro-rx"></block> から <block ref="e953da376eb12d20ff3d04f195189ba7" category="inline-xref-macro-rx"></block>をクリックしてから、このセクションの指示に従ってください <block ref="1d789633b45165b05bf13f9838060fe6" category="inline-link-macro-rx"></block> およびへ <block ref="15e1611f6cc2b64b7163cc152446c8c0" category="inline-link-macro-rx"></block>、保守モードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="ed722a5ba6799c1f65d4b9716575b170" category="list-text">ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了してから、に進む必要があります <block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="c7009662ac7e20dc02b0e7d7e2ed8804" category="list-text">[[auto_install4_stp1] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="bdd991003eebd5e12bd133ce301ddb3e" category="paragraph">各ノード 4 のプラットフォームについて、『 Installation and Setup Instructions 』または『 FlexArray Virtualization Installation Requirements and Reference_for the node4 』、該当するディスクシェルフガイド、および『 ONTAP 9 ハイアベイラビリティ構成ガイド』の手順に従って、次の接続をケーブル接続します。</block>
  <block id="d95867deadfe690e40f42068d6b59df8" category="inline-link-macro">参考資料</block>
  <block id="ce7a84a20f408b054d3cd646b0c0eb5b" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> FlexArray 仮想化のインストール要件およびリファレンスにリンクするには、 _ および _ ONTAP 9 ハイアベイラビリティ構成ガイド _ にリンクしてください。</block>
  <block id="8c346c2672eda514d4b912cb897c6c54" category="list-text">node4 への電源を入れてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="5d043d33743f66f7467bf67aa5653705" category="admonition">* 注意：遅延は無視しないでください。バッテリーの充電に失敗すると、データが失われるおそれがあります。 *</block>
  <block id="b1e6d70b6a993d323936c87bff29461b" category="admonition">を参照してください <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="17e387f327c3866b0d0ae33451a79635" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、手順 1 の「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所に配置する必要があります <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="161347e221ff82d9edced01f7b383668" category="admonition">次のメッセージは無視してください： This 手順 is not supported for Non-Disruptive Upgrade on an HA pair' The note 環境 nondisruptive upgrade of ONTAP and not upgrades of controllers新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールすると、正しいイメージがインストールされない場合があります。この問題環境 All ONTAP リリース</block>
  <block id="bea7673b9c3eda34bfe449c80f92539f" category="list-text">コントローラとシャーシが HA 構成になっていることを確認します。</block>
  <block id="dd974151ca8e1528e09f3e46a090f617" category="paragraph">「 ha-config modify controller ha 」を参照してください</block>
  <block id="898e93ac193351b4a5f895216aad0508" category="paragraph">「 ha-config modify chassis ha 」を参照してください</block>
  <block id="d09b053bad809215bd1c4350481aba44" category="list-text">メンテナンスモードを終了します。</block>
  <block id="088efa1f2f879b1cccaa5b548a064885" category="list-text">[auto_install4_step15]] ノード 3 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="10615484104523967682784d6824a536" category="list-text">必要に応じて、 node4 に日付を設定します。</block>
  <block id="7651eb09fbac7d811bab7ed026019b25" category="list-text">必要に応じて、 node4 に時間を設定します。</block>
  <block id="55f472f17ae9bd54337956b780332fff" category="list-text">必要に応じて、 node4 にパートナーシステム ID を設定します。</block>
  <block id="a41540a4727489355ce1dd1fcda58843" category="list-text">[auto_install4_step21] 新しいノードのブートローダで '-partner-sysid' パラメータを設定する必要がありますnode4 の場合、「 partner-sysid 」は node3 のものでなければなりません。node3 の「 partner-sysid 」を確認します。</block>
  <block id="7f3ec1ffd93dbf53956485464c8f29a2" category="cell">に進みます <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="6c87f26ede26b8a4600cd3be3a5c4a39" category="list-text">セクションに移動します <block ref="a6d322e902b744ff3a11f02b5c6d9496" category="inline-link-macro-rx"></block> をクリックし、このセクションのサブセクションを完了します。</block>
  <block id="d4bf40b038a0294c5a0c9cfeacb6b991" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="7d33d698028361a6b46f35be2a3ff5a2" category="inline-xref-macro-rx"></block>。</block>
  <block id="f1f401fda84803d54fb9ed083d0ebefa" category="list-text">[[auto_install4_step23]] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="2a1ffcfd9b3fe851dbeca2f509c1f7a3" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="1d789633b45165b05bf13f9838060fe6" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="561611b8a20e2e0f3f7213992d997278" category="list-text">[[step27]] NetApp Storage Encryption （ NSE ）がこの構成で使用されている場合、「 setenvarg.storageencryption.support 」コマンドは「 true 」に設定する必要があります。「 kmip.init.maxwait` 」変数は、 node2 構成のロード後にブートループが発生しないように「 off 」に設定する必要があります。</block>
  <block id="d1cffd7fada9f21315c30db304bb2ca9" category="list-text">ノードをブートメニューに追加します。</block>
  <block id="64782ddcc78f95845d4571abdc1d5f5a" category="inline-link-macro">ノード 4 の UTA / UTA2 ポートの確認と設定、手順 15</block>
  <block id="f5de4d1593689e91265cc76abd91be3e" category="paragraph">FC または UTA / UTA2 設定がない場合は、を実行します <block ref="65c4c751ac1fc661b74f2a8dfa84d816" category="inline-link-macro-rx"></block> ノード 4 が node2 のディスクを認識できるようにします。</block>
  <block id="cbe290335ddc7c966d9c148980b1ddd5" category="list-text">[[step29]] ストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用する MetroCluster 構成、 V シリーズシステム、およびシステムについては、ノードに接続されているディスクを検出するために、 FC または UTA / UTA2 ポートを設定する必要があります。このタスクを完了するには、セクションに進んでください <block ref="39202fc611c1fcac2f1575fc00cb55d3" category="inline-link-macro-rx"></block>。</block>
  <block id="9da5def37cb93a4b07697531a680892e" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_auto_rede_node2.adoc[]</block>
  <block id="c5a0fbe5bc52c6bfa986d706834593e6" category="summary">このトピックの他のリファレンスガイドや Web サイトにリンクできます。</block>
  <block id="ebbd1e762ddaa937297b0711ae73ad9c" category="paragraph">このガイドに記載されている手順を実行する際には、リファレンスガイドを参照するか、参照用 Web サイトにアクセスする必要があります。</block>
  <block id="ca08692e364235f9663a36e097fce11e" category="list-text"><block ref="62c5f0122d8aa83cbe5e5ee0c9a21b4b" category="inline-xref-macro-rx"></block></block>
  <block id="b39850fa882a12596e03ef7779fcfebc" category="list-text"><block ref="5e1bb6d16e6bc7a1d750ae669f510747" category="inline-xref-macro-rx"></block></block>
  <block id="58124051e0ef662b29adaa405eb9b08e" category="section-title">リファレンスガイド</block>
  <block id="efe2d7c21a2abcf983f636aa75ba03d6" category="paragraph">このアップグレードに固有のドキュメントを次の表に示します。</block>
  <block id="cdf7dff00948470baf1757aaf343c1ae" category="cell"><block ref="cdf7dff00948470baf1757aaf343c1ae" category="inline-link-macro-rx"></block></block>
  <block id="2061ab494eae73f1e7251b76a58b27d3" category="cell">ストレージまたはボリュームを移動してクラスタ内のコントローラハードウェアを簡単にアップグレードする方法について説明します。サポートされるモデルをディスクシェルフに変換する方法についても説明します。</block>
  <block id="b8069555e46b2e92b9debe0ea6434eb5" category="inline-link-macro">『 Fabric-attached MetroCluster Installation and Configuration Guide 』</block>
  <block id="fbd283f8a9f7651a5ce3e560e81d5264" category="cell"><block ref="fbd283f8a9f7651a5ce3e560e81d5264" category="inline-link-macro-rx"></block></block>
  <block id="5d1afe326f483a14ce8cd69456db1384" category="cell">ファブリック構成で MetroCluster のハードウェアコンポーネントとソフトウェアコンポーネントをインストールおよび設定する方法について説明します。</block>
  <block id="925c7487b0025eb7869cfb916154eda3" category="cell"><block ref="925c7487b0025eb7869cfb916154eda3" category="inline-link-macro-rx"></block></block>
  <block id="d1d13e1cdd7f75473f7902868b6ba3d7" category="cell">FlexArray 仮想化システムのケーブル接続手順とその他の情報について説明します</block>
  <block id="a7741c235a7c165bd3af440939c6e899" category="cell"><block ref="a7741c235a7c165bd3af440939c6e899" category="inline-link-macro-rx"></block></block>
  <block id="34e4a4d5395b895e2a8897ebef238c1a" category="cell">計画的なメンテナンス時または災害発生時の両方のケースにおける、 MetroCluster のスイッチオーバーとスイッチバック処理の実行方法について説明します。</block>
  <block id="240d3868b181a0a12e2128654b07f892" category="inline-link-macro">MetroCluster アップグレードおよび拡張ガイド</block>
  <block id="8b204f52a70b9489a5031692f81ea690" category="cell"><block ref="8b204f52a70b9489a5031692f81ea690" category="inline-link-macro-rx"></block></block>
  <block id="595e15ec8af10c3d959522d0d1eab769" category="cell">MetroCluster 構成でコントローラとストレージモデルをアップグレードし、 MetroCluster FC 構成から MetroCluster IP 構成に移行し、ノードを追加して MetroCluster 構成を拡張する手順について説明します。</block>
  <block id="b42a2144e64bfdf4eecf966f7bb495c5" category="inline-link-macro">ONTAP 9.0 コマンド：マニュアルページリファレンス</block>
  <block id="a4117daa2ff8204dba8b79ed1da09e5b" category="cell"><block ref="a4117daa2ff8204dba8b79ed1da09e5b" category="inline-link-macro-rx"></block></block>
  <block id="81f65dde1fe71b470218b0fbe6dafc23" category="cell">サポートされる ONTAP 9.0 コマンドの構文と使用法について説明します。</block>
  <block id="1447526d9bfec11c73a566b23b4f87ab" category="inline-link-macro">ONTAP 9.1 コマンド：マニュアルページリファレンス</block>
  <block id="3f651f32c2efae31cb0b4da82294b37b" category="cell"><block ref="3f651f32c2efae31cb0b4da82294b37b" category="inline-link-macro-rx"></block></block>
  <block id="d7e58a36d2ecf34ed950099c1e30e349" category="cell">ONTAP 9.1 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="25d709d9429cb9179fe81f4343515fa1" category="inline-link-macro">ONTAP 9.2 コマンド：マニュアルページリファレンス</block>
  <block id="89065c0795a681c066df18ebe55464d3" category="cell"><block ref="89065c0795a681c066df18ebe55464d3" category="inline-link-macro-rx"></block></block>
  <block id="be948fce3cd6e191738619444b30062e" category="cell">ONTAP 9.2 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="46490acdb4b495cbc81468a4840d2c5d" category="inline-link-macro">ONTAP 9.3 コマンド：マニュアルページリファレンス</block>
  <block id="9d087aa4c3e3015b8ac013580c0f90d4" category="cell"><block ref="9d087aa4c3e3015b8ac013580c0f90d4" category="inline-link-macro-rx"></block></block>
  <block id="119362933ed4ef8c2dbccecbb68cc43b" category="cell">ONTAP 9.3 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="1aeb70ab3e33d74db4928037aa88a7eb" category="inline-link-macro">ONTAP 9.4 コマンド：マニュアルページリファレンス</block>
  <block id="8a14044dc26b4cb3bb6448492e70e961" category="cell"><block ref="8a14044dc26b4cb3bb6448492e70e961" category="inline-link-macro-rx"></block></block>
  <block id="929d0856b69565e71fefd5bef5533d93" category="cell">ONTAP 9.4 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="6ea3af7ae81e05b625440926c8fcc6ea" category="inline-link-macro">ONTAP 9.5 コマンド：マニュアルページリファレンス</block>
  <block id="78610e5d700899a0dc146918529c56af" category="cell"><block ref="78610e5d700899a0dc146918529c56af" category="inline-link-macro-rx"></block></block>
  <block id="db0052a2214aa0ca3e4d7e0a79e8d79a" category="cell">ONTAP 9.5 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="384be8d232a0ab0b84a145e4bf59bbed" category="inline-link-macro">ONTAP 9.6 コマンド：マニュアルページリファレンス</block>
  <block id="84d45c7d2db474ca3af465732948fd8d" category="cell"><block ref="84d45c7d2db474ca3af465732948fd8d" category="inline-link-macro-rx"></block></block>
  <block id="7478969542b0a3320dd1f9c09d30231a" category="cell">ONTAP 9.6 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="c9aa14f76f0f0a25762ef86776113011" category="inline-link-macro">ONTAP 9.7 コマンド：マニュアルページリファレンス</block>
  <block id="edcc14f99b45ac8b5b29319da6793eea" category="cell"><block ref="edcc14f99b45ac8b5b29319da6793eea" category="inline-link-macro-rx"></block></block>
  <block id="849578c3a682cf124d61ab2b562aa1fa" category="cell">ONTAP 9.7 でサポートされるコマンドの構文と使用法について説明します。</block>
  <block id="a206ae5c7f29407f29397485796cc31c" category="cell"><block ref="a206ae5c7f29407f29397485796cc31c" category="inline-link-macro-rx"></block></block>
  <block id="c85c87a5f255edc538c88661bb863907" category="cell">サポートされている ONTAP 9.8 コマンドの構文と使用法について説明します。</block>
  <block id="508ea01112793b519989beb7d880527a" category="cell"><block ref="508ea01112793b519989beb7d880527a" category="inline-link-macro-rx"></block></block>
  <block id="83fe3ff910eb6889efd118cf192be584" category="cell">ONTAP 物理ストレージの管理方法、アグリゲートを作成、拡張、および管理する方法、 Flash Pool アグリゲートを使用する方法、ディスクを管理する方法、および RAID ポリシーを管理する方法について説明します</block>
  <block id="b3ab554c3d9911985767c939de6affcf" category="cell"><block ref="b3ab554c3d9911985767c939de6affcf" category="inline-link-macro-rx"></block></block>
  <block id="8514bd0cded8da51b71a7aba8599153c" category="cell">ストレージフェイルオーバー、テイクオーバー / ギブバックなどのハイアベイラビリティクラスタ構成をインストールおよび管理する方法について説明します。</block>
  <block id="a37dc8879c3a32509a9a3b2ebd32b7ec" category="cell"><block ref="a37dc8879c3a32509a9a3b2ebd32b7ec" category="inline-link-macro-rx"></block></block>
  <block id="5e4a89e01c551e30f3b547a226c6e59d" category="cell">ボリューム、 FlexClone ボリューム、ファイルと LUN 、 FlexCache ボリュームを使用して論理ストレージリソースを効率的に管理する方法について説明します。 重複排除、圧縮、 qtree 、およびクォータ</block>
  <block id="536543b4960352f0462bf234eeb3870a" category="inline-link-macro">ONTAP 9 9.7 以前のネットワーク管理ガイド</block>
  <block id="dee039af23241dedd9ffcb0cdc5f0846" category="cell"><block ref="dee039af23241dedd9ffcb0cdc5f0846" category="inline-link-macro-rx"></block></block>
  <block id="ed99eca5665640e9b0e3fced8264b368" category="cell">クラスタで物理 / 仮想ネットワークポート（ VLAN およびインターフェイスグループ）、 LIF 、ルーティング、およびホスト解決サービスを設定および管理する方法、ロードバランシングでネットワークトラフィックを最適化する方法、および SNMP を使用してクラスタを監視する方法について説明します。</block>
  <block id="037e7f41a1db47e22165f7405cc5101f" category="cell"><block ref="037e7f41a1db47e22165f7405cc5101f" category="inline-link-macro-rx"></block></block>
  <block id="d6472b75dbafb3a7c21a461e3ea86064" category="cell"><block ref="d6472b75dbafb3a7c21a461e3ea86064" category="inline-link-macro-rx"></block></block>
  <block id="3726fbd47284733606ebde91ad50a7c6" category="cell">SAN 環境向けに iSCSI プロトコルや FC プロトコルを設定および管理する方法について説明しています</block>
  <block id="d7837c4b37e4d9c1b46341d9cbd59a0d" category="cell"><block ref="d7837c4b37e4d9c1b46341d9cbd59a0d" category="inline-link-macro-rx"></block></block>
  <block id="684c05de33c5ed574435c18094046bde" category="cell">FC と iSCSI のトポロジと配線方式について説明します</block>
  <block id="1975e733c6218d07722af6dcd0c21c73" category="cell"><block ref="1975e733c6218d07722af6dcd0c21c73" category="inline-link-macro-rx"></block></block>
  <block id="ec8a498c0ff432b735ba28247dbb239f" category="cell">ONTAP をセットアップおよび設定する方法について説明します。</block>
  <block id="328f22df6c1a5af270e91f1b49d64810" category="cell"><block ref="328f22df6c1a5af270e91f1b49d64810" category="inline-link-macro-rx"></block></block>
  <block id="38f19900a80b03ef2e62f2105ab6323a" category="cell">ONTAP システムの管理方法、 CLI インターフェイスの使用方法、クラスタへのアクセス方法、ノードの管理方法などについて説明します</block>
  <block id="cbe62d1ac470314d27bd0cc80fb88af8" category="cell"><block ref="cbe62d1ac470314d27bd0cc80fb88af8" category="inline-link-macro-rx"></block></block>
  <block id="25c1844876df2afa3616f32befb014b3" category="cell">ONTAP のダウンロードとアップグレードの手順については、を参照してください</block>
  <block id="a7c6ad52ed3d2aeb45a615219b19eb9e" category="inline-link-macro">ONTAP 9.5 を実行しているコントローラハードウェアを ONTAP 9.7 にアップグレードするには、「 system controller replace 」コマンドを使用します</block>
  <block id="a7f16d1e8a1ac5d60550034de354dd1b" category="cell"><block ref="a7f16d1e8a1ac5d60550034de354dd1b" category="inline-link-macro-rx"></block></block>
  <block id="76131ba473c7ab8f940b1defa73cba87" category="cell">ONTAP 9.5 を実行するコントローラを ONTAP 9.7 に無停止でアップグレードする場合に、「 system controller replace 」コマンドを使用してアグリゲートの再配置手順を説明します。</block>
  <block id="748c6c99f6479bbb491c46a149cdfcef" category="cell"><block ref="748c6c99f6479bbb491c46a149cdfcef" category="inline-link-macro-rx"></block></block>
  <block id="62a92c3d7ea27667983fb6842f0835ec" category="cell">ONTAP 9.8 を実行するコントローラを、 system controller replace コマンドを使用して無停止でアップグレードする場合に必要なアグリゲートの再配置手順について説明します。</block>
  <block id="c4f6e679df3510ade01e1eb289f28470" category="inline-link-macro">アグリゲートの再配置を使用して、 ONTAP 9.7 以前を実行しているコントローラハードウェアを手動でアップグレードします</block>
  <block id="e2e9559980b3786b225c9c05e8a13568" category="cell"><block ref="e2e9559980b3786b225c9c05e8a13568" category="inline-link-macro-rx"></block></block>
  <block id="55b831f07f1b45c03df3d93cd827ad94" category="cell">ONTAP 9.7 以前を実行しているコントローラの手動による無停止アップグレードを実行するために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="345d5e5ac849d0ff413facdf20f6117d" category="inline-link-macro">アグリゲートの再配置を使用して、 ONTAP 9.8 以降を実行しているコントローラハードウェアを手動でアップグレードします</block>
  <block id="d9a8e3f32ab422d08375a598a5807e74" category="cell"><block ref="d9a8e3f32ab422d08375a598a5807e74" category="inline-link-macro-rx"></block></block>
  <block id="f39fe3ae91660449bc81c96d4bc3f3a6" category="cell">ONTAP 9.8 以降を実行するコントローラの手動無停止アップグレードを実行するために必要なアグリゲートの再配置手順について説明します。</block>
  <block id="f7e23c11beeca2c17c91f38177574a83" category="section-title">参照サイト</block>
  <block id="7799247fae92e6077d1c863277774421" category="paragraph">。 <block ref="a578dfd24b9ac76011d432b13fc1b9d1" category="inline-link-macro-rx"></block> サイトには、システムで使用可能なネットワークインターフェイスカード（ NIC ）やその他のハードウェアに関するドキュメントも含まれています。また、にも含まれています <block ref="9c839fcdfb8699a63c787254d7b1ae03" category="inline-link-macro-rx"></block>をクリックします。このコマンドは、新しいシステムでサポートされるハードウェアに関する情報を提供します。</block>
  <block id="52fd56498b7f7c00d95bd30d3d0fc632" category="paragraph">を参照してください <block ref="ce7a5b355b31f8ee0c1b6b8b399a329a" category="inline-link-macro-rx"></block> ONTAP 9 製品ドキュメントにアクセスするには、以下の手順を実行</block>
  <block id="7e2de5eb63fb2b34e58f2153cc03c71d" category="paragraph">へのリンクについては、ネットアップサポートサイトのを参照してください <block ref="5fbf315c6f5ea598be883d972c599456" category="inline-link-macro-rx"></block> ツール。</block>
  <block id="ec8517f5a3bac3a1b92d4ef89c731fcc" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ../_include/ru_auto_prepare_nodes_upgrade_top_step_3.adoc[]</block>
  <block id="9154c9f6f627ec9fa7725b0cbec3b33b" category="list-text">[[step4]] システムコンソールのコントローラ交換用手順の指示に従って、次の一連のコマンドを実行します。</block>
  <block id="e35c9bcadd15fafdadb9422ec67d5b55" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_auto_correct_aggregate_owner.adoc[]</block>
  <block id="dcb5f4625de7512f722074c6a6d5fc37" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ../_include/ru_auto_license.adoc[]</block>
  <block id="ea6471fa3c0b778358a74a483b65908e" category="summary">ノード 4 でオンボードの FC ポート、 UTA / UTA2 ポート、または UTA / UTA2 カードが使用されている場合は、残りの手順を実行する前に設定を行う必要があります。</block>
  <block id="b807d86632667b471ffae105471bdbdf" category="paragraph">&lt;stdin&gt; の未解決のディレクティブ： ./_include/ru_auto_set_fc_or_uta_config_node4 _intro.adoc[]</block>
  <block id="3dc7a36efda97abdf7240a1ca32de490" category="admonition">ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクが搭載されたシステムをアップグレードする場合は、に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合に、ノード 4 にオンボードの FC ポート、オンボード UTA / UTA2 ポート、 UTA / UTA2 カードがないときは、 section_Install and boot node4 セクションに戻って再開する必要があります <block ref="1a99f6ce933cd745b2b02e54c9272506" category="inline-link-macro-rx"></block>。ノード 4 に十分なラックスペースがあることを確認してください。node4 が node2 とは別のシャーシにある場合は、 node3 と同じ場所に node4 を配置できます。node2 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="dab5593c109fec12a76b5fc654c23126" category="paragraph">&lt;stdin&gt; の未解決のディレクティブ： ./_include/ru_auto_set_fc_or_uta_uta2 _config_node4 _choices.adoc[]</block>
  <block id="3606ac4fad6a78917c33a073f5d20bed" category="paragraph">&lt;stdin&gt; の未解決のディレクティブ： ./_include/ru_auto_config_fc_ports_node4 .adoc[]</block>
  <block id="59df83a3d8dd25ad19619fe75cc32a49" category="list-text">[[step8]] 次のいずれかの操作を実行します。</block>
  <block id="f57ce051c0dd7274751c09db8a0e40b1" category="list-text">このセクションをスキップして、に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="403ef226990b83673617ca3be4865d06" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="be1e23bb281357a07ce5db58c0e3ed83" category="list-text">node4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、 section_Check をスキップして UTA / UTA2 ポートを設定し、 node4 に戻ってブートノードを再開します <block ref="ec6d4cacddb01e88226b9b376590bcc5" category="inline-link-macro-rx"></block>。</block>
  <block id="fd894a783c8c8400a3021bd2ad147cba" category="paragraph">次の例のような出力が表示されます。</block>
  <block id="feb4c7d35f5c6972a78c24ac4caebf00" category="cell">に進みます <block ref="7ffb05d2232c9c60f695127651bcf871" category="inline-xref-macro-rx"></block>。</block>
  <block id="a06e3550b827dbbc3fa903ada41f165b" category="cell">手順 5 から 12 を省略して、に進みます <block ref="8c1d75fc2023dc4e109b4251bd0229b1" category="inline-xref-macro-rx"></block>。</block>
  <block id="1228ef3c4a262a3a23b05009801f9d74" category="list-text">[[auto_check_4_step5] 次のいずれかの操作を実行します。</block>
  <block id="5ab10acc3f713db2883e41aeefc0a947" category="cell">に進みます <block ref="8fa9bd2d3aca152bc08859144a7af8fa" category="inline-xref-macro-rx"></block></block>
  <block id="5014f056b226c4802b8e30f5800a2ea3" category="cell">手順 7 を省略して、に進みます <block ref="3d86a68aa8fb2ef1661a4814f02f3b64" category="inline-xref-macro-rx"></block>。</block>
  <block id="ef0770e5329716a78bdc700afc4541c1" category="list-text">アダプタがイニシエータモードで、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="d8f98bdc807ae3903ae80ea0b78fbd6e" category="list-text">[[auto_check_4_step7] 現在の構成が目的の用途に一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="7e0be6e2a6d4c241d66e582ce0ecbcea" category="list-text">[[auto_check_4_step8] 次のコマンドを使用して設定を確認し、出力を調べます。</block>
  <block id="fe040552b4fc83efe2ba593498969954" category="list-text">設定を確認します。</block>
  <block id="38827adabf48650b74e5fe794b8f2413" category="paragraph">次の例の出力は ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更され ' アダプタ「 2a 」および「 2b 」のモードが「 cna' 」に変更されていることを示しています</block>
  <block id="efdbd48524f71c2dd98be1f586e183b7" category="cell">「 network fcp adapter modify -node &lt;node_name &gt; -adapter &lt;adapter_name&gt; -state up 」の形式で指定します</block>
  <block id="803497e06fb63becf479290f3ae30e01" category="cell">に進みます <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。</block>
  <block id="00538e299fb2786306fe6cdcd6e9fd03" category="cell">section_Install および boot node4 に戻り、で再開します <block ref="ec6d4cacddb01e88226b9b376590bcc5" category="inline-link-macro-rx"></block>。</block>
  <block id="4a137bad34f46785824a8100e1c6cba6" category="list-text">[[auto_check_4_step13]] メンテナンスモードを終了します。</block>
  <block id="479951d6e509fddf053f700071fd43a4" category="list-text">[[step14]] ブートメニューからのノードのブート :</block>
  <block id="d27b8c8cfb6e88cecd06bd564e90cd36" category="paragraph">A800 にアップグレードする場合は、に進みます <block ref="1917bbf2d6d289423b4a495f5ba4fcca" category="inline-xref-macro-rx"></block></block>
  <block id="cd642c3a70cf520cbc7cc74da7b6cf70" category="list-text">[[auto_check_4_step15]] ノード 4 で、ブートメニューに移動し、 22/7 を使用して、非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで node2 と入力し、次の例のように node2 のディスクを node4 に再割り当てします。</block>
  <block id="5dbdf6da1c2d885026bcf4a6be74a4b0" category="list-text">「 no disks found 」というメッセージが表示されてシステムがリブートループに入ると、システムが FC ポートまたは UTA/UTA2 ポートをターゲットモードにリセットしたため、ディスクが認識されないことを示します。これを解決するには、に進みます <block ref="d55e3a0f9758a99c055e4411cec66cde" category="inline-xref-macro-rx"></block> 終了： <block ref="1abe7aef97cf6f4670adea7171f10403" category="inline-xref-macro-rx"></block> または、セクションに移動します <block ref="3a339ed5bdc85366b677c546716fabfa" category="inline-link-macro-rx"></block>。</block>
  <block id="00454a3a0a181cf262da410213cfcb17" category="list-text">[[auto_check_4_step17]] autoboot 中に Ctrl キーを押しながら C キーを押して 'loader&gt;` プロンプトでノードを停止します</block>
  <block id="8923acb8081affcd156ba6d58720db9b" category="list-text">LOADER プロンプトで、メンテナンスモードに切り替えます。</block>
  <block id="82b61383829ad9f7c791ca9adcbe4b1f" category="list-text">保守モードで、以前に設定したすべてのイニシエータポートをターゲットモードで表示します。</block>
  <block id="0237455b5c9b0d306e2c96ee6c599c24" category="paragraph">ポートをイニシエータモードに戻します。</block>
  <block id="7dca1ec13f028b73f4170b0124cf9d45" category="list-text">ポートがイニシエータモードに変更されたことを確認します。</block>
  <block id="a04a9fc20b8a671e539314c55bde8973" category="list-text">[[auto_check_4_step22]] LOADER プロンプトのブートアップ：</block>
  <block id="a615e77be7318a1511c3e98bbe302ca7" category="list-text">[[auto_check_4_step23]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node2 のアグリゲートをルートアグリゲートとして設定し、 node4 が node2 のルートアグリゲートからブートするようにします。ルート・アグリゲートを設定するには ' ブート・メニューからオプション 5 を選択して ' 保守モードに切り替えます</block>
  <block id="60429a189ace5d1ba3d34868ab11d685" category="admonition">* ここに示す順序で以下の手順を実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。 *</block>
  <block id="c9029dad52ad7bd50890b949161a37e6" category="list-text">メンテナンスモードに切り替えます。</block>
  <block id="a1dd60e47fece6bf56643327d78025eb" category="list-text">node2 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="4c7213f8f3213d4809b8212b52bfc23a" category="list-text">必要に応じて、 node2 アグリゲートをオンラインにします。</block>
  <block id="40418d7b25faced12b99f33b2265e3b3" category="list-text">ノード 4 が元のルートアグリゲートからブートしないようにします。</block>
  <block id="2f71ad2b913b1589756e19c235187106" category="list-text">node2 のルートアグリゲートを node4 の新しいルートアグリゲートとして設定します。</block>
  <block id="cb891bf7e336200833c9e240c76a0cc6" category="list-text">ノード 4 のルートアグリゲートがオフラインになっていること、および node2 から提供されたディスクのルートアグリゲートがオンラインになっていて root に設定されていることを確認します。</block>
  <block id="b8502e783bdb917fdc3cdb8f5669cf02" category="paragraph">&lt;stdin&gt; の未解決のディレクティブ：： ./_include/ru_auto_get_ip_address_external_key_management_server_encryption.adoc[]</block>
  <block id="eef7c3c189b38852fa6fd7ff22f1836c" category="paragraph">ONTAP 9.8 以降では、 Key Management Interoperability Protocol （ KMIP ）サーバを使用して認証キーを管理できます。</block>
  <block id="848d1d77ef93461131de96c63bf0d645" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_auto_manage_authentication_kmx_servers.adoc[]</block>
  <block id="700e0983810f7b842a203a090be56c40" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ../_include/ru_auto_manage_storage_encryption_okm.adoc[]</block>
  <block id="214f35608f8b795c650412f255442539" category="paragraph">&lt;stdin&gt; の未解決のディレクティブ：： ./_include/ru_auto_quiesce _snapmirror_relationships_adoc[]</block>
  <block id="ce1ec3b6f165be8cdde0654c531487e5" category="list-text">MetroCluster コンポーネントが正常であることを確認します。</block>
  <block id="14b1eaf3b61e952ace468e42285ce4ac" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_auto_verify_healthy_MetroCluster_configuration/adoc[]</block>
  <block id="31ccaad020ad8995655b8785712ac7b9" category="paragraph">ノード 1 にインストールされている ONTAP 9 のバージョンが異なる場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="9a1df33637b4fc5aa325b169d3a7aa84" category="list-text">ストレージアレイに接続されている V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、を完了する必要があります <block ref="7c8db700ba9d62850f8b66020ea3d4b9" category="inline-xref-macro-rx"></block> から <block ref="d133a54ce8997c6b3c1ffdd4bfb32c84" category="inline-xref-macro-rx"></block>をクリックしてから、このセクションの指示に従います <block ref="b8be2332e6727dc6b48478780a30df1b" category="inline-link-macro-rx"></block> および <block ref="e1881302722b07e924682c0aeef752a5" category="inline-link-macro-rx"></block> 必要に応じて、メンテナンスモードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block>。</block>
  <block id="80f025cc78499a80da49bd37c9bde220" category="list-text">ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了して、にアクセスする必要があります <block ref="b8be2332e6727dc6b48478780a30df1b" category="inline-link-macro-rx"></block> および <block ref="e1881302722b07e924682c0aeef752a5" category="inline-link-macro-rx"></block> セクションで、クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="56fd5e5051297f55fa1e22d93c8d71b8" category="list-text">[[auto_install3_step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="b76de3994341c25067b438fe161926b7" category="list-text">[[auto_install3_step2] ノードモデルの _Installation and Setup Instructions_ に従って、ラックにノード 3 をインストールします。</block>
  <block id="c558275e7d3a61c5ffa4c89d17138a8e" category="list-text">[[auto_install3_step3]] ケーブルノード 3 を接続し、ノード 1 からノード 3 に接続を移動します。</block>
  <block id="8786753bd0ed7258440133f486b3e488" category="paragraph">設置およびセットアップ手順 _ または FlexArray 仮想化インストール要件およびリファレンス _ を使用して、ノード 3 プラットフォーム、該当するディスクシェルフガイド、および ONTAP 9 ハイアベイラビリティ構成ガイド _ を使用して、次の接続をケーブル接続します。</block>
  <block id="a5492c1c64c93543c424918fe38a847e" category="list-text">[[auto_install3_step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C を押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="b64113c5a70901151e544500a7cb6e41" category="list-text">[[auto_install3_step5]] で警告メッセージが表示される場合 <block ref="07e6330d4bc574888011bcb486743c88" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="526c6586cac2a5ca719ec72a9f077f53" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所を指します <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="d268c4054cbf23abb6afc6dec45039b4" category="list-text">[[step12]] コントローラとシャーシが HA として構成されていることを確認します。</block>
  <block id="a73d1d9d7a9d36edb67531c5cdd004f4" category="list-text">[[step14]] メンテナンスモードを終了します。</block>
  <block id="c3f299c216a4d01822966fa31545bf67" category="paragraph">ブート環境プロンプトで Ctrl+C キーを押して ' 自動ブートを中断します</block>
  <block id="46b4ada45ce5a9b580d12f2837589006" category="list-text">[[step15]] node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="92b09953e03c695a41d0eca9cc7a70b3" category="list-text">[[step17]] 必要に応じて、 node3 の日付を設定します。</block>
  <block id="8fa05814ac535bc4cac5dc313de56abe" category="list-text">[[step19]] 必要に応じて、ノード 3 の時刻を設定します。</block>
  <block id="671e8c839701c582dc6d924cc3f17c82" category="list-text">[[step20]] 必要に応じて、 node3 にパートナーシステム ID を設定します。</block>
  <block id="adf02be63922314f36e41d4ce1193e79" category="list-text">[auto_install3_step21] 新しいノードのブートローダで '-partner-sysid' パラメータを設定する必要がありますnode3 の場合、「 partner-sysid 」は node2 のものである必要があります。node3 の「 partner-sysid 」を確認します。</block>
  <block id="1bf7d37df6710b2cae5f87ffc87ac7ca" category="cell">に進みます <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block></block>
  <block id="2987901eef48d33908a5fe3bc58101db" category="list-text">セクションに移動します <block ref="9cb2fecd70723749806307bb1e7fc101" category="inline-link-macro-rx"></block> をクリックし、このセクションのサブセクションを完了します。</block>
  <block id="824a922c708e37c4e38da69123f1f712" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="d602dbbaca50060142dad0af29921558" category="inline-xref-macro-rx"></block>。</block>
  <block id="d2382bf853b3c31a2584de4ebbcb20f5" category="list-text">[[auto_install3_step23]] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="33b34c9b4b9fcbf19dc61172941a60f7" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。必要に応じて、を参照してオンボードポートをイニシエータに変更します <block ref="587d3c60b98ebe686bf65e1387fc811f" category="inline-link-macro-rx"></block>。ゾーニングの詳細な手順については、ストレージアレイとゾーニングに関するドキュメントを参照してください。</block>
  <block id="dc19b23ad13df9e69f052ca959f75ad8" category="list-text">[[step28]] ブートメニューからノードを起動します。</block>
  <block id="d5a2736750f555e1b93002d11e192b77" category="inline-link-macro">ノード 3 の手順 15 で UTA / UTA2 ポートを確認して設定します</block>
  <block id="8105e4198590e4ba2b52ef420719d8f6" category="paragraph">FC または UTA / UTA2 設定がない場合は、を実行します <block ref="197bcdf5306898ec17e6022b26568f43" category="inline-link-macro-rx"></block> ノード 3 がノード 1 のディスクを認識できるようにします。</block>
  <block id="8ba547e72776f098f3b70a6614639f73" category="list-text">[step29] FlexArray 仮想化ソフトウェアがストレージアレイに接続されている MetroCluster 構成、 V シリーズシステム、およびシステムについて、ノードに接続されているディスクを検出するために、ノード 3 の FC ポートまたは UTA / UTA2 ポートを設定する必要があります。このタスクを完了するには、セクションに進んでください <block ref="c73225f56714e22dffa9ff7369895ce1" category="inline-link-macro-rx"></block>。</block>
  <block id="1c7f16089bd951221e84fa5322358ba8" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ./_include/ru_auto_ense_new_controls_is_set_up_correctly _intro-step_12.adoc[]</block>
  <block id="1534946b2dbb4d79955a0d451c913c4c" category="list-text">[[Step13]] 両方のノードで次のコマンドを使用して、 SP を設定します。</block>
  <block id="e4c074cd0d17a1426d4153413c21f2b8" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP および _SP ONTAP 9.8 コマンドの詳細については ' システム管理リファレンスにリンクするには ' マニュアルページリファレンスを参照してください system の service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="c4aeec21dfe5bd16279a57e79dda936e" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ./_include/ru_auto_ense_new_controls_is_set_up_correctly step_14._end.adoc[]</block>
  <block id="aed0650ed977ce1ee331d98fdf3fb87b" category="paragraph">ステージ 3 で、ノード 3 をインストールしてブートし、ノード 1 のクラスタポートとノード管理ポートがノード 3 でオンラインになったことを確認し、ノード 3 のインストールを確認します。SAN 以外のデータ LIF と、ノード 1 に属するルート以外のアグリゲートは、ノード 2 からノード 3 に移動されます。</block>
  <block id="b27daeccf5fbd8a2e88a3636ee615b74" category="list-text"><block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block></block>
  <block id="c73225f56714e22dffa9ff7369895ce1" category="list-text"><block ref="c73225f56714e22dffa9ff7369895ce1" category="inline-link-macro-rx"></block></block>
  <block id="35ed01fca1dde6c35ca197b89d2bbfc7" category="list-text"><block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block></block>
  <block id="f6eafe551d29e5e1c533099843028759" category="list-text"><block ref="f6eafe551d29e5e1c533099843028759" category="inline-link-macro-rx"></block></block>
  <block id="6acca98fea84a4d59c293fb72d8b9155" category="list-text"><block ref="6acca98fea84a4d59c293fb72d8b9155" category="inline-link-macro-rx"></block></block>
  <block id="b4145e0f7c86507c5b343ce4ca7e9224" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_auto_stage _1_overview.adoc[]</block>
  <block id="f341d92eb5df0fca403d238ce18471d8" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ../_include/ru_auto_set_up_storage_encryption_new_module.adoc[]</block>
  <block id="c7a9927e0e434c0c91c5b27e8dfc438a" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ： ./_include/ru_auto_relocate_non_root_aggr_nas_LIFs _from_node1_to_node2 _steps _1.adoc[]</block>
  <block id="fa39e98dea804607ace91ae82c9543d7" category="list-text">[[step5] いずれかの LIF が停止している場合は、次のコマンドを使用して、各 LIF に対して 1 回ずつ LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="a6177fa5aafac8280f0868d4d136dd02" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-node &lt;nodename&gt; -status-admin up 」という形式で指定します</block>
  <block id="e15f73e6bbe4295992efeff1359c9642" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ../_include/ru_auto_decomation_old_system.adoc[]</block>
  <block id="9ee1c91750c5940467f5ebf5aa17fc5a" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ../_include/ru_auto_rede_node1.adoc[]</block>
  <block id="d640102c0f1d010e832d7ab6c998976d" category="list-text">[[auto_verify_3_step4]] 'node3 の各ポートの到達可能性を 'OK' 以外の到達可能性ステータスで修復します次のコマンドを最初に任意の物理ポートで実行し、次に任意の VLAN ポートで一度に 1 つずつ実行します。</block>
  <block id="94e75d181c02739e78c94503deab7a67" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されたポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="647eca8a7ea8d4d8434879df3c364180" category="inline-xref-macro-rx"></block>。</block>
  <block id="8b620239bad9bdcd3c45247820c7a988" category="paragraph">&lt;stdin&gt; の未解決のディレクティブ： ./_include:./_include/ru_auto_set_fc_or_uta_confgig_node3_intro.adoc[]</block>
  <block id="9ddd1c356c6ec43f630dd03fa71725d5" category="list-text">ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA2 ポート、または UTA / UTA2 カードがなく、ストレージディスクを搭載したシステムをアップグレードする場合は、に進みます <block ref="d402045f7964b6e0cf4fcac8fa4d9846" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="be6b715addf3303698d174b13e915620" category="list-text">ただし、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したストレージアレイを使用するシステムがある場合に、ノード 3 にオンボードの FC ポート、オンボードの UTA / UTA ポート、または UTA / UTA2 カードがない場合は、の項に戻って node3 を起動し、の項を再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="d917b6c7b42db6943a455ef6af8b414f" category="paragraph">&lt;stdin&gt; の未解決のディレクティブ： ./_include:./_include/ru_auto_set_fc_or_uta2_confgig_node3_choices.adoc[]</block>
  <block id="a763050addde0db4a07e19b2d04b1237" category="paragraph">&lt;stdin&gt; の未解決のディレクティブ： ./_include/ru_auto_config_ports_node3_adoc[]</block>
  <block id="d2dce3cff13fd2c8259fdef7c637226e" category="list-text">[[auto_check3_step8] 次のいずれかの操作を実行します</block>
  <block id="dc1d267429f36a93fe45402105c83a9b" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合は、セクションに進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="09a561f3362ed88514963066e3d7b720" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> をクリックして、セクションに移動します <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="70d6bd3154ab38128a772f6268fea926" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、このセクションを省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> セクション「 _ インストール」に戻り、 node3 をブートしてから再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="a74e65d44694577cd6490a79583dff8a" category="cell">に進みます <block ref="e33bb2c935af60d67309f774bd9b33e2" category="inline-xref-macro-rx"></block>。</block>
  <block id="eb97cddf7fc62845fc1e4eea9c2d99cd" category="cell">手順 5 から 12 を省略して、に進みます <block ref="1b9dfae277e309ab4a6eabe371e415ad" category="inline-xref-macro-rx"></block>。</block>
  <block id="c38c7f4981b1e1041fde50ff14eac24d" category="list-text">[[auto_check3_step5] 次のいずれかの操作を実行します。</block>
  <block id="19971734faa0d5692ce82090e92c08e4" category="cell">に進みます <block ref="8636550629e708c32b80412fc9a4bd9f" category="inline-xref-macro-rx"></block></block>
  <block id="23cdc9078cbdc89882a254d05d67d976" category="cell">手順 7 を省略して、に進みます <block ref="c9ad15d95077080d869d1e4c8360803a" category="inline-xref-macro-rx"></block>。</block>
  <block id="da0cddf6f2fcc9355331e1d32bd6c782" category="list-text">[[step6] アダプタがイニシエータモードの場合、および UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="8538924568e2fc8f0f2a3823de803c1a" category="list-text">[[auto_check3_step7] 現在の構成が目的の用途に一致しない場合は、必要に応じて構成を変更します。</block>
  <block id="47677c5f320a3d7c211f1c3bf5ad457b" category="list-text">[[auto_check3_step8] 設定を確認します。</block>
  <block id="315e31e9f839439e107a11b7ff7facb6" category="list-text">[[step9] 設定を確認します。</block>
  <block id="3f9068a407bdbb378e93f4d5d6b9abe6" category="list-text">[[auto_check3_step12]] 次のいずれかの操作を実行します。</block>
  <block id="66610f6c17cdd2f74ae18935d0791243" category="cell">に進みます <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="f0d8df7e74601e48e696d4b303665234" category="cell">section_Install および node3 のブートに戻り、で再開します <block ref="279060155dcadaa13689560d46e381cb" category="inline-link-macro-rx"></block>。</block>
  <block id="56b97cceb683f15e6179871d3991edcc" category="list-text">[[auto_check3_step13]] メンテナンスモードを終了します。</block>
  <block id="0e0a51d5d131ec116dbea50118d432b6" category="list-text">[[step14]] ブートメニューへのノードのブート時に 'boot_ontap menu' を実行しますA800 にアップグレードする場合は、に進みます <block ref="8de8415e5ddf050c51dc9df1ad54385b" category="inline-xref-macro-rx"></block>。</block>
  <block id="8818e56033c79a7d315b502b9d66c4b0" category="list-text">[auto9597_check_node3 _step15]] ノード 3 で、ブートメニューに移動し、 22-7 を使用して、非表示オプション「 boot_after_controller_replacement 」を選択します。プロンプトで、 node1 のディスクを node3 に再割り当てするには、次の例のように入力します。</block>
  <block id="78c17ca9081fa3b223c0d18eaf556df4" category="list-text">[[step16]] システムが「 no disks found 」というメッセージでリブートループに入ると、システムが FC または UTA/UTA2 ポートをターゲットモードにリセットしたためにディスクを認識できないことを示します。この問題を解決するには、に進みます <block ref="cc511b4dbeed99af4a19f83ac3e97f04" category="inline-xref-macro-rx"></block> 終了： <block ref="8dac798a0974640f6cae187a1dbe2d57" category="inline-xref-macro-rx"></block>をクリックするか、セクションに移動します <block ref="35ed01fca1dde6c35ca197b89d2bbfc7" category="inline-link-macro-rx"></block>。</block>
  <block id="014925696b96cf52282301c416016c05" category="list-text">[[auto_check3_step17]] autoboot 中に Ctrl + C を押して 'loader&gt;` プロンプトでノードを停止します</block>
  <block id="46f0d1accd1916f786a903c85ad13b0f" category="list-text">[[step18]] LOADER プロンプトで、メンテナンスモードに切り替えます。</block>
  <block id="8e26679b9fca64c8419387ed5ddbd066" category="list-text">[[step19]] メンテナンスモードで、現在ターゲットモードになっている以前に設定されたすべてのイニシエータポートを表示します。</block>
  <block id="4306b082c2e67956b1918aaea01dbeec" category="list-text">[[step20]] ポートがイニシエータモードに変更されていることを確認します。</block>
  <block id="4c830d7f040ff17fe7d01c1e6f446b3f" category="list-text">[[step2]] メンテナンスモードを終了します。</block>
  <block id="9ac7575b190440f1f2d6fa8d83610ea2" category="list-text">[auto_check3_step22]] LOADER プロンプトのブートアップ：</block>
  <block id="eed6529f7dcdfb878ddd910a0f3cb526" category="list-text">[[auto_check3_step23]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node1 アグリゲートをルートアグリゲートとして設定し、 node1 のルートアグリゲートからブートするようにします。ルート・アグリゲートを設定するには ' ブート・メニューからオプション 5 を選択して ' 保守モードに切り替えます</block>
  <block id="d354d3c68fd2aba01b58a01642bf6c97" category="list-text">node1 アグリゲートの RAID 、プレックス、およびチェックサムの情報を確認します。</block>
  <block id="5447152461820ee4fbd4988f18add272" category="list-text">node1 アグリゲートのステータスを確認します。</block>
  <block id="beee7076b2d8936ef1f0677a931d72f4" category="list-text">必要に応じて、 node1 アグリゲートをオンラインにします。</block>
  <block id="59bfd9205852a4f57899d2ed024d5fcf" category="list-text">node3 を元のルートアグリゲートからブートできないようにします。</block>
  <block id="7dd49fac37eb0c12415d30414f193060" category="list-text">node1 ルートアグリゲートを、 node3 の新しいルートアグリゲートとして設定します。</block>
  <block id="d788db47fa7ed7d234dcdfbb86c17a57" category="list-text">ノード 3 のルートアグリゲートがオフラインになっていること、およびノード 1 からテイクオーバーされたディスクのルートアグリゲートがオンラインになっていて root に設定されていることを確認します。</block>
  <block id="9e4dddd26994fffb9e8ecadccc1f22a8" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ： ./_include/ru_auto_relocate_non_root_aggr_nas_LIFs _from_node2 _to_node3 _intro_step_4.adoc[]</block>
  <block id="99988efb9efcf982f67af1157e609379" category="list-text">[[Step5] ] 次のコマンドを入力し、出力を調べて、 node2 にデータ LIF が残っていないことを確認します。</block>
  <block id="021eb7b60dabf41949ccbeca660311c4" category="list-text">[man_netboot_Step1] ネットアップサポートサイトにアクセスして、システムのネットブートの実行に使用するファイルをダウンロードします。</block>
  <block id="731382e61ed8771d56493c8a21732cd6" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_auto_stage6.overview.adoc[]</block>
  <block id="d60c463bb4096f3ed4bd1618626dfe10" category="doc">トラブルシューティングを行う</block>
  <block id="974201c51f98876fbd646fc435b7b26c" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ../_include/ru_auto_troubleshoot .adoc[]</block>
  <block id="f5ce4d426c8852e0090ab32842d1cd09" category="inline-xref">手順 6</block>
  <block id="459235ad323edd7deeae2dc5ded37b95" category="paragraph">MetroCluster ノード node4 にあるクラスタ間 LIF を再設定し、 MetroCluster ノード間の通信をリストアするクラスタピアリングをチェックします <block ref="ee95d9bf63146ca7fe271f7654fa2f7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="973e4031ed35bf66df5741d51fd988da" category="list-text">[[auto_verify_4_Step6]] コントローラ交換操作を再開します。</block>
  <block id="42640d20a9c858a31241fc66b1d15c64" category="paragraph">VLAN 、インターフェイスグループ、およびブロードキャストドメインの作成と再作成の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 ネットワーク管理ガイドへのリンク。</block>
  <block id="7e4772f5da93344d8ada20b9c581e1f9" category="list-text">[[auto_restore_4_Step4]] ノード 4 の各ポートの到達可能性を 'OK' 以外の到達可能性ステータスで修復します次のコマンドを最初に任意の物理ポートで実行し、次に任意の VLAN ポートで一度に 1 つずつ実行します。</block>
  <block id="e3d6faf783eff413421d5abeaf1dad48" category="paragraph">すべてのポートが正しく設定され、正しいブロードキャストドメインに追加されている場合、「 network port reachability show 」コマンドは、接続されているすべてのポートの到達可能性ステータスを「 ok 」、物理的に接続されていないポートのステータスを「 no-reachability 」と報告する必要があります。この 2 つ以外のステータスが報告されるポートがある場合は、到達可能性修復を実行し、の手順に従ってブロードキャストドメインにポートを追加または削除します <block ref="4f595e600f8320b4ad2d574fa1a9fe37" category="inline-xref-macro-rx"></block>。</block>
  <block id="05f8b48fbb8003809bf0b6e78825c8b7" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_auto_prepare_for-netboot_intro.adoc[]</block>
  <block id="84b32351b8364737587c283186671c3f" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ： ./_include/ru_auto_prepare_for-netboot_steps _1_3.adoc[]</block>
  <block id="40fee02f58bec4862161038e695de5d6" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_all_check_MetroCluster_configuration_errors. adoc[]</block>
  <block id="f9e3e05fc30ddaa46c0f525fb1806314" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ：： ./_include/ru_auto_stage4_overview.adoc[]</block>
  <block id="b0bb9521a13e2a0adf723c21c0597b4d" category="paragraph">&lt;stdin&gt; で未解決のディレクティブ : ../_include/ru_auto_issues _multiple_Stages _of Procedure .adoc[]</block>
  <block id="890a375fe1995543bbde11772bf2a4fc" category="paragraph">このガイドでは、アグリゲートの再配置を使用して、システムを停止することなくコントローラハードウェアをアップグレードする方法について説明します。</block>
  <block id="762829096f8c7b4b18d35eef0b74c5fb" category="paragraph">コントローラハードウェアをアップグレードするその他の方法については、を参照してください <block ref="0d30689c451a0e1a0cbf0023666aa774" category="inline-link-macro-rx"></block>。</block>
  <block id="645b41b640376c487d825f5296fcae9d" category="paragraph">ONTAP を実行しているノードペアで、元のノードから同じクラスタ内の新しいノードにルート以外のアグリゲートを移行することで、コントローラハードウェアを無停止でアップグレードできます。アップグレード中は、アップグレード対象のノードでホストされているデータにアクセスできます。</block>
  <block id="ec8b10dd6bbff9309807f30eb5f83b02" category="paragraph">ARL には、システムコマンドまたは手動アップグレードを使用して、コントローラハードウェアをアップグレードする方法が 2 つあります。作業を開始する前に、コントローラハードウェアのアップグレードに適したガイドを選択していることを確認する必要があります。</block>
  <block id="9b1c9d439120689633fe37233b21c66f" category="paragraph">システムコマンドを使用してアップグレードを実行する場合は、次の表を参照してください。</block>
  <block id="6e6a93e1bc39df87c56313cbfd41fa2c" category="cell">この ONTAP バージョンを実行している場合</block>
  <block id="c8148f766ec78479f303b8e902e9099b" category="cell">システムコマンドでアップグレードするには、次のコマンドを使用します。</block>
  <block id="041dd7a51404fc5dc5a87c2a0bc90b15" category="cell">9.8 以降</block>
  <block id="1fbd6af5fc9d3299929ce0644169d884" category="inline-link-macro">ONTAP 9.8 以降を実行しているコントローラハードウェアをアップグレードするには、「 system controller replace 」コマンドを使用します</block>
  <block id="6d8870597149a914e87f938f108f5a49" category="cell"><block ref="6d8870597149a914e87f938f108f5a49" category="inline-link-macro-rx"></block></block>
  <block id="b9872d104f5b4706bfb3c12a12c6f3d6" category="cell">9.5 から 9.7</block>
  <block id="42e598379356302a5618c3e3978f1278" category="cell"><block ref="42e598379356302a5618c3e3978f1278" category="inline-link-macro-rx"></block></block>
  <block id="b8f22ccbf3539f982cde4fb452d34422" category="paragraph">手動でアップグレードする場合は、次の表を参照してください。</block>
  <block id="6af074e0669e408e576b460f5c34b89b" category="cell">手動でアップグレードするには、次を使用します</block>
  <block id="d3c6d4d869a34578de710ed95a961434" category="cell"><block ref="d3c6d4d869a34578de710ed95a961434" category="inline-link-macro-rx"></block></block>
  <block id="4c41f3a2ec168af1924a7c5a884bdc37" category="cell">9.0 から 9.7</block>
  <block id="16997a2bce5e5816e92695f9398ec84a" category="cell"><block ref="16997a2bce5e5816e92695f9398ec84a" category="inline-link-macro-rx"></block></block>
  <block id="f11bd0266651c774d488523db903a725" category="admonition">* 注意 * ：ストレージディスクがある場合は、メンテナンスモードに指示されていないかぎり、クラスタプロンプトでこのセクションのコマンドを入力します。V シリーズシステムを使用している場合や FlexArray 仮想化ソフトウェアを使用していて、ストレージアレイに接続している場合は、このセクションのメンテナンスモードプロンプトでコマンドを入力します。UTA / UTA2 ポートを設定する場合は、メンテナンスモードにする必要があります。</block>
  <block id="d430acf9b1fab77a9b9905bbf1423c57" category="list-text">[[step1] ポートが現在どのように設定されているかを確認します。ノード 3 で次のコマンドを入力します。</block>
  <block id="581e0d52eede5c7a9002197a5955188f" category="list-text">[[step3]] 「 system node hardware unified-connect show 」コマンドまたは「 ucadmin show 」コマンドの出力を調べて、 UTA / UTA2 ポートに希望するパーソナリティがあるかどうかを確認します。</block>
  <block id="39e1a687c8a1a3bb49c730ad7b98a3d5" category="cell">に進みます <block ref="2fc3b3e515184c116c95342a9ca8cb9f" category="inline-xref-macro-rx"></block>。</block>
  <block id="aeeda50cd3cc8fa0b7819c50d25802cc" category="cell">手順 5 から 12 を省略して、に進みます <block ref="e8dc02ba0ba84dfdb12d2955f04811ca" category="inline-xref-macro-rx"></block>。</block>
  <block id="8c1235ea1bd5309fe2724d440119a7bf" category="list-text">[man_check_3_step5] 次のいずれかの操作を実行します</block>
  <block id="702b58a3a2c0f7ca9c1ff79304cc3846" category="cell">ストレージディスクがあり、 clustered Data ONTAP 8.3 を実行している</block>
  <block id="177fe53a2ca3ad4477bf20631953c74e" category="cell">node3 を起動し、「 boot_ontap maint 」というメンテナンスモードに切り替えます</block>
  <block id="9bc874604b7939971f9993fe8c042cc5" category="cell">に進みます <block ref="f6d13a5ff9438ee0d4458e3f2ffb2fd3" category="inline-xref-macro-rx"></block>。すでにメンテナンスモードになっている必要があります。</block>
  <block id="3b9a8502a8d7047daccb7dc1e076d1db" category="list-text">[[man_check_3_step6] 次のいずれかの操作を実行します。</block>
  <block id="1f14f34deb68e1ccfd51fd969391f85b" category="cell">に進みます <block ref="e0afe2f8b687f2b937ad04447e0f4504" category="inline-xref-macro-rx"></block>。</block>
  <block id="fe13e7c4af341791013b658ec3446e14" category="cell">手順 7 を省略して、に進みます <block ref="21867c7d0c2b8bc3921bf40e9edec561" category="inline-xref-macro-rx"></block>。</block>
  <block id="5d8cdb858d03ccbaab4933257301ad1f" category="list-text">[[man_check_3_step7] アダプタがイニシエータモードの場合、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="de2f29988a1562cff5aece8243895ec3" category="paragraph">ターゲットモードのアダプタは、メンテナンスモードで自動的にオフラインになります。</block>
  <block id="f5127a07c0da9806f59a276c6a53e07b" category="list-text">[man_check_3_step8] 現在の設定が目的の用途に一致しない場合は、必要に応じて設定を変更します。</block>
  <block id="20a6fed477bc68dded7a110a5998c20e" category="admonition">テープドライブ、 FlexArray 仮想化システム、および MetroCluster 構成には、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="87f04db4bf78b3f620b7363444f3162e" category="list-text">システムを停止します。</block>
  <block id="2f31b93de57cc6e92ee38aaed9b49765" category="paragraph">ブート環境プロンプトが表示されます。</block>
  <block id="42a282655a6bcf78e540d618abe8f39f" category="cell">保守モードで再起動します（「 boot_NetApp maint 」）</block>
  <block id="4ccd0b13a5d5d3be43ff2600a91655cc" category="list-text">[[step11]] 設定を確認します。</block>
  <block id="f2cc2cb82b7d41d7e5604b8610c271a3" category="cell">は V シリーズまたは FlexArray 仮想化ソフトウェアを備えており、ストレージアレイに接続されています</block>
  <block id="52b727613ccb81e1e924ffec991b2e74" category="paragraph">次の例の出力は ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更されており ' アダプタ「 2a 」および「 2b 」のモードが「 cna' 」に変更されていることを示しています</block>
  <block id="fa05264b5c812e55c8ce27a16e3cb341" category="list-text">[[step12a] 次のいずれかのコマンドをポートごとに 1 回入力して、任意のターゲットポートをオンラインにします。</block>
  <block id="7bf32aee58782ae16c1d768b4bf38822" category="list-text">[[man_check_3_step13]] ポートをケーブル接続します。</block>
  <block id="ed79a6f393f23524ed190af7b250c69b" category="list-text">[[step14]] 次のいずれかの操作を実行します。</block>
  <block id="9bced622fe4463826e54e9d72ffb3105" category="inline-link-macro">ポートを node1 から node3 にマッピングします</block>
  <block id="eb62d15c59e51a7bf19844fae4092453" category="cell">に進みます <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="5bb1d2d89905f521825083d671817bcb" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="8ec15d413a08247a2b2856ae1be9d192" category="cell">_Install に戻り、 node3 をブートし、で再開します <block ref="a4103675c41ea57f7287e0804dd0c9dd" category="inline-link-macro-rx"></block>。</block>
  <block id="f72304143acea17b5bb5c4f384fb8c44" category="paragraph">内蔵ディスクドライブを搭載したコントローラをアップグレードする場合は、いくつかのコマンドを実行し、その出力を調べて、ルートアグリゲートやデータアグリゲートが含まれている内蔵ディスクドライブがないことを確認する必要があります。</block>
  <block id="58e9601fd22e1eb1174624568b62ceaf" category="paragraph">内蔵ディスクドライブにアグリゲートがあるコントローラをアップグレードしない場合は、このセクションをスキップし、セクションに進みます <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="3553fa4aee6c92a690d8b3d2baf9f853" category="list-text">元のノードごとに 1 回、ノードシェルを入力します。</block>
  <block id="cd526e6ac745b3bc2d71e7b70ccbe24c" category="paragraph">「 system node run -node &lt;node_name &gt; 」のように指定します</block>
  <block id="4321f2c566f6fd9e0f937fb671257921" category="list-text">内蔵ドライブを表示します。</block>
  <block id="71d2d9e08815f28311d42e1fe65de729" category="paragraph">「 sysconfig -av 」</block>
  <block id="1a1cbaa9026d328ea0e1db1e1d719d1e" category="paragraph">次の例に示すように、ストレージを含む、ノードの構成に関する詳細情報が出力に表示されます。</block>
  <block id="1cec74df52c25d24213897a006ddbc7e" category="list-text">「 sysconfig -av 」コマンドのストレージ出力を調べて内蔵ディスク・ドライブを特定し、その情報を記録します。</block>
  <block id="63590836c75e5189303be6a7e2f1c0d6" category="paragraph">内蔵ドライブの ID は先頭に「 00 」と表示されます。「 00 」は内蔵ディスクシェルフを示し、小数点以下の数字は個々のディスクドライブを示します。</block>
  <block id="2581141629fb014ce68faf5b319c8a1e" category="list-text">[[man_aggr_step4]] 両方のコントローラで次のコマンドを入力します。</block>
  <block id="5047ace67eeca6eaa0de7c2c565db85b" category="paragraph">次の例の出力の一部に示すように、ノードのアグリゲートステータスが表示されます。</block>
  <block id="67e1c5578ec472925218b8535f73fd69" category="admonition">アグリゲートの作成に使用されるデバイスは物理ディスクではなく、パーティションの場合もあります。</block>
  <block id="ffdb41868fb358842d696b4ff8240d4e" category="list-text">aggr status -r コマンドの出力を調べて、内蔵ディスク・ドライブを使用しているアグリゲートを特定し、その情報を記録します。</block>
  <block id="4da1edbdb956754e59f0224136b9f957" category="paragraph">前の手順の例では、シェルフ ID が「 0 」の場合、「 aggr2 」は内蔵ドライブを使用します。</block>
  <block id="a0baee3eabdee6658afa877291a41600" category="list-text">両方のコントローラで次のコマンドを入力します。</block>
  <block id="259baa89207f2b2aded364ccd7acb88e" category="paragraph">「 aggr status -y 」を入力します</block>
  <block id="8248266e12181ad17765b9cf8ce40a99" category="paragraph">次の例の出力の一部に示すように、アグリゲート上のボリュームに関する情報が表示されます。</block>
  <block id="f8fee0808da945cb32ac4bfb7b116901" category="paragraph">の出力に基づきます <block ref="fafa89bc8a6136079f9e2f0a2a127d07" category="inline-xref-macro-rx"></block> 手順 6 では、 aggr2 は 3 つの内蔵ドライブ「 0a.00.1 」、「 0a.00.3 」、「 0a.00.9 」を使用します。「 aggr2 」のボリュームは「 vol6 」、「 vol5 」、「 vol14 」です。また、手順 6 の出力では、「 aggr0 」の読み出しには、アグリゲートの情報の先頭に「 root 」という単語が含まれています。ルートボリュームが含まれていることを示します。</block>
  <block id="85eba1a1c40e954eefa7c966f21fa202" category="list-text">「 aggr status -v 」コマンドの出力を調べ、内部ドライブ上のアグリゲートに属するボリュームと、それらのボリュームにルート・ボリュームが含まれているかどうかを確認します。</block>
  <block id="a0879940337c9b44fb9cad5bc9f2d541" category="list-text">各コントローラで次のコマンドを入力して、ノードシェルを終了します。</block>
  <block id="d9f6eac526670fe9182f1a63d251a180" category="paragraph">「 exit</block>
  <block id="f5a25cddbc643e856eabde4c6ba4d2a8" category="cell">コントローラの状況</block>
  <block id="087b658bc1f71a1f2cb5ec53fee94d23" category="cell">内蔵ディスクドライブにアグリゲートを含めないでください</block>
  <block id="6a58d5f6ed9134ff245eb1172f368af9" category="cell">この手順に進みます。</block>
  <block id="979cce52ff595ac16546680501986d88" category="cell">内蔵ディスクドライブにはアグリゲートは含まれますが、ボリュームは含まれません</block>
  <block id="15fa78dab9bfec90803987565e3a5e23" category="cell">この手順に進みます。* 注：続行する前に、アグリゲートをオフラインにしてから、内蔵ディスクドライブのアグリゲートを削除する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> アグリゲートの管理については、ディスクとアグリゲートパワーガイドにリンクしてください。</block>
  <block id="0b63c25d5be0c7543233464f799ff9f8" category="cell">内蔵ドライブにルート以外のボリュームを格納します</block>
  <block id="fe6da5aeee0970bcb27fe1bdcd72a98f" category="cell">この手順に進みます。* 注：処理を続行する前に、ボリュームを外部ディスクシェルフに移動し、アグリゲートをオフラインにしてから、内蔵ディスクドライブ上のアグリゲートを削除する必要があります。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ボリュームの移動に関する情報については、ディスクとアグリゲートパワーガイドへのリンクを参照してください。</block>
  <block id="1547c14e8c3676ab43b1f9bc7b69d98d" category="cell">内部ドライブ上のルートボリュームが含まれます</block>
  <block id="cf992e4682189e679999df1f59ac6447" category="cell">この手順を続行しないでください。コントローラをアップグレードする方法について、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 手順を実行しているノードペアで、ボリュームを移動して Data ONTAP を実行しているコントローラハードウェアのアップグレードを実行し、 _NetApp Support Site_and へのリンク。</block>
  <block id="dec8ae2cc1cff82c9a15f47488d0827b" category="cell">内蔵ドライブにルート以外のボリュームを格納し、外付けストレージにボリュームを移動することはできません</block>
  <block id="823ba7326edea0fb085b50c3aab24f80" category="cell">この手順を続行しないでください。clustered Data ONTAP を実行しているノードのペアで手順 _ ボリュームを移動してコントローラハードウェアをアップグレードする方法を説明します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、この手順にアクセスできます。</block>
  <block id="3bb2def349bd01a4e09f553241c547bb" category="paragraph">セクションに保存した node2 の FC ポート設定の値を確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="8651f71cd1a76b7df1a83cae390627a8" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 アダプタが搭載されている場合は、で設定します <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block>。</block>
  <block id="3b2aededaf9eb7fa977a61a8bd235fc8" category="cell">に進みます <block ref="6df4b9385815488582550ff3bec853dc" category="inline-xref-macro-rx"></block>。</block>
  <block id="e31ad1284b7618a9c10777ed99b12e64" category="inline-xref">手順 2</block>
  <block id="d0eda6a9db5e17455c4a85cb11800962" category="cell">に進みます <block ref="9afe493afbfd571f8e15cdbbaa7d8361" category="inline-xref-macro-rx"></block>。</block>
  <block id="52b26cd7e65738a95d72c027a1b843c2" category="list-text">[[man_config_4_Step2]] メンテナンスモードにアクセスします。</block>
  <block id="bdb2780eb5f1795b94cdb7892cd5237b" category="list-text">新しいノードの FC 設定を、元のノードで取り込んだ設定と比較します。</block>
  <block id="605ac6e16f1de07910babd12f8cb0f9e" category="list-text">[[man_config_4_Step5]] 次のいずれかの操作を行います。</block>
  <block id="bf5ce713a37cfb1c7cddb2ef1662c419" category="paragraph">必要に応じて、ノード 4 の FC ポートを変更します。</block>
  <block id="2c28eea077fe0201e484901f94587d87" category="list-text">ターゲットポートをプログラムする場合：</block>
  <block id="2f699cf77defdb8691038c3365c1e4cb" category="paragraph">「 system node hardware unified-connect modify -type | -t target-adapter &lt;port_name&gt; 」です</block>
  <block id="c5fb075990e07d49af83b424fc450275" category="list-text">イニシエータポートをプログラミングする場合：</block>
  <block id="cf4bec74c9d6f95cb8085d8a4bfd855b" category="paragraph">「 system node unified-connect modify type | -t initiator-adapter &lt;port_name&gt; 」になります</block>
  <block id="348795cf2ff362808ef4789bfce998c1" category="paragraph">`-type ` は FC4 のタイプ、ターゲットまたはイニシエータである。</block>
  <block id="2b06110f9a6a9bf3ece9e1df55274e79" category="cell">必要に応じて、 node4 の FC ポートを変更します。 ucadmin modify -m fc -t initiator -f &lt;adapter_port_name&gt; `-t` は、 FC4 タイプ、ターゲット、イニシエータです。* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="aa056114701909ed085099828ff012a9" category="cell">次のコマンドを入力し、出力を調べて、新しい設定を確認します。 'system node unified-connect show'</block>
  <block id="ae1a6eb25c428a13de7c805301540516" category="cell">次のコマンドを入力し、出力を確認して、新しい設定を確認します。 ucadmin show</block>
  <block id="7f3a5152afa49c8421359b8761a9a8ad" category="cell">新しいノードのデフォルトの FC 設定</block>
  <block id="e7df8bff382bf85b07ece9703c2f6808" category="cell">元のノードでキャプチャしたのと同じです</block>
  <block id="5f97f3ee15cc9d2abee53d7af46e1799" category="inline-xref">手順 11</block>
  <block id="222214d2643fdfb746a901984df3eaaa" category="cell">に進みます <block ref="313690309739126de0c32c721924102b" category="inline-xref-macro-rx"></block>。</block>
  <block id="7327bd79e6072c9ccdc2b478d3afacfb" category="cell">元のノードでキャプチャしたものとは異なります</block>
  <block id="2fe2c4e80b1376975584751f41c867c9" category="inline-xref">手順 8.</block>
  <block id="ebe743318b7324b4ebeb99a0a3c72423" category="cell">に進みます <block ref="60c689da671dfc85fbc244a8ddc19d6a" category="inline-xref-macro-rx"></block>。</block>
  <block id="98570637b82059e5ffc8aa3289c7a48b" category="list-text">[[man_config_4_Step8] メンテナンスモードを終了します：</block>
  <block id="f93d9d44ef64b7bd548bb1548837f7c9" category="cell">は、 V シリーズシステムであるか、 Data ONTAP 8.3.0 以降を実行する FlexArray 仮想化ソフトウェアがインストールされています</block>
  <block id="ae67b2e6adc83ff617429f7470e3fcf2" category="cell">ブート環境プロンプトで「 boot_ontap maint 」というコマンドを入力し、保守モードにアクセスします</block>
  <block id="a2aebe9559cbe6e73c0a0bf0d1bb9ef4" category="cell">は、 V シリーズシステムではなく、 FlexArray 仮想化ソフトウェアもありません</block>
  <block id="1747e775d1492fb4a122964eb0ce6abd" category="cell">ブート環境プロンプトで「 boot_ontap 」と入力し、 node4 をブートします</block>
  <block id="be71806e78200788394953879d8e5b6a" category="list-text">[[man_config_4_Step11]] 次のいずれかの操作を行います。</block>
  <block id="5f05ecbc9bc4d038e9ed396780511251" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2A カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="04e69ed9c039a8d1bc156ec97e69f0d2" category="inline-link-macro">node2 のポートを node4 にマッピングします</block>
  <block id="1e7bd254c963a338c489202373c4ab17" category="list-text">セクションをスキップして、に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合</block>
  <block id="08b25b9ad88e79131839ab732517a679" category="list-text">に進みます <block ref="5752cac0a470e06ffceef40fba1931c1" category="inline-xref-macro-rx"></block> ノード 4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合</block>
  <block id="54c8107ec5763757535759e84fcccba4" category="inline-link-macro">手順 9</block>
  <block id="11b3cd1a1063bf814b7d2eeabae1825d" category="list-text">node4 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、 section_Check をスキップして UTA / UTA2 ポートを設定し、 node4 に戻ってブートノードを再開します <block ref="04be07c8b8cd85d6b2140c2bfb8113b6" category="inline-link-macro-rx"></block>。</block>
  <block id="826be71263f21097957d09d3f8ed668e" category="paragraph">元のノードを交換する前に、ノードが HA ペア構成になっていて、不足しているディスクや障害ディスクがないこと、相互のストレージにアクセスできること、およびクラスタ内の他のノードに割り当てられているデータ LIF を所有していないことを確認する必要があります。また、元のノードに関する情報を収集する必要があります。クラスタが SAN 環境にある場合は、クラスタ内のすべてのノードがクォーラムにあることを確認する必要があります。</block>
  <block id="e537424f11b8c436c4623dda13ea1af3" category="list-text">テイクオーバーモード時に両方のノードの負荷に対応できるだけの十分なリソースが元の各ノードにあることを確認します。</block>
  <block id="f3c19cb23097cbe0b0079c33c1dda6e2" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 ハイアベイラビリティ構成ガイドへのリンクと、 HA ペアのベストプラクティスセクションのリンクをクリックしてください。元のノードのどちらも 50% 以上の利用率で実行しないでください。あるノードの利用率が 50% 未満の場合は、コントローラのアップグレード中に両方のノードの負荷を処理できます。</block>
  <block id="f57ddae179006dfe93c570a9886b51b0" category="list-text">元のノードのパフォーマンスベースラインを作成するには、次の手順を実行します。</block>
  <block id="e2ce8b648cf2a8577d2ac0054c830df5" category="list-text">診断ユーザアカウントのロックが解除されていることを確認します。</block>
  <block id="04b97d849898994879d3546a0da9f87a" category="paragraph">* 重要 * ：診断ユーザアカウントは、低レベルの診断のみを目的としており、テクニカルサポートからの指示があった場合にのみ使用してください。</block>
  <block id="cb0649853a09056775436f53b7e99dc5" category="paragraph">* 重要 * ：ユーザーアカウントのロック解除については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="8fafe7b0e88d09400ee18fcc9299185e" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットアップサポートサイトへのリンクには、 Performance and Statistics Collector （ Perfstat Converged ）をダウンロードしてください。</block>
  <block id="061b69246434dcda481ca9452cf30635" category="paragraph">Perfstat Converged ツールを使用すると、アップグレード後に比較するためのパフォーマンスのベースラインを設定できます。</block>
  <block id="3e5ae45cd6aac12d01461471b0995845" category="list-text">ネットアップサポートサイトの手順に従ってパフォーマンスのベースラインを作成します。</block>
  <block id="7fcb92cfc1dea17cbdc84eda52cfac2b" category="list-text">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクして、ネットアップサポートサイトでサポートケースをオープンしてください。</block>
  <block id="38fd59ef0181a70014c49f0cfdd6ed5d" category="paragraph">アップグレード中に発生する可能性がある問題をケースで報告できます。</block>
  <block id="e7b328a01b5a6b8fffc172cfd9f564c0" category="list-text">node3 と node4 の NVMEM または NVRAM バッテリが充電されていることを確認し、充電されていない場合は充電します。</block>
  <block id="2e283ebf1bea253f33a9e884fa598e1e" category="paragraph">node3 と node4 を物理的にチェックして、 NVMEM または NVRAM バッテリが充電されているかどうかを確認する必要があります。node3 と node4 のモデルの LED の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> Hardware Universe にリンクするには、次の手順を実行します。</block>
  <block id="6ab3181b33a0075c13f2de4c0920deff" category="admonition">* 注意 * NVRAM の内容は消去しないでください。NVRAM の内容をクリアする必要がある場合は、ネットアップテクニカルサポートにお問い合わせください。</block>
  <block id="051d9c31ffa2621a5e49ba9e6d76c916" category="list-text">node3 と node4 にある ONTAP のバージョンを確認します。</block>
  <block id="9a67d8c90151902aae7ada9ad8732901" category="paragraph">新しいノードには、元のノードと同じバージョンの ONTAP 9.x がインストールされている必要があります。新しいノードに別のバージョンの ONTAP がインストールされている場合は、設置後に新しいコントローラをネットブートする必要があります。ONTAP のアップグレード方法については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 アップグレードおよびリバート / ダウングレードガイドへのリンク。</block>
  <block id="53e359796554176ecef5639c8ed3ed05" category="paragraph">node3 と node4 にある ONTAP のバージョンに関する情報は、梱包箱に含める必要があります。ONTAP のバージョンは、ノードがブートするとき、またはノードを保守モードでブートしてコマンドを実行するときに表示されます。</block>
  <block id="7877022c956918624cc0373ff564cad4" category="paragraph">「バージョン」</block>
  <block id="232ac82576b399b9dcdc3a264bb0c6ec" category="list-text">ノード 1 とノード 2 にクラスタ LIF が 2 つまたは 4 つあるかどうかを確認します。</block>
  <block id="a2d27af8ce0592e36b8a208c0cb93d3e" category="paragraph">「 network interface show -role cluster 」のように表示されます</block>
  <block id="97946b80ce2a390dfbe694abb89b8da6" category="paragraph">次の例に示すように、すべてのクラスタ LIF が表示されます。</block>
  <block id="b6f048f47d754b1245e072cf13364151" category="list-text">ノード 1 またはノード 2 にクラスタ LIF が 2 つまたは 4 つある場合は、次の手順を実行して、使用可能なすべてのパスで両方のクラスタ LIF に ping を送信できることを確認します。</block>
  <block id="4ae0280fe3dd6476913cdfef9bf98f8f" category="list-text">advanced 権限レベルに切り替えます。</block>
  <block id="6a76a1a5611a7cd78d175bb62eecc5c0" category="paragraph">次のメッセージが表示されます。</block>
  <block id="88bdbe46ad1d0b5212db8d769f0d6c7c" category="list-text">「 y 」と入力します。</block>
  <block id="1be278766df14cf22410e71cf6d2cf07" category="list-text">ノードに ping を実行して接続をテストします。</block>
  <block id="30533ddc427fb292c7d2a7a069e893e2" category="paragraph">cluster ping-cluster -node node_name</block>
  <block id="e2ef0e388993deb8d5ac2d2c4c589106" category="paragraph">次の例のようなメッセージが表示されます。</block>
  <block id="87d93b522596e870c62c871bdbe44c11" category="paragraph">ノードで 2 つのクラスタポートが使用されている場合、次の例に示すように、 4 つのパスで通信可能であることを確認できます。</block>
  <block id="063014cb1baf1ab4cfba01ed9c5cdcb1" category="list-text">管理者レベルの権限に戻ります。</block>
  <block id="3e6f17c57130b6f779ec8a030abc6ae0" category="list-text">ノード 1 とノード 2 が HA ペアになっていることを確認し、ノードが相互に接続されていること、およびテイクオーバーが可能であることを確認します。</block>
  <block id="7a309bb6c6af5ef06efe5f48e0c54074" category="paragraph">次の例は、ノードが相互に接続されていて、テイクオーバーが可能な場合の出力例を示しています。</block>
  <block id="8ad3217d99ee19b408199ad575ffe3af" category="paragraph">どちらのノードも部分的なギブバック状態にはなりません。次の例では、 node1 の部分的なギブバックが完了しています。</block>
  <block id="1a0e7aa8e280128ae61771ef3ba60eea" category="paragraph">いずれかのノードが部分的なギブバック状態にある場合は、「 storage failover giveback 」コマンドを使用してギブバックを実行し、「 storage failover show-giveback 」コマンドを使用して、ギブバックする必要がないことを確認します。コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 ハイアベイラビリティ構成ガイドへのリンク。</block>
  <block id="e1b6253c9fd3e54d029ac4ea06c7ca29" category="list-text">[man_prepare-to-downgrade 9] ： node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）のアグリゲートを所有していないことを確認します。</block>
  <block id="af83575c95d637895459a44e86fa9e26" category="paragraph">「 storage aggregate show -node &lt;node_name &gt; -is-home false -fields owner-name 、 homename 、 state 」という文字列が含まれています</block>
  <block id="e86a1d7ab77ef690a506c50aeb0e4407" category="paragraph">node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）アグリゲートを所有していない場合、次の例のようなメッセージが返されます。</block>
  <block id="b985e562bbb6750dd51f653600fe0a16" category="paragraph">次の例は、 4 つのアグリゲートのホーム所有者ではなくホーム所有者である node2 というノードに対するコマンドの出力を示しています。</block>
  <block id="d2d09b67c3b189d4996ce96fdb6e7f46" category="cell">のコマンドの場合は <block ref="f234334393599d38df4eb27863e3dcfa" category="inline-xref-macro-rx"></block>...</block>
  <block id="187bf5770ab4eb046ac279545d76a28d" category="cell">空の出力がありました</block>
  <block id="618ca5b25d5cf4c26b7057f25a52023b" category="inline-xref">手順 12</block>
  <block id="6cf9162d078961b85385ab5ffe206def" category="cell">手順 11 を省略して、に進みます <block ref="9e04aeb1482ff26e4ec2b4e66367360a" category="inline-xref-macro-rx"></block>。</block>
  <block id="4862cab8c196cf3e955c3421a6f0ab8b" category="cell">出力あり</block>
  <block id="009df4941179f7e77d7594ecfc0c10f7" category="cell">に進みます <block ref="1fe89f878ebb086a789e2e41fed56343" category="inline-xref-macro-rx"></block>。</block>
  <block id="edc71aed1f3d88be9cfa9b3b3f030a94" category="list-text">[man_prepare-to-downgrade 11]] ノード 1 またはノード 2 が現在の所有者であり、ホーム所有者ではないアグリゲートを所有している場合は、次の手順を実行します。</block>
  <block id="f38dad169237355428118b60b1896828" category="list-text">パートナーノードが現在所有しているアグリゲートをホーム所有者ノードに戻します。</block>
  <block id="93b9f692990cbe40ba44ff8b66800ba1" category="paragraph">「 storage failover giveback -ofnode &lt;home_node_name &gt;`</block>
  <block id="17ef288fc5accadf7f08a6841d89c986" category="list-text">node1 と node2 のどちらも現在の所有者（ホーム所有者ではない）アグリゲートを所有していないことを確認します。</block>
  <block id="239ac3b08eb08347dc0ce94de0522c08" category="paragraph">「 storage aggregate show -nodes &lt;node_name &gt; -is-home false -fields owner-name 、 home-name 、 state</block>
  <block id="cdb18b743b776d3188bce1696bcee067" category="list-text">[man_prepare_nodes_step12]] ノード 1 とノード 2 がお互いのストレージにアクセスできることを確認し、ディスクが見つからないことを確認します。</block>
  <block id="d4a6afd0a40d578ef1c16c580930990a" category="paragraph">「 storage failover show -fields local-missing-disks 、 partner-missing-disks 」というメッセージが表示されます</block>
  <block id="9351d7b864e0fec6d8e9ce484c7e1792" category="paragraph">次の例は、不足しているディスクがない場合の出力例を示しています。</block>
  <block id="c82f6efd677e95b86319ae86cdcc3bd9" category="paragraph">足りないディスクがある場合は、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 ディスクとアグリゲートパワーガイドへのリンク、 ONTAP 9 論理ストレージ管理ガイド _ 、および ONTAP 9 ハイアベイラビリティ構成ガイド _ にリンクして、 HA ペアのストレージを設定します。</block>
  <block id="89b6ed3de0a424283818fdf7fccd43c6" category="list-text">ノード 1 とノード 2 が正常に機能しており、クラスタへの参加条件を満たしていることを確認します。</block>
  <block id="f1178fa107fef2eea6cd954e57dbda27" category="paragraph">次の例は、両方のノードが正常である場合の出力を示しています。</block>
  <block id="b5c6fde8816eb583a49b6c0314b82928" category="list-text">権限レベルを advanced に設定します。</block>
  <block id="a28608e752cbbce9cbd1454dfca4e122" category="list-text">[man_prepare-to-downgrade 15]] ノード 1 とノード 2 で同じ ONTAP リリースが実行されていることを確認します。</block>
  <block id="e5efd9c28238577691b2e984771aea4a" category="paragraph">「 system node image show -node &lt;node1 、 node2 &gt; -iscurrent true 」</block>
  <block id="ee93f64f74bbb51a61f0871bf27e8d58" category="paragraph">次の例は、コマンドの出力例を示しています。</block>
  <block id="39011a93d54cda514415ade9083fc4bd" category="list-text">ノード 1 とノード 2 のどちらもクラスタ内の他のノードに属するデータ LIF を所有していないことを確認し、出力の「 Current Node 」列と「 Is Home 」列をチェックします。</block>
  <block id="7bba44cc0aa97ec42a95cacd643fa5f4" category="paragraph">network interface show -role data -is-home false -curr-node &lt;node_name &gt;`</block>
  <block id="5ac0c9fe3d719e05a93a39b429e96f47" category="paragraph">次の例は、 node1 に、ホーム所有の LIF がクラスタ内の他のノードにない場合の出力を示しています。</block>
  <block id="c94a099e774b563198a3d0a4747eeeb1" category="paragraph">次の例は、 node1 がもう一方のノードによってホーム所有されているデータ LIF を所有している場合の出力を示しています。</block>
  <block id="624ebabf7bed06677af18b73e9b75ed4" category="list-text">の出力の場合は <block ref="f85aebae90992a111c19def12492ab18" category="inline-xref-macro-rx"></block> ノード 1 とノード 2 のどちらかがクラスタ内の他のノードでホーム所有されているデータ LIF を所有しており、データ LIF をノード 1 とノード 2 のどちらからも移行することを示します。</block>
  <block id="b4ebcf376ab05c920671af65b7daaf8c" category="paragraph">network interface revert -vserver * -lif *</block>
  <block id="90cb08ba1d76f3a3dfeee17c19be4d3e" category="paragraph">network interface revert コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="9aad19d5c9012d934daf081b9a8a5f8d" category="list-text">ノード 1 とノード 2 で障害ディスクが所有されているかどうかを確認します。</block>
  <block id="befc7c82e5a0017b377265524e554a72" category="paragraph">'storage disk show -nodelist &lt;node1 、 node2 &gt; -boled</block>
  <block id="42b9e1733c1cb77cbd905ea8bf82ed4f" category="paragraph">いずれかのディスクで障害が発生した場合は、 ONTAP 9 ディスクとアグリゲートパワーガイドの手順に従ってディスクを取り外します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 ディスクとアグリゲートパワーガイドにリンクするには、を参照してください）。</block>
  <block id="897a592bf71f640f9c341f736bc9ee4e" category="list-text">次の手順を実行して node1 と node2 に関する情報を収集し、各コマンドの出力を記録します。</block>
  <block id="76a16743e07ac3cea2f75990f2aad527" category="admonition">この情報は、手順の後半で使用します。</block>
  <block id="86bd7b7efad49e1892e19e0073d55fb5" category="list-text">両方のノードのモデル、システム ID 、シリアル番号を記録します。</block>
  <block id="6954b4a189214669ac4df406940dd33e" category="paragraph">「 system node show -node &lt;node1 、 node2 &gt; -instance 」のように表示されます</block>
  <block id="dfb5c700fcc3e30efac3db32160fbcf2" category="admonition">この情報を使用して、ディスクの再割り当てと元のノードの運用を停止します。</block>
  <block id="e09e773592434045763d0f91877696a1" category="list-text">ノード 1 とノード 2 の両方で次のコマンドを入力し、シェルフ、各シェルフ内のディスク数、フラッシュストレージの詳細、メモリ、 NVRAM 、ネットワークカードに関する情報を出力に記録します。</block>
  <block id="15b1cd8e0a84466d3709aaf6e05cddf0" category="paragraph">'run-node &lt;node_name &gt;sysconfig `</block>
  <block id="4f52adca7234907fc88d3196c013afca" category="admonition">この情報を使用して、 node3 または node4 に転送するパーツやアクセサリを特定できます。ノードが V シリーズシステムであるか、 FlexArray 仮想化ソフトウェアがインストールされているかがわからない場合は、の出力からも確認できます。</block>
  <block id="183d8f9cbafac0e6a6d6ea1ecdc927af" category="list-text">ノード 1 とノード 2 の両方で次のコマンドを入力し、両方のノードでオンラインになっているアグリゲートを記録します。</block>
  <block id="c6cb2ac6573aa936dedbb241c7666136" category="paragraph">「 storage aggregate show -node &lt;node_name &gt; -state online 」のように指定します</block>
  <block id="8e812627c78a44fd6a82255d855942ae" category="admonition">この情報と次の手順の情報を使用して、再配置時にオフラインになった短時間のアグリゲートとボリュームが手順全体でオンラインのままになっていることを確認できます。</block>
  <block id="75cf5ffcfa777a87d0faf388944df0a1" category="list-text">[[man_prepare_nodes_step19]] ノード 1 とノード 2 の両方で次のコマンドを入力し、両方のノードでオフラインになっているボリュームを記録します。</block>
  <block id="9725ef50c82a6779c393b0d1203f8040" category="paragraph">volume show -node &lt;node_name &gt; -state offline`</block>
  <block id="649d1a5dd8b62184f1d84c77b9e0782d" category="admonition">アップグレード後にもう一度コマンドを実行し、この手順の出力と比較して、他のボリュームがオフラインになったかどうかを確認します。</block>
  <block id="f1914c021e0eba7910a7110848bb7b02" category="list-text">次のコマンドを入力して、 node1 または node2 にインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="668c0014fabb7b9c53aeeddba81cd3f5" category="paragraph">「 network port ifgrp show 」のように表示されます</block>
  <block id="793d1d4f275c1119fa9ef4c6bdeb245e" category="paragraph">「 network port vlan show 」と表示されます</block>
  <block id="f44fab1c935aab23f65aad42a018c6c3" category="paragraph">インターフェイスグループまたは VLAN がノード 1 とノード 2 のどちらで設定されているかを確認します。手順の次の手順以降で、その情報を確認する必要があります。</block>
  <block id="6b6d8dc68906d8c318a7c2d09898cb94" category="list-text">ノード 1 とノード 2 の両方で次の手順を実行して、手順の後半で物理ポートを正しくマッピングできることを確認します。</block>
  <block id="b84ea1287ec7320899965ee9778b33f8" category="list-text">次のコマンドを入力して 'clusterwide 以外のノードにフェイルオーバー・グループがあるかどうかを確認します</block>
  <block id="b60d742c0bb409f0ebcb8588e87621e0" category="paragraph">「 network interface failover-groups show 」と表示されます</block>
  <block id="091f947ae047399826a034c153b6f964" category="paragraph">フェイルオーバーグループは、システムに存在するネットワークポートのセットです。コントローラハードウェアをアップグレードすると物理ポートの場所が変わる可能性があるため、アップグレード中にフェイルオーバーグループを誤って変更する可能性があります。</block>
  <block id="8d9c45aa37c89a2c1648b1756ab487ea" category="paragraph">次の例に示すように、ノード上のフェイルオーバーグループが表示されます。</block>
  <block id="da98a346ceebae46d5f809b0a76fa466" category="list-text">clusterwide 以外のフェイルオーバー・グループがある場合は ' フェイルオーバー・グループ名と ' そのフェイルオーバー・グループに属するポートを記録します</block>
  <block id="4284018d8ed5fd4750bbe54e42d5131e" category="list-text">次のコマンドを入力して、ノードに VLAN が設定されているかどうかを確認します。</block>
  <block id="cd2907c0af6cc6fce6a7f22620877696" category="paragraph">「 network port vlan show -node &lt;node_name &gt;` 」のように指定します</block>
  <block id="c4bc09685f2b51c989913c717d719690" category="paragraph">VLAN は物理ポートを介して設定されます。物理ポートが変わった場合は、あとで手順で VLAN を再作成する必要があります。</block>
  <block id="d12a9049e51fd6e424aa4359a72b4295" category="paragraph">次の例に示すように、ノードに設定されている VLAN が表示されます。</block>
  <block id="c14e11ebbdc4deecee898760f94845d8" category="list-text">ノードに VLAN が設定されている場合は、各ネットワークポートと VLAN ID のペアをメモします。</block>
  <block id="52be7caa23f8083514a04ae35866982c" category="cell">インターフェイスグループまたは VLAN の状態</block>
  <block id="298af6f79d48efea731daf2a5fb8b16a" category="cell">ノード 1 またはノード 2</block>
  <block id="4d65d20e483d642b29f52e830db50552" category="inline-xref">手順 24</block>
  <block id="aa969b6a363de5881c89bb2473ec8437" category="cell">- 完了しました <block ref="9b49efbf480dedd669e8261bbf55488f" category="inline-xref-macro-rx"></block> および <block ref="75c40b124b57824cd48270709549c07b" category="inline-xref-macro-rx"></block>。</block>
  <block id="6c2e7ce55ecae714a2208a38f28950b9" category="cell">ノード 1 とノード 2 ではありません</block>
  <block id="68eb39c6bade33093ea7116e69724b9d" category="cell">に進みます <block ref="75c40b124b57824cd48270709549c07b" category="inline-xref-macro-rx"></block>。</block>
  <block id="371f291ab5b98703097ed6da7c8ed52f" category="list-text">[[man_prepare_nodes_step23]] SAN 環境または SAN 以外の環境で node1 と node2 が存在するかどうかが不明な場合は、次のコマンドを入力して出力を確認します。</block>
  <block id="088bfd1403b81327173d6033bdca4fa2" category="paragraph">network interface show -vserver &lt;vserver_name&gt; -data-protocol iscsi|fcp`</block>
  <block id="acbfcb7305e244387e0051fa5f508401" category="paragraph">SVM に iSCSI も FC も設定されていない場合、次の例のようなメッセージが表示されます。</block>
  <block id="f5ec26fd612e05501dc188ab23c1e529" category="paragraph">ノードが NAS 環境にあることを確認するには '-data-protocol nfs|cifs パラメータを指定した network interface show コマンドを使用します</block>
  <block id="94b030f9c4d0cf01d4214519980e06e7" category="paragraph">SVM に iSCSI または FC が設定されている場合、次の例のようなメッセージが表示されます。</block>
  <block id="6d0f0ab3ba176428ba45b4d0b08cb29a" category="list-text">[man_prepare-to-downgrade 24]] 次の手順を実行して、クラスタ内のすべてのノードがクォーラムにあることを確認します。</block>
  <block id="41755192777732f571a4c320827bfc6d" category="list-text">カーネル内のクラスタサービスの状態をノードごとに 1 回確認します。</block>
  <block id="998af7db71400f287ae13a492f9d193a" category="paragraph">「 cluster kernel-service show 」のように表示されます</block>
  <block id="a911ca42751cdd210f50c82f44049c10" category="paragraph">過半数のノードが正常で相互に通信可能な場合に、クラスタ内のノードがクォーラムを構成している。詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_( システム管理リファレンス ) にリンクします。</block>
  <block id="6c4e983088f8ed9f67246e1b17b638ca" category="list-text">admin 権限レベルに戻ります。</block>
  <block id="bd63b39861eaf09922b2f696e573be58" category="cell">クラスタの状況</block>
  <block id="cf72c95a9046542261893f709403a8d2" category="cell">SAN が設定されている</block>
  <block id="6f690bd73c9853fafd7c1e4456ccea21" category="inline-xref">手順 26</block>
  <block id="a2ca851f93b3aab00f2a1a9d215797c0" category="cell">に進みます <block ref="25d05608683c9030994c9dfb7a4f0a9b" category="inline-xref-macro-rx"></block>。</block>
  <block id="6f3802a8c39ecd17753209796818c9f5" category="cell">SAN が設定されていません</block>
  <block id="bb321334fcb278e04a88480d13054b7e" category="inline-xref">手順 29</block>
  <block id="4bf8f638d47f6a7f9ed2b167e6c58b28" category="cell">に進みます <block ref="423690fd8b3d3c5955a0b43d62ab9b67" category="inline-xref-macro-rx"></block>。</block>
  <block id="dca3bf352f9922771b35f1e03c591788" category="list-text">[man_prepare-to-downgrade 26]] 次のコマンドを入力して、 SAN iSCSI または FC サービスが有効になっている各 SVM で、ノード 1 とノード 2 に SAN LIF があることを確認します。</block>
  <block id="d9a90656b27774b99262e8722363244c" category="paragraph">'network interface show -data-protocol iscsi|fcp-home-node &lt;node_name &gt;`</block>
  <block id="963e82614f757a8eee0259303f34527b" category="paragraph">コマンドは、ノード 1 とノード 2 の SAN LIF 情報を表示します。次の例は、 Status Admin/Oper 列に up/up と表示されているステータスを示しています。これは、 SAN iSCSI サービスと FC サービスが有効になっていることを示しています。</block>
  <block id="8a70e662724b21080c560e6be7f2c5c4" category="paragraph">また、次のコマンドを入力して、 LIF の詳細情報を確認することもできます。</block>
  <block id="d026c064778006f9c03fdbc86d65f2bb" category="paragraph">'network interface show -instance -data-protocol iscsi|fcp</block>
  <block id="ff03f81e3805469dd3ca43d2811a614d" category="list-text">次のコマンドを入力してシステムの出力を記録し、元のノードの FC ポートのデフォルト設定を取得します。</block>
  <block id="3e2b2bdb70af85f67ec523ee76a4f03b" category="paragraph">コマンドは、次の例に示すように、クラスタ内のすべての FC ポートに関する情報を表示します。</block>
  <block id="b0465c9d2f8edb4e2978de4f3bb93497" category="paragraph">アップグレード後の情報を使用して、新しいノードに FC ポートを設定できます。</block>
  <block id="1c805b4cc00ee084b0e3a5a9c212e9a2" category="list-text">V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされたシステムをアップグレードする場合は、次のコマンドを入力して出力を記録し、元のノードのトポロジに関する情報を取得します。</block>
  <block id="1f21d3af1ebfd92fe19ca32d07d90016" category="paragraph">「 storage array config show -switch 」です</block>
  <block id="c83875af1cfc44dcf937e003fd6ad9bf" category="paragraph">次の例に示すようにトポロジ情報が表示されます。</block>
  <block id="1bd4ed27f87546af3edbba37df0590cf" category="list-text">[man_prepare-to-downgrade 29]] 次の手順を実行します。</block>
  <block id="fd24198d12e02d20f511f9c35f66ebb1" category="list-text">元のいずれかのノードで次のコマンドを入力し、出力を記録します。</block>
  <block id="7321ac6691d90f67ea8ea42f26847df8" category="paragraph">「 service-processor show -node * -instance 」のように表示されます</block>
  <block id="72dfb8d3e52e5d9045db9ad00960535b" category="paragraph">両方のノードの SP に関する詳細情報が表示されます。</block>
  <block id="f1d0d797b1496a22b2143e972a97045a" category="list-text">SP のステータスが「オンライン」であることを確認します。</block>
  <block id="9d69314bda1bdc408f81a03d72f99767" category="list-text">SP ネットワークが設定されていることを確認します。</block>
  <block id="7f4649d278edc769a0ec529585086778" category="list-text">SP の IP アドレスやその他の情報を記録します。</block>
  <block id="2874b759bc0f9d6f832a84f482485f96" category="paragraph">リモート管理デバイスのネットワーク・パラメータ（この場合は SP ）を ' 新しいノードの SP の元のシステムから再利用することができますSP の詳細については ' を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 『 _System Administration Reference_and the ONTAP 9 Commands ： Manual Page Reference_』 にリンクするには、次の手順を実行します。</block>
  <block id="73e2f3b9e6d19fe1e2189067c752d909" category="list-text">[man_prepare-to-downgrade 30]] 新しいノードに元のノードと同じライセンス機能を設定する場合は、次のコマンドを入力して元のシステムのクラスタライセンスを表示します。</block>
  <block id="57fb8c1782e77bfa17ea95c66f54a6dd" category="paragraph">「 system license show -owner * 」と表示されます</block>
  <block id="4f8f7baa705fb90b9c5bec95668e59f5" category="paragraph">次の例では、 cluster1 のサイトライセンスを表示しています。</block>
  <block id="b83718d5186db84761322d32f4ea05ac" category="list-text">新しいノードの新しいライセンスキーを the _NetApp Support Site_. に取得します。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> からネットアップサポートサイトにリンクしてください。</block>
  <block id="5bb4c97c29100d63e333b5886f7e88b0" category="paragraph">必要なライセンスキーがサイトにない場合は、ネットアップの営業担当者にお問い合わせください。</block>
  <block id="6e97d82c25e14f4edc2307703de3f74f" category="list-text">元のシステムで AutoSupport が有効になっているかどうかを確認するには、各ノードで次のコマンドを入力し、出力を調べます。</block>
  <block id="6be10f97ff0bf527322d5fe2064f26ca" category="paragraph">「 system node AutoSupport show -node &lt;node1 、 node2 &gt; 」のように表示されます</block>
  <block id="28705e432bcaee564beb0750f6d4f55d" category="paragraph">次の例に示すように、コマンド出力には AutoSupport が有効になっているかどうかが表示されます。</block>
  <block id="9d35920fb64314f04ebb4c503b9d4637" category="cell">元のシステム</block>
  <block id="82afadce5c137568366e29a810db005a" category="cell">AutoSupport が有効になっています ...</block>
  <block id="c732f1d7a89abd68a48f92313a9b4364" category="inline-xref">手順 34</block>
  <block id="1ab718a04314b36269d3b2b096aac75a" category="list-text">に進みます <block ref="395265ffe56efe9e97ae9cc3752b2f60" category="inline-xref-macro-rx"></block>。</block>
  <block id="e5358fe562a4d74ac4231d8e23d0b088" category="inline-link-macro">ストレージ暗号化用の外部キー管理サーバの IP アドレスを取得します</block>
  <block id="e080d72a1a31976179b4632b6b55abc6" category="list-text">セクションに移動します <block ref="0427c7f36b4a2a717a929ec10534f5c0" category="inline-link-macro-rx"></block>。</block>
  <block id="9c13f9e2316ce6eb31c97c43c9f42070" category="cell">AutoSupport が有効になっていません ...</block>
  <block id="6fcae9afe7013bc84597d8c4231312ba" category="list-text">AutoSupport を有効にするには、 _System Administration Reference_. の手順に従ってください。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックして、 _System Administration Reference_. にリンクします。）</block>
  <block id="04f24e11b658105f38ef40a82c24839e" category="paragraph">* 注： AutoSupport は、ストレージ・システムを初めて設定したときに、デフォルトで有効になっています。AutoSupport はいつでも無効にできますが、常に有効にしておく必要があります。AutoSupport を有効にすると、ストレージシステムに問題が発生したときに、その問題や解決策を特定するのに非常に役立ちます。</block>
  <block id="38380a05879fb0225ede644e75b655eb" category="list-text">にアクセスします <block ref="0427c7f36b4a2a717a929ec10534f5c0" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="4179c1d88c83e870ed525f69e82e0369" category="list-text">[man_prepare_nodes _step34]] 元のノードの両方で次のコマンドを入力し、 AutoSupport が正しいメールホストの詳細および受信者の E メール ID で設定されていることを確認します。</block>
  <block id="a8c3aac51d9227fa38d968e2651f9145" category="paragraph">「 system node AutoSupport show -node node_name -instance 」の略</block>
  <block id="f9145af7d3453430abd5b300de96a961" category="paragraph">AutoSupport の詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 『 _System Administration Reference_and the ONTAP 9 Commands ： Manual Page Reference_』 にリンクするには、次の手順を実行します。</block>
  <block id="1139339a9b05d9d73e22e4329260fdc9" category="list-text">[[man_prepare-to-downgrade 35 、 Step 35]] 次のコマンドを入力して、 node1 のネットアップに AutoSupport メッセージを送信します。</block>
  <block id="2dc3e53d8dbc94d5425e399af7be362e" category="paragraph">「 system node AutoSupport invoke -node node1 -type all -message 」「 Upgrading node1 from platform_old to platform_new 」というメッセージが表示されます</block>
  <block id="4086f5138ec309c4999cbff0dc76073d" category="admonition">この時点では node2 の AutoSupport メッセージはネットアップに送信しないでください。これはあとで手順で送信します。</block>
  <block id="37fdb57fc31ec512b7d4dde37a7ab8d7" category="list-text">[man_prepare-to-downgrade 36 、 Step 36]] 次のコマンドを入力して、 AutoSupport メッセージが送信されたことを確認します。</block>
  <block id="cccac064a74482bb09e58f71e14d1eb8" category="paragraph">「 system node AutoSupport show -node &lt;node1&gt; -instance 」のように表示されます</block>
  <block id="28dd44ad0b0bcceee8ca8498734facba" category="paragraph">「 Last Subject Sent ：」フィールドと「 Last Time Sent ：」フィールドには、最後に送信されたメッセージのメッセージタイトルと、メッセージが送信された時刻が含まれています。</block>
  <block id="76b84f6ac9c180bd922bf1f7f126e4f3" category="list-text">[man_lif_verify_3_step6] それぞれの LIF に対して次のコマンドを 1 回入力して、各 NAS データ LIF を node3 に移行します。</block>
  <block id="6c255263113a7719b1ecd239473107b4" category="paragraph">` network interface migrate -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -destination-node &lt;node3 &gt; -destination-port &lt;netport | ifgrp&gt; 」の形式で指定します</block>
  <block id="2a315513f7616cc1af14936ea2d874e2" category="list-text">[man_lif_verify_3_step7] データ移行が永続的であることを確認します。</block>
  <block id="41decee97eaf6a02382e1043cd497047" category="paragraph">`network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-port &lt;netport | ifgrp&gt; -home-node &lt;node3 &gt;`</block>
  <block id="a1bec963768ced37ff6941c78a44a2b2" category="list-text">[man_lif_verify_3_step8] SAN LIF がノード 3 の正しいポートに配置されていることを確認します。</block>
  <block id="585706a23104766700d11344f2e0ba1f" category="paragraph">network interface show -data-protocol iscsi|fcp-home-node &lt;node3 &gt;`</block>
  <block id="fd9ca0bcb22fd53f185265e5000e6dfc" category="paragraph">次の例のような出力が返されます。</block>
  <block id="c54266e61fa0c81baa92579805dc7963" category="list-text">ノード 3 に、ノード 1 に存在しないポート上にある SAN LIF または SAN LIF のグループがある場合、または別のポートにマッピングする必要がある場合は、次の手順を実行して、ノード 3 の該当するポートにそれらの SAN LIF またはグループを移動します。</block>
  <block id="2a5c2b7daa59600bf737f8138fa7c5d8" category="list-text">LIF のステータスを「 down 」に設定します。</block>
  <block id="c45d65e293bff08cd4322d40820fe3f2" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;LIF_NAME&gt; -status-admin down 」という形式で指定します</block>
  <block id="c9ac8fe8e0b43e6046de0567dc54775e" category="list-text">ポートセットから LIF を削除します。</block>
  <block id="d69d2bd9d3262a8ab5d370d315213f33" category="paragraph">`portset remove -vserver &lt;vserver_name&gt; -portset &lt;portset_name&gt; -port-name &lt;port_name&gt; の形式で指定します</block>
  <block id="d21772becf211f27205d2c80c2749c12" category="list-text">次のいずれかのコマンドを入力します。</block>
  <block id="fd8145a34775436c1a5fe969965d449f" category="list-text">1 つの LIF を移動します。</block>
  <block id="e6002eba5d1a039b35fcb8536729f448" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-port &lt;new_home_port&gt;` 」の形式で指定します</block>
  <block id="30f710fc2b8d913378fc91684f0863fd" category="list-text">存在しない、または間違ったポート上のすべての LIF を新しいポートに移動します。</block>
  <block id="7066be16c0309959c4b2035bead5b139" category="paragraph">network interface modify ｛ -home-node &lt;port_on_node1&gt; -role data ｝ -home-node &lt;node1&gt; -role data ｝ -home-port &lt;new_home_port_on_node1&gt; ’ 3 を参照してください</block>
  <block id="0a3646df26d19fcc6a0ee6929a6ea7be" category="list-text">LIF をポートセットに再度追加します。</block>
  <block id="6427a184f2e8fa2884ff0d3eebe006ce" category="paragraph">`portset add -vserver &lt;vserver_name&gt; -portset &lt;portset_name&gt; -port-name &lt;port_name&gt; の形式で指定します</block>
  <block id="d78bc2532b76c692bc747f0206ce2369" category="admonition">SAN LIF は、元のポートとリンク速度が同じポートに移動する必要があります。</block>
  <block id="3920c87ab45883a20b7f4aff2eb8f6f9" category="list-text">ノードでトラフィックを許可して送信できるように、すべての LIF のステータスを「 up 」に変更します。</block>
  <block id="18cd286e7e66b1d7cc6dd09759e173e8" category="paragraph">「 network interface modify -home-node &lt;port_name&gt; -home-port &lt;port_name&gt; -home-port data -status-admin up 」を参照してください</block>
  <block id="95ecba7b6bea27535042e5096f91549c" category="list-text">いずれかのノードで次のコマンドを入力し、その出力を調べて、 LIF が正しいポートに移動されていること、およびいずれかのノードで次のコマンドを入力して LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="fb56fd816b904059bf738c97552e7950" category="paragraph">network interface show -home-node &lt;node3 &gt; -role data</block>
  <block id="2e0b337c1378c2a234102f1198e8adba" category="list-text">[[man_lif_verify_3_step11]] いずれかの LIF が停止している場合は、次のコマンドを 1 回入力して、各 LIF について LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="d69a84eb389c545291c152fff3de9999" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -status-admin up 」の形式で指定します</block>
  <block id="78036b97ca6165fc32dd17167726e77f" category="list-text">アップグレード後に行う AutoSupport メッセージを node1 のネットアップに送信します。</block>
  <block id="b430ac926445a5f58cb4f6464a0ee269" category="paragraph">「 system node AutoSupport invoke -node &lt;node3 &gt; -type all -message 」 node1 successfully upgraded from &lt;platform_old&gt; to &lt;platform_new&gt;" 」というメッセージが表示されます</block>
  <block id="218c1c22487e3cea0e94aedcabb843e2" category="paragraph">に保存した FC ポート設定の値を node1 で確認しておく必要があります <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block>。</block>
  <block id="dfec8ed00cbb51821de82d335a0ba98b" category="paragraph">システムに FC 構成がない場合は、このセクションをスキップしてかまいません。システムにオンボード UTA / UTA2 ポートまたは UTA / UTA2 カードがある場合は、で設定します <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="53d8e9a89e7df0f2e9d3d1647aa47fa3" category="admonition">* 重要 * ：ご使用のシステムにストレージ・ディスクがある場合は、クラスタ・プロンプトでこのセクションにコマンドを入力してください。V シリーズシステムまたは FlexArray 仮想化ソフトウェアがインストールされていて、ストレージアレイに接続されている場合は、このセクションに示すコマンドを保守モードで入力します。</block>
  <block id="9dc09e5212ac728648450db66b8f3668" category="list-text">[[step1]] 次のいずれかの操作を実行します。</block>
  <block id="fb0e67401f3473ee656312bb98935878" category="cell">に進みます <block ref="4e8d6367d01e7a88b5b6b591ecf5d6db" category="inline-xref-macro-rx"></block></block>
  <block id="32781b45218385923d91bc21b08c6b68" category="cell">に進みます <block ref="79ba4e2202506d0f17b14ab90d196879" category="inline-xref-macro-rx"></block></block>
  <block id="838b228ad3b40461ad1dc100f5671807" category="list-text">[[man_config_3_step2] ノード 3 をブートし、メンテナンスモードにアクセスします。</block>
  <block id="7e6f8de582e2388fb39a5c5c26caa64f" category="list-text">[[step3]] 次のいずれかの操作を実行します。</block>
  <block id="534ca774217e84be533a1aad9cf31936" category="cell">次のコマンドを入力します。 'system node hardware unified-connect show'</block>
  <block id="fe780061729afd0c0f2800209c7c7bf6" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載し、ストレージアレイに接続されています</block>
  <block id="b7911a4b9aaa4584cf3072f4df9d0033" category="cell">次のコマンドを「 ucadmin show 」と入力します</block>
  <block id="d0f2b99979906267ea4c720be3fdf8c1" category="list-text">[[step4]] ノード 3 の FC 設定を、ノード 1 から前に取得した設定と比較します。</block>
  <block id="befe3449c034cb6f4631649c7a4ed066" category="list-text">[man_config_3_step5] 次のいずれかの操作を実行します</block>
  <block id="cb4a7a262c1057120daeee2df7839247" category="cell">ノード 1 で取得したものと同じです</block>
  <block id="2b56e7490fdbb3cfe1904501429274b7" category="cell">に進みます <block ref="c6c9a381b48f60f002c0199635146c23" category="inline-xref-macro-rx"></block>。</block>
  <block id="2cc211fd01662dba325fa6afb2cb24dc" category="cell">ノード 1 で取得したものとは異なります</block>
  <block id="3a3387d05eb4dc59724516e63ce89fe1" category="cell">に進みます <block ref="cb1e6c315615cb7630d3b8a437827bc2" category="inline-xref-macro-rx"></block>。</block>
  <block id="8858cbf1016a885e6783f73cde18ddf4" category="list-text">[[man_config_3_step6] 次のいずれかの操作を実行します。</block>
  <block id="eef9069309a77ac006f5011dca4b9f9a" category="paragraph">次のいずれかのコマンドを入力して、必要に応じて node3 の FC ポートを変更します。</block>
  <block id="2ce4edae9e9c97b20fed47972e1d4caf" category="list-text">ターゲットポートをプログラムする場合：「 system node hardware unified-connect modify -type | -t target-adapter &lt;port_name&gt; 」</block>
  <block id="51587a6d058865620a3fb14c6d8c9d9a" category="list-text">イニシエータポートをプログラムするには、「 system node hardware unified-connect modify -type 」 | -t initiator -adapter &lt;port_name&gt; 」を使用します</block>
  <block id="f785fd1b7c2d6c5d48b8a31065275b2a" category="cell">必要に応じて、次のコマンドを入力して、 node3 の FC ポートを変更します。 ucadmin modify -m fc -t initiator -f &lt;adapter_port_name&gt; `-t` は、 FC4 タイプ、ターゲット、またはイニシエータです。* 注： FC ポートはイニシエータとしてプログラムする必要があります。</block>
  <block id="0f46f9b9f7235f322cd04b338ecda49c" category="list-text">[[step7]] 次のいずれかの操作を実行します。</block>
  <block id="85a79ca9227090c23bb3d6d14dbbe0af" category="cell">次のコマンドを入力し、出力を調べて、新しい設定を確認します。「 system node hardware unified-connect show 」</block>
  <block id="2c6e937b15ebe6468c586dd1b4eb466a" category="list-text">[[step8] 次のコマンドを入力して、メンテナンスモードを終了します。</block>
  <block id="b3a919f35f16fa3a39c85eac5d885d2f" category="list-text">[[step9] コマンドを入力したら、ブート環境のプロンプトでシステムが停止するまで待ちます。</block>
  <block id="c62d6d151dbb06716a8276f4f8bb89e0" category="list-text">[[step10]] 次のいずれかの操作を実行します。</block>
  <block id="648ad8a1b1818127b7b933420429d236" category="cell">アップグレードするシステム</block>
  <block id="8e49fbf8016e97e15077debef6c06b54" category="cell">は、 V シリーズシステム、または clustered Data ONTAP 8.3 を実行する FlexArray 仮想化ソフトウェアを備えています</block>
  <block id="51ae224ccdb747cc08ff98ed97fed51f" category="cell">ブート環境プロンプトの「 boot_ontap maint 」で、ノード 3 をブートし、メンテナンスにアクセスします</block>
  <block id="8cf0032370f0f9233266234c2a7feab7" category="cell">は、 V シリーズシステムではないか、 FlexArray 仮想化ソフトウェアがインストールされていません</block>
  <block id="7e422d66a2b07e1e654868dee6aae687" category="cell">ブート環境プロンプトで node3 を起動します</block>
  <block id="1509937ac092a7690a93d056a0c33d58" category="list-text">[man_config_3_step11]] 次のいずれかの操作を実行します</block>
  <block id="3e5bf76136102b434c2a000604dc77c1" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがある場合は、に進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="306e854e226a650b7acec40ba5a0e249" category="list-text">ノード 3 に UTA / UTA2 カードまたは UTA / UTA2 オンボードポートがない場合は、この手順を省略してください <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block> にアクセスします <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="6c804c4adac8740743dd6f41da471795" category="list-text">node3 にカードポートまたはオンボードポートがある場合は、に進みます <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>。</block>
  <block id="49844625e7eb80b095f9d3c525f8cba6" category="list-text">node3 にカードポートまたはオンボードポートがない場合は、を省略します <block ref="574c49ad3466f1bed21aff7050a30e36" category="inline-xref-macro-rx"></block>をクリックし、 _Install に戻り、 node3 をブートして、で再開します <block ref="a4103675c41ea57f7287e0804dd0c9dd" category="inline-link-macro-rx"></block>。</block>
  <block id="a55f4c112389aef5c1095610759695f4" category="paragraph">ノード 4 をラックに設置し、ノード 2 の接続をノード 4 に転送し、ノード 4 をブートする必要があります。ノード 2 のスペア、ルートに属するディスク、および node3 でそれよりも前に再配置されなかったルート以外のアグリゲートも再割り当てする必要があります。</block>
  <block id="46bf31662c49b18f28ea137563eae20a" category="paragraph">node2 に同じバージョンの ONTAP 9 がインストールされていない場合は、 node4 をネットブートする必要があります。node4 のインストールが完了したら、 Web サーバに格納されている ONTAP 9 イメージからブートします。その後、の手順に従って、後続のシステムのブートに使用する正しいファイルをブートメディアデバイスにダウンロードできます <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block></block>
  <block id="7450170c152f247fc2c9a5ece1d25571" category="paragraph">ただし、 node2 に同じバージョンまたはそれ以降のバージョンの Data ONTAP 9 がインストールされている場合は、ネットブートノード 4 を実行する必要はありません。</block>
  <block id="02a3537f6e96697842c87c410e1169a9" category="paragraph">* 重要 * ：</block>
  <block id="44a1dd334ad3ac6220ea0adf17519961" category="list-text">V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、を完了する必要があります <block ref="a48f24f7fd083b3ec1c1fb7f5bee1e25" category="inline-xref-macro-rx"></block> から <block ref="23a128901edc6abd74721071977e73e9" category="inline-xref-macro-rx"></block>をクリックします <block ref="4b3dcb4f5ad67f2f001c91135169a837" category="inline-xref-macro-rx"></block> およびの手順に従ってください <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block> 必要に応じて、メンテナンスモードでコマンドを入力します。その後、このセクションに戻って手順を再開する必要があります <block ref="9b924d5c1ba14dd46bf7c40da5a15e7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="78b1d5bad885b3107f106e5d1a9b18ec" category="list-text">ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を完了してから、セクションに進んでください <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="bdb96da2d8e74dfce89eef174e77991a" category="list-text">[[man_install4_Step1] 次のいずれかの操作を行います。</block>
  <block id="668ee630125cb736935532180dec5496" category="cell">ノード 4 の配置先</block>
  <block id="162e71035e50cc882a8bc6f9ff5b49f2" category="cell">ノード 3 とは別のシャーシ</block>
  <block id="fd915b6d9d7d8df5863bf1a398fcf38a" category="cell">に進みます <block ref="5da993404245519b124ccd5cfdc8f96e" category="inline-xref-macro-rx"></block>。</block>
  <block id="517089a54c66f01f0ee8cb8683dad1ec" category="cell">同じシャーシを node3 と一緒に配置する</block>
  <block id="9a56a499535dc46c81b504689b6f1584" category="cell">手順 2 と 3 を省略して、に進みます <block ref="d70dd93eaf2d4e4f4bee874c28b01d22" category="inline-xref-macro-rx"></block>。</block>
  <block id="409539264ec665ff1676a423db4f5983" category="list-text">[[man_install4_Step2]] ノード 4 に十分なラックスペースがあることを確認します。</block>
  <block id="b8b0bf4a502958083dc62a5c96442944" category="paragraph">node4 と node3 が別々のシャーシにある場合は、 node4 を node2 と同じ場所に配置できます。node3 と node4 が同じシャーシにある場合は、 node4 が適切なラックの場所にすでに存在しているとします。</block>
  <block id="b2a26edcdea9e0bc9d1a1f149aaa56af" category="list-text">[[man_install4_Step4]] ケーブルノード 4 を接続し、ノード 2 からノード 4 に接続を移動します。</block>
  <block id="9f13bb9f267a0b057f115598b95b4a04" category="paragraph">次の参考資料は、適切なケーブル接続を行う場合に役立ちます。に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> をクリックしてリンクします。</block>
  <block id="268eeab46cc4cbb65d5e580b239819b7" category="list-text">_ インストールおよびセットアップ手順 _ または _ FlexArray 仮想化インストール要件およびリファレンス _ （ノード 4 プラットフォーム用）</block>
  <block id="d5a449fe0916c29f3c21ed516c3a0a85" category="list-text">該当するディスクシェルフガイドを参照してください</block>
  <block id="04319c214e3e53544ee494bc7426c28f" category="list-text">ONTAP 9 ハイアベイラビリティ構成ガイド _</block>
  <block id="19c5c8c6d8397114c1994a6c3eb88f1f" category="paragraph">次の配線を行います。</block>
  <block id="6b3c36f97ba6ae6e5b790f8c06f76595" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカード / FC-VI カードまたはインターコネクト / FC-VI ケーブルの接続を node2 から node4 に移動する必要はありません。</block>
  <block id="7c6dcbfbd814e3914af912fc227236db" category="cell">ノード 4 の構成</block>
  <block id="0eac7849b27808b92dfd85fd93d5adf9" category="cell">ノード 3 と同じシャーシ</block>
  <block id="ebfef1d5b820c6361e45e99afc605aff" category="cell">に進みます <block ref="4b3dcb4f5ad67f2f001c91135169a837" category="inline-xref-macro-rx"></block>。</block>
  <block id="23651fb868295760fbf6e0040b0debb0" category="cell">に進みます <block ref="38932d9b2776291a7bec718b723ae495" category="inline-xref-macro-rx"></block>。</block>
  <block id="84857d961b292bb9faee31d20a2e4320" category="list-text">[man_install4_Step6]] ノード 4 の電源をオンにし 'Ctrl+C キーを押してブートを中断してブート環境プロンプトにアクセスします</block>
  <block id="2533698a45ba6cab05df3bd9337b544f" category="admonition">node4 をブートすると、次のメッセージが表示される場合があります。</block>
  <block id="6904f97422da010c9982167637cc6d56" category="list-text">[[man_install4_Step7] ステップ 6 で警告メッセージが表示された場合は、次の操作を実行します。</block>
  <block id="abb5e8621f032d746c9aa9b35f472595" category="list-text">NVRAM バッテリ低下以外の問題を示すコンソールメッセージがないか確認し、必要に応じて対処します。</block>
  <block id="8ece0169cd074b513037985b1656b1cd" category="list-text">バッテリの充電と起動プロセスが完了するまで待ちます。</block>
  <block id="30567eb6dc573926907b3bb63db7137a" category="admonition">* 警告 : 遅延を上書きしないでください。バッテリーの充電に失敗すると、データが失われる可能性があります。 *</block>
  <block id="945c73c9ea193c92dd8b512126669f13" category="list-text">[[man_install4_Step8] 次のいずれかの操作を行います。</block>
  <block id="a2a7998a5450e891bb5464c1204815d8" category="cell">手順 9 から 14 を省略して、に進みます <block ref="5c1f19cc6cb716956fba505fb903a21f" category="inline-xref-macro-rx"></block>。</block>
  <block id="0366496afb0bd008f8fb19b74f53ec71" category="inline-link-macro">ノード 4 の FC ポートを設定します</block>
  <block id="7973536954a566dd7a59dc4fa1580481" category="list-text">node4 の FC または UTA / UTA2 設定のセクションに移動し、セクションの作業を行います <block ref="5dc4a26bdcd4279b0919835bab13d0db" category="inline-link-macro-rx"></block> および <block ref="b0f6547feb9924da912bf4fa3357e2fc" category="inline-link-macro-rx"></block>必要に応じて、システムに適用されます。</block>
  <block id="f01b0d07fd3bcdce42fd5cf6a8f46551" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="9b924d5c1ba14dd46bf7c40da5a15e7c" category="inline-xref-macro-rx"></block>。</block>
  <block id="0ecbf7c74e381542280cb5ae382623c0" category="paragraph">* 重要 * ： V シリーズシステムで Data ONTAP をブートする前に、オンボード FC ポート、 UTA / UTA2 オンボードポート、 UTA / UTA2 カードを再設定する必要があります。</block>
  <block id="562a6369849944020611b8a9540b9c5c" category="list-text">[[man_install4_Step9] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="a68de9b3c6fcb14f9c96b6e558ca71f8" category="list-text">ストレージアレイ上のアレイ LUN に関連付けられたホストまたはボリュームグループの World Wide Port Name （ WWPN ；ワールドワイドポート名）値を変更する。</block>
  <block id="1ad5461b16a79391d48cbca2383e0c9e" category="list-text">次のコマンドを入力し、出力を調べて、アレイ LUN が node4 に認識されていることを確認します。</block>
  <block id="6b3585cc5d8743bbae5204f3097641c4" category="paragraph">「 sysconfig -v 」を使用します</block>
  <block id="134f75a624b82855271656ebc0cf2d5f" category="paragraph">各 FC イニシエータポートで認識されるすべてのアレイ LUN が表示されます。アレイ LUN が表示されない場合は、このセクションの後半で node2 から node4 にディスクを再割り当てすることはできません。</block>
  <block id="05ecdb384acc604bb6388efe9a979597" category="list-text">Ctrl キーを押しながら C キーを押して ' ブート・メニューを表示し ' メンテナンス・モードを選択します</block>
  <block id="a2835e58397213dc9bedb9afe05d29d2" category="list-text">[[man_install4_Step15]] メンテナンスモードのプロンプトで、次のコマンドを入力します。</block>
  <block id="9b30a77b62fcc76d557f789dd6ce3167" category="list-text">ONTAP のノード 4 を設定します。</block>
  <block id="70dbb49a6cbad96a6befa2a87cf2c5ce" category="paragraph">「デフォルト設定」</block>
  <block id="70fa8a94fae594e32ef99991313ee137" category="list-text">この構成で FDE を使用する場合 '`setenv.storageencryption.support` 変数は 'true' に設定する必要がありますまた 'node2 構成のロード後にブートループが発生しないように 'kmip.init.maxwait` 変数は 'off' に設定する必要があります</block>
  <block id="c769624c49a19cf249ae2dabe50fafd5" category="list-text">ノード 4 にインストールされている ONTAP のバージョンが node2 にインストールされている ONTAP 9 と同じかそれ以降の場合は、次のコマンドを入力します。</block>
  <block id="bd525e59dc1c481092f22bdaeff4a9cb" category="cell">ノード 4 に正しい ONTAP バージョンまたは現在の バージョンがない</block>
  <block id="d4d1f4ca7806007366aa98184f062124" category="inline-xref">手順 20</block>
  <block id="642ae729bd75051692412fd6ebaf2526" category="cell">に進みます <block ref="1fde564298826640b3bacb4260e3eaea" category="inline-xref-macro-rx"></block>。</block>
  <block id="9b66895c756fece1df6c42e12763649b" category="cell">ノード 4 の ONTAP のバージョンが正しいか、最新のバージョンであることが必要です</block>
  <block id="7769822edfc550f3ba37429715882554" category="inline-xref">手順 25</block>
  <block id="107c908e64ebe1cdac15562994203122" category="cell">に進みます <block ref="aadd3e12a76cc16c765ef6c4ab9ed890" category="inline-xref-macro-rx"></block>。</block>
  <block id="76b2a354a862c0069407c912fb51ee50" category="list-text">[[man_install4_Step20]] 次のいずれかの操作を選択して、ネットブート接続を設定します。</block>
  <block id="819576ac2beda71a5f64c74e58833045" category="admonition">ネットブート接続として管理ポートおよび IP アドレスを使用する必要があります。アップグレードの実行中にデータ LIF の IP アドレスを使用しないでください。データ LIF が停止する可能性があります。</block>
  <block id="4a8c92edcf5608186b4e424977f98a73" category="cell">ブート環境プロンプトで「 ifconfig e0M -auto 」コマンドを入力すると、接続が自動的に設定されます</block>
  <block id="6b3f72590e2ba575765b270b75ec3265" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。 ifconfig e0M -addr= &lt;filer_addr&gt; mask= &lt;netmask&gt; -gw= &lt;gateway&gt; dns_addr&gt; domain= &lt;dns_domain&gt; `&lt;filer_addr&gt;`&lt;netmask&gt;` はストレージシステムのネットワークマスクです。「 &lt;gateway&gt;` 」は、ストレージシステムのゲートウェイです。「 &lt;dns_addr&gt; 」は、ネットワーク上のネームサーバの IP アドレスです。「 &lt;dns_domain&gt; 」は、 Domain Name Service （ DNS ；ドメインネームサービス）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。* 注 * ：インターフェイスによっては、他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="a1e9c2458084c8aed432506005e0789e" category="cell">netboot\http://&lt;web_server_ip/path_to_webaccessible_directory&gt;/netboot/kernel`</block>
  <block id="7e0c898eb7a2157f9a4fe767ff353ea1" category="cell">netboot\http://&lt;web_server_ip/path_to_webaccessible_directory/ontap_version&gt;_image.tgz`</block>
  <block id="feed6e71880a4cdb6f484b72b59ad1c7" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所を指します <block ref="d7ca8bd1bdacba48998a89c59527e756" category="inline-link-macro-rx"></block> の項で、 netboot_ の準備を参照してください。</block>
  <block id="309791cba48d347af2b367032b3dd97b" category="list-text">起動メニューから 'option(7) Install new software first ’を選択します</block>
  <block id="0b2229e3a518ca5320ae9e1f22775ad9" category="paragraph">このメニューオプションを選択すると、新しい Data ONTAP イメージがブートデバイスにダウンロードおよびインストールされます。</block>
  <block id="c0c1ca8a9ddeae72e1e2be38243a2522" category="paragraph">次のメッセージは無視してください。</block>
  <block id="af7a0d97078a38e1bd7d89c61066724a" category="paragraph">` この手順は HA ペアの無停止アップグレードではサポートされていません</block>
  <block id="52e732ba64db04aee6e7ad74ff701940" category="paragraph">コントローラのアップグレードではなく、 Data ONTAP による環境の無停止アップグレードも記録されています。</block>
  <block id="3649c3b28305249c1b3207c6087eaedc" category="list-text">[man_install4_step23]] 手順を続行するかどうかを確認するメッセージが表示されたら、 y を入力します。パッケージの入力を求められたら、次の URL を入力します。</block>
  <block id="ad4f522a516d9a5742a3b1abdd5d7e77" category="paragraph">http://&lt;web_server_ip/path_to_web-accessible_directory/ontap_version&gt;_image.tgz` にアクセスします</block>
  <block id="3678fe02acf5ec3ff8f4fbebc3fd7a4d" category="list-text">次の手順を実行します。</block>
  <block id="037fcad07615e2da823be3a48a35cfb8" category="paragraph">コントローラモジュールはリブートしますが、ブートメニューで停止します。これは、ブートデバイスが再フォーマットされたことにより、構成データのリストアが必要なためです。</block>
  <block id="212239c0a7a5196ffbd8cc3895cfce05" category="list-text">[man_install4_Step25]] ブートメニューからメンテナンスモード「 5 」を選択し ' ブートを続行するように求められたら 'y' を入力します</block>
  <block id="88dd4b794782fce5edb7683e13199311" category="list-text">[[man_install4_Step26]] 続行する前に、に進みます <block ref="488c6e462745f03d8c1dfb3ba61f7258" category="inline-link-macro-rx"></block> ノードの FC ポートまたは UTA / UTA2 ポートに必要な変更を加えるため。これらのセクションで推奨される変更を行ってからノードをリブートし、メンテナンスモードに切り替えます。</block>
  <block id="7e3544f15733cd05bc2830419b4be7f9" category="list-text">次のコマンドを入力し、出力を調べて node4 のシステム ID を特定します。</block>
  <block id="b42167fc8c56e26bc5bde99cbcb98104" category="paragraph">「ディスクショー - A` 」</block>
  <block id="4e974a66c77c6d900d32abc8f0338440" category="paragraph">次の例に示すように、ノードのシステム ID 、およびそのディスクに関する情報が表示されます。</block>
  <block id="fae986fa29654ebe6966932d05eb132d" category="inline-link-macro">ルート以外のアグリゲートを node2 から node3 に再配置します。</block>
  <block id="6ebd270373edc34882879e2c2ed9e67b" category="list-text">ノード 2 のスペア、ルートに属するディスク、および前のセクションでノード 3 に再配置されなかったルート以外のアグリゲートを再割り当てします <block ref="2eb3ddacc3cdbca929068de80db9b0b7" category="inline-link-macro-rx"></block>：</block>
  <block id="f6083059f6516202ed7ac1092bed861b" category="cell">ディスクタイプ</block>
  <block id="65f83791dfc3308f8c98325d44977d10" category="cell">実行するコマンド</block>
  <block id="8e209d660098d73b07642a1950888f1d" category="cell">共有ディスクの場合</block>
  <block id="a3432db44a757895f3eb3a1c9f4d3cea" category="cell">`Disk reassign -s `&lt;node2 _ssysid&gt;-d &lt;node4 sysid&gt;-p node3 &lt;sysid&gt;`</block>
  <block id="567c7db5eb132ed0419b894d763f1872" category="cell">共有なし</block>
  <block id="cb3bccddce7862ce1908af49d7e9df63" category="cell">「ディスクの再割り当て」 -s 「 &lt;node2 _sysid&gt;-d &lt;node4 sysid&gt;` 」</block>
  <block id="b95982609bcaa66a9948629f87fe8589" category="inline-link-macro">手順 10</block>
  <block id="7f9877f92749af42ef730feeda0dba70" category="paragraph">&lt;node2 _sysid&gt;` の値には、で取得した情報を使用します <block ref="09a261426dbc4b06f375c3dc720b5b79" category="inline-link-macro-rx"></block> をクリックします。`&lt;node4 sysid&gt;` の場合は、で取得した情報を使用します <block ref="9c7125eb7b33f2cb03297a560d0660b0" category="inline-xref-macro-rx"></block>。</block>
  <block id="2e55dc5dee1972467c8f86adee9b26a8" category="admonition">-p オプションは ' 共有ディスクが存在する場合にのみ保守モードで必要です</block>
  <block id="423897eae7d5975e08caad3349a2ff49" category="paragraph">「 disk reassign 」コマンドを使用すると、「 &lt;node2 _sysid&gt; 」が現在の所有者であるディスクだけが再割り当てされます。</block>
  <block id="685b8dfe5883c0cc4f183236c52e6cdd" category="paragraph">ディスクの再割り当てを中止するかどうかを尋ねられたら 'n' を入力します</block>
  <block id="c8baecc7560f46020b0d73d658566eab" category="paragraph">ディスクの再割り当てを中止するように求められた場合は、次の手順に従って一連のプロンプトを回答に出力する必要があります。</block>
  <block id="35c143d9885250e0128441d72be169dd" category="list-text">「 y 」と入力して続行します。</block>
  <block id="906012ab50dee220a65fb1458eb58128" category="list-text">ディスク所有権の更新を許可するには 'y' を入力します</block>
  <block id="0bcba60a38db3b0f12b08821c6ae56fc" category="list-text">外付けディスクが搭載されたシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ A800 システムなど）にアップグレードする場合は、 node4 を root として設定し、 node2 のルートアグリゲートからブートするようにします。</block>
  <block id="81d274af1a54983c64b259dfc78b1c9f" category="admonition">* 警告：次の手順を記載された順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。 *</block>
  <block id="1ca7ffcdba47b0e1e7fe67ed3e918c17" category="list-text">node2 アグリゲートの全体的なステータスを確認します。</block>
  <block id="9cf332fc3e49cdbc8c4e5181c30ae161" category="list-text">次のコマンドを入力し、出力を確認して、コントローラとシャーシが「 ha 」として設定されていることを確認します。</block>
  <block id="af2a502808ef81f73370e9e64784659d" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="92435116502eec5121875eb86e01c666" category="paragraph">コントローラとシャーシが「 ha 」として設定されていない場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="2e89fd69efdc517bb6463b3444e009df" category="paragraph">「 ha-config modify chassis ha 」を参照してください。</block>
  <block id="efa973aed3146abf01226e85a9e5f816" category="paragraph">MetroCluster 構成を使用している場合は、次のコマンドを使用して設定を修正します。</block>
  <block id="27dae2ee8e632216c89579f651774f45" category="paragraph">「 ha-config modify chassis mcc 」</block>
  <block id="79d038b849b0e37c67ee77c0b56d066f" category="list-text">node4 にあるメールボックスを破棄します。</block>
  <block id="7f7deb46e1585e846e2fd054b1b2af5a" category="paragraph">「マイボックス破壊ローカル」</block>
  <block id="97c16f2bd68041ac79ef06049407d0c7" category="list-text">メンテナンスモードを終了します。</block>
  <block id="953d8f613cc775b0d7904f99aec7a052" category="list-text">ノード 3 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="e3f03a007dc36d2b8067017bfe222275" category="list-text">ノード 4 で、ブート環境プロンプトの日付を確認します。</block>
  <block id="02bb70865b20c57eb319b73c84b5fd7f" category="list-text">ノード 4 で、ブート環境プロンプトの時刻を確認します。</block>
  <block id="c73ed66a3414025099d74b00d7536036" category="list-text">パートナーシステム ID が、に示すように正しく設定されていることを確認します <block ref="6f4b83e10b4758eab71105c01c130b34" category="inline-xref-macro-rx"></block> オプション（ Option ）の下。</block>
  <block id="eb91daa92a7cd6e3d0f28a92df381e46" category="paragraph">getenv partner-sysid &lt;node3 sysid&gt;`</block>
  <block id="0f463f9540d67b2794aa78893f83b8aa" category="list-text">ブート環境プロンプトでブートメニューを入力します。</block>
  <block id="ca0b24352c36c0cc73393a18e38ead22" category="list-text">ブート・メニューで ' プロンプトに「 6 」と入力して 'Option *(6) Update flash from backup config * を選択します</block>
  <block id="23fc33b520f7242c5f2fb610689e9e8c" category="list-text">プロンプトで「 y 」と入力します。</block>
  <block id="d9f991b0b3aa3c03080efb5d84a35c57" category="paragraph">ブートが正常に続行され、システム ID の不一致を確認するように求められます。</block>
  <block id="88d91937c0736919ae3483a3cb1e1f7e" category="admonition">不一致の警告が表示される前にシステムが 2 回リブートする可能性があります。</block>
  <block id="c3a51f505b0a44650db3707558ddeefc" category="list-text">不一致を確認します。正常にブートする前に、ノードの 1 回のリブートが完了することがあります。</block>
  <block id="cc7dd78f409b3f942015e8a65f2c11e8" category="list-text">ノード 4 にログインします。</block>
  <block id="44bbe343e421273c157c5d1c833a433b" category="list-text">[[step1] ノードごとに次のコマンドを入力し、出力をキャプチャして、 node2 が所有していないすべての NAS データ LIF を一覧表示します。</block>
  <block id="690cd6839e2f529e9d1be34efa6f9791" category="paragraph">network interface show -role data -curr-node &lt;node2&gt; -is-home false -home-node &lt;node3 &gt;`</block>
  <block id="831368d2ac042989f939504faf6cdf51" category="list-text">[[step2]] 次のいずれかの操作を実行します。</block>
  <block id="423e99aaa66fb1d5698571ceb7787197" category="cell">ノード 1 の状況</block>
  <block id="4273a0997ee0d6df35945422d9f57ec6" category="cell">インターフェイスグループまたは VLAN が設定されている</block>
  <block id="05aa25da736018fa33e8cc8667b1e0f1" category="cell">に進みます <block ref="fa7afcf3541ce640333b443234c694da" category="inline-xref-macro-rx"></block>。</block>
  <block id="31a8cab14d1d7febef6f8053dcd9552d" category="cell">インターフェイスグループまたは VLAN が設定されていません</block>
  <block id="09b00a0d82c468f9038424665ba3a692" category="cell">手順 3 を省略して、に進みます <block ref="a5ee73999909412ce73c7e745a3cb5c2" category="inline-xref-macro-rx"></block>。</block>
  <block id="8c5ada6be3ca66f32616fd020694ec45" category="list-text">[[man_lif_verify_3_step3]] 次の手順を実行して、インターフェイスグループおよび VLAN でホストされていた NAS データ LIF を、ノード 2 からノード 3 に移行します。</block>
  <block id="fd8bd88e1dcef54d04236465f2b87693" category="list-text">[[man_lif_verify_3_substpa]] インターフェイスグループ上の node1 に属していた node2 でホストされているデータ LIF を、同じネットワーク上の LIF をホストできる node3 のポートに移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="494973c7f1f28c90b456a3998b09b84a" category="paragraph">` network interface migrate -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -destination-node &lt;node3 &gt; – destination-port &lt;netport | ifgrp&gt; 」の形式で指定します</block>
  <block id="d280fa5d8e575828d8f638790f296c00" category="inline-xref">手順 a</block>
  <block id="630798093592f408d28e43d1a5875c4f" category="list-text">LIF のホームポートとホームノードを変更します <block ref="ffe3d697e3afcad8e9e0e14f978885cb" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="7c38b19f61b4cf300416bf64071c3a06" category="paragraph">network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-node &lt;node3 &gt; -home-port &lt;netport | ifgrp&gt; ’ ' のようになります</block>
  <block id="569a27e0dcf14d4091837fcac510315b" category="list-text">[man_lif_verify_3_substpc ]] VLAN ポートでノード 1 に属していた node2 でホストされているすべてのデータ LIF を、同じネットワーク上の LIF をホストできるポート node3 に移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="9ad3609f9c94e5d3764345c4a95d6e85" category="inline-xref">サブステップ c</block>
  <block id="acdda21dc8c7ea3a875f05cfa2d42fb8" category="list-text">LIF のホームポートとホームノードを変更します <block ref="0ba0c3832c194a002bde244af82cc6e8" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f0de8680ab31eb7304741a5d6c335bce" category="list-text">[man_lif_verify_3_step4] 次のいずれかの操作を実行します</block>
  <block id="9b9179b830c575fb1e672a3bed56f248" category="cell">クラスタの設定対象</block>
  <block id="c07ee5debf5f3a3fef16c1ee5e8e4942" category="cell">NAS</block>
  <block id="a8737f289941aae34c7bdcaf30a6f49c" category="cell">- 完了しました <block ref="5bf3f4cb83f848c38272cdda13b03424" category="inline-xref-macro-rx"></block> および <block ref="5afb3629d2897001a44bd62c86195932" category="inline-xref-macro-rx"></block>をクリックして、手順 7 をスキップして完了します <block ref="6f2b0e2c7df1e7ce442716f4a9ac5045" category="inline-xref-macro-rx"></block> から <block ref="d664f7f06c19c1d6c4e1d7d9cba27620" category="inline-xref-macro-rx"></block>。</block>
  <block id="62a0282d39568be094470486eaf70c4f" category="cell">SAN</block>
  <block id="e7bc8e4a360dbc42e9759f708ed40f33" category="cell">ノード上のすべての SAN LIF を無効にしてアップグレード用にダウンにします。「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -home-node &lt;node--to_upgrade&gt; -home-port &lt;netport | ifgrp&gt; -status-admin down</block>
  <block id="9049f1bbc92896381d7b5ffdc386e3b2" category="list-text">いずれかのノードで次のコマンドを入力して、ストレージフェイルオーバーを有効にします。</block>
  <block id="4d090b6b4178c6d326829a98b05a4cd7" category="paragraph">'storage failover modify -enabled true -node &lt;node3 &gt;`</block>
  <block id="9d070d121ee26abdb5d314d6fff4c15c" category="list-text">ストレージフェイルオーバーが有効になっていることを確認します。</block>
  <block id="44b65ecdfbcd9fda48c21d17aae6347e" category="cell">クラスタの種類</block>
  <block id="73b5646d22daa7a0c1b15cb75822045d" category="cell">2 ノードクラスタ</block>
  <block id="f58285c881fa273f24181ed6fc4f5253" category="cell">どちらかのノードで cluster ha modify -configured true コマンドを入力して ' クラスタの高可用性を有効にします</block>
  <block id="bbe624d4e7e26aa8777e96c55a0041f3" category="cell">3 ノード以上のクラスタ</block>
  <block id="97b53f9857ac13c0da869099d031be38" category="cell">に進みます <block ref="822b8237ef75a77ff6f775dfc30b209c" category="inline-xref-macro-rx"></block>。</block>
  <block id="c923a045fa01384244a7d722820ecb7f" category="list-text">[[man_ver_setup_Step4]] 次のコマンドを入力して、 node3 と node4 が同じクラスタに属していることを確認します。</block>
  <block id="993ec2fcd18633816cf0d4d290fcf5a3" category="list-text">次のコマンドを入力し、出力を調べて、 node3 と node4 が相互のストレージにアクセスできることを確認します。</block>
  <block id="00c012d0f7127c31c470ac3c1c76aa44" category="list-text">次のコマンドを入力し、出力を調べて、 node3 と node4 がクラスタ内の他のノードによってホーム所有されているデータ LIF を所有していないことを確認します。</block>
  <block id="2a6d96821a4ce6866da866e48a1ece2a" category="paragraph">node3 または node4 に、クラスタ内の他のノードがホーム所有するデータ LIF がある場合は、「 network interface revert 」コマンドを使用して、データ LIF をホーム所有者にリバートします。</block>
  <block id="f67d0a54b752ca4f669625b9f2eba648" category="list-text">ノード 3 がノード 1 のアグリゲートを所有していること、およびノード 4 がノード 2 のアグリゲートを所有していることを確認します。</block>
  <block id="b7836a7a1972d5f8803e2f44bd3cb658" category="paragraph">「 storage aggregate show-owner-name &lt;node3 &gt; 'storage aggregate show-owner-name &lt;node4 &gt; 」という形式で表示されます</block>
  <block id="862da4c0b3b19ba62c050373943cd909" category="list-text">オフラインになっているボリュームがないかを確認します。</block>
  <block id="4655a1857691d25ac0c12a710dad5454" category="paragraph">volume show -node &lt;node3 &gt; -state offline `volume show -node &lt;node4 &gt; -state offline`</block>
  <block id="183048ad5f29710efbac355627777865" category="inline-link-macro">手順 19 （ d ）</block>
  <block id="be3ae65f9ab44c1be767b14ddc884bfc" category="list-text">オフラインのボリュームがある場合は、で取得したオフラインボリュームのリストと比較します <block ref="f226f1513a3b2dc8065e1f4d6987a247" category="inline-link-macro-rx"></block> で、各ボリュームに対して次のコマンドを 1 回入力して、アップグレードの準備をし、必要に応じてオフラインのボリュームをオンラインにします。</block>
  <block id="5d41e09cfbf05ac79dc026cd1e32857c" category="list-text">ノードごとに次のコマンドを入力して、新しいノード用の新しいライセンスをインストールします。</block>
  <block id="8502756d136a7fbd63f0576ce096751b" category="paragraph">'system license add - license-code &lt;license_code, license_code, license_code...&gt;`</block>
  <block id="65d93c0f2eae68c69877f67ce3781996" category="paragraph">license-code パラメータには、アルファベットの文字キーをアルファベットの大文字 28 個まで入力できます。ライセンスは一度に 1 つずつ追加することも、ライセンスキーごとにカンマで区切って複数ずつ追加することもできます。</block>
  <block id="1f6c8829a415beddc4ce10181f20094a" category="inline-link-macro">手順 16</block>
  <block id="379a68b9bd0f0131eae2f5bd87fa4bcc" category="list-text">構成に NetApp Storage Encryption （ NSE ）を使用していた場合は、「 kmip.init.maxwait` 」変数を「 off 」にして「 etenv bootarg storageencryption.support 」コマンドを「 true 」に設定します（を参照） <block ref="c34adc28d35ee24325c874eba95a8786" category="inline-link-macro-rx"></block> of _ Install and boot node3 _ ）では、変数をリセットする必要があります。 `set diag ； systemshell -node &lt;node-name&gt; command sudo kenv -u -p kmip.init.maxwait`</block>
  <block id="c13dda3e4975b286bfb62f3d9aa8cfa5" category="list-text">元のノードから古いライセンスをすべて削除するには、次のいずれかのコマンドを入力します。</block>
  <block id="a0cc12382dcdc36e42046d83b6c7e109" category="paragraph">'system license clean-up-unused -expired 'system license delete -serial-number &lt;Node_serial_number&gt; -package &lt;license_package&gt; です</block>
  <block id="f1645d1878d86f7024812da747846642" category="list-text">期限切れのライセンスをすべて削除するには、次のように入力します</block>
  <block id="fd6db757e3a6fb12f04139c8f48aab93" category="list-text">未使用のライセンスをすべて削除するには、次のように入力し</block>
  <block id="0fae8f5a8ab68238375deb31e474111d" category="list-text">クラスタから特定のライセンスを削除するには、ノードで次のコマンドを入力します。</block>
  <block id="a2f728dde7d316431fdf17126688b93c" category="paragraph">「 system license delete -serial-number &lt;node1 -serial-number&gt; -package * 「 system license delete -serial-number &lt;node2 -serial-number&gt; -package *</block>
  <block id="d1ee77d0c558bd478284637572157e43" category="list-text">次のコマンドを入力し、出力を調べて、ライセンスが正しくインストールされていることを確認します。</block>
  <block id="7092e15f19aa79a4b642157f15a4bcf6" category="inline-link-macro">手順 30</block>
  <block id="332e0dd58dd105f49bb8b855cc6e08e6" category="paragraph">でキャプチャした出力と比較することを推奨します <block ref="aa31de159a7a7903f22336e05c00b63e" category="inline-link-macro-rx"></block> で、ノードをアップグレードする準備をしています。</block>
  <block id="65816664fef74fe3f15406730c518f76" category="list-text">両方のノードで次のコマンドを実行して、 SP を設定します。</block>
  <block id="948b0596f650b1efb4aebbdb1ff268fe" category="paragraph">「 system service-processor network modify -node &lt;node-name&gt; 」のように指定します</block>
  <block id="3d39e72120bdfa8b32eb4183896ece25" category="paragraph">に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> SP の詳細については ' システム管理リファレンスにリンクし '_System ONTAP 9 コマンド：マニュアルページリファレンスにリンクし 'system service-processor network modify コマンドの詳細については ' を参照してください</block>
  <block id="8bd516232448307a629aa2ad8fe64430" category="list-text">次のコマンドを入力して、 advanced 権限レベルに切り替えます。</block>
  <block id="b67e0c8ad4d089069e3751204ab49a05" category="paragraph">「 storage failover modify -node &lt;node-name&gt; -CIFS-NDO -duration default | medium | low 」</block>
  <block id="ee16bb116206ed27e74abc4888edf806" category="list-text">処理の 50 ～ 75 パーセントが 4 KB 以下のワークロードがある場合は、「 m edium 」と入力します。</block>
  <block id="93b838bedea5b323f56d1fb4aec030fe" category="list-text">システムのワークロードが 75% ～ 100% の場合は 'low' と入力します</block>
  <block id="7b6a4090ff6553e6b643348d522b6560" category="list-text">次のコマンドを入力して、 admin レベルに戻ります。</block>
  <block id="52eb8cb5708af7396828abc72517413d" category="list-text">新しいノードにスイッチレスクラスタをセットアップする場合は、に進みます <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ネットワークサポートサイトへのリンクをクリックし、 2 ノードスイッチレスクラスタへの移行の手順に従ってください。</block>
  <block id="a98b8d21a1cabe96a7d765976c724ace" category="paragraph">ノード 3 とノード 4 でストレージ暗号化が有効になっている場合は、の手順を実行します <block ref="94c0a6a874300fcf012d00a23a1b673f" category="inline-link-macro-rx"></block>。それ以外の場合は、の手順を実行します <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="fe3a7dc1b68f02ec33d1b3d2d4f9bc56" category="list-text">「 system node hardware unified-connect show 」コマンドと「 ucadmin show 」コマンドの出力を調べ、 UTA / UTA2 ポートに希望するパーソナリティが設定されているかどうかを確認します。</block>
  <block id="e48bdf2afbb963c9c495bf4f571895e3" category="cell">に進みます <block ref="ffd96dfebf67595a1e4a6d625bee7496" category="inline-xref-macro-rx"></block>。</block>
  <block id="fa74cc012fef0feff6e924f8039749e1" category="cell">手順 5 から 12 を省略して、に進みます <block ref="ff1d63240cee2bdc1933860b7f07a8df" category="inline-xref-macro-rx"></block>。</block>
  <block id="e6d6e537e4b0f2bf8e825c2e64f00645" category="list-text">[[man_check_4_Step5]] 次のいずれかの操作を行います。</block>
  <block id="37633c05750191dfa133d84e3b55c00e" category="cell">ストレージディスクがあり、 Data ONTAP 8.3 を実行している</block>
  <block id="8445b1a045f75f905d430fc7d5f5e71c" category="cell">node4 をブートし、メンテナンスモードに入ります。「 boot_ontap maint 」と入力します</block>
  <block id="6769a0fd294ca78345db234c229b8959" category="cell">に進みます <block ref="2c3bbf8d53e9379a42c94980adfa90a7" category="inline-xref-macro-rx"></block>。すでにメンテナンスモードになっている必要があります。</block>
  <block id="c61e8c3c627841f886b0a3031439d4ce" category="list-text">[[man_check_4_Step6]] 次のいずれかの操作を行います。</block>
  <block id="6515c49355bf1419526d1fd9c737ec8c" category="cell">UTA / UTA2A カードのポート</block>
  <block id="eaff3678ecd6d545f7ac3a0842914aa5" category="cell">に進みます <block ref="f4d4591f64bb8abe68f0b67355d1fe59" category="inline-xref-macro-rx"></block>。</block>
  <block id="4cb16c5207497dcfcaffd56afa4f1814" category="cell">手順 7 を省略して、に進みます <block ref="d63e67436ac7351debc07c052c32757d" category="inline-xref-macro-rx"></block>。</block>
  <block id="117986e3a34af461f5f6e6bb88045f84" category="list-text">[[man_check_4_Step7] アダプタがイニシエータモードの場合、 UTA / UTA2 ポートがオンラインの場合は、 UTA / UTA2 ポートをオフラインにします。</block>
  <block id="286e43e6e6a24f0c4b7567121cef9f66" category="list-text">[[man_check_4_Step8] 現在の設定が目的の使用方法と一致しない場合は、次のコマンドを入力して必要に応じて設定を変更します。</block>
  <block id="36408e09de8feb146f54fe1e158d953d" category="list-text">「 -m' 」はパーソナリティ・モードである FC または 10 GbE UTA です。</block>
  <block id="2b96adc86d11d2a69afb2ec82da4f190" category="admonition">テープドライブおよび FlexArray 仮想化システムには、 FC イニシエータを使用する必要があります。SAN クライアントには FC ターゲットを使用する必要があります。</block>
  <block id="0e0addb82f30f2aa03c68b146f054849" category="list-text">次のコマンドを入力し、出力を確認して、設定を確認します。</block>
  <block id="315359e3c6323d4eda359054319c0815" category="list-text">次のいずれかを実行します。</block>
  <block id="893a166b79c7215fddb938b9ba769f94" category="cell">は、 V シリーズシステムまたは FlexArray 仮想化ソフトウェアを搭載したストレージアレイに接続され、 Data ONTAP 8.3 を実行しているシステムです</block>
  <block id="5ac574a53621b9436797f566cbab7941" category="cell">保守モードで再起動します（「 boot_ontap maint 」）</block>
  <block id="5dd9d9d622ac506af56607785cc61574" category="cell">次のコマンドを入力します。 ucadmin show</block>
  <block id="9b035cae403b89af2a989a976daad295" category="paragraph">次の例の出力では ' アダプタ「 1b 」の FC4 タイプがイニシエータに変更されており ' アダプタ「 2a 」と「 2b 」のモードが CNA に変更されています</block>
  <block id="f8cd2564c015235fc797e229583e1023" category="list-text">[[man_check_4_Step13]] ポートをケーブル接続します。</block>
  <block id="439c508e4033b6c215e1a9262db35444" category="cell">に進みます <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="dbe83a6e258bdc99b8051f4d3cf01d67" category="cell">section_Install および boot node4 _ に戻り、のセクションを再開します <block ref="04be07c8b8cd85d6b2140c2bfb8113b6" category="inline-link-macro-rx"></block>。</block>
  <block id="5d59517a984e405c3da4037ff1d7d898" category="paragraph">次の状況で、アグリゲートが適切に再配置されず、ノード 1 がノード 3 ではなくホームノードになっている可能性があります。</block>
  <block id="0aedbbe9928008ef20e9f0f31cd1ec93" category="list-text">ステージ 3 で、アグリゲートが node2 から node3 に再配置されている場合。再配置する一部のアグリゲートのホームノードが node1 に含まれている。たとえば、このようなアグリゲートのことを aggr_node_A_1 と呼びます。ステージ 3 で aggr_node_A_1 の再配置が失敗し、強制的に再配置を実行できない場合、アグリゲートは node2 で残ります。</block>
  <block id="94db9769a66bbb4255b02f44f30a1506" category="list-text">ステージ 4 のあとで、 node2 を node4 に置き換える場合。node2 を交換すると、 aggr_node_A_1 が、 node3 ではなく node4 にあるホームノードとしてオンラインになります。</block>
  <block id="ba508067c72d91e8f63afe491acaa462" category="paragraph">ストレージフェイルオーバーを有効にしたあとに、ステージ 6 に続けて誤った所有権の問題を修正するには、次の手順を実行します。</block>
  <block id="c76bc65b459278a8c28b143bd2794d8c" category="list-text">次のコマンドを入力して、アグリゲートのリストを表示します。</block>
  <block id="d088dd9060f2818253fb3709d9939a18" category="paragraph">正しく再配置されていないアグリゲートを特定するには、セクションで取得した node1 のホーム所有者を含むアグリゲートのリストを参照してください <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> コマンドの出力と比較してください。</block>
  <block id="a3249f2582556adc14fc6268c4136b8c" category="list-text">手順 1 の出力と、セクションで確認した node1 用の出力を比較します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="6351a4102dcb6a482f6002fe35685d71" category="list-text">[[auto_aggr_relocate_fail_Step3] ノード 4 の背後にあるアグリゲートの再配置：</block>
  <block id="d104a5e5375beeea24cb6ac3c7c3d89f" category="paragraph">「 storage aggregate relocation start -node &lt;node4 &gt; -aggr &lt;aggr_node_A_1 &gt; -destination &lt;node3 &gt;"</block>
  <block id="0bc9088bdd248bcc7cf35ab01ea701a4" category="list-text">node3 がアグリゲートのホームの所有者になったことを確認します。</block>
  <block id="65f247827acd19f6f7debcc6880344b0" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="b826fa5e08f60e3e6100c14200617b18" category="inline-xref-macro-rx"></block>。</block>
  <block id="a5c607fe9749b0c2b2f2e3b910604ce4" category="list-text">次のコマンドを入力し、出力を確認します。</block>
  <block id="56b7bc3034bef19019ebfa88f6cac964" category="paragraph">「 storage aggregate relocation start 」、「 override-vetoes 」、および「 override-vetoes destination-checks 」オプションの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="de10ab1a09136633c0a0d61641d1973a" category="list-text">[man_aggr_ffail _step1] 次のコマンドを入力して、アグリゲートのリストを表示します。</block>
  <block id="d741a7f5a9101301995b152ddb32e5b0" category="list-text">[[step2] の出力を比較します <block ref="fd60626f79429d907548fd26d9ef209a" category="inline-xref-macro-rx"></block> セクションで node1 用に取得した出力を確認します <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block> 再配置されていないアグリゲートがあることを確認します。</block>
  <block id="51cad6c5dffb7d53bbb0121b4ba9d369" category="list-text">[man_aggr_fil_Step3] ノード 4 の背後にあるアグリゲートの再配置を行います。</block>
  <block id="f51f0d388b73026dbf95e6d91f6386c1" category="list-text">次のコマンドを入力して、 node3 がアグリゲートのホームの所有者になっていることを確認します。</block>
  <block id="5bf0f8993606c9f18dbf04cc257eab62" category="paragraph">ノード 3 をホーム所有者としないアグリゲートは、の同じ再配置コマンドを使用してノード 3 に再配置できます <block ref="d5a5e127c26ff67c138bce9a8ae2c1fa" category="inline-xref-macro-rx"></block>。</block>
  <block id="22cbc441beb824687fff4489b675b3e7" category="paragraph">ノード 2 を撤去するには、ノード 2 を適切にシャットダウンし、ラックまたはシャーシから取り外す必要があります。クラスタが SAN 環境にある場合は、 SAN LIF も削除する必要があります。</block>
  <block id="ac9d5901ac51a7a9e98d7f8c6c0740f1" category="cell">クラスタの種類</block>
  <block id="318bbb9db21483c1e16d2e2dbe7f1651" category="cell">2 ノードクラスタ</block>
  <block id="34d4031d3d37d8d9b80a5f9b450de553" category="cell">に進みます <block ref="1cb6f5a9f7eef3599c4443318664abfe" category="inline-xref-macro-rx"></block>。</block>
  <block id="1ec03101c59723f4e07d47729c2bb2c0" category="cell">3 つ以上のノードで構成されるクラスタ</block>
  <block id="5e674106f615dae34230d16b22371cb8" category="cell">に進みます <block ref="0bbd9dc76625f42ec6de8739e60cb44f" category="inline-xref-macro-rx"></block>。</block>
  <block id="b2af6e76142ed067163cd5edf51978b0" category="list-text">[[man_リタイヤ _2_Step2] 両方のノードで次のコマンドを入力して、 advanced 権限レベルにアクセスします。</block>
  <block id="1626aa8f9ba900c076affceeaaad8930" category="list-text">次のコマンドを入力し、出力を確認して、クラスタ HA が無効になっていることを確認します。</block>
  <block id="485e8bd9380904feaa09d87fa46616ff" category="paragraph">cluster ha show</block>
  <block id="35df860936da8d9b2d5477ee7413fdee" category="list-text">node2 にイプシロンが設定されているかどうかを確認するには、次のコマンドを入力して出力を調べます。</block>
  <block id="7d25068d39532ede875f6fae939c62aa" category="paragraph">次の例では、 node2 にイプシロンが設定されています。</block>
  <block id="7b8424ae8ebc04e308b8d348d8d07edf" category="list-text">node2 にイプシロンが設定されている場合は、ノードにイプシロンを「 false 」として設定して、ノードを node3 に転送できるようにします。</block>
  <block id="932227bf3dc2956702a635e8f4cd18a1" category="paragraph">cluster modify -node &lt;node2 &gt; -epsilon false</block>
  <block id="9b3ca02a7473e1db3c0c57693a01aabe" category="list-text">node3 の epsilon true とマークを付けて、イプシロンを node3 に移動します。</block>
  <block id="4c3c404ced021bba5536c6b573cad272" category="paragraph">cluster modify -node &lt;node3 &gt; -epsilon true</block>
  <block id="02447279c68e4d1b8321c16d451e2f25" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認します。</block>
  <block id="0bd1c8991d4969dac07a0c2f2dde50b5" category="paragraph">network options switchless-cluster show</block>
  <block id="0906da04c2f71c2ff6e8d8aa1a0b62e6" category="paragraph">このコマンドの値は、システムの物理状態と一致している必要があります。</block>
  <block id="b7a9c811aab8e6da8894f06c47eec709" category="list-text">[[man_detup_2_Step9] 管理者レベルに戻ります。</block>
  <block id="bac8149e88ecf5bf2c4de5cf6b1ac1b2" category="list-text">いずれかのコントローラで次のコマンドを入力して、 node2 を停止します。 'system node halt -node &lt;node2&gt;]</block>
  <block id="befba560e8eaef2f66cac914b95edc61" category="list-text">ノード 2 が完全にシャットダウンしたら、シャーシまたはラックからノードを取り外します。アップグレードの完了後に、 node2 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="efc5de9a5891b52ce2b37c9ed2854d5f" category="paragraph">ノード 1 をシャットダウンして撤去するには、そのクラスタネットワークポート、管理ポート、および FC ポートとその NVRAM システム ID に関する情報を事前に記録しておく必要があります。この情報は、ノード 1 をノード 3 にマッピングし、ディスクを再割り当てするときに、手順で必要になります。</block>
  <block id="b01288321618ebc4fb03d07a48ec080c" category="list-text">[[step1] 次のコマンドを入力し、その出力を取得します。</block>
  <block id="a9f729911b0af57b8d1d08f2584625b6" category="paragraph">「 network route show 」と表示されます</block>
  <block id="db55c697ce008329c5b7d6628a252009" category="list-text">次のコマンドを入力し、出力をキャプチャします。</block>
  <block id="743c43b069d893a88b2732926f57f5db" category="paragraph">vserver services name-service dns show</block>
  <block id="e06877d8614b07524debe1149bac1e78" category="list-text">[man_record_node1_step3] どちらかのコントローラで次のコマンドを入力して、ノード管理ポートとクラスタネットワークを特定します。</block>
  <block id="ac1f4efe2cbbc63bd8c0842b84e1d3c8" category="paragraph">network interface show -curr-node &lt;node1&gt; -role cluster 、 intercluster 、 node-mgmt 、 cluster-mgmt</block>
  <block id="2f163f9a8fcb45472b7c0a84f088f4de" category="paragraph">次の例に示すように、クラスタ内のノードについて、クラスタ LIF 、クラスタ間 LIF 、ノード管理 LIF 、およびクラスタ管理 LIF が表示されます。</block>
  <block id="5feb72299c708ed8b5e527e5963476fe" category="admonition">システムにクラスタ間 LIF がない可能性があります。</block>
  <block id="8fac25219c50f2cc9f32de6a06dd0afa" category="list-text">のコマンドの出力に情報を記録します <block ref="63c89ae17921f4702dc8719a6b0480a8" category="inline-xref-macro-rx"></block> をクリックしてください <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="d852fb2583585e10c3885982eaf29670" category="paragraph">出力情報は、新しいコントローラポートを古いコントローラポートにマッピングするために必要です。</block>
  <block id="4dea80d6ab207bc372820b8a74a583df" category="list-text">node1 で次のコマンドを入力します。</block>
  <block id="6516511e2cda8e73f01c2c8b9a2373b2" category="paragraph">network port show -node &lt;node1&gt; -type physical`</block>
  <block id="c98e23a6f059dd6276dbffb11af4d53d" category="paragraph">次の例に示すように、ノードの物理ポートが表示されます。</block>
  <block id="e39f84c1a169d8d90af9c95f44865bc0" category="list-text">ポートとそのブロードキャストドメインを記録します。</block>
  <block id="00e8b0b0df56090152aa5c1cb1bd4a45" category="paragraph">ブロードキャストドメインは、あとで手順の新しいコントローラの新しいポートにマッピングする必要があります。</block>
  <block id="5a88073443b3ca14db2fbd6903a55330" category="paragraph">「 network fcp adapter show -node &lt;node1&gt; 」のように表示されます</block>
  <block id="554c196eb9c5953b024f2cc2c07ba455" category="paragraph">次の例に示すように、ノードの FC ポートが表示されます。</block>
  <block id="f33b448fa0bb738f614e66795ee372d4" category="list-text">ポートを記録します。</block>
  <block id="183e98aa2a84c4dee16223d4c260f2ce" category="paragraph">出力情報は、手順の後半で新しいコントローラの新しい FC ポートをマッピングするために必要です。</block>
  <block id="5d3cbeccba5dac0370b9c40f95d5d063" category="list-text">まだ設定していない場合は、次のコマンドを入力して、ノード 1 でインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="f6f8a9635aff4aef3e52d34ba925926b" category="paragraph">このセクションの情報を使用します <block ref="3b6c063a8efbc88c969c7838f0611434" category="inline-link-macro-rx"></block>。</block>
  <block id="61a6d655671eebbd633c1d84fae09e17" category="cell">状況</block>
  <block id="8c197b9ca5649983d88c28532ed4d151" category="inline-link-macro">アップグレードのためのノードを準備</block>
  <block id="43ac883a14249b98283d8e22e6127ba8" category="cell">セクションに NVRAM システム ID 番号を記録しました <block ref="7eb7fb0c5f668aa416ee9ca8030df058" category="inline-link-macro-rx"></block>。</block>
  <block id="722b28462ad8b131d5cfd84a2c2f881a" category="cell">次のセクションに進みます。 <block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block>。</block>
  <block id="105886469ee101bc5425140d42df484b" category="cell">セクションに NVRAM システム ID 番号が記録されていませんでした <block ref="7eb7fb0c5f668aa416ee9ca8030df058" category="inline-link-macro-rx"></block></block>
  <block id="1c5349057e46140156bc0d263443383c" category="cell">- 完了しました <block ref="91d37fb83183cdc5da036c812dec4eb7" category="inline-xref-macro-rx"></block> および <block ref="2a3037c203afea4262e2cc05eb0708b3" category="inline-xref-macro-rx"></block> に進みます <block ref="830cfeba72054433fc0dcccc19f6d055" category="inline-link-macro-rx"></block>。</block>
  <block id="866ca6e46d7456a7c276afd3eb54db5d" category="list-text">[[man_record_node1_step11]] どちらかのコントローラで次のコマンドを入力します。</block>
  <block id="a68d4121a0f2927e059683a1133fbbe1" category="paragraph">「 system node show -instance -node &lt;node1&gt; 」のように表示されます</block>
  <block id="9bcd562ef44a8e11e5fd0e0492ebe6c4" category="paragraph">次の例に示すように、 node1 に関する情報が表示されます。</block>
  <block id="5b9519c4c2b57166c18827dfa9f50f7c" category="list-text">[[man_record_node1_step12]] セクションで使用する NVRAM システム ID 番号を記録します <block ref="b27daeccf5fbd8a2e88a3636ee615b74" category="inline-link-macro-rx"></block>。</block>
  <block id="0798efe32af9ed8a849deddb03ef31cf" category="paragraph">アグリゲートを node2 から node3 に再配置したら、 node2 によって所有されている NAS データ LIF を node3 に移動する必要があります。</block>
  <block id="71f0ff9a99872664cb504bc17756a9a7" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 3 からノード 4 に LIF を移動し、ノード 4 がオンラインになったあとで、 LIF が正常に機能しており、適切なポートに配置されていることを確認する必要があります。</block>
  <block id="e2400a5784b6e69a68f8240fc8be98e0" category="list-text">[[step1] ノードごとに次のコマンドを入力し、出力をキャプチャして、 node2 が所有するすべての NAS データ LIF を一覧表示します。</block>
  <block id="83dae04d05ca0d2bbd524535d62e877e" category="paragraph">'network interface show -data-protocol nfs|cifs -home-node &lt;node2 &gt;`</block>
  <block id="1dfd4aeb9eb2d67718bb179a87daccb5" category="paragraph">次の例は、 node2 のコマンドの出力を示しています。</block>
  <block id="aa0c21cc929471b59f51bf7561edb3b2" category="cell">ノード 2 の条件</block>
  <block id="141b9f4f51c5a1d44c0555e2cab43f56" category="cell">インターフェイスグループまたは VLAN が設定されている</block>
  <block id="0cce85d021e13ea0d84461759b2a3b08" category="cell">に進みます <block ref="d5cd2572a667e81ae2cb0b0539de3785" category="inline-xref-macro-rx"></block>。</block>
  <block id="e47ea6851b10e922828b9e5bacc36c92" category="cell">インターフェイスグループまたは VLAN が設定されていない</block>
  <block id="d7f8ef927cf7428c7625c268a1c951ef" category="cell">手順 3 を省略して、に進みます <block ref="2dd22df3b6260ee6ac1883b31af6d999" category="inline-xref-macro-rx"></block>。</block>
  <block id="6d3379271564572a595ab2fbc869131a" category="list-text">[man_move_lif_2_3_step3] 次の手順を実行して、 node2 のインターフェイスグループおよび VLAN でホストされている NAS データ LIF を移行します。</block>
  <block id="daaee2c9342de97c2c423f905e0ea71f" category="list-text">[[man_move_lif_2_3_substpa]] ノード 2 のインターフェイスグループでホストされているすべてのデータ LIF を、同じネットワーク上の LIF をホストできるノード 3 のポートに移行するには、各 LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="048f81150ce15262b658b7de15b84690" category="paragraph">` network interface migrate -vserver &lt;Vserver_name&gt; -lif &lt;lif_name&gt; -destination-node &lt;node3 &gt; – destination-port &lt;netport | ifgrp&gt; 」の形式で指定します</block>
  <block id="4fd830a8ef7653e7cc91a40076c34365" category="list-text">LIF のホームポートとホームノードを変更します <block ref="6c89c517e670ac026543379bd9a9844e" category="inline-xref-macro-rx"></block> 各ノードについて次のコマンドを 1 回入力して、 LIF を現在ホストしているポートとノードに接続します。</block>
  <block id="657b6a55549088546a48050df59aeff1" category="paragraph">` network interface modify -vserver &lt;Vserver_name&gt; -lif &lt;lif_name&gt; -home-node &lt;node3 &gt; -home-port &lt;netport | ifgrp&gt; 」の形式で指定します</block>
  <block id="274dd4ace55dc7cc39f1a5eb3afbcbf1" category="list-text">[man_move_lif_2_3_substpc ]] node2 上の VLAN でホストされている LIF を、 node2 上のポートにノード 3 上のポートに移行します。その際、各 LIF に対して 1 回、次のコマンドを入力して、 VLAN と同じネットワーク上の LIF をホストできます。</block>
  <block id="107232f6e653a89ac23c99590a7ea101" category="list-text">LIF のホームポートとホームノードを変更します <block ref="e5ef0b90c6e2aafbe1f927b2cb6685c9" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="d113d66e692935f5a59a62900427b861" category="list-text">[man_move_lif_2_3_step4] 次のいずれかの操作を実行します</block>
  <block id="20cdfa79ed0499babc80c9a3f7d7297c" category="cell">- 完了しました <block ref="2da0d67c04c83434137e9b301dfd86dd" category="inline-xref-macro-rx"></block> から <block ref="12556117786215462f4f983b89f009f9" category="inline-xref-macro-rx"></block>。</block>
  <block id="44f77dbcf99acc01b3bf655a89bfcc5e" category="cell">手順 5 から 8 をスキップし、完了します <block ref="b80e3f5f2f06a1383cb71c69b52c021e" category="inline-xref-macro-rx"></block>。</block>
  <block id="7f84238811a0744aed44244f31a3bd53" category="cell">NAS と SAN の両方</block>
  <block id="da070fa74bde99b92534bf987c65a7e1" category="cell">- 完了しました <block ref="2da0d67c04c83434137e9b301dfd86dd" category="inline-xref-macro-rx"></block> から <block ref="ccd0910cd159fbfd70d254145a6c4d20" category="inline-xref-macro-rx"></block>。</block>
  <block id="1b8095077175bc0e7f7bb5fbb73e6504" category="list-text">[[man_move_lif_2_3_step5] プラットフォームで同じでないデータポートがある場合は、ブロードキャストドメインにポートを追加します。</block>
  <block id="e8db799447d1b0c26463d2838519203a" category="paragraph">「 network port broadcast-domain add-ports -ipspace &lt;IPspace_name&gt; -broadcast-domain mgmt -ports &lt;node:port&gt;` 」のように指定します</block>
  <block id="2f563bb65059883cdd406846273f0ca4" category="paragraph">次の例は、ノード「 6280 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」を IPspace 「 Default 」のブロードキャストドメイン「 mgmt 」に追加します。</block>
  <block id="1062bb6c92253a8c9b640ee692419b26" category="list-text">[[step6] それぞれの LIF に対して次のコマンドを 1 回入力して、各 NAS データ LIF を node3 に移行します。</block>
  <block id="cf94c0385b5c2ed33b1d57956c4697d4" category="paragraph">` network interface migrate -vserver &lt;Vserver_name&gt; -lif &lt;lif_name&gt; -destination-node &lt;node3 &gt; -destination-port &lt;netport | ifgrp&gt; 」の形式で指定します</block>
  <block id="0049a5f9500f1de5ca8ef0f389c62f72" category="list-text">[[step7] 両方のノードで次のコマンドを入力し、 NAS LIF が正しいポートに移動されていること、および LIF のステータスが up になっていることを確認します。</block>
  <block id="74736b1b1199beaea5593b316d8e4625" category="paragraph">network interface show -curr-node &lt;node3 &gt; -data-protocol cifs | nfs ’</block>
  <block id="6f72830bc34189a08fe7627d74d89f3b" category="list-text">[[man_move_lif_2_3_step8] いずれかの LIF が停止している場合は、各 LIF に対して 1 回次のコマンドを入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="5ebc0a94cbbcb381cb1a98cffc3adac0" category="paragraph">「 network interface modify -vserver &lt;Vserver_name&gt; -lif &lt;LIF_NAME&gt; -status-admin up 」という形式になります</block>
  <block id="ba45f9f836b05d2d37a836a9ed696d6f" category="list-text">[man_move_lif_2_3_step9] インターフェイスグループまたは VLAN が設定されている場合は、次の手順を実行します。</block>
  <block id="8e2087071d353c6f56da3d27b7a84dfc" category="list-text">インターフェイスグループから VLAN を削除します。</block>
  <block id="74189835f85e9e3f27da7d0ea64f8c56" category="paragraph">「 network port vlan delete -node &lt;node_name &gt; -port &lt;ifgrp&gt; -vlan-id &lt;vlan_ID&gt; 」のように指定します</block>
  <block id="ef57ddf1d14f7687cdf12a4b023fe0ba" category="list-text">次のコマンドを入力し、その出力を調べて、ノードにインターフェイスグループが設定されているかどうかを確認します。</block>
  <block id="d2cddb90501569c80df4ec0677bd9046" category="paragraph">「 network port ifgrp show -node &lt;node_name &gt; -ifgrp &lt;ifgrp_name&gt; -instance 」の形式で指定します</block>
  <block id="32c2f2dc33f1ff3a5d165af69042d610" category="paragraph">次の例に示すように、ノードのインターフェイスグループ情報が表示されます。</block>
  <block id="c02532d4249a0cf1658188c0c95a7129" category="list-text">ノードにインターフェイスグループが設定されている場合は、インターフェイスグループの名前とグループに割り当てられているポートを記録し、各ポートについて次のコマンドを 1 回入力してポートを削除します。</block>
  <block id="a1858c4eb2fed033fc49b2a7a2049d7b" category="paragraph">「 network port ifgrp remove-port -node &lt;node_name &gt; -ifgrp &lt;ifgrp_name&gt; -port &lt;port_name&gt; 」の形式で指定します</block>
  <block id="4de30509db28d6f26dbb6eb1fa0448e9" category="paragraph">ノード 2 をシャットダウンして撤去する前に、クラスタネットワーク、管理、および FC ポートとその NVRAM システム ID に関する情報を記録しておく必要があります。この情報は、 node2 を node4 にマッピングしてディスクを再割り当てするときに、手順で必要となります。</block>
  <block id="06482362cad7119c97decfadddef47d1" category="list-text">ノード 2 のクラスタネットワークポート、ノード管理ポート、クラスタ間ポート、およびクラスタ管理ポートを特定します。</block>
  <block id="1fcb48e8a1ae19116b9bf2f39685db30" category="paragraph">network interface show -curr-node &lt;node_name &gt; -role cluster 、 intercluster 、 nodemmgmt 、 cluster-mgmt</block>
  <block id="9581ef2fce7ca5bef124feac72dd7c62" category="paragraph">次の例に示すように、クラスタ内のそのノードと他のノードの LIF が表示されます。</block>
  <block id="66df24136907c6cba70f63950b15a0d8" category="admonition">システムにクラスタ間 LIF がない可能性があります。クラスタ管理 LIF は、ノードペアの一方のノードにしか配置しません。の出力例にクラスタ管理 LIF が表示されています <block ref="4d0816bae74d8d665981da69c5c8d7a9" category="inline-link-macro-rx"></block> インレコード node1 のポート情報 _ 。</block>
  <block id="db388cc11af248e636d23a7634f79da1" category="list-text">セクションで使用する情報を出力に記録します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="b226d44baee1fdcf5f175befc4240f79" category="list-text">node2 の物理ポートを特定します。</block>
  <block id="0ce26da6eb15f1794580d79135daecea" category="paragraph">network port show -node &lt;node_name &gt; -type physical ` +</block>
  <block id="3aba4579adf045f7017d47291de9ae6e" category="paragraph">`node_name は ' 移行するノードです</block>
  <block id="a36b8ceea3403515d94e1d9ad1d33833" category="paragraph">次の例に示すように、 node2 の物理ポートが表示されます。</block>
  <block id="1a494d33f95411ce2d7f871e87234bb6" category="paragraph">ブロードキャストドメインは、あとで手順の新しいコントローラのポートにマッピングする必要があります。</block>
  <block id="36d2ce7941b2c78c3d67d83e5bab95ab" category="list-text">node2 の FC ポートを確認します。</block>
  <block id="922cfc273cc764471719b8a70b2bd795" category="paragraph">「 network fcp adapter show 」のように表示されます</block>
  <block id="e2ce1c0ee0599997916e05613833e82e" category="paragraph">次の例に示すように、 node2 の FC ポートが表示されます。</block>
  <block id="f30296e85c9b7a573f431b89a15b6b93" category="list-text">まだ設定していない場合は、 node2 にインターフェイスグループまたは VLAN が設定されているかどうかを確認します。</block>
  <block id="9e650495d6414abbc47ea05fdc36dd7e" category="paragraph">ifgrp show`</block>
  <block id="35803428da21a4a214ff09f1442e2f58" category="paragraph">「 vlan show 」</block>
  <block id="15fb68f8a892a3ed6a57c8b5eca53ec5" category="paragraph">このセクションの情報を使用します <block ref="fface1ac702bde6d72ceb6e55eb8b2b6" category="inline-link-macro-rx"></block>。</block>
  <block id="1f7052fd85a8ced9cd9c65f079fcb154" category="cell">に記録された NVRAM システム ID 番号 <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="65e4801fe9cb3563a071b657463a3c1c" category="cell">に進みます <block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block>。</block>
  <block id="30183fbd349bcd94fdabd371e0fdc8d9" category="cell">NVRAM システムの ID 番号をに記録しませんでした <block ref="cd8ad1809865824065fe011b80800cd6" category="inline-link-macro-rx"></block></block>
  <block id="b31b744fd8c5cbe34c282a8e3311866b" category="cell">- 完了しました <block ref="3ef612fafd35c4ea98dad97a133c5f3f" category="inline-xref-macro-rx"></block> および <block ref="a3461a8cfeac3856b6bf21e7388f2534" category="inline-xref-macro-rx"></block> 次に、次のセクションに進みます。 <block ref="610cb2d6e87c5e838ceef8f48f57b082" category="inline-link-macro-rx"></block>。</block>
  <block id="435d35070ba8894d910a50e35db1d4e2" category="list-text">[man_record_2_step9] ノード 2 の属性を表示します。</block>
  <block id="5d34eef64c7b53994a7dde374d44b94b" category="paragraph">「 system node show -instance -node node2 」</block>
  <block id="bc110b3ccc057d2275d5e8ae87f525b0" category="list-text">[man_record_2_step10] セクションで使用する NVRAM システム ID を記録します <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block>。</block>
  <block id="0d5eded42a5e8cbfa58553f5dd4cd263" category="paragraph">node2 のルート以外のアグリゲートを node3 に再配置したら、そのアグリゲートを node3 から node4 に再配置する必要があります。</block>
  <block id="a6bef5c01b3429b867cf90c4a3de3fac" category="list-text">[[man_relocate_3_4_Step1] いずれかのコントローラで次のコマンドを入力し、出力を調べて再配置するルート以外のアグリゲートを特定します。</block>
  <block id="086b43d0e04175cf8790abef24a23665" category="paragraph">「 storage aggregate show-owner-name &lt;node3 &gt; -home-id &lt;node2 _system_id&gt; 」という名前になります</block>
  <block id="d7a08960a9315fad49e6564d33d4cb9c" category="list-text">次の手順を実行して、アグリゲートを再配置します。</block>
  <block id="8e8511da8932baf12f2a23e74d02e1c7" category="list-text">いずれかのノードで次のコマンドを入力して、 advanced 権限レベルにアクセスします。</block>
  <block id="f30ab70d9dfcf364c12d5f98b0968ba7" category="paragraph">「 storage aggregate relocation start -node &lt;node3 &gt; -destination &lt;node4 &gt; -aggregate-list &lt;aggr_name1 、 aggr_name2 … &gt; -nd-controller-upgrade true 」のように設定します</block>
  <block id="1aa99f376709f3c0651ec2c29125ea92" category="paragraph">アグリゲートリストは、で取得したノード 4 が所有するアグリゲートのリストです <block ref="ba9af23ac982f5cc7837b1ecc9c3cb47" category="inline-xref-macro-rx"></block>。</block>
  <block id="35b5d5d5526d39377fa3fde3fe0919cd" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="0ac9d40efe1470ec53257470c91f7314" category="list-text">admin レベルに戻ります。</block>
  <block id="edcc2ad4cfcd55c9715e9c9b93b871f5" category="list-text">[[step3]] 再配置のステータスを確認します。</block>
  <block id="1f9c1a513cadbe90207536ee44ba50c9" category="paragraph">「 storage aggregate relocation show -node &lt;node3&gt;] 」を参照してください</block>
  <block id="435f14e8c9936aa21efde9eac795b40f" category="paragraph">アグリゲートが再配置されると、そのアグリゲートに対しては「 1 」と表示されます。</block>
  <block id="48cbb5f03f0f49e19a1fa9ce8f82961f" category="admonition">node2 のすべてのアグリゲートが再配置されてノード 4 に再配置されてから、次の手順に進みます。</block>
  <block id="b81c90895c008292ba5de518bf5f82a3" category="cell">再配置する対象</block>
  <block id="ffd498a9668905f8533b8e27b647969c" category="cell">すべてのアグリゲートが完了しました</block>
  <block id="80e9ee80960399cedd826a005aef0a59" category="cell">に進みます <block ref="77e0750fdfbf6d57fd18f2bfe5d7ed8c" category="inline-xref-macro-rx"></block>。</block>
  <block id="773fa54d2a554dd5ed9a1437e409ed98" category="cell">アグリゲートに障害が発生したか、拒否された</block>
  <block id="2716a9803b0e07013e6cd314ef080ce2" category="list-text">EMS ログで対処方法を確認します。</block>
  <block id="434233acf6409db55ccbef4618a05f4c" category="list-text">対処方法を実行します。</block>
  <block id="f5bf9910c32ce3468dc3a0f80ee2e47a" category="list-text">障害が発生したアグリゲートまたは拒否されたアグリゲートを</block>
  <block id="8efb346b295cc43a0b01aa0890f6da31" category="paragraph">「 storage aggregate relocation start -node &lt;node3 &gt; destination &lt;node4 &gt; -aggregate-list &lt;aggr_name1 、 aggr_name2 … &gt; nd-controller-upgrade true 」の形式で指定します</block>
  <block id="32a147207e605041251ef80abd4e6acf" category="paragraph">アグリゲートリストには、障害が発生したアグリゲートまたは拒否されたアグリゲートが表示されます</block>
  <block id="91fabe0a54e8933e0d8a78d90297363f" category="paragraph">必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="fac06d8e56699ef41a841be6b176ebd7" category="list-text">拒否チェックの無視</block>
  <block id="2af820da1a1b18a7aaeb296667169248" category="paragraph">「 storage aggregate relocation start -override-vetoes -nd-controller-upgrade 」を実行します</block>
  <block id="d43b683fda30183131790fb642203a1d" category="list-text">デスティネーションチェックの無効化</block>
  <block id="01c6e1a269dc83c83d6e3aa64688f33f" category="paragraph">「 storage aggregate relocation start -override-destination-checks -ndocontroller -upgrade 」を参照します</block>
  <block id="a3de10d100fc985813ee74719526afe6" category="paragraph">storage aggregate relocation コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 ディスクとアグリゲートパワーガイドおよび ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="74e5caecf2b87f363c4a9dae7dca9c15" category="list-text">[man_relocate_3_4_Step5] - ノード 2 のすべての非ルートアグリゲートがオンラインであり、ノード 4 の状態であることを確認します。</block>
  <block id="28b5866cf6b60125947b501f1d057f36" category="paragraph">「 storage aggregate show -node &lt;node4 &gt; -state offline-root false 」のように表示されます</block>
  <block id="ba83d23180997e074fb16dcfc2cd6da8" category="paragraph">node2 アグリゲートがのコマンドの出力に表示されています <block ref="ba9af23ac982f5cc7837b1ecc9c3cb47" category="inline-xref-macro-rx"></block>。</block>
  <block id="176e1e5a47c3db6bc56e4ccb10905065" category="list-text">オフラインになったアグリゲートや外部になったアグリゲートがある場合は、各アグリゲートに対して次のコマンドを使用してオンラインにします。</block>
  <block id="00751ef0752943fad6f5c251990dbefb" category="list-text">ノード 2 のアグリゲート内のすべてのボリュームがノード 4 でオンラインになっていることを確認します。</block>
  <block id="9fe3979261ad706bcee5b4c047e18834" category="list-text">ノード 4 でオフラインになっているボリュームがある場合は、オンラインにします。</block>
  <block id="54ab7b4b354c31db3c1958974da7349a" category="list-text">ノード 4 のアップグレード後の AutoSupport メッセージをネットアップに送信します。</block>
  <block id="61be86123ac7716617c75c3d56ea68a9" category="paragraph">「 system node AutoSupport invoke -node &lt;node4 &gt; -type all -message 」 &lt;node2 &gt; が &lt;platform_old&gt; から &lt;platform_new&gt; に正常にアップグレードされました</block>
  <block id="f9758b6af31acb5b16f9295ac0f7c556" category="paragraph">ノード 1 を撤去するには、ノード 2 で HA ペアを無効にし、ノード 1 を適切にシャットダウンしてラックまたはシャーシから取り外します。</block>
  <block id="aa7894ff1a9d6e45a378e3bbe939cb80" category="list-text">クラスタ内のノード数を確認します。</block>
  <block id="0520dd500d342650e01dc4a099a267bb" category="paragraph">次の例に示すように、クラスタ内のノードが表示されます。</block>
  <block id="44fe06f5f571cfd547aa44853b8a4f9d" category="list-text">[[man_stリタイヤ 1_step2] ストレージフェイルオーバーを無効にします。</block>
  <block id="f4c0a7ed135e62d38e56c9a16bf13990" category="list-text">いずれかのノードで次のコマンドを入力して、クラスタハイアベイラビリティを無効にします。</block>
  <block id="d875f9fec183da794cd6d6245ef00d1d" category="paragraph">cluster ha modify -configured false</block>
  <block id="27a8730bbe580dd65301349dcdc539f8" category="list-text">ストレージフェイルオーバーを無効にします。</block>
  <block id="1990cae950960555eed1d17b76599009" category="paragraph">「 storage failover modify -node &lt;node1&gt; -enabled false 」という名前になります</block>
  <block id="0cf8f0e4fb23d1270d640c0a8e820f4b" category="cell">ストレージフェイルオーバーを無効にします。「 storage failover modify -node &lt;node1&gt; -enabled false 」</block>
  <block id="8048736d756a32521201f074d2730091" category="list-text">ストレージフェイルオーバーが無効になっていることを確認します。</block>
  <block id="2adf18e995507a97d0d1e8af8c85e4f0" category="paragraph">次の例は、ノードでストレージフェイルオーバーが無効になっている場合の「 storage failover show 」コマンドの出力を示しています。</block>
  <block id="c4b530495164ce1eeaab4b08e9534859" category="list-text">データ LIF のステータスを確認します。</block>
  <block id="d95955bc6aa8350efd75d95d4bbee99b" category="paragraph">network interface show -role data -curr-node &lt;node2&gt; -home-node &lt;node1&gt; ’</block>
  <block id="5fbed693cb6b31f11a703890fc87d45f" category="inline-link-macro">不具合のすす</block>
  <block id="1337205e844f111a9850e68ab7fe85fb" category="paragraph">「 * Status Admin/Oper * 」列を参照して、停止している LIF がないかどうかを確認します。停止している LIF がある場合は、を参照してください <block ref="f37de8559f00b8ef58b12c6857d24513" category="inline-link-macro-rx"></block> セクション。</block>
  <block id="8405f8a611485472bfa1ab420a9a9a02" category="cell">に進みます <block ref="caeb7d58e7293f2d87a762ba5d4df397" category="inline-xref-macro-rx"></block>。</block>
  <block id="a4749d514e1548558e90fda0a15746ff" category="cell">に進みます <block ref="242f372e62d4ec9b0208b2bd3cc69817" category="inline-xref-macro-rx"></block>。</block>
  <block id="9cd28d632d37554bc6b8bc94ae2073e5" category="list-text">[[man_denter_1_step6] どちらかのノードの advanced 権限レベルにアクセスします。</block>
  <block id="fa3bee6ea4c5e23d15d4c301c3141248" category="list-text">[[step7] クラスタ HA が無効になっていることを確認します。</block>
  <block id="f113138c0fa8fa7f0032e6a3fdc72c0a" category="paragraph">クラスタ HA が無効になっていない場合は、この手順を繰り返します <block ref="af42b54b31642eb564c9e40bb4e550a9" category="inline-xref-macro-rx"></block>。</block>
  <block id="a646d4448d74f354bb17f8dd1f3b7055" category="list-text">[[man_リタイヤ _1_step8] 現在 node1 にイプシロンが設定されているかどうかを確認します。</block>
  <block id="c3eb5e5ac705b7d7ad0bcb8afd287152" category="paragraph">ノード数が偶数のクラスタの場合は同票となる可能性があるため、 1 つのノードにイプシロンと呼ばれる追加の投票荷重が設定されます。を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> 詳細については ' を参照してください</block>
  <block id="1eca50be6c9670acdf0a0635f4b23d14" category="admonition">4 ノードクラスタの場合は、クラスタ内の別の HA ペアのノードにイプシロンが設定されていることがあります。</block>
  <block id="d582f21b8a69a6d942b9b1950f660f93" category="paragraph">次の例では、 node1 にイプシロンが設定されています。</block>
  <block id="56083d4ecb6381ba220374fe9dad2f3b" category="list-text">node1 にイプシロンが設定されている場合は、 node2 に転送できるように、イプシロンを false に設定します。</block>
  <block id="ce94642d2db6471658f082810ff26760" category="paragraph">cluster modify -node &lt;node1&gt; -epsilon false</block>
  <block id="c50c8db58d7cb6ecb263a833f1594cf2" category="list-text">node2 のイプシロンを true に設定して ' イプシロンを node2 に転送します</block>
  <block id="132623365cd4f5bf09a28e344e0106d0" category="paragraph">cluster modify -node &lt;node2 &gt; -epsilon true</block>
  <block id="6f223a55c3e4c37c6154b48d9ad6d103" category="list-text">node2 に対する変更が発生したことを確認します。</block>
  <block id="0e3cd42cd6320745185eaab80053ad4a" category="paragraph">node2 のイプシロンを true に設定し、 node1 のイプシロンを false に設定します。</block>
  <block id="f11c9613319f6e81aa0fa42fd830a1cb" category="list-text">セットアップが 2 ノードスイッチレスクラスタかどうかを確認します。</block>
  <block id="f72b72c0926d6dd4d51ae53a658c3ab1" category="list-text">node1 プロンプトから node1 を停止します。</block>
  <block id="f6c12efc36044a403873657724eb5a4a" category="paragraph">「 system node halt -node &lt;node1&gt; 」</block>
  <block id="7d63f771d73dc7f75f06e358cd9a7510" category="admonition">* 注意 * ： node1 が node2 と同じシャーシにある場合は、電源スイッチを使用するか、電源ケーブルを引き抜いて、シャーシの電源を切断しないでください。その場合は、データを提供している node2 が停止します。</block>
  <block id="ecd3525fa194c253a8cabf432a4a5041" category="list-text">システムを停止するかどうかを確認するメッセージが表示されたら、「 y 」と入力します。</block>
  <block id="4554f5f9818af46c131a159c2ec43887" category="paragraph">ノードはブート環境のプロンプトで停止します。</block>
  <block id="839c9527e6867357b4949b3cb19bd5a6" category="list-text">node1 にブート環境プロンプトが表示されたら、シャーシまたはラックからブート環境プロンプトを削除します。</block>
  <block id="d1e63174073b4ec3e4d49ef0ca235c5b" category="paragraph">アップグレードが完了したら、 node1 の運用を停止できます。を参照してください <block ref="6e48b929ca0767f00c15eeb6d7e78755" category="inline-link-macro-rx"></block>。</block>
  <block id="8d20a51d0c0718e7e116461f15d49fb3" category="paragraph">アップグレード手順の実行中、リモート LIF は SAN LUN へのトラフィックを処理します。アップグレード時にクラスタやサービスの健全性を維持するために、 SAN LIF を移動する必要はありません。SAN LIF は、新しいポートにマッピングする必要がないかぎり移動されません。ノード 4 をオンラインにしたあと、 LIF が正常に機能しており、適切なポートに配置されていることを確認します。</block>
  <block id="12720c14368020238cd7150824f980eb" category="list-text">node3 が所有していないすべての NAS データ LIF を表示するには、いずれかのノードで次のコマンドを入力し、出力をキャプチャします。</block>
  <block id="9482a7fa27802a7ab7e05f7ded4a42bd" category="paragraph">network interface show -role data -curr-node node3 -is-home false</block>
  <block id="f4f6617b632a0c1c2dc3fa9db1c234c1" category="cell">に進みます <block ref="81b5453f8cd7e29a23486e4650786cf5" category="inline-xref-macro-rx"></block>。</block>
  <block id="2a0ce78ac6ca1adeedbcfa1fd0a257cc" category="cell">手順 3 を省略して、に進みます <block ref="945e0dec7328bd39afca611c47b45c97" category="inline-xref-macro-rx"></block>。</block>
  <block id="dac6519e0e0abeb2d86af52963ff687b" category="list-text">[man_lif_verify_4_Step3] インターフェイスグループおよび VLAN でホストされている NAS データ LIF をノード 3 からノード 4 にすべて移行するには、次の手順を実行します。</block>
  <block id="bea582814d8029e4e79ed1f1f67178fa" category="list-text">[[man_lif_verify_4_substpa]] インターフェイスグループ上の node2 に属していた node3 でホストされている LIF を、同じネットワーク上の LIF をホストできる node4 のポートに移行するには、それぞれの LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="d78b67076b08536aa74614da580aa8e7" category="paragraph">` network interface migrate -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -destination-node node4 – destination-port &lt;netport | ifgrp&gt; 」の形式で指定します</block>
  <block id="bb2b7d2b593abe391065563c1a991c60" category="list-text">LIF のホームポートとホームノードを変更します <block ref="f2edbd3671dda6c8c6a0d5b9f5139a77" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="f3ab69d92a4ce66d6b40a6fc5ed64045" category="paragraph">`network interface modify -vserver &lt;vserver_name&gt; -lif &lt;datalif_name&gt; -home-node node4 home-port &lt;netport | ifgrp&gt; ’</block>
  <block id="ca8c32ea8d9ad20129f9bd82dd476c20" category="list-text">[man_lif_verify_4_substpc ]] VLAN ポート上の node2 に属していた node3 でホストされている LIF を、同じネットワーク上の LIF をホストできる node4 のポートに移行するには、それぞれの LIF に対して 1 回、次のコマンドを入力します。</block>
  <block id="ad068be6c9c7081a732def4a358736ad" category="paragraph">` network interface migrate -vserver &lt;vserver_name&gt; -lif &lt;datalif_name&gt; -destination node node4 – destination-port &lt;netport|ifgrp&gt; 」</block>
  <block id="b9698583aeb95570efa407aaaba06094" category="list-text">LIF のホームポートとホームノードを変更します <block ref="239198568c8cd082441ca4901dc23f34" category="inline-xref-macro-rx"></block> LIF をホストしているポートとノードに対して次のコマンドを 1 回入力します。</block>
  <block id="9b464868d559a5e4c0a4b39f6f928522" category="paragraph">` network interface modify -vserver &lt;vserver_name&gt; -lif &lt;datalif_name&gt; -home-node &lt;node4 &gt; home-port &lt;netport | ifgrp&gt; 」</block>
  <block id="1ba9f89e7307ad05e44ad05bb958ca27" category="list-text">[[man_lif_verify_4_Step4]] 次のいずれかの操作を行います。</block>
  <block id="583ceb80a05614853a17d060bdc9978d" category="cell">- 完了しました <block ref="24ba20dfe80c75ddf74b686c1f78edbe" category="inline-xref-macro-rx"></block> から <block ref="464cefb825ec041ae0f8085658a0717b" category="inline-xref-macro-rx"></block>をクリックして、手順 9 をスキップして完了します <block ref="487182da65d4a8fd64dac32686f96826" category="inline-xref-macro-rx"></block> から <block ref="6d60445fd0a028ec8dafc7e8858e9dac" category="inline-xref-macro-rx"></block>。</block>
  <block id="407fbf8918b07e23f7ad6bd07a5d9cd9" category="cell">手順 5 から 8 までをスキップして完了します <block ref="95473255aa630f367ac347162090735e" category="inline-xref-macro-rx"></block> から <block ref="6d60445fd0a028ec8dafc7e8858e9dac" category="inline-xref-macro-rx"></block>。</block>
  <block id="b7cf099ecc920b7356c7938e36ead518" category="cell">- 完了しました <block ref="24ba20dfe80c75ddf74b686c1f78edbe" category="inline-xref-macro-rx"></block> から <block ref="6d60445fd0a028ec8dafc7e8858e9dac" category="inline-xref-macro-rx"></block>。</block>
  <block id="486afcecd3768de955874ac9b04d982d" category="list-text">[man_lif_verify_4_Step5] プラットフォームで同じでないデータポートがある場合は、次のコマンドを入力してブロードキャストドメインにポートを追加します。</block>
  <block id="0d0d30231651c6bea6f3a8ab9bef8b41" category="paragraph">「 network port broadcast-domain add-ports -ipspace &lt;IPspace_name&gt; -broadcast-domain mgmt ports &lt;node: port&gt;` 」のように指定します</block>
  <block id="59770005b7a829dfa2de1246fe18d7ed" category="paragraph">次の例は、 IPspace デフォルトで、ノード「 6280 」のポート「 e0a 」とノード「 8060-1 」のポート「 e0i 」をブロードキャストドメイン管理に追加します。</block>
  <block id="271e5c91e502440a4641a9bc05a02df6" category="list-text">各 NAS データ LIF について次のコマンドを 1 回入力して、各 NAS データ LIF を node4 に移行します。</block>
  <block id="159244917402d1438cdf46fe3aac9f6b" category="paragraph">`network interface migrate-vserver &lt;vserver-name&gt; -lif &lt;datalif-name&gt; -destination-node &lt;node4 &gt; -destination-port &lt;netport | ifgrp &gt; -home-node &lt;node4 &gt; です</block>
  <block id="45c770ea39ce7a89e3fa87a10d51bc25" category="list-text">データ移行が永続的であることを確認します。</block>
  <block id="d6454642fa6de121b504b22f0485cca0" category="paragraph">network interface modify -vserver &lt;vserver_name&gt; -lif &lt;datalif_name&gt; -home-port &lt;netport|ifgrp&gt; です</block>
  <block id="8ad5a71314693935e3bce24596d44ef1" category="list-text">[man_lif_verify_4_Step8] 次のコマンドを入力して ' すべてのリンクのステータスを up で確認し ' すべてのネットワーク・ポートの一覧を表示し ' その出力を調べます</block>
  <block id="2a2c5a2b5a3d8988556727450e1a29e2" category="paragraph">次に、一部の LIF が稼働し、その他が停止している「 network port show 」コマンドの出力例を示します。</block>
  <block id="ed11f195f4f8f4017e6e51d88466a5a2" category="list-text">[man_lif_verify_4_Step9] 'network port show コマンドの出力に新しいノードでは使用できず ' 古いノードに存在するネットワーク・ポートが表示される場合は ' 次の手順を実行して古いネットワーク・ポートを削除します</block>
  <block id="7d4a5f4bd766fdaca38d0e0f6141ee90" category="list-text">次のコマンドを入力して、 advanced 権限レベルに切り替えます。</block>
  <block id="c72099f9d20f92c2086837037b97fc90" category="list-text">古いネットワークポートごとに次のコマンドを 1 回入力します。</block>
  <block id="5175d0f510ad3fc3bfd43ed48a78795e" category="paragraph">'network port delete -node &lt;node_name &gt; -port &lt;port_name&gt; ’</block>
  <block id="f624be69667373d41ab52d00b2f142d4" category="list-text">[man_lif_verify_4_Step10] ] 次の手順を実行して、ノード 4 の正しいポートに SAN LIF があることを確認します。</block>
  <block id="175804e163fef92888323305db0643d2" category="paragraph">'network interface show -data-protocol iscsi|fcp-home-node node4</block>
  <block id="35ca9ca12f5a137b27b3f6675a68cbd9" category="list-text">ノード 4 に、ノード 2 に存在しないポート上に SAN LIF または SAN LIF のグループがある場合は、次のいずれかのコマンドを入力して、ノード 4 の適切なポートにそれらの LIF またはグループを移動します。</block>
  <block id="2fbcca46574c079f4fb5aa457abc282e" category="list-text">LIF のステータスを down に設定します。</block>
  <block id="faa2ac3f77b838a1d072635dac66a426" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;LIF_NAME&gt; -status-admin down 」という形式で指定します</block>
  <block id="d760c0961d6b0dca026082038bc5020a" category="paragraph">「 network interface modify -lif &lt;lif_name&gt; -home-node &lt;new_home_port&gt;` 」です</block>
  <block id="8c0fbdd8434a31926cdab8193028a740" category="paragraph">「 network interface modify ｛ -home-node &lt;port_on_node2&gt; -role data ｝ -home-node &lt;node2 &gt; -role data ｝ -home-port &lt;new_home_port_on_node4 &gt; 」のようになります</block>
  <block id="2e3c23cf91c21a249f56ef996f27a61a" category="list-text">次のコマンドを入力して、すべての LIF のステータスを「 up 」に変更し、ノード上のトラフィックを LIF が受け入れて送信できるようにします。</block>
  <block id="8bc5cf3f80ad8a49c6ada1790801222e" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -home-port &lt;port_name&gt; -home-node &lt;node4 &gt; lif &lt;lif_name&gt; -status-admin up 」という形式で指定します</block>
  <block id="f1eab2abaeb4ee31499ddda2b6919c69" category="list-text">いずれかのノードで次のコマンドを入力し、出力を調べて、すべての SAN LIF が正しいポートに移動されていること、および LIF のステータスが「 up 」になっていることを確認します。</block>
  <block id="8c094e66fbad29785444d71fd6c0dcac" category="paragraph">'network interface show -home-node &lt;node4 &gt; -role data</block>
  <block id="b0da7502535a227e64440d7a547ea6dd" category="list-text">[[man_lif_verify_4_Step13]] LIF が 1 つでも停止している場合は、各 LIF に対して次のコマンドを 1 回入力して、 LIF の管理ステータスを「 up 」に設定します。</block>
  <block id="ebb0dbe9b70bf46780fd67ec02dcb63a" category="paragraph">「 network interface modify -vserver &lt;vserver_name&gt; -lif &lt;lif_name&gt; -status-admin up 」の形式で指定します</block>
  <block id="b8a386efa3c6aa2c0554c650dfc15d81" category="paragraph">node2 を node4 に置き換える前に、 node2 の AutoSupport メッセージを送信し、 node2 に所有されているルート以外のアグリゲートを node3 に再配置する必要があります。</block>
  <block id="e4fe7514f720448bae21164b8b7a8a98" category="list-text">[[step1] node2 に関する AutoSupport メッセージをネットアップに送信します。</block>
  <block id="088fc05a96b10d26c3f25411385117f2" category="paragraph">「 system node AutoSupport invoke -node &lt;node2 &gt; -type all -message 」「 Upgrading &lt;node2 &gt; from &lt;platform_old&gt; to &lt;platform_new&gt; 」というメッセージが表示されます</block>
  <block id="fb876532a1278ecbe2a9e2aa30ef59c2" category="list-text">AutoSupport メッセージが送信されたことを確認します。</block>
  <block id="2e7bb8e758be89869c95ab23b96089a8" category="paragraph">「 system node AutoSupport show -node &lt;node2&gt; -instance 」のように表示されます</block>
  <block id="632ce4fa5102cfac495b3c1490de0513" category="paragraph">「 Last Subject Sent ：」および「 Last Time Sent ：」のフィールドには、最後に送信されたメッセージのメッセージタイトルと、メッセージが送信された時刻が含まれています。</block>
  <block id="872a7a7f067f5ac8e7a4df8b55cb3129" category="list-text">[[step3]] ルート以外のアグリゲートの再配置：</block>
  <block id="33cfec7231d81810ac482a09c5b69c00" category="list-text">node2 が所有するアグリゲートを表示します。</block>
  <block id="ceb3b4f875043e902ad0c2c7df540ac4" category="paragraph">「 storage aggregate show-owner-name &lt;node2&gt; 」</block>
  <block id="e5d22039d8dff591d18701d62fb4083d" category="list-text">アグリゲートの再配置を開始する：</block>
  <block id="2a2be3ec611dd374f220ea53bd3e0758" category="paragraph">「 storage aggregate relocation start -node &lt;node2&gt; -destination &lt;node3&gt; -aggregate-list * -nd-controller-upgrade true</block>
  <block id="cba3015195e189328dd15ef19c0cdcff" category="admonition">コマンドは、ルート以外のアグリゲートのみを特定します。</block>
  <block id="c3aa957126a7abd53abe73b1af74dfb8" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="00bfced11707df12b7beabc9cb1854c6" category="list-text">admin 権限レベルに戻ります。</block>
  <block id="6b5ba31b334c119525a36a4c654c79fc" category="list-text">node2 の再配置のステータスを確認します。</block>
  <block id="a6f10385b3e5082eca317137f25e29be" category="paragraph">「 storage aggregate relocation show -node &lt;node2&gt;] 」を参照してください</block>
  <block id="e0b277bd202f6924948f2209a81b8cb0" category="paragraph">アグリゲートを再配置すると、そのアグリゲートの出力に「 Done 」と表示されます。</block>
  <block id="5f99044f7fd5dd98c2e83408099900a7" category="admonition">node2 に所有されているすべてのアグリゲートが node3 に再配置されてから次の手順に進む必要があります。</block>
  <block id="c8ee48ad015fbbcc6f1c096e31a9b081" category="cell">に進みます <block ref="0d8c3ea689b325a11fe26527348a6eff" category="inline-xref-macro-rx"></block>。</block>
  <block id="12d1b6919c7c68de63bfe55847d735a3" category="cell">アグリゲートに障害が発生したか、拒否された</block>
  <block id="d6e415f41ef651a14c6408b58b5f34fa" category="list-text">詳細なステータスメッセージを表示します。</block>
  <block id="4382ef08403cdc87d0db14f4b0dbe621" category="paragraph">「 storage aggregate show -instance 」のように表示されます</block>
  <block id="52aa1d8f7452c944bbc112edc69d159d" category="paragraph">EMS ログで必要な対処方法を確認することもできます。</block>
  <block id="64a1f8cc2ee975b38446e3b8f940164e" category="paragraph">* 注意 *:event log show コマンドは、発生したエラーを一覧表示します。</block>
  <block id="3f8dbc42a73ae9a6487e0757b393d2fb" category="paragraph">「 storage aggregate relocation start -node &lt;node2&gt; -destination &lt;node3&gt; -aggregate-list * -nd-controllerupgrade true 」という形式で指定します</block>
  <block id="856f354dcadb2aef2f73a7a610300d05" category="paragraph">必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="6abaecd9da93fcc5260d726fe8a8fa56" category="list-text">拒否のチェックを無視する：</block>
  <block id="b62638cdb7e1a6240698379b6c81d35b" category="paragraph">「 storage aggregate relocation start -override-vetoes true -nd-controller-upgrade</block>
  <block id="230cd704f9f55647ecfe8129ed941e8e" category="list-text">送信先チェックを無効にする：</block>
  <block id="35df77bf8b92d76c3b871148e8c46c51" category="paragraph">「 storage aggregate relocation start -override-destination-checks true -ndocontroller -upgrade 」を実行します</block>
  <block id="bba7ef312132aa21315af40f6e3ff0f6" category="paragraph">storage aggregate relocation コマンドの詳細については、を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ONTAP 9 ディスクとアグリゲートパワーガイドおよび ONTAP 9 コマンド：マニュアルページリファレンスにリンクするには、次の手順を実行します。</block>
  <block id="329fdaa2cd3cf795781d3ee938047475" category="list-text">[man_relocate_2_3_step6] ルート以外のアグリゲートがすべてノード 3 でオンラインになっていることを確認します。</block>
  <block id="ef54d8b76027ced4d5a36092399b0849" category="paragraph">「 storage aggregate show -node &lt;node3 &gt; -state offline-root false 」という 2 つのコマンドを実行します</block>
  <block id="ecc3f3e0b2ef3c70a30fe8be1af81d75" category="paragraph">オフラインになったアグリゲートや外部になったアグリゲートがある場合は、各アグリゲートを 1 つずつオンラインにする必要があります。</block>
  <block id="1dc7145853b865022c2423c0562bf7ed" category="list-text">ノード 3 ですべてのボリュームがオンラインになっていることを確認します。</block>
  <block id="8526a5587200c78144bc2d1fabd13d3a" category="paragraph">ノード 3 でオフラインになっているボリュームがある場合は、各ボリュームについて 1 回、オンラインにする必要があります。</block>
  <block id="7adac7d8af549857f31077a908e21bf4" category="paragraph">'volume online -vserver &lt;vserver-name&gt; -volume &lt;volume-name&gt;`</block>
  <block id="5d28ff5ed2a011a10e2c1fd4e4e77822" category="list-text">node2 にオンラインのルート以外のアグリゲートがないことを確認します。</block>
  <block id="dcc422920951416bc8ad4e66178b7556" category="paragraph">「 storage aggregate show-owner-name &lt;node2&gt; -ha-policy sfo-state online 」のように表示されます</block>
  <block id="232cf0d45bdcae298c19689d1bf05bea" category="paragraph">ルート以外のオンラインアグリゲートがすべて node3 にすでに再配置されているため、コマンドの出力にルート以外のオンラインアグリゲートが表示されないようにする必要があります。</block>
  <block id="c8e5788139bcf856c78024561a09d301" category="paragraph">ノード 1 をノード 3 に交換する前に、 storage aggregate relocation コマンドを使用してルート以外のアグリゲートをノード 1 からノード 2 に移動し、再配置を確認する必要があります。</block>
  <block id="fedb2a32e0130d4ae814cd5cc418f72f" category="list-text">[[step1] 次の手順を実行して、ルート以外のアグリゲートを再配置します。</block>
  <block id="825e41d7fbc98709f251a794a6b6711e" category="paragraph">「 storage aggregate relocation start -node &lt;node1&gt; -destination &lt;node2&gt; -aggregate-list * -nd-controller-upgrade true</block>
  <block id="9cac941a6d5ae11593b2f268722b37cf" category="paragraph">再配置はバックグラウンドで実行されます。アグリゲートの再配置には数秒から数分かかる場合があります。この時間には、クライアントの停止部分と停止部分の両方が含まれます。このコマンドでは、オフラインまたは制限されたアグリゲートが再配置されません。</block>
  <block id="db3c32b2915aa7ffd2fcacb5e017dbc9" category="list-text">ノード 1 で次のコマンドを入力して、再配置ステータスを確認します。</block>
  <block id="716079406663f621295f101d9a247a06" category="paragraph">「 storage aggregate relocation show -node &lt;node1&gt; 」を入力します</block>
  <block id="d550e31a6ccbb056c2d7ab1e68692363" category="admonition">ノード 1 に所有されているルート以外のアグリゲートがすべて node2 に再配置されてから、次の手順に進みます。</block>
  <block id="b77ef5d765d72155b0da6da7cb47f0ed" category="cell">再配置の場合</block>
  <block id="b15b9b498c001e92853f9fea21ef7ef8" category="cell">作業</block>
  <block id="a0fba600b5c045fae79ae007d77c6f09" category="cell">すべてのアグリゲートのすべてが完了しました</block>
  <block id="2ac86beb93582e4754639412014b59eb" category="cell">に進みます <block ref="449ef68af8e0094cdf2287c1416d1ff3" category="inline-xref-macro-rx"></block>。</block>
  <block id="1141d7067c13df20d6186fc00309e10b" category="cell">いずれかのアグリゲートに障害が発生するか、または拒否されます</block>
  <block id="642f5c5e7ce4f58241664b57c66dae22" category="list-text">障害が発生したアグリゲートまたは拒否したアグリゲートを再配置します。「 storage aggregate relocation start -node &lt;node1&gt; -destination &lt;node2&gt; -aggregate-list * -nd-controller-upgrade true 」</block>
  <block id="9eb367512ec712e8def159a017644487" category="list-text">admin レベルに戻ります。必要に応じて、次のいずれかの方法で強制的に再配置を実行できます。</block>
  <block id="a927bee35dc67490b39aa8c4291ca745" category="list-text">拒否のチェックを無視：「 storage aggregate relocation start -override-vetoes true -nd-controller-upgrade</block>
  <block id="592a7b363e77ec54f4a9454a15b2fa70" category="list-text">デスティネーションのチェックを無効にします。「 storage aggregate relocation start -override-destination-checks true -nd-controller-upgrade</block>
  <block id="004721d229fe907e42d94f6930fb3cb6" category="paragraph">を参照してください <block ref="3352feee8874655040be7cccb077b0f9" category="inline-link-macro-rx"></block> ディスクとアグリゲートパワーガイドへのリンクおよび _ ONTAP 9 コマンド：マニュアルページリファレンス _ ストレージアグリゲートの再配置コマンドの詳細については、を参照してください。</block>
  <block id="dc1c151c89f0b15dbd97af39108f3403" category="list-text">[man_relocate_1_2_step4] ルート以外のすべてのアグリゲートがオンラインであり、 node2 にあるそれらの状態を確認します。</block>
  <block id="5614977b273243c18da92e09a399f4ff" category="list-text">node2 で次のコマンドを入力し、出力を調べて、すべてのボリュームがオンラインであることを確認します。</block>
  <block id="c5fde6e8a15ba7f224d13ea83e3c2c34" category="paragraph">このコマンドで使用する「 vserver -name 」は、前の「 volume show 」コマンドの出力にあります。</block>
  <block id="9b65be5be5396e39e6973853034324bc" category="list-text">node2 で次のコマンドを入力します。</block>
  <block id="8976f4697be8e317a4fb1b4403b3fb59" category="paragraph">「 storage failover show -node &lt;node2 &gt; 」のように表示されます</block>
  <block id="7fb67b5bff7cd5b5583c80436154eeca" category="paragraph">出力に次のメッセージが表示されます。</block>
  <block id="bc50ecc4b8edbc1374bfa0e110d2cdf4" category="list-text">node1 のルート以外のアグリゲートがオンラインになっていないことを確認します。</block>
  <block id="388b62ec918acf6b46e5c8dc7c42fc85" category="paragraph">「 storage aggregate show-owner-name &lt;node1&gt; -ha-policy sfo-state online 」のように表示されます</block>
  <block id="e68954fba0117f19310a10c0e5f075ec" category="paragraph">出力には、すでに node2 に再配置されているオンラインのルート以外のアグリゲートは表示されません。</block>
  <block id="fbe97acb6a92a57289db38df1cbd3acc" category="paragraph">ノード 3 をラックに設置し、ノード 1 の接続をノード 3 に転送し、ノード 3 をブートして、 ONTAP をインストールする必要があります。そのあとで、ノード 1 のスペアディスク、ルートボリュームに属するディスク、およびルート以外のアグリゲートを node2 に再割り当てする必要があります。</block>
  <block id="57ed4780c0ea12318bd8f9bbfaddce0f" category="paragraph">ノード 1 にインストールされている ONTAP 9 のバージョンが異なる場合は、ノード 3 をネットブートする必要があります。node3 のインストールが完了したら、 Web サーバに保存されている ONTAP 9 イメージからブートします。その後、以降のシステムブートで使用するブートメディアデバイスに正しいファイルをダウンロードできます。を参照してください <block ref="4815c2d091d790c1d3bab94177b38eaf" category="inline-link-macro-rx"></block>。</block>
  <block id="0570d4a42e9be3c955a39beb93846d1e" category="paragraph">ただし、ノード 1 にインストールされている ONTAP 9 のバージョンが同じかそれ以降である場合は、ノード 3 をネットブートする必要はありません。</block>
  <block id="9811d17595c532c211fe17a338c29af7" category="admonition">* 重要：ストレージアレイに接続された V シリーズシステム、またはストレージアレイに接続された FlexArray 仮想化ソフトウェアを使用するシステムをアップグレードする場合は、この作業を完了する必要があります <block ref="533e5b5383ee7eeec7355f568e8aaf6b" category="inline-xref-macro-rx"></block> から <block ref="593996bb06ec10671cada9089fb35dd4" category="inline-xref-macro-rx"></block>をクリックします <block ref="72140e6a9de023ebc205559b767779ea" category="inline-xref-macro-rx"></block> およびの手順に従ってください <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block> 必要に応じて、保守モードでコマンドを入力します。その後、このセクションに戻ってからを使用して再開する必要があります <block ref="239474d202713b3a406727408fd68f72" category="inline-xref-macro-rx"></block>。ただし、ストレージディスクが搭載されたシステムをアップグレードする場合は、このセクション全体を実行し、に進みます <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block>クラスタ・プロンプトでコマンドを入力します。</block>
  <block id="1b5474698e4bc6bfa928589ed23b1571" category="list-text">[[man_install3_step1] ノード 3 のラックスペースがあることを確認します。</block>
  <block id="773d119bfcf7806a94138f5cf32996fe" category="list-text">[[step2] ノードモデルの _ インストールおよびセットアップ手順 _ に従って、ラックにノード 3 をインストールします。</block>
  <block id="443b6c77a2b004d6de0907662fe36a4d" category="list-text">_ インストールおよびセットアップ手順 _ または _ FlexArray 仮想化インストール要件およびリファレンス _ （ node3 プラットフォーム用）</block>
  <block id="e233e040e6ab1ade1870396947dd6b5a" category="admonition">ほとんどのプラットフォームモデルには一意のインターコネクトカードモデルがあるため、インターコネクトカードまたはクラスタインターコネクトケーブルの接続を node1 から node3 に移動する必要はない場合があります。MetroCluster 構成の場合、 FC-VI ケーブルの接続を node1 から node3 に移動する必要があります。新しいホストに FC-VI カードがない場合は、 FC-VI カードの移動が必要になることがあります。</block>
  <block id="63cc66bd900313017fb0834b1cbbbc81" category="list-text">[[man_install3_step4]] ノード 3 の電源をオンにしてから、コンソール端末で Ctrl+C キーを押してブートプロセスを中断し、ブート環境プロンプトにアクセスします。</block>
  <block id="6c2cb2a49908831d5791f25bb5371a3d" category="list-text">[[man_install3_step5]] で警告メッセージが表示される場合 <block ref="189d751c0d059b7e2fcaef080c81111f" category="inline-xref-macro-rx"></block>を使用して、次の操作を実行します。</block>
  <block id="7efd430adfeaf9ea4f3e48e21d2c4f96" category="admonition">* 注意 * ：遅延は無視しないでください。バッテリーの充電に失敗すると、データが失われるおそれがあります。</block>
  <block id="5b8c681411bac96a813b6b62eba17d9c" category="list-text">[[man_install3_step6] 次のいずれかの操作を実行します。</block>
  <block id="ad9768b53d0a33cd1368bd0b1d373a3b" category="cell">手順 7 から 12 を省略して、に進みます <block ref="85131af613f0169831e213f11ca11041" category="inline-xref-macro-rx"></block>。</block>
  <block id="6dd9e2c232d9aa889adc2bdc1d259396" category="list-text">に進みます <block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block> をクリックし、サブセクションを完了します <block ref="b874d68563e926f19d0f15015f15f190" category="inline-link-macro-rx"></block> および <block ref="a9e7644d0d01665bbdf613cdb831fa7f" category="inline-link-macro-rx"></block>必要に応じて、システムに適用されます。</block>
  <block id="66b6cfbf89b613b9a80d84ec1d7b5fa0" category="list-text">このセクションに戻って、から始めて残りの手順を実行します <block ref="239474d202713b3a406727408fd68f72" category="inline-xref-macro-rx"></block>。</block>
  <block id="120d825f771126cb963c76c2ff005e6d" category="list-text">[man_install3_step7] 新しいノードの FC イニシエータポートをスイッチゾーンに追加します。</block>
  <block id="12aae7624013a12c0ade8f6f2e309d62" category="paragraph">システムにテープ SAN がある場合は、イニシエータをゾーニングする必要があります。手順については、ストレージアレイおよびゾーニングに関するドキュメントを参照してください。</block>
  <block id="0dd10d8b45274d5c198af78bfab2e446" category="list-text">[man_install3_step8] FC イニシエータポートをストレージアレイに新しいホストとして追加し、アレイ LUN を新しいホストにマッピングします。</block>
  <block id="5cca5c853f000ca16ba17533a6116cd7" category="list-text">[[man_install3_step9] ストレージアレイのアレイ LUN に関連付けられたホストまたはボリュームグループでの World Wide Port Name （ WWPN ；ワールドワイドポート名）の値を変更します。</block>
  <block id="6a81c1ece5ddd721a1ff7521454f87c9" category="list-text">[man_install3_step10] ：構成でスイッチベースのゾーニングを使用している場合は、ゾーニングを調整して新しい WWPN 値を反映させます。</block>
  <block id="fa1040cb978ca2065cad32e28e6d9d58" category="list-text">[[man_install3_step11]] アレイ LUN が node3 に表示されることを確認します。</block>
  <block id="d8096974edc78f9fe2db726869876695" category="paragraph">各 FC イニシエータポートで認識されるすべてのアレイ LUN が表示されます。アレイ LUN が表示されない場合は、このセクションで後述する node1 から node3 にディスクを再割り当てすることはできません。</block>
  <block id="b69192040391e08f61402b09c27822b8" category="list-text">[[man_install3_step12]] Ctrl+C キーを押してブートメニューを表示し、メンテナンスモードを選択します。</block>
  <block id="fe85761838c7d215174afe4ace6c66f0" category="list-text">[[man_install3_step13]] メンテナンスモードのプロンプトで、次のコマンドを入力します。</block>
  <block id="907c22891918b5b80e66731ae6eed77e" category="list-text">[[man_install3_step14]] 次のいずれかの操作を実行します</block>
  <block id="8b2f23f3c3f7445164b524932e61d65b" category="cell">アップグレード後のシステムの構成</block>
  <block id="1f00007c6687ede4ed2d2b6e91ce451d" category="cell">デュアルシャーシ構成（コントローラが別々のシャーシに搭載されている場合）</block>
  <block id="1ec921c80439dda2ee883653fa1acb7b" category="cell">に進みます <block ref="4332c8cc4c85f33bda2a347fe16e2dc6" category="inline-xref-macro-rx"></block>。</block>
  <block id="0471a95f16e566048e66f2d81f432967" category="cell">シングルシャーシ構成（コントローラが同じシャーシに搭載されている場合）</block>
  <block id="0aaa18e158b2b22ed630223549710480" category="list-text">コンソールケーブルを node3 から node4 に切り替えます。</block>
  <block id="85418bdb866bf209cc89fc9250fd0f04" category="paragraph">両方のコントローラが同じシャーシ内にある場合は、電源はすでにオンになっているはずです。</block>
  <block id="0f26d4df0f59d99659fc6ffdd8539aff" category="paragraph">* 注： node4 はブート環境のプロンプトのままにします。その場合はの node4 に戻ります <block ref="f326c815b47f4f2909494bae5cd735d5" category="inline-link-macro-rx"></block>。</block>
  <block id="620bed07fd84663ccd35004111b0a13c" category="list-text">に警告メッセージが表示される場合は <block ref="189d751c0d059b7e2fcaef080c81111f" category="inline-xref-macro-rx"></block>の手順に従ってください <block ref="593996bb06ec10671cada9089fb35dd4" category="inline-xref-macro-rx"></block></block>
  <block id="a70d58ca96ede2bc6122de5eaba9afaf" category="list-text">コンソールケーブルを node4 から node3 に戻します。</block>
  <block id="7c0d2cf152b2cde561a140a996176952" category="list-text">[[man_install3_step15]] ONTAP の node3 の設定：</block>
  <block id="7238df7481760a2449dc9206c452edfe" category="list-text">[man_install3_step16]] NetApp Storage Encryption （ NSE ）がこの構成で使用されている場合、「 setenv bootarg.storageencryption.support 」コマンドは「 true 」に設定する必要があります。また、 node1 構成のロード後にブートループが発生しないように、「 kmip.init.maxwait` variable needs to be 'off' 」に設定する必要があります。</block>
  <block id="0546806bd19b344e7d0ca13460d96992" category="list-text">[[man_install3_step17]] node3 にインストールされている ONTAP のバージョンが、 node1 にインストールされている ONTAP 9 のバージョンと同じかそれ以降である場合は、ディスクをリストして新しい node3 に再割り当てします。</block>
  <block id="7ce11de7229520360ee33defaf28ec82" category="admonition">* 警告 * ：この新しいノードが他のクラスタまたは HA ペアで使用されたことがある場合は、次に進む前に「 wipeconfig 」を実行する必要があります。これを行わないと、サービスの停止やデータの損失が発生する可能性があります。交換用コントローラを以前に使用したことがある場合、特にコントローラが ONTAP 7-Mode を実行していた場合は、テクニカルサポートにお問い合わせください。</block>
  <block id="b04b66d312941ba2b1d5910ec5f5fb36" category="list-text">[[man_install3_step18]] CTRL-C を押してブートメニューを表示します。</block>
  <block id="7be8c6136747afe24ab6f25f931c2451" category="list-text">[[man_install3_step19]] 次のいずれかの操作を実行します</block>
  <block id="b65dee077de24058e64aa96e60e2a56a" category="cell">Does _ not_ have the correct or current ONTAP version on node3 （ノード 3 に正しい バージョンまたは現在の バージョンがありません</block>
  <block id="a17dd4e0d7995e108ec012fad7f027d2" category="cell">に進みます <block ref="f66707bf1ec53e37a427dd9510962619" category="inline-xref-macro-rx"></block>。</block>
  <block id="de22fad1fba6c28f624ef4e272674d1c" category="cell">ノード 3 に正しいバージョンまたは最新バージョンの ONTAP があること</block>
  <block id="46f709b9c191a3a487187b13c2365dfb" category="cell">に進みます <block ref="c27981c94d7a26c42c925c89e96e7aa2" category="inline-xref-macro-rx"></block>。</block>
  <block id="fd96d8e5cccd1d83cf17d6327a03d1c6" category="list-text">[[man_install3_step20]] 次のいずれかの操作を実行して、ネットブート接続を設定します。</block>
  <block id="4c1c25953b4f042240caac106d2566d7" category="admonition">ネットブート接続として管理ポートおよび IP を使用する必要があります。データ LIF IP を使用しないでください。使用していると、アップグレードの実行中にデータが停止する可能性があります。</block>
  <block id="5de475f75526f08af360b918b25d9c72" category="cell">ブート環境プロンプトで「 ifconfig e0M -auto 」コマンドを入力すると、接続が自動的に設定されます</block>
  <block id="8348f733ee288862d85696832806d154" category="cell">ブート環境プロンプトで次のコマンドを入力して、接続を手動で設定します。 ifconfig e0M -addr= &lt;filer_addr&gt; -mask= &lt;netmask&gt; -gw= &lt;gateway&gt; -dns= &lt;dns_addr&gt; domain= &lt;dns_domain&gt; `&lt;filer_addr&gt;`&lt;netmask&gt;` はストレージシステムのネットワークマスクです。「 &lt;gateway&gt;` 」は、ストレージシステムのゲートウェイです。「 &lt;dns_addr&gt; 」は、ネットワーク上のネームサーバの IP アドレスです。「 &lt;dns_domain&gt; 」は、 Domain Name Service （ DNS ；ドメインネームサービス）ドメイン名です。このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はなく、サーバのホスト名だけを指定します。* 注 * ：インターフェイスによっては、他のパラメータが必要になる場合があります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細が表示されます。</block>
  <block id="c6515be7805d880dbdafbd44b289b127" category="list-text">[[man_install3_step21] ノード 3 でネットブートを実行します。</block>
  <block id="060bac7551430a178937e2648b5887ad" category="cell">netboot\http://&lt;web_server_ip&gt;/&lt;path_to_webaccessible_directory&gt;/netboot/kernel`</block>
  <block id="00b4984c2d25fdcefc8d29921eef1f1e" category="cell">netboot\http://&lt;web_server_ip&gt;/&lt;path_to_webaccessible_directory&gt;/&lt;ontap_version&gt;_image.tgz`</block>
  <block id="59dc84b79b5b387630517d0425882b8b" category="paragraph">「 &lt;path_the_web-accessible_directory&gt; 」は、「 &lt;ONTAP_version&gt;_image.tgz 」をダウンロードした場所を指します <block ref="d7ca8bd1bdacba48998a89c59527e756" category="inline-link-macro-rx"></block> の項で、 netboot_ の準備を参照してください。</block>
  <block id="2fb52103bc9daf7b4aede017a96951c9" category="list-text">[man_install3_step22]] ブートメニューから、オプション * （ 7 ） Install new software * first を選択します。</block>
  <block id="69a0e067620a40fba4263752d3fe4568" category="paragraph">コントローラのアップグレードではなく、 ONTAP による環境の無停止アップグレードも記録されています。</block>
  <block id="f830f5c2c7020add65334fcbe428e442" category="admonition">新しいノードを希望するイメージに更新する場合は、必ずネットブートを使用してください。別の方法で新しいコントローラにイメージをインストールすると、正しいイメージがインストールされない場合があります。この問題環境はすべての ONTAP リリースに対応しています。</block>
  <block id="04099f33ed449c6b9e9de3b50608f5b9" category="list-text">[man_install3_step23]] 手順を続行するかどうかを確認するメッセージが表示されたら 'y`' と入力し ' パッケージのプロンプトが表示されたら ' 次の URL を入力します</block>
  <block id="3c0f763f2bc1dd7e6fadcfba8981f852" category="paragraph">http://&lt;web_server_ip&gt;/&lt;path_to_web-accessible_directory&gt;/&lt;ontap_version_image&gt;.tgz` にアクセスします</block>
  <block id="2c7541d49584476284eeeb476f886996" category="list-text">[[man_install3_step24]] 次の手順を実行します</block>
  <block id="f5344ffb10f5a3797c46c51d263a2247" category="list-text">[man_install3_step25]] '*(5) Maintenance mode boot を選択しますこれには '5` を入力し ' ブートを続行するように求められたら 'y' を入力します</block>
  <block id="785f077ce03eca259bde1ebc98236191" category="list-text">[[man_install3_step26]] 続行する前に、に進みます <block ref="fae618cfa140cbca52d057afef5df1da" category="inline-link-macro-rx"></block> ノードの FC ポートまたは UTA / UTA2 ポートに必要な変更を加えるため。</block>
  <block id="28d8bed0b221acc406520dd121da3607" category="paragraph">これらのセクションで推奨される変更を行ってからノードをリブートし、メンテナンスモードに切り替えます。</block>
  <block id="3c2b28e2fbf2a2223e837ab88d03f849" category="list-text">[[man_install3_step27]] node3 のシステム ID を確認します。</block>
  <block id="5f2c6daaf0c238ad93e5125dbf2761ac" category="admonition">コマンドを入力すると、「ディスクはありません」というメッセージが表示される場合があります。これはエラーメッセージではないため、手順を続行できます。</block>
  <block id="11856588314d0c959b2b916a938edde8" category="inline-link-macro">ルート以外のアグリゲートを node1 から node2 に再配置します。</block>
  <block id="5193fe09e1ceefb41d5d867b112b9d76" category="list-text">[man_install3_step28] 再割り当てするノードのスペア、ルートに属するディスク、およびでノード 2 に再配置されなかったルート以外のアグリゲート <block ref="b90d8347ded957c31748eee44116abad" category="inline-link-macro-rx"></block>。</block>
  <block id="e58f70cf5e99e435b7646dac5761bf14" category="paragraph">システムに共有ディスクがあるかどうかに応じて、適切な形式の「 disk reassign 」コマンドを入力します。</block>
  <block id="b7e4748ce69e686648ca756a108c4b9a" category="cell">ディスクタイプ</block>
  <block id="7dcd3c42056665a1fe2861837141a4ef" category="cell">実行するコマンド</block>
  <block id="0750281966aad85c85445c89d7c91b52" category="cell">「ディスクの再割り当て -s &lt;node1 の sysid&gt; -d &lt;node3 の sysid&gt; -p &lt;node2 の sysid&gt;` 」</block>
  <block id="4f477aa8d74177d31f1821bc7c80ca24" category="cell">ディスクを共有しない</block>
  <block id="8afa8f9cacfed8bdd6f0488284dc4065" category="cell">「ディスクの再割り当て -s &lt;node1 の sysid&gt; -d &lt;node3 の sysid&gt;`</block>
  <block id="8ebc8c8801836bd409313dd264bebb92" category="inline-link-macro">ノード 1 の情報を記録します</block>
  <block id="848124e1b504add6b8579f483956bfa5" category="paragraph">「 &lt;node1 _sysid&gt;` 」の値には、で取得した情報を使用します <block ref="111c70a978efb37ba3bd0ea564da1d79" category="inline-link-macro-rx"></block>。「 &lt;node3 sysid&gt;` 」の値を取得するには、「 sysconfig 」コマンドを使用します。</block>
  <block id="fa1b01822fe176dec2ddb8bb6b318a7d" category="paragraph">「 disk reassign 」コマンドは、「 &lt;node1 _sysid&gt; 」が現在の所有者であるディスクだけを再割り当てします。</block>
  <block id="41ba4da5f40ea13d5dbc91aee57574fa" category="list-text">[man_install3_step29]] 「 n` 」と入力します。</block>
  <block id="fa85c8699d7f56dacbb4e8faea6f7ca9" category="list-text">[man_install3_step30]] 「 y 」と入力します</block>
  <block id="3048e99df5c1d939bc99597cf7c39563" category="list-text">[man_install3_step31]] 「 y 」と入力します。</block>
  <block id="fae6f0fa0e0d1485407928519885a027" category="list-text">[[man_install3_step32]] 外付けディスクがあるシステムから、内蔵ディスクと外付けディスクをサポートするシステム（ AFF A800 システムなど）にアップグレードする場合は、 node1 アグリゲートを root として設定して、 node1 のルートアグリゲートからブートするようにします。</block>
  <block id="d3d32ef75ce9ff503846dd7cba71bf68" category="admonition">* 警告 * ：次の手順を記載された順序で実行する必要があります。正しく実行しないと、原因が停止したり、データが失われたりする可能性があります。</block>
  <block id="78eac47117b1548ba46bbe2c967c2d0e" category="list-text">必要に応じて、 node1 アグリゲートをオンラインにします。</block>
  <block id="166de6b414dfe6910615ee231f5b5ac9" category="paragraph">'aggr_online &lt;root_aggr_from_node1&gt;</block>
  <block id="ac66c3891b6bd6651ca36713f2cbc96d" category="list-text">node3 が元のルートアグリゲートからブートしないようにします。「 aggr offline &lt;root_aggr_on_node3 &gt;`</block>
  <block id="4b869d3d95b4e6c45358c7bc8e4b934b" category="paragraph">「 aggr options &lt;aggr_from_node1&gt; root 」のように指定します</block>
  <block id="b954307d2b22ae21f23dbb0d3021f158" category="list-text">[man_install3_step33]] コントローラとシャーシが 'ha' として構成されていることを確認します</block>
  <block id="87e6946315bfe910b90ed3288541cb11" category="paragraph">次に、 ha-config show コマンドの出力例を示します。</block>
  <block id="9ed2f003b53007950b273f820637f2f3" category="paragraph">システムは、 HA ペア構成かスタンドアロン構成かを PROM に記録します。状態は、スタンドアロンシステムまたは HA ペア内のすべてのコンポーネントで同じである必要があります。</block>
  <block id="915fe2ff566601b3b69119813a6a715c" category="paragraph">コントローラとシャーシが「 HA 」として構成されていない場合は、次のコマンドを使用して構成を修正します。</block>
  <block id="43a7c5c250e7fdd6688e153749ea1e66" category="list-text">[man_install3_step34]] ノード 3 のメールボックスを破棄します</block>
  <block id="8d299662551d8d2c41258f4f6d6c9a12" category="paragraph">コンソールに次のメッセージが表示されます。</block>
  <block id="675438e125383dfd4814c428aefc13d8" category="list-text">[man_install3_step35]] ローカルメールボックスを破棄することを確認するプロンプトで 'y' を入力します</block>
  <block id="0f364398a13cd3160c5a3eba4374e4ce" category="list-text">[[man_install3_step36]] メンテナンスモードを終了します。</block>
  <block id="6c2cda43f17004428fa50b03b8e373c3" category="list-text">[man_install3_step37]] node2 で、システムの日付、時刻、およびタイムゾーンを確認します。</block>
  <block id="dd26f958a5b55f32337b614d1f3ab0b4" category="list-text">[man_install3_step38]] ノード 3 で、ブート環境プロンプトで日付を確認します。</block>
  <block id="0c06e4208a8e928e9b4bef1d6977045b" category="list-text">[[man_install3_step39]] 必要に応じて、 node3 の日付を設定します。</block>
  <block id="837e654f683f43c3c5fa5a8cbc3e1758" category="list-text">[man_install3_step40]] ノード 3 で、ブート環境のプロンプトで時刻を確認します。</block>
  <block id="eddc7836dd13de8cd3248be302e5a1a2" category="list-text">[[man_install3_step41] 必要に応じて、 node3 に時間を設定します。</block>
  <block id="39556538db3e5f05fbb53219f4983f96" category="inline-xref">手順 28</block>
  <block id="7485a5597807044bfa9f5d885f51e65e" category="list-text">[[man_install3_step42]] パートナーシステム ID がで説明したとおりに正しく設定されていることを確認します <block ref="a332b57e87c8a775e38e07b999240874" category="inline-xref-macro-rx"></block> アン下の -p スイッチ：</block>
  <block id="ec135f98d38764e511e3c524db87080e" category="list-text">[[man_install3_step43] 必要に応じて、 node3 にパートナーシステム ID を設定します。</block>
  <block id="7cab439150d9019f1bfd1705f608418d" category="list-text">[man_install3_step44]] ブート環境プロンプトでブートメニューにアクセスします</block>
  <block id="09022876876a6198264f6a07698a4d4c" category="list-text">[man_install3_step45]] ブートメニューで ' プロンプトで '6` を入力して 'option *(6) Update flash from backup config* を選択します</block>
  <block id="e5dbae26747d85c8b1145f23fe152ba6" category="list-text">[[man_install3_step46]] プロンプトで「 y 」と入力します。</block>
  <block id="8a149c3025530503ca7711ed784cd091" category="paragraph">ブートが正常に続行され、システム ID の不一致を確認するよう求められます。</block>
  <block id="c818f07a4851d5ab8b1a806cff312e25" category="list-text">[[man_install3_step47]] 次の例に示すように、不一致を確認します。</block>
  <block id="fb74f9c51a3457e88ae16fbed6c6b978" category="paragraph">正常にブートする前に、ノードが 1 回限りのリブートを実行する可能性があります。</block>
  <block id="f52332ab232b64dcde0ca0ea781c1755" category="list-text">[[man_install3_step48]] node3 にログインします。</block>
  <block id="7544ac790dfd93708d405ed1581f027e" category="sidebar">ONTAP 9.8 以降を実行しているコントローラハードウェアをアップグレードするには、「 system controller replace 」コマンドを使用します</block>
  <block id="11e53cadb3f3ce7f81a0771ae2847cad" category="sidebar">ONTAP 9.8 以降を実行しているコントローラハードウェアを、「 system controller replace 」コマンドを使用してアップグレードします</block>
  <block id="abcb075e8014a215302582b99f190e3b" category="sidebar">「 system controller replace 」コマンドを使用して、 ONTAP 9.5 を実行するコントローラハードウェアを 9.7 にアップグレードします</block>
  <block id="830b2fbf979d4b0e6b8a05c44baa464f" category="sidebar">ONTAP 9.8 以降を実行しているコントローラハードウェアで、アグリゲートの再配置を使用して手動でアップグレードし</block>
  <block id="48619622a13bb2610110f65aed3c8a90" category="sidebar">ONTAP 9.7 以前を実行しているコントローラハードウェアで、アグリゲートの再配置を使用して手動でアップグレードします</block>
</blocks>