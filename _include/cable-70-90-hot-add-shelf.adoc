= 
:allow-uri-read: 


（内蔵シェルフに）ストレージを追加する必要がある場合は、AFF A70、AFF A90、またはAFF C80のHAペアにNS224シェルフを2台までホットアドできます。

.作業を開始する前に
* を確認しておく必要があります link:requirements-hot-add-shelf.html["ホットアドの要件とベストプラクティス"]。
* の該当する手順を完了しておく必要があります link:prepare-hot-add-shelf.html["準備-シェルフのホットアド"]。
* の説明に従って、シェルフを設置し、電源をオンにし、シェルフIDを設定しておく必要があります link:prepare-hot-add-shelf.html["ホットアド用のシェルフの設置"]。


.このタスクについて
* この手順では、HAペアに内蔵ストレージしか搭載されておらず（外付けシェルフは搭載されていない）、各コントローラに最大2台のシェルフと2台のRoCE対応I/Oモジュールをホットアドすることを前提としています。
* この手順では、次のホットアドシナリオについて説明します。
+
** 各コントローラにRoCE対応I/Oモジュールが1つ搭載されたHAペアに最初のシェルフをホットアドします。
** 各コントローラにRoCE対応I/Oモジュールが2つ搭載されたHAペアに最初のシェルフをホットアドします。
** 各コントローラにRoCE対応I/Oモジュールが2つ搭載されたHAペアに2台目のシェルフをホットアドします。




.手順
. 各コントローラモジュールのRoCE対応ポートのセット（RoCE対応I/Oモジュール×1）を1つ使用して1台のシェルフをホットアドする場合で、このシェルフがHAペア内で唯一のNS224シェルフである場合は、次の手順を実行します。
+
それ以外の場合は、次の手順に進みます。

+

NOTE: この手順では、RoCE対応I/Oモジュールがスロット11に取り付けられていることを前提としています。

+
.. シェルフ NSM A のポート e0a をコントローラ A のスロット 11 のポート A （ e11a ）にケーブル接続します。
.. シェルフ NSM A のポート e0b をコントローラ B のスロット 11 のポート b （ e11b ）にケーブル接続します。
.. シェルフ NSM B ポート e0a をコントローラ B のスロット 11 のポート A （ e11a ）にケーブル接続します。
.. シェルフ NSM B のポート e0b をコントローラ A のスロット 11 のポート b （ e11b ）にケーブル接続します。
+
次の図は、各コントローラモジュールで RoCE 対応 I/O モジュールを 1 つ使用した、 1 台のホットアドシェルフのケーブル接続を示しています。

+
image::../media/drw_ns224_vino_i_1shelf_1card_ieops-1639.svg[1台のシェルフと1台のIOモジュールを使用したAFF A70またはA90のケーブル接続]



. 各コントローラモジュールで、 RoCE 対応ポートのセット（ RoCE 対応 I/O モジュールを 2 つ）を使用してシェルフを 1 台または 2 台ホットアドする場合は、該当する手順を実行します。
+

NOTE: この手順では、RoCE対応I/Oモジュールがスロット11と8に取り付けられていることを前提としています。

+
[cols="1,3"]
|===
| シェルフ | ケーブル配線 


 a| 
シェルフ 1
 a| 
.. NSM Aのポートe0aをコントローラAのスロット11のポートA（e11a）にケーブル接続します。
.. NSM Aのポートe0bをコントローラBのスロット8のポートb（e8b）にケーブル接続します。
.. NSM Bのポートe0aをコントローラBのスロット11のポートA（e11a）にケーブル接続します。
.. NSM Bのポートe0bをコントローラAのスロット8のポートb（e8b）にケーブル接続します。
.. 2 台目のシェルフをホットアドする場合は、「シェルフ 2 」の手順を実行します。そうでない場合は、手順 3 に進みます。


次の図は、各コントローラモジュールで2つのRoCE対応I/Oモジュールを使用した、1台のホットアドシェルフのケーブル接続を示しています。

image::../media/drw_ns224_vino_i_1shelf_2cards_ieops-1640.svg[1台のシェルフと2台のIOモジュールを使用したAFF A70またはA90のケーブル接続]



 a| 
シェルフ 2
 a| 
.. NSM Aのポートe0aをコントローラAのスロット8のポートA（e8a）にケーブル接続します。
.. NSM Aのポートe0bをコントローラBのスロット11のポートb（e11b）にケーブル接続します。
.. NSM Bのポートe0aをコントローラBのスロット8のポートA（e8a）にケーブル接続します。
.. NSM Bのポートe0bをコントローラAのスロット11のポートb（e11b）にケーブル接続します。
.. 手順 3 に進みます。


次の図は、各コントローラモジュールで2つのRoCE対応I/Oモジュールを使用した2台のホットアドシェルフのケーブル接続を示しています。

image::../media/drw_ns224_vino_i_2shelves_2cards_ieops-1641.svg[2台のシェルフと2台のIOモジュールを搭載したAFF A70またはA90のケーブル接続]

|===
. ホットアドしたシェルフがを使用して正しくケーブル接続されていることを確認します https://mysupport.netapp.com/site/tools/tool-eula/activeiq-configadvisor["Active IQ Config Advisor"^]。
+
ケーブル接続エラーが発生した場合は、表示される対処方法に従ってください。



.次の手順
この手順の準備作業として自動ドライブ割り当てを無効にした場合は、ドライブ所有権を手動で割り当ててから、必要に応じて自動ドライブ割り当てを再度有効にする必要があります。にアクセスします。

それ以外の場合は、シェルフのホットアド手順は終了です。
