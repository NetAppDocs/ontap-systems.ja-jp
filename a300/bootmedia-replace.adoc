---
permalink: a300/bootmedia-replace.html 
sidebar: sidebar 
keywords: aff a300, replace the boot media 
summary: コントローラのブートメディアの場所を確認し、手順に従って交換する必要があります。 
---
= ブートメディアを交換してください - AFF A300
:icons: font
:imagesdir: ../media/


[role="lead"]
ブートメディアを交換するには、障害のあるコントローラモジュールを取り外し、交換用ブートメディアを取り付けて、ブートイメージを USB フラッシュドライブに転送する必要があります。



== 手順 1 ：コントローラモジュールを取り外す

コントローラ内部のコンポーネントにアクセスするには、まずコントローラモジュールをシステムから取り外し、続いてコントローラモジュールのカバーを外す必要があります。

. 接地対策がまだの場合は、自身で適切に実施します。
. ケーブルマネジメントデバイスに接続しているケーブルをまとめているフックとループストラップを緩め、システムケーブルと SFP をコントローラモジュールから外し（必要な場合）、どのケーブルが何に接続されていたかを記録します。
+
ケーブルはケーブルマネジメントデバイスに収めたままにします。これにより、ケーブルマネジメントデバイスを取り付け直すときに、ケーブルを整理する必要がありません。

. ケーブルマネジメントデバイスをコントローラモジュールの右側と左側から取り外し、脇に置きます。
+
image::../media/drw_32xx_cbl_mgmt_arm.png[DRW 32xx CBL mgmt arm （ DRW 32xx CBL 管理アーム]

. コントローラモジュールのカムハンドルの取り付けネジを緩めます。
+
image::../media/drw_8020_cam_handle_thumbscrew.png[DRW 8020 カムハンドルの取り付けネジ]

+
|===


 a| 
image:../media/legend_icon_01.png[""]
 a| 
取り付けネジ



 a| 
image:../media/legend_icon_02.png[""]
 a| 
カムハンドル

|===
. カムハンドルを下に引き、コントローラモジュールをシャーシから引き出します。
+
このとき、空いている手でコントローラモジュールの底面を支えてください。





== 手順 2 ：ブートメディアを交換する - AFF A300

コントローラのブートメディアの場所を確認し、手順に従って交換する必要があります。

. 接地対策がまだの場合は、自身で適切に実施します。
. 次の図またはコントローラモジュールの FRU マップを使用して、ブートメディアの場所を確認します。
+
image::../media/drw_rxl_boot_media.png[DRW rxl ブートメディア]

. ブートメディアケースの青いボタンを押してブートメディアをケースからリリースし、ブートメディアソケットからゆっくりと引き出します。
+

NOTE: ソケットやブートメディアが損傷する可能性があるため、ブートメディアをねじったり、真上に引き出したりしないでください。

. 交換用ブートメディアの端をブートメディアソケットに合わせ、ソケットにゆっくりと押し込みます。
. ブートメディアが正しい向きでソケットに完全に装着されたことを確認します。
+
必要に応じて、ブートメディアを取り外してソケットへの装着をやり直します。

. ブートメディアを押し下げて、ブートメディアケースの固定ボタンをはめ込みます。
. コントローラモジュールのカバーを閉じます。




== 手順 3 ：ブートイメージをブートメディアに転送します

イメージがインストールされた USB フラッシュドライブを使用して、交換用ブートメディアにシステムイメージをインストールできます。ただし、この手順の実行中に var ファイルシステムをリストアする必要があります。

* FAT32 にフォーマットされた、 4GB 以上の容量の USB フラッシュドライブが必要です。
* 障害のあるコントローラが実行していたバージョンの ONTAP イメージのコピー。該当するイメージは、ネットアップサポートサイトのダウンロードセクションからダウンロードできます
+
** NVE が有効な場合は、ダウンロードボタンの指示に従って、 NetApp Volume Encryption を使用してイメージをダウンロードします。
** NVE が有効になっていない場合は、ダウンロードボタンの指示に従って、 NetApp Volume Encryption なしでイメージをダウンロードします。


* HA ペアのシステムの場合は、ネットワーク接続が必要です。
* スタンドアロンシステムの場合はネットワーク接続は必要ありませんが、 var ファイルシステムをリストアしたときに追加のリブートを実行する必要があります。
+
.. コントローラモジュールの端をシャーシの開口部に合わせ、コントローラモジュールをシステムに半分までそっと押し込みます。
.. ケーブルマネジメントデバイスを再び取り付け、必要に応じてシステムにケーブルを再接続します。
+
ケーブルを再接続する際は、メディアコンバータ（ SFP ）も取り付け直してください（メディアコンバータを取り外した場合）。

.. USB フラッシュドライブをコントローラモジュールの USB スロットに挿入します。
+
USB フラッシュドライブは、 USB コンソールポートではなく、 USB デバイス用のラベルが付いたスロットに取り付けてください。

.. コントローラモジュールをシステムに最後まで押し込み、カムハンドルの位置が USB フラッシュドライブに干渉していないことを確認します。カムハンドルを強く押し込んでコントローラモジュールを装着し、カムハンドルを閉じ、取り付けネジを締めます。
+
コントローラは、シャーシに完全に取り付けられるとすぐにブートを開始します。

.. ブートを開始するときに Ctrl+C キーを押し、ブートプロセスを中断して LOADER プロンプトで停止します。「 Starting autoboot 」というメッセージが表示されたら、 Ctrl+C を押して中止します
+
このメッセージが表示されない場合は、 Ctrl+C キーを押し、メンテナンスモードでブートするオプションを選択してから、コントローラを停止して LOADER プロンプトを表示します。

.. シャーシ内にコントローラが 1 台しかないシステムの場合は、電源を再接続して電源装置の電源をオンにします。
+
システムがブートを開始し、 LOADER プロンプトで停止します。

.. LOADER プロンプトでネットワーク接続タイプを設定します。
+
*** DHCP を構成している場合： ifconfig e0a-auto
+

NOTE: 設定するターゲットポートは、正常なコントローラから障害コントローラへの通信に使用するポートで、 var ファイルシステムのリストア時にネットワーク接続で使用します。このコマンドでは e0M ポートを使用することもできます。

*** 手動接続を設定する場合は、「 ifconfig e0a-addr= filer_addr-mask= netmask -gw= gateway -dns= dns_addr-domain= dns_domain' 」のように入力します
+
**** filer_addr は、ストレージシステムの IP アドレスです。
**** netmask は、 HA パートナーに接続されている管理ネットワークのネットワークマスクです。
**** gateway は、ネットワークのゲートウェイです。
**** dns_addr は、ネットワーク上のネームサーバの IP アドレスです。
**** dns_domain は、 DNS ドメイン名です。
+
このオプションパラメータを使用する場合は、ネットブートサーバの URL に完全修飾ドメイン名を指定する必要はありません。必要なのはサーバのホスト名だけです。





+

NOTE: インターフェイスによっては、その他のパラメータが必要になる場合もあります。ファームウェア・プロンプトで「 help ifconfig 」と入力すると、詳細を確認できます。

.. コントローラがストレッチまたはファブリック接続の MetroCluster に含まれている場合は、 FC アダプタの構成をリストアする必要があります。
+
... 保守モードでブート： boot_ontap maint
... MetroCluster ポートをイニシエータとして設定します。 ucadmin modify -m fc -t initiator adapter_name _`
... 停止して保守モードに戻ります : 「 halt 」




+
変更はシステムのブート時に実装されます。


