---
permalink: a300/controller-replace-move-hardware.html 
sidebar: sidebar 
keywords: aff a300, move the controller module hardware 
summary: コントローラモジュールハードウェアを交換するには、障害のあるコントローラを取り外し、 FRU コンポーネントを交換用コントローラモジュールに移動し、交換用コントローラモジュールをシャーシに取り付けてから、システムをメンテナンスモードでブートする必要があります。 
---
= コントローラモジュールを交換してください - AFF A300
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
コントローラモジュールハードウェアを交換するには、障害のあるコントローラを取り外し、 FRU コンポーネントを交換用コントローラモジュールに移動し、交換用コントローラモジュールをシャーシに取り付けてから、システムをメンテナンスモードでブートする必要があります。



== 手順 1 ：コントローラモジュールを開く

コントローラモジュールを交換するには、最初に古いコントローラモジュールをシャーシから取り外す必要があります。

. 接地対策がまだの場合は、自身で適切に実施します。
. ケーブルマネジメントデバイスに接続しているケーブルをまとめているフックとループストラップを緩め、システムケーブルと SFP をコントローラモジュールから外し（必要な場合）、どのケーブルが何に接続されていたかを記録します。
+
ケーブルはケーブルマネジメントデバイスに収めたままにします。これにより、ケーブルマネジメントデバイスを取り付け直すときに、ケーブルを整理する必要がありません。

. ケーブルマネジメントデバイスをコントローラモジュールの右側と左側から取り外し、脇に置きます。
+
image::../media/drw_32xx_cbl_mgmt_arm.png[ケーブルマネジメントアームの取り外し[]]

. ケーブルを外したあとで SFP モジュールをシステムに残した場合は、それらを新しいコントローラモジュールに移動します。
. コントローラモジュールのカムハンドルの取り付けネジを緩めます。
+
image::../media/drw_8020_cam_handle_thumbscrew.png[取り付けネジを緩めてカムハンドルを開く]

+
|===


 a| 
image:../media/legend_icon_01.png["番号1"]
| 取り付けネジ 


 a| 
image:../media/legend_icon_02.png["番号2"]
 a| 
カムハンドル

|===
. カムハンドルを下に引き、コントローラモジュールをシャーシから引き出します。
+
このとき、空いている手でコントローラモジュールの底面を支えてください。





== 手順 2 ：ブートデバイスを移動します

ブートメディアの場所を確認し、手順に従って古いコントローラからブートメディアを取り外して、新しいコントローラに挿入する必要があります。

. 次の図またはコントローラモジュールの FRU マップを使用して、ブートメディアの場所を確認します。
+
image::../media/drw_rxl_boot_media.png[フウトメテイアノサクシヨ]

. ブートメディアケースの青いボタンを押してブートメディアをケースからリリースし、ブートメディアソケットからゆっくりと引き出します。
+

NOTE: ソケットやブートメディアが損傷する可能性があるため、ブートメディアをねじったり、真上に引き出したりしないでください。

. 新しいコントローラモジュールにブートメディアを移し、ブートメディアの端をソケットケースに合わせ、ソケットにゆっくりと押し込みます。
. ブートメディアが正しい向きでソケットに完全に装着されたことを確認します。
+
必要に応じて、ブートメディアを取り外してソケットへの装着をやり直します。

. ブートメディアを押し下げて、ブートメディアケースの固定ボタンをはめ込みます。




== 手順 3 ： NVMEM バッテリを移動します

NVMEM バッテリを古いコントローラモジュールから新しいコントローラモジュールに移動するには、特定の手順を実行する必要があります。

. NVMEM の LED を確認します。
+
** HA 構成のシステムの場合は、次の手順に進みます。
** システムがスタンドアロン構成の場合は、コントローラモジュールをクリーンシャットダウンし、 NV アイコンのある NVRAM の LED を確認します。
+
image::../media/drw_hw_nvram_icon.png[NV LED]

+

NOTE: システムを停止すると、内容がフラッシュメモリにデステージされている間、 NVRAM の LED が点滅します。デステージが完了すると LED は消灯します。

+
*** クリーンシャットダウンせずに電源が失われた場合は、 NVMEM の LED が点滅し、デステージが完了すると消灯します。
*** LED が点灯し、電源もオンになっている場合、書き込み前のデータは NVMEM に格納されます。
+
一般にこの状況は、 ONTAP が正常にブートしたあとの異常シャットダウン中に発生します。





. CPU エアダクトを開き、 NVMEM バッテリの場所を確認します。
+
image::../media/drw_rxl_nvmem_battery.png[NVMEM バッテリの交換]

+
|===


 a| 
image:../media/legend_icon_01.png["番号1"]
| バッテリロックタブ 


 a| 
image:../media/legend_icon_02.png["番号2"]
 a| 
NVMEM バッテリパック

|===
. バッテリをつかんで「 PUSH 」と書かれた青色の固定ツメを押し、バッテリを持ち上げてホルダーとコントローラモジュールから取り出します。
. バッテリをコントローラモジュールから取り外し、脇に置きます。




== 手順 4 ： DIMM を移動します

DIMM を移動するには、古いコントローラの DIMM の場所を確認し、 DIMM を交換用コントローラに移動して、特定の手順を実行します。

. コントローラモジュールで DIMM の場所を確認します。
. DIMM を交換用コントローラモジュールに正しい向きで挿入できるように、ソケット内の DIMM の向きをメモします。
. DIMM の両側にある 2 つのツメをゆっくり押し開いて DIMM をスロットから外し、そのままスライドさせてスロットから取り出します。
+

NOTE: DIMM 回路基板のコンポーネントに力が加わらないように、 DIMM の両端を慎重に持ちます。

+
DIMM の数と配置は、システムのモデルによって異なります。

+
次の図は、システム DIMM の場所を示しています。

+
image::../media/drw_rxl_dimms.png[DIMMの交換]

. DIMM を取り付けるスロットの位置を確認します。
. コネクタにある DIMM のツメが開いた状態になっていることを確認し、 DIMM をスロットに対して垂直に挿入します。
+
DIMM のスロットへの挿入にはある程度の力が必要です。簡単に挿入できない場合は、 DIMM をスロットに正しく合わせてから再度挿入してください。

+

NOTE: DIMM がスロットにまっすぐ差し込まれていることを目で確認してください。

. 残りの DIMM についても、上記の手順を繰り返します。
. NVMEM バッテリを交換用コントローラモジュールに移動します。
. バッテリホルダーのタブをコントローラモジュール側のノッチに合わせ、カチッと音がして所定の位置に収まるまでバッテリケースをそっと押し下げます。




== 手順 5 ： PCIe カードを移動します

PCIe カードを移動するには、古いコントローラの PCIe カードの場所を確認し、交換用コントローラに移動して、特定の手順を実行します。

PCIe カードを古いコントローラモジュールから新しいコントローラモジュールの対応するスロットに直接移動できるように、新しいコントローラモジュールを準備しておく必要があります。

. コントローラモジュールのサイドパネルにある取り付けネジを緩めます。
. コントローラモジュールからサイドパネルを取り外します。
+
image::../media/drw_rxl_pcie.png[PCIeカードの取り外しまたは取り付け]

+
|===


 a| 
image:../media/legend_icon_01.png["番号1"]



 a| 
サイドパネル



 a| 
image:../media/legend_icon_02.png["番号2"]



 a| 
PCIe カード

|===
. 古いコントローラモジュールから PCIe カードを取り外し、脇に置きます。
+
PCIe カードが取り付けられていたスロットを記録しておいてください。

. 古いコントローラモジュールの残りの PCIe カードに対して前述の手順を繰り返します。
. 必要に応じて、新しいコントローラモジュールのサイドパネルを開き、 PCIe カードフィラープレートをスライドさせて外し、 PCIe カードを慎重に取り付けます。
+
カードをソケットに装着するときは、カードをスロットに合わせ、均等に力を加えてください。カードはスロットにまっすぐ差し込む必要があります。

. 脇に置いた残りの PCIe カードに対して前述の手順を繰り返します。
. サイドパネルを閉じ、取り付けネジを締めます。




== 手順 6 ：コントローラを取り付ける

古いコントローラモジュールのコンポーネントを新しいコントローラモジュールに取り付けたら、新しいコントローラモジュールをシステムシャーシに取り付けてオペレーティングシステムをブートする必要があります。

2 台のコントローラモジュールを同じシャーシに搭載する HA ペアでは、シャーシへの設置が完了すると同時にリブートが試行されるため、コントローラモジュールの取り付け順序が特に重要です。


NOTE: システムのブート時にシステムファームウェアが更新されることがあります。このプロセスは中止しないでください。手順ではブートプロセスを中断する必要があります。通常はプロンプトが表示されたあとにいつでも中断できます。ただし、システムがブート時にシステムファームウェアの更新を開始した場合は、更新が完了してからブートプロセスを中断する必要があります。

. 接地対策がまだの場合は、自身で適切に実施します。
. CPU のエアダクトを閉じていない場合は、閉じます。
. コントローラモジュールの端をシャーシの開口部に合わせ、コントローラモジュールをシステムに半分までそっと押し込みます。
+

NOTE: 指示があるまでコントローラモジュールをシャーシに完全に挿入しないでください。

. システムにアクセスして以降のセクションのタスクを実行できるように、管理ポートとコンソールポートのみをケーブル接続します。
+

NOTE: 残りのケーブルは、この手順の後半でコントローラモジュールに接続します。

. コントローラモジュールの再取り付けを完了します。
+
[cols="1,2"]
|===
| システムの構成 | 実行する手順 


 a| 
HA ペア
 a| 
 The controller module begins to boot as soon as it is fully seated in the chassis. Be prepared to interrupt the boot process.
.. カムハンドルを開き、コントローラモジュールをミッドプレーンまでしっかりと押し込んで完全に装着し、カムハンドルをロック位置まで閉じます。コントローラモジュール背面のカムハンドルの取り付けネジを締めます。
+

NOTE: コネクタの破損を防ぐため、コントローラモジュールをスライドしてシャーシに挿入する際に力を入れすぎないでください。

+
コントローラは、シャーシに装着されるとすぐにブートを開始します。

.. ケーブルマネジメントデバイスをまだ取り付けていない場合は、取り付け直します。
.. ケーブルマネジメントデバイスに接続されているケーブルをフックとループストラップでまとめます。
.. 「 Press Ctrl-C for Boot Menu 」というメッセージが表示されたら、 Ctrl+C キーを押してブートプロセスを中断します。
+

NOTE: プロンプトを見逃してコントローラモジュールが ONTAP を起動した場合は、「 halt 」と入力し、 LOADER プロンプトで「 boot_ontap 」と入力し、プロンプトが表示されたら「 Ctrl+C 」を押して、メンテナンスモードでブートします。

.. 表示されたメニューからメンテナンスモードでブートするオプションを選択します。




 a| 
スタンドアロン構成です
 a| 
.. カムハンドルを開き、コントローラモジュールをミッドプレーンまでしっかりと押し込んで完全に装着し、カムハンドルをロック位置まで閉じます。コントローラモジュール背面のカムハンドルの取り付けネジを締めます。
+

NOTE: コネクタの破損を防ぐため、コントローラモジュールをスライドしてシャーシに挿入する際に力を入れすぎないでください。

.. ケーブルマネジメントデバイスをまだ取り付けていない場合は、取り付け直します。
.. ケーブルマネジメントデバイスに接続されているケーブルをフックとループストラップでまとめます。
.. 電源装置と電源に電源ケーブルを再接続し、電源を入れてブートプロセスを開始し、「 Press Ctrl-C for Boot Menu 」 (Boot Menu を表示するには Ctrl+C を押してください ) というメッセージが表示されたら「 Ctrl-C 」を押してください。
+

NOTE: プロンプトを見逃してコントローラモジュールが ONTAP を起動した場合は、「 halt 」と入力し、 LOADER プロンプトで「 boot_ontap 」と入力し、プロンプトが表示されたら「 Ctrl+C 」を押して、メンテナンスモードでブートします。

.. ブートメニューからメンテナンスモードのオプションを選択します。


|===
+
* 重要： * ブートプロセス中に、次のプロンプトが表示されることがあります。

+
** システム ID が一致していないためにシステム ID の上書きを求める警告プロンプト。
** HA 構成でメンテナンスモードに切り替えたときに表示される、正常なコントローラが停止したままであることの確認を求めるプロンプト。これらのプロンプトには「 y 」と入力できます。



