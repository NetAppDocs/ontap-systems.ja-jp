---
permalink: a800/controller-replace-move-hardware.html 
sidebar: sidebar 
keywords: aff a800, move the controller module hardware 
summary: コントローラモジュールを交換するには、障害のあるコントローラを取り外し、 FRU コンポーネントを交換用コントローラモジュールに移動し、交換用コントローラモジュールをシャーシに取り付けてから、システムをメンテナンスモードでブートする必要があります。 
---
= コントローラモジュールハードウェア AFF A800 を交換してください
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ハードウェア障害が発生した場合は、 AFF A800システムのコントローラを交換してください。交換プロセスには、障害のあるコントローラーの取り外し、コンポーネントの交換用コントローラーへの移動、交換用コントローラーのインストール、および再起動が含まれます。



== 手順 1 ：コントローラモジュールを取り外す

コントローラモジュールを交換する場合やコントローラモジュール内部のコンポーネントを交換する場合は、コントローラモジュールをシャーシから取り外す必要があります。

.手順
. 接地対策がまだの場合は、自身で適切に実施します。
. シャーシ内のすべてのドライブがミッドプレーンにしっかりと装着されていることを確認します。そのためには、両手の親指を使って、プラスの停止を感じるまで各ドライブを押します。
+
.ビデオ - ドライブの座席の確認
video::2c46e4af-2c21-4f12-b065-b38b003d0ea2[panopto]
+
image::../media/drw_a800_drive_seated_IEOPS-960.svg[ドライブを装着する]

. システム ステータスに基づいてコントローラー ドライブを確認します。
+
.. 正常なコントローラで、アクティブな RAID グループが劣化状態、障害状態、またはその両方にあるかどうかを確認します。
+
[source, cli]
----
storage aggregate show -raidstatus !*normal*
----
+
*** コマンドが返された場合 `There are no entries matching your query.`続ける<<Check-missing-drives,次のサブステップに進み、不足しているドライブを確認します。>>。
*** コマンドが他の結果を返す場合は、両方のコントローラからAutoSupportデータを収集し、 NetAppサポートに連絡してさらにサポートを受けてください。
+
[source, cli]
----
system node autosupport invoke -node * -type all -message '<message_name>'
----


.. [[Check-missing-drives]]ファイルシステムまたはスペアドライブの両方で、不足しているドライブの問題がないか確認します。
+
[source, cli]
----
event log show -severity * -node * -message-name *disk.missing*
----
+
*** コマンドが返された場合 `There are no entries matching your query.`続ける<<remove-power-cables,次のステップに進む>>。
*** コマンドが他の結果を返す場合は、両方のコントローラからAutoSupportデータを収集し、 NetAppサポートに連絡してさらにサポートを受けてください。
+
[source, cli]
----
system node autosupport invoke -node * -type all -message '<message_name>'
----




. [[remove-power-cables]]電源ケーブル固定具を取り外し、電源装置からケーブルを抜きます。
. ケーブル管理デバイスのフックとループのストラップを緩めます。システム ケーブルと SFP/QSFP モジュール (必要な場合) をコントローラー モジュールから取り外します。各ケーブルの位置をメモします。
+
ケーブルはケーブルマネジメントデバイスに収めたままにします。これにより、ケーブルマネジメントデバイスを取り付け直すときに、ケーブルを整理する必要がありません。

. ケーブルマネジメントデバイスをコントローラモジュールから取り外し、脇に置きます。
. 両方のロックラッチを押し下げ、両方のラッチを同時に下方向に回転させます。
+
コントローラモジュールがシャーシから少し引き出されます。

+
image::../media/drw_a800_pcm_remove.png[コントローラモジュールの取り外し]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["番号1"]
 a| 
固定ラッチ



 a| 
image:../media/icon_round_2.png["番号2"]
 a| 
ロッキングピン

|===
. コントローラモジュールをシャーシから引き出し、安定した平らな場所に置きます。
+
コントローラ モジュールの下部を支えながら、シャーシからスライドさせて取り出します。





== 手順 2 ：電源装置を移動します

電源装置を交換用コントローラー モジュールに移動します。

.手順
. 固定ツメを押しながらカムハンドルを回転させて、コントローラモジュールから電源装置を引き出せるようにします。
+

CAUTION: 電源装置は奥行きがないので、コントローラモジュールから突然落下して負傷することがないように、取り外すときは必ず両手で支えてください。

+
image::../media/drw_a800_replace_psu.svg[電源装置の取り外しまたは交換]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["番号1"]
 a| 
電源装置の固定ツメ（青）



 a| 
image:../media/icon_round_2.png["番号2"]
 a| 
電源装置

|===
. 電源装置を新しいコントローラモジュールに移して取り付けます。
. 電源装置の端を両手で支えながらコントローラモジュールの開口部に合わせ、固定ツメがカチッと音を立てて所定の位置に収まるまで電源装置をコントローラモジュールにそっと押し込みます。
+
電源装置は、内部コネクタに正しく差し込まれ、所定の位置にロックされているだけです。

+

NOTE: 内部コネクタの破損を防ぐため、電源装置をシステムに挿入する際に力を入れすぎないようにしてください。





== 手順 3 ：ファンを移動します

ファン モジュールを交換用コントローラー モジュールに移動します。

.手順
. ファンモジュールの側面にある固定ツメをつまみ、ファンモジュールを持ち上げてコントローラモジュールから取り出します。
+
image::../media/drw_a800_replace_fan.png[ファンを取り外します。]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["番号1"]
 a| 
ファンの固定ツメ



 a| 
image:../media/icon_round_2.png["番号2"]
 a| 
ファンモジュール

|===
. ファンモジュールを交換用コントローラモジュールに移動し、ファンモジュールの端をコントローラモジュールの開口部に合わせて取り付けます。次に、ロックラッチが所定の位置にカチッと収まるまでファンモジュールをコントローラモジュールにスライドさせます。
. 残りのファンモジュールに対して上記の手順を繰り返します。




== 手順 4 ： NVDIMM バッテリを移動します

NVDIMMバッテリを交換用コントローラ モジュールに移動します。

.手順
. エアダクトカバーを開き、ライザー内で NVDIMM バッテリの場所を確認します。
+
image::../media/drw_a800_nvdimm_battery_replace.png[NVDIMMバッテリを交換]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["番号1"]
 a| 
エアダクトライザー



 a| 
image:../media/icon_round_2.png["番号2"]
 a| 
NVDIMM バッテリプラグ



 a| 
image:../media/icon_round_3.png["番号3"]
 a| 
NVDIMM バッテリパック

|===
+
* 注意：システムを停止すると、内容がフラッシュメモリにデステージされている間、 NVDIMM バッテリ制御ボードの LED が点滅します。デステージが完了すると LED は消灯します。

. バッテリプラグの場所を確認し、バッテリプラグ前面のクリップを押してプラグをソケットから外し、バッテリケーブルをソケットから抜きます。
. バッテリを持ち上げてエアダクトとコントローラモジュールから取り出します。
. バッテリパックを交換用コントローラモジュールに移し、 NVDIMM エアダクトに取り付けます。
+
.. バッテリパックをスロットに挿入し、バッテリパックをしっかりと押し下げて所定の位置に固定します。
.. バッテリプラグをライザーソケットに接続し、プラグが所定の位置に固定されたことを確認します。






== 手順 5 ： PCIe ライザーを取り外します

障害のあるコントローラー モジュールから PCIe ライザーを取り外します。

.手順
. PCIe ライザーをコントローラモジュールから取り外します。
+
.. PCIe カード内の SFP モジュールまたは QSFP モジュールを取り外します。
.. ライザーの左側にあるライザーロックラッチをファンモジュールの方に引き上げます。
+
ライザーがコントローラモジュールからわずかに持ち上がります。

.. ライザーを持ち上げ、ファンの方に動かしてライザーの金属板の縁がコントローラモジュールの端に接触しないようにします。次に、ライザーを持ち上げてコントローラモジュールから取り外し、安定した平らな場所に置きます。
+
image::../media/drw_a800_riser_2_3_remove.png[ライザー2と3の取り外し]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["番号1"]
 a| 
エアダクト



 a| 
image:../media/icon_round_2.png["番号2"]
 a| 
ライザー 1 （左）、 2 （中央）、 3 （右）のロックラッチ

|===


. 障害のあるコントローラモジュールの残りのライザーに対して前述の手順を繰り返します。
. 交換用コントローラの空のライザーについても同じ手順を繰り返し、ライザーを取り外します。




== 手順 6 ：システム DIMM を移動します

システム DIMM を交換用コントローラー モジュールに移動します。

.手順
. DIMM を交換用コントローラモジュールに正しい向きで挿入できるように、ソケット内の DIMM の向きをメモします。
. DIMM の両側にある 2 つのツメをゆっくり押し開いて DIMM をスロットから外し、そのままスライドさせてスロットから取り出します。
+

NOTE: DIMM 回路基板のコンポーネントに力が加わらないように、 DIMM の両端を慎重に持ちます。

. DIMM を取り付けるスロットの位置を確認します。
. DIMM をスロットに対して垂直に挿入します。
+
DIMM のスロットへの挿入にはある程度の力が必要です。簡単に挿入できない場合は、 DIMM をスロットに正しく合わせてから再度挿入してください。

+

NOTE: DIMM がスロットにまっすぐ差し込まれていることを目で確認してください。

. DIMM の両端のノッチにツメがかかるまで、 DIMM の上部を慎重にしっかり押し込みます。
. 残りの DIMM についても、上記の手順を繰り返します。




== 手順 7 ： NVDIMM を移動します

NVDIMMS を交換用コントローラー モジュールに移動します。

.手順
. コントローラモジュールで NVDIMM の場所を確認します。
+
image::../media/drw_a800_no_risers_nvdimm_move.svg[NVDIMMの移動]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["番号1"]
 a| 
エアダクト



 a| 
image:../media/icon_round_2.png["番号2"]
 a| 
NVDIMM

|===
. NVDIMM を交換用コントローラモジュールに正しい向きで挿入できるように、ソケット内の NVDIMM の向きをメモします。
. NVDIMM の両側にある 2 つのツメをゆっくり押し開いて NVDIMM をスロットから外し、そのままスライドさせてソケットから取り出し、脇に置きます。
+

NOTE: NVDIMM 回路基板のコンポーネントに力が加わらないように、 NVDIMM の両端を慎重に持ちます。

. NVDIMM を取り付けるスロットの場所を確認します。
. NVDIMM をスロットに対して垂直に挿入します。
+
NVDIMM のスロットへの挿入にはある程度の力が必要です。簡単に挿入できない場合は、 NVDIMM をスロットに正しく合わせてから再度挿入してください。

+

NOTE: NVDIMM がスロットにまっすぐ差し込まれていることを目で確認してください。

. NVDIMM の両端のノッチにツメがかかるまで、 NVDIMM の上部を慎重にしっかり押し込みます。
. 上記の手順を繰り返して、もう一方の NVDIMM を移動します。




== 手順 8 ：ブートメディアを移動します

ブート メディアを交換用コントローラー モジュールに移動します。

.手順
. ライザー 3 の下にあるブート メディアを見つけます。
+
image::../media/drw_a800_pcm_replace_only_boot_media.png[ブートメディアを取り外します。]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["番号1"]
 a| 
エアダクト



 a| 
image:../media/icon_round_2.png["番号2"]
 a| 
ライザー 3



 a| 
image:../media/icon_round_3.png["番号3"]
 a| 
No.1 プラスドライバ



 a| 
image:../media/icon_round_4.png["番号4"]
 a| 
ブートメディアのネジ



 a| 
image:../media/icon_round_5.png["番号5"]
 a| 
ブートメディア

|===
. コントローラモジュールからブートメディアを取り外します。
+
.. ブートメディアを固定しているネジを No.1 プラスドライバを使用して外し、ネジを安全な場所に置きます。
.. ブートメディアの両側を持ってゆっくりと回し、ソケットからまっすぐに引き出して脇に置きます。


. 新しいコントローラモジュールにブートメディアを移して取り付けます。
+
.. ブートメディアの端をソケットケースに合わせ、ソケットに対して垂直にゆっくりと押し込みます。
.. ブートメディアをマザーボードの方に回転させます。
.. ネジでブートメディアをマザーボードに固定します。
+
ネジを締め付けすぎないでください。ブートメディアが破損する可能性があります。







== 手順 9 ： PCIe ライザーを取り付けます

交換用コントローラー モジュールにライザーを取り付けます。

.手順
. 交換用コントローラモジュールにライザーを取り付けます。
+
.. ライザーの縁をコントローラモジュールの金属板の下側に合わせます。
.. コントローラモジュールのピンにライザーを合わせ、コントローラモジュールに差し込みます。
.. ロックラッチを下に動かして、ロックされるまでクリックします。
+
ロックされたロックラッチはライザー上部と水平になり、ライザーがコントローラモジュールに垂直に装着されます。

.. PCIe カードから取り外したすべての SFP モジュールまたは QSFP モジュールを再度取り付けます。


. 残りの PCIe ライザーに対して前述の手順を繰り返します。




== 手順 10 ：コントローラモジュールを取り付ける

コントローラモジュールを再度取り付けてリブートします。

.手順
. コントローラモジュールの端をシャーシの開口部に合わせ、コントローラモジュールをシステムに半分までそっと押し込みます。
+

NOTE: 指示があるまでコントローラモジュールをシャーシに完全に挿入しないでください。

. 必要に応じてシステムにケーブルを再接続します。
+
光ファイバケーブルを使用する場合は、メディアコンバータ（ QSFP または SFP ）を取り付け直してください（取り外した場合）。

. コントローラモジュールの再取り付けを完了します。
+
.. コントローラモジュールをシャーシに挿入し、ミッドプレーンまでしっかりと押し込んで完全に装着します。
+
コントローラモジュールが完全に装着されると、ロックラッチが上がります。

+

NOTE: コネクタの破損を防ぐため、コントローラモジュールをスライドしてシャーシに挿入する際に力を入れすぎないでください。

.. ロックラッチを上に回転させてロックピンが外れるように傾け、ロックされるまで下げます。
.. 電源装置に電源コードを接続し、電源ケーブルロックカラーを再度取り付けてから、電源装置を電源に接続します。
+
電源が復旧するとすぐにコントローラモジュールがブートを開始します。ブートプロセスを中断する準備をします。

.. ケーブルマネジメントデバイスをまだ取り付けていない場合は、取り付け直します。


. 障害コントローラのストレージをギブバックして、障害コントローラを通常動作に戻します。
+
`storage failover giveback -ofnode _impaired_node_name_`です。

. 自動ギブバックを無効にした場合は、再度有効にします。
+
`storage failover modify -node local -auto-giveback true`です。

. AutoSupportが有効になっている場合は、ケースの自動作成をリストアまたは抑制解除します。
+
`system node autosupport invoke -node * -type all -message MAINT=END`です。



.次の手順
故障したA800コントローラーを交換した後は、link:controller-replace-system-config-restore-and-verify.html["システム設定の復元"]
