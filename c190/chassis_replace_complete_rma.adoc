---
permalink: c190/chassis-replace-complete-rma.html 
sidebar: sidebar 
keywords: aff c190, verify and set HA state, run diagnostics 
summary: シャーシの HA 状態を確認し、システムレベルの診断を実行する必要があります。 
---
= 構成をリストアおよび検証します。 AFF C190
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
シャーシの HA 状態を確認し、システムレベルの診断を実行する必要があります。



== 手順 1 ：シャーシの HA 状態を確認して設定します

シャーシの HA 状態を確認し、必要に応じてシステム構成に合わせて更新する必要があります。

. メンテナンスモードで、いずれかのコントローラモジュールでローカルのコントローラモジュールとシャーシの HA 状態を表示します。
+
'*ha-config show*

+
HA 状態はすべてのコンポーネントで同じになっているはずです。

. 表示されたシャーシのシステム状態がシステム構成と一致しない場合は、次の手順を実行します。
+
.. シャーシの HA 状態を設定します。
+
'*ha-config modify chassis_ha-state_*

+
`_ha-state_` の値は次のいずれかになります

+
*** 「 HA 」
*** 「 non-ha 」


.. 設定が変更されたことを確認します。
+
'*ha-config show*



. システムの残りのケーブルをまだ再接続していない場合は、ケーブルを再接続します。
. 次の手順は、システム構成によって異なります。
+
[cols="1,2"]
|===
| システムの構成 | 作業 


 a| 
スタンドアロン構成です
 a| 
.. メンテナンスモードを終了します。
+
*halt *`

.. に進みます link:chassis-replace-move-hardware.html["交換プロセスを完了します"]。




 a| 
2 台目のコントローラモジュールとの HA ペア
 a| 
保守モードを終了します :`*halt *`

LOADER プロンプトが表示されます。

|===




== 手順 2 ：システムレベルの診断を実行します

新しいシャーシを設置したら、インターコネクト診断を実行する必要があります。

システムレベルの診断を開始するには、システムに LOADER プロンプトが表示されている必要があります。

診断手順のコマンドは、すべてコンポーネントを交換するコントローラから実行します。

. 作業をするコントローラに LOADER プロンプトが表示されていない場合は、次の手順を実行します。
+
.. 表示されたメニューからメンテナンスモードオプションを選択します。
.. コントローラがメンテナンスモードでブートしたら、コントローラを停止します。
+
*halt *`

+
コマンドを問題したら、システムが LOADER プロンプトで停止するまで待ちます。

+

NOTE: 起動プロセス中に 'y' をプロンプトに安全に応答できます



. HA 構成の場合は、 2 台目のコントローラで同じ手順を繰り返します。
+

NOTE: インターコネクトテストを実行するには、両方のコントローラをメンテナンスモードにする必要があります。

. LOADER プロンプトで、システムレベルの診断用に特別に設計されたドライバにアクセスします。
+
'*boot_diags*

+
ブート・プロセス中に 'Maintenance] モードのプロンプト（ *> ）が表示されるまで 'y とプロンプトを入力しても安全です

. メンテナンスモードのプロンプトからインターコネクト診断テストを有効にします。
+
*sldiag device modify -dev interconnect -sel enable *

+
インターコネクトテストはデフォルトでは無効になっており、実行するには有効にする必要があります。

. メンテナンスモードのプロンプトからインターコネクト診断テストを実行します。
+
*sldiag デバイスの run-dev 相互接続 *

+
インターコネクトテストは 1 台のコントローラからだけ実行します。

. シャーシの交換が原因でハードウェアの問題が発生していないことを確認します。
+
*sldiag デバイス・ステータス - dev interconnect -long-state failed*

+
テストに失敗した場合は、プロンプトに戻ります。失敗した場合は、そのステータスがすべて表示されます。

. 前述の手順の結果に基づいて、次に進みます。
+
[cols="1,2"]
|===
| システムレベルの診断のテスト結果 | 作業 


 a| 
は失敗なしで完了しました
 a| 
.. ステータスログを消去します。
+
*sldiag デバイスの clearstatus *

.. ログが消去されたことを確認します。
+
'*sldiag デバイスのステータス *

+
次のデフォルトの応答が表示されます。

+
[listing]
----
SLDIAG: No log messages are present.
----
.. 両方のコントローラでメンテナンスモードを終了します。
+
*halt *`

+
LOADER プロンプトが表示されます。

+

NOTE: 続行する前に、両方のコントローラでメンテナンスモードを終了する必要があります。

.. 両方のコントローラで LOADER プロンプトに次のコマンドを入力します。
+
「 * bye * 」と入力します

.. コントローラを通常動作に戻します。


|===
+
[cols="1,2"]
|===
| ONTAP を実行しているシステムの構成 | 作業 


 a| 
2 ノードのクラスタです
 a| 
問題コマンド

'*node::> cluster ha modify - configured true *

*node::> storage failover modify -node node0 -enabled true *



 a| 
3 ノード以上のクラスタ
 a| 
問題コマンド：

*node::> storage failover modify -node node0 -enabled true *



 a| 
スタンドアロン構成の場合
 a| 
このタスクにはこれ以上の手順はありません。これで、システムレベルの診断が完了しました。



 a| 
テストが失敗しました
 a| 
問題の原因を特定します

.. メンテナンスモードを終了します。
+
*halt *`

.. クリーンシャットダウンを実行し、電源装置の接続を解除します。
.. システムレベルの診断を実行するための考慮事項をすべて確認するとともに、ケーブルがしっかりと接続されているか、ハードウェアコンポーネントがストレージシステムに適切に取り付けられているかを確認します。
.. 電源装置を再接続し、ストレージシステムの電源をオンにします。
.. システムレベルの診断テストを再実行します。


|===




== 手順 3 ：障害が発生したパーツをネットアップに返却する

障害のある部品は、キットに付属する RMA 指示書に従ってネットアップに返却してください。を参照してください https://mysupport.netapp.com/site/info/rma["パーツの返品と交換"] 詳細については、を参照してください。
