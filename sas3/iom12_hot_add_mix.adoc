---
permalink: sas3/iom12-hot-add-mix.html 
sidebar: sidebar 
keywords: additional, storage, hot-add, iom12, shelves, shelf, sas, shelves, shelf, module, iom6, mix, stack, hot-add iom12 shelves to a stack of iom6 shelves, iom12b 
summary: 追加のストレージが必要な場合は、IOM12 / IOM12Bシェルフ（IOM12 / IOM12Bモジュールを搭載したSASシェルフ）をIOM6シェルフ（IOM6モジュールを搭載したSASシェルフ）のスタックにホットアドできます。つまり、スタックを混在させることができます。 
---
= IOM12 / IOM12BシェルフをIOM6シェルフのスタックにホットアドします
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
追加のストレージが必要な場合は、IOM12 / IOM12Bシェルフ（IOM12 / IOM12Bモジュールを搭載したSASシェルフ）をIOM6シェルフ（IOM6モジュールを搭載したSASシェルフ）のスタックにホットアドできます。つまり、スタックを混在させることができます。



== ホットアドの要件

[role="lead"]
HAペア、シングルコントローラ、またはストレッチMetroCluster 構成（システム）が、IOM12 / IOM12BシェルフをIOM6シェルフのスタックにホットアドする際の一定の要件を満たしている必要があります。


NOTE: ブリッジ接続 MetroCluster の設定については、を参照してください <<ブリッジ接続型 MetroCluster 構成のホットアドの要件>>。

* ご使用のシステムとONTAP のバージョンで、同じスタック（混在スタック）にIOM6シェルフとIOM12 / IOM12Bシェルフを混在させることができます。
+
次のいずれかの方法でサポートを確認できます。

+
** いずれかのコントローラの管理プロンプトで 'run local sysconfig ` コマンドを入力します
+
SAS2/SAS3 Mixed Stack Supportフィールドが出力に表示されないか、値が「none」の場合、システムは混在スタックをサポートしていません。

+
[SAS2/SAS3 Mixed Stack Support]フィールドに「All」と表示されている場合、システムは混在スタックをサポートしています。

+
[SAS2/SAS3 Mixed Stack Support]フィールドに「bridge-attached」と表示されている場合、ストレージシェルフがATTO FibreBridgeを介して接続されている場合にのみ、混在スタックがサポートされます。

** Hardware Universe にアクセスしてプラットフォーム情報に移動します。
+
https://hwu.netapp.com["NetApp Hardware Universe の略"]



* シェルフを MetroCluster 構成に追加する場合は、 MetroCluster インストールおよび設定ガイドに記載されているすべての要件を構成が満たしている必要があります。
+
http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-mcc-inst-cnfg-ip/home.html["『 MetroCluster IP Installation and Configuration Guide 』を参照してください"]

+
http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-mcc-inst-cnfg-stretch/home.html["ONTAP 9 ストレッチ MetroCluster インストールおよび設定ガイド"]

+
http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-mcc-inst-cnfg-fabric/home.html["ONTAP 9 ファブリック接続 MetroCluster インストールおよび設定ガイド"]

* IOM12 シェルフをホットアドする IOM6 シェルフのスタックは、 SAS 銅線ケーブル（シェルフ / シェルフ間およびコントローラ / スタック間のすべての接続用）でケーブル接続する必要があります。
+
SAS 光ケーブルは混在スタックではサポートされません。

+

NOTE: IOM6 シェルフスタックが SAS 光ケーブルでケーブル接続されている場合は、 IOM12 シェルフをホットアドできません。ネットアップの営業担当者にお問い合わせください。

* ホットアドする IOM12 シェルフに搭載可能なドライブの数が、サポートされる最大ドライブ数よりも少なくとも少ない必要があります。
+
IOM12 / IOM12Bシェルフをホットアドしたあとに、システムでサポートされる最大ドライブ数を超えることはできません。

+
https://hwu.netapp.com["NetApp Hardware Universe の略"]

* システムに SAS ケーブル接続のエラーメッセージが表示されていない必要があります。
+
ケーブル接続エラーがある場合は、エラーメッセージに記載されている対処策を実行して解決する必要があります。

+
https://mysupport.netapp.com/site/tools/tool-eula/activeiq-configadvisor["ネットアップのダウンロード： Config Advisor"]

* IOM12 / IOM12Bシェルフを注文して納入し、適切な数とタイプのSAS銅線ケーブルを用意しておく必要があります。
+
IOM12 シェルフは Mini-SAS HD コネクタを使用します。IOM6 シェルフは QSFP コネクタを使用します。





== ブリッジ接続型 MetroCluster 構成のホットアドの要件

[role="lead"]
MetroCluster 構成で2組のATTO FibreBridgeブリッジを使用して接続されたIOM6シェルフのスタックにIOM12 / IOM12Bシェルフをホットアドする場合、システムが一定の要件を満たしている必要があります。

* 現在の構成でブリッジの SAS ポートが使用可能な場合は、 IOM12 シェルフを別のスタックとして追加する必要があります。
+
IOM12 / IOM12BとIOM6モジュールをスタックに混在させる場合は、すべてのブリッジポートを使用してください。

* ご使用のシステムとONTAP のバージョンで、同じスタック（混在スタック）にIOM6シェルフとIOM12 / IOM12Bシェルフを混在させることができます。
+
次のいずれかの方法でサポートを確認できます。

+
** いずれかのコントローラの管理プロンプトで 'run local sysconfig ` コマンドを入力します
+
SAS2/SAS3 Mixed Stack Support フィールドが出力に表示されない、または値が none の場合、システムは混在スタックをサポートしません。

+
ALL や bridge-attached などの SAS2/SAS3 Mixed Stack Support フィールドに他の項目が表示される場合、システムは混在スタックをサポートします。

** Hardware Universe にアクセスしてプラットフォーム情報に移動します。
+
https://hwu.netapp.com["NetApp Hardware Universe の略"]



* 構成が MetroCluster インストールおよび設定ガイドのすべての要件を満たしている必要があります。
+
https://docs.netapp.com/us-en/ontap-metrocluster/install-stretch/index.html["ストレッチ MetroCluster 構成のインストールと設定"]

+
https://docs.netapp.com/us-en/ontap-metrocluster/install-fc/index.html["ファブリック接続 MetroCluster 設定のインストールと設定"]

* IOM12 / IOM12BシェルフをホットアドするIOM6シェルフのスタックをSAS銅線ケーブルで接続する必要があります（すべてのシェルフ/シェルフおよびコントローラ/スタック間の接続に使用）。
+
SAS 光ケーブルは混在スタックではサポートされません。

+

NOTE: IOM6シェルフスタックがSAS光ケーブルで接続されている場合は、IOM12 / IOM12Bシェルフをホットアドできません。ネットアップの営業担当者にお問い合わせください。

* ブリッジポートでサポートされるドライブの最大数よりも少ない数のドライブを使用する必要があります。
* IOM12 / IOM12Bシェルフを注文して納入し、適切な数とタイプのSAS銅線ケーブルを用意しておく必要があります。
+
IOM12 / IOM12BシェルフはMini-SAS HDコネクタを使用します。IOM6 シェルフは QSFP コネクタを使用します。

* ブリッジでファームウェアバージョン 3.16/4.16 以降が実行されている必要があります。




== ホットアドに関する考慮事項

[role="lead"]
IOM12 / IOM12BシェルフをIOM6シェルフのスタックにホットアドする前に、この手順 に関する考慮事項とベストプラクティスを把握しておく必要があります。



=== 一般的な考慮事項

* ホットアドするIOM12 / IOM12Bシェルフのファームウェアバージョンは0260以降にすることを強く推奨します。
+
サポート対象バージョンのシェルフファームウェアを使用している場合、ホットアドしたシェルフをスタックに正しくケーブル接続しないと、ストレージスタックのアクセスの問題から保護できません。

+
IOM12 / IOM12Bシェルフのファームウェアをシェルフにダウンロードしたら、どちらかのコントローラのコンソールで「storage shelf show module」コマンドを入力して、ファームウェアのバージョンが0260以降であることを確認します。

* 無停止でのスタック統合はサポートされていません。
+
この手順を使用して、システムの電源がオンでデータを提供中（ I/O が実行中）になっているときに、同じシステム内の別のスタックからホットリムーブしたディスクシェルフをホットアドすることはできません。

* この手順を使用して、該当するシェルフにアグリゲートがミラーされている場合に、同じ MetroCluster システム内でホットリムーブされたディスクシェルフをホットアドできます。
* IOM12モジュールを搭載したシェルフをIOM6モジュールを搭載したシェルフのスタックにホットアドする場合、スタック全体のパフォーマンスは6Gbpsで動作します（最も速度の低いシェルフ）。
+
IOM3またはIOM6モジュールからIOM12モジュールにアップグレードされたシェルフをホットアドする場合、スタックは12Gbpsで動作しますが、シェルフのバックプレーンとディスク機能によってディスクパフォーマンスが3Gbpsまたは6Gbpsに制限される可能性があります。

* ホットアドしたシェルフのケーブル接続が完了すると、 ONTAP でシェルフが認識されます。
+
** ドライブ所有権は、自動ドライブ割り当てが有効になっている場合に割り当てられます。
** シェルフ（ IOM ）ファームウェアとドライブファームウェアは、必要に応じて自動的に更新されます。
+

NOTE: ファームウェアの更新には最大 30 分かかる場合があります。







=== ベストプラクティスに関する考慮事項

* * ベストプラクティス： * シェルフをホットアドする前に、お使いのシステムのシェルフ（ IOM ）ファームウェアとドライブファームウェアを最新バージョンにしておくことを推奨します。
+
https://mysupport.netapp.com/site/downloads/firmware/disk-shelf-firmware["ネットアップのダウンロード：ディスクシェルフファームウェア"]

+
https://mysupport.netapp.com/site/downloads/firmware/disk-drive-firmware["ネットアップのダウンロード：ディスクドライブファームウェア"]




NOTE: ファームウェアをシェルフおよびそのコンポーネントに対応しないバージョンにリバートしないでください。

* * ベストプラクティス：シェルフをホットアドする前に、 Disk Qualification Package （ DQP ）の最新バージョンをインストールしておくことを推奨します。
+
DQP の最新バージョンをインストールしておくと、新しく認定されたドライブがシステムで認識されて使用できるようになります。これにより、ドライブの情報が最新でない場合に表示されるシステムイベントメッセージを回避できるほか、ドライブが認識されないために発生するドライブのパーティショニングを回避できます。さらに、ドライブのファームウェアが最新でない場合も、通知で知ることができます。

+
https://mysupport.netapp.com/site/downloads/firmware/disk-drive-firmware/download/DISKQUAL/ALL/qual_devices.zip["ネットアップのダウンロード： Disk Qualification Package"^]

* * ベストプラクティス： * シェルフのホットアドの前後に Active IQ Config Advisor を実行することを推奨します。
+
シェルフをホットアドする前に Active IQ Config Advisor を実行すると、既存の SAS 接続の Snapshot が作成され、シェルフ（ IOM ）ファームウェアのバージョンが確認されます。また、すでにシステムで使用されているシェルフ ID を確認できます。シェルフをホットアドしたあとに Active IQ Config Advisor を実行すると、シェルフが正しくケーブル接続されており、システム内でシェルフ ID が一意であることを確認できます。

+
https://mysupport.netapp.com/site/tools/tool-eula/activeiq-configadvisor["ネットアップのダウンロード： Config Advisor"]

* * ベストプラクティス： * インバンド ACP （ IBACP ）をシステムで実行することを推奨します。
+
** IBAP が実行されているシステムでは、ホットアドした IOM12 シェルフで IBACP が自動的に有効になります。
** アウトオブバンド ACP が有効になっているシステムでは、 IOM12 シェルフで ACP 機能を使用できません。
+
IBACP に移行して、アウトオブバンド ACP ケーブルを取り外す必要があります。

** IBACP を実行していないシステムで IBACP の要件を満たしている場合は、 IOM12 シェルフをホットアドする前にシステムを IBACP に移行することができます。
+
https://kb.netapp.com/Advice_and_Troubleshooting/Data_Storage_Systems/FAS_Systems/In-Band_ACP_Setup_and_Support["IBACP への移行手順"]

+

NOTE: 移行手順には、 IBACP のシステム要件が記載されています。







== ホットアド用のドライブ所有権を手動で割り当てる準備をします

[role="lead"]
ホットアドする IOM12 シェルフのドライブ所有権を手動で割り当てる場合は、自動ドライブ割り当てが有効になっている場合は無効にする必要があります。

.作業を開始する前に
システム要件を満たしている必要があります。

<<ホットアドの要件>>

<<ブリッジ接続型 MetroCluster 構成のホットアドの要件>>

.このタスクについて
HA ペアを使用する場合は、シェルフ内のドライブが両方のコントローラモジュールで所有されるようにするには、ドライブ所有権を手動で割り当てる必要があります。

.手順
. 自動ドライブ割り当てが有効になっているかどうかを確認します。「 storage disk option show
+
HA ペアを使用している場合、このコマンドはどちらのコントローラモジュールでも入力できます。

+
自動ドライブ割り当てが有効になっている場合は ' 各コントローラモジュールの Auto Assign 列に on と表示されます

. 自動ドライブ割り当てが有効になっている場合は無効にします。「 storage disk option modify -node _node_name -autoassign off
+
HA ペア構成または 2 ノード MetroCluster 構成の場合は、両方のコントローラモジュールで自動ドライブ割り当てを無効にする必要があります。





== ホットアド用のシェルフを設置します

[role="lead"]
ホットアドするシェルフごとに、シェルフをラックに設置し、電源コードを接続し、シェルフの電源をオンにして、シェルフ ID を設定します。

. ディスクシェルフに付属のラックマウントキット（ 2 ポストラック用または 4 ポストラック用）をキットに付属のパンフレットに従って設置します。
+
[NOTE]
====
複数のディスクシェルフを設置する場合は、安定性を考慮してラックの下から順に設置してください。

====
+
[CAUTION]
====
ディスクシェルフを Telco タイプのラックにフランジで取り付けない原因でください。ディスクシェルフの重量により、ラックが自重で壊れる可能性があります。

====
. キットに付属のパンフレットに従って、サポートブラケットとラックにディスクシェルフを取り付けて固定します。
+
ディスクシェルフを軽くして扱いやすくするために、電源装置と I/O モジュール（ IOM ）を取り外します。

+
DS460Cディスクシェルフでは、ドライブは別々にパッケージ化されているため、シェルフは軽量ですが、空のDS460Cシェルフの重量は引き続き約60kg（132ポンド）です。そのため、シェルフを移動する場合は、次の点に注意してください。

+

CAUTION: リフトハンドルを使用して空のDS460Cシェルフを安全に移動する場合は、電動リフトを使用するか4人で運搬することを推奨します。

+
DS460Cの出荷時は、4個の着脱式リフトハンドル（両側に2個）が同梱されています。取っ手を使用するには、シェルフ側面のスロットにハンドルのタブを挿入し、カチッと音がして所定の位置に収まるまで押し上げます。次に、ディスクシェルフをレールにスライドさせたら、サムラッチを使用して一度に1組のハンドルを外します。次の図は、リフトハンドルを取り付ける方法を示しています。

+
image::../media/drw_ds460c_handles.gif[DRW ds460c ハンドル]

. ディスクシェルフをラックに設置する前に取り外した電源装置と IOM を再度取り付けます。
. DS460Cディスクシェルフを設置する場合は、ドライブをドライブドロワーに取り付けます。それ以外の場合は、次の手順に進みます。
+
[NOTE]
====
静電気放出を防ぐために、作業中は常にESDリストストラップを着用し、ストレージエンクロージャのシャーシの塗装されていない表面部分にリストストラップを接地させます。

リストストラップがない場合は、ディスクドライブに触る前に、ストレージエンクロージャのシャーシの塗装されていない部分を手で触ります。

====
+
購入したシェルフに含まれているドライブが60本よりも少ない場合は、次の手順で各ドロワーにドライブを取り付けます。

+
** 最初の4つのドライブを前面スロット（0、3、6、および9）に取り付けます。
+

NOTE: *機器の故障のリスク：*通気が適切に行われ、過熱を防ぐために、必ず最初の4つのドライブをフロントスロット（0、3、6、9）に取り付けてください。

** 残りのドライブについては、各ドロワーに均等に配置します。




次の図は、シェルフ内の各ドライブドロワーにおける 0~11 のドライブ番号の配置を示しています。

image::../media/dwg_trafford_drawer_with_hdds_callouts.gif[DWG トラフォードドロワー（ HDD の寸法テキスト付き]

. シェルフの一番上のドロワーを開きます。
. ESDバッグからドライブを取り出します。
. ドライブのカムハンドルを垂直な位置まで持ち上げます。
. ドライブキャリアの両側にある 2 つの突起ボタンをドライブドロワーのドライブチャネルにある対応するくぼみに合わせます。
+
image::../media/28_dwg_e2860_de460c_drive_cru.gif[28 DWG e2860 de460c ドライブ CRU]

+
[cols="10,90"]
|===


| image:../media/legend_icon_01.png[""] | ドライブキャリアの右側の突起ボタン 
|===
. ドライブを真上から下ろし、ドライブがオレンジのリリースラッチの下に完全に固定されるまでカムハンドルを下に回転させます。
. ドロワー内の各ドライブについて、同じ手順を繰り返します。
+
各ドロワーのスロット 0 、 3 、 6 、 9 にドライブが配置されていることを確認する必要があります。

. ドライブドロワーをエンクロージャに慎重に戻します。
+
|===


 a| 
image:../media/2860_dwg_e2860_de460c_gentle_close.gif[""]



 a| 

CAUTION: * データアクセスが失われる可能性： * ドロワーを乱暴に扱わないように注意してください。ドロワーに衝撃を与えたり、ストレージアレイにぶつけて破損したりしないように、ゆっくりと押し込んでください。

|===
. 両方のレバーを内側に押してドライブドロワーを閉じます。
. ディスクシェルフ内の各ドロワーについて、同じ手順を繰り返します。
. 前面ベゼルを取り付けます。
+
.. 複数のディスクシェルフを設置する場合は、設置するディスクシェルフごとに前の手順を繰り返します。
.. 各ディスクシェルフの電源装置を接続します。


. 電源コードをディスクシェルフに接続して電源コード固定クリップで所定の位置に固定してから、耐障害性を確保するためにそれぞれ別々の電源に接続します。
. 各ディスクシェルフの電源装置をオンにし、ディスクドライブがスピンアップするまで待ちます。
+
.. HA ペアまたはシングルコントローラ構成内で一意の ID に、ホットアドする各シェルフのシェルフ ID を設定します。
+
有効なシェルフ ID は 00~99 です。IOM6 シェルフの使用数が少なく（ 1~9 ）、 IOM12 シェルフの使用数が 10 以上になるように、シェルフ ID を設定することを推奨します。

+
オンボードストレージを搭載したプラットフォームモデルがある場合、シェルフ ID は内蔵シェルフおよび外付けシェルフ全体で一意である必要があります。内蔵シェルフを 0 に設定することを推奨します。MetroCluster IP 構成には、外部シェルフ名のみが該当するため、シェルフ名は一意である必要はありません。



. 必要に応じて、 Active IQ Config Advisor を実行して、すでに使用されているシェルフ ID を確認します。
+
https://mysupport.netapp.com/site/tools/tool-eula/activeiq-configadvisor["ネットアップのダウンロード： Config Advisor"]

+
「 storage shelf show -fields shelf-id 」コマンドを実行して、システムですでに使用されているシェルフ ID （および重複しているシェルフ ID ）のリストを表示することもできます。

. 左側のエンドキャップのうしろにあるシェルフ ID ボタンにアクセスします。
. デジタルディスプレイの 1 桁目の数字が点滅するまでオレンジのボタンを押し続けて、シェルフ ID の 1 桁目の数字を変更します。点滅までに最大 3 秒かかります。
. 目的の番号になるまで、ボタンを押して番号を伝えます。
. 2 番目の番号についても手順 c と d を繰り返します。
. 2 桁目の数字の点滅が停止するまでボタンを押し続けてプログラミングモードを終了します。点滅が停止するまでに最大 3 秒かかります。
. シェルフの電源を再投入し、シェルフ ID を有効にします。
+
電源の再投入を完了するには、両方の電源スイッチをオフにし、 10 秒待ってから再度オンにする必要があります。

. ホットアドするシェルフごとに手順 a~g を繰り返します。




== ホットアド用のシェルフをケーブル接続します

[role="lead"]
IOM12 / IOM12BシェルフをIOM6シェルフのスタックにケーブル接続する方法は、IOM12シェルフが最初のIOM12 / IOM12Bシェルフであるか、つまりスタックに他のIOM12シェルフがないかによって異なります。 また、既存の混合スタックにIOM12 / IOM12Bシェルフを追加するかどうかを指定します。つまり、1つ以上のIOM12 / IOM12Bシェルフがスタックにすでに存在します。また、スタックにマルチパス HA 、マルチパス、シングルパス HA 、またはシングルパス接続のどれがあるかによっても異なります。

.作業を開始する前に
* システム要件を満たしている必要があります。
+
<<ホットアドの要件>>

* 必要に応じて準備手順を完了しておく必要があります。
+
<<ホットアド用のドライブ所有権を手動で割り当てる準備をします>>

* シェルフを設置し、電源をオンにして、シェルフ ID を設定しておく必要があります。
+
<<ホットアド用のシェルフを設置します>>



.このタスクについて
* IOM12 / IOM12Bシェルフをスタック内の論理的に最後のシェルフに常にホットアドして、スタック内での1つの速度の移行を維持します。
+
IOM12 / IOM12Bシェルフをスタック内の論理的な最後のシェルフにホットアドすると、IOM6シェルフをグループ化したまま、IOM12 / IOM12Bシェルフをグループ化したまま、2つのシェルフグループ間で速度を1つに移行できます。

+
例：

+
** HAペアでは、IOM6シェルフを2台、IOM12 / IOM12Bシェルフを2台使用するスタック内での1回の速度の移行を次のように表します。
+
 Controller <-> IOM6 <-> IOM6 <---> IOM12IOM12B <-> IOM12/IOM12B <-> Controller
** オンボードの IOM12E ストレージを使用する HA ペアでは、 IOM12 シェルフを 2 台と IOM6 シェルフを 2 台搭載したスタック内での 1 回の速度の移行を次のように表します。
+
 IOM12E 0b <-> IOM12/IOM12B <-> IOM12/IOM12B <---> IOM6 <-> IOM6 <-> IOM12E 0a
+
オンボードストレージポート0bは内蔵ストレージ（エクスパンダ）のポートで、ホットアドするIOM12 / IOM12Bシェルフ（スタックの最後のシェルフ）に接続するため、IOM12 / IOM12Bシェルフのグループを1つにまとめ、スタックとオンボードのIOM12Eストレージを使用して移行を1つにします。



* 混在スタックでは、 1 つの速度での移行のみがサポートされます。これ以上の速度切り替えはできません。たとえば、スタック内に次のように 2 つの速度遷移を表示することはできません。
+
 Controller <-> IOM6 <-> IOM6 <---> IOM12/IOM12B <-> IOM12/IOM12B <---> IOM6 <-> Controller
* 混在スタックに IOM6 シェルフをホットアドできます。ただし、スタック内での 1 回の移行を維持するには、 IOM6 シェルフを搭載したスタックの側面（既存の IOM6 シェルフグループ）にホットアドする必要があります。
* IOM12 / IOM12Bシェルフをケーブル接続するには、まずIOM AのパスのSASポートを接続し、次にIOM Bのパスについても、必要に応じてケーブル接続の手順を繰り返します。
+

NOTE: MetroCluster 構成では、 IOM B のパスは使用できません。

* 最初のIOM12 / IOM12Bシェルフ（最後のIOM6シェルフに接続するシェルフ）は、常にIOM6シェルフの円形のポート（四角形のポートではありません）に接続します。
* SAS ケーブルのコネクタは、誤挿入を防ぐキーイングが施されているため、正しい向きで SAS ポートに取り付けるとカチッとはまります。
+
シェルフの場合は、 SAS ケーブルのコネクタをプルタブ（コネクタの下側）を下にして挿入します。コントローラの場合は、プラットフォームのモデルによって SAS ポートの向きが異なるため、 SAS ケーブルのコネクタの正しい向きもそれに応じて異なります。

* 次の図は、FC-to-SASブリッジを使用しない構成でIOM12 / IOM12BシェルフをIOM6シェルフスタックにケーブル接続する場合に参照してください。
+
この図は、マルチパス HA 接続を使用したスタック専用の図です。ただし、ケーブル接続の概念は、マルチパス、シングルパス HA 、シングルパス接続、ストレッチ MetroCluster の各構成のスタックに適用できます。

+
image::../media/drw_sas2_sas3_mixed_stack.png[DRW SAS2 SAS3 混合スタック]

* 次の図は、ブリッジ接続MetroCluster 構成でIOM12 / IOM12BシェルフをIOM6シェルフスタックにケーブル接続する場合のものです。 image:../media/hot_adding_iom12_shelves_to_iom6_stack_in_bridge_attached_config.png[""]


.手順
. スタック内の論理的に最後のシェルフを特定します。
+
プラットフォームモデルとスタック接続（マルチパス HA 、マルチパス、シングルパス HA 、またはシングルパス）に応じて、論理的に最後のシェルフはコントローラの SAS ポート B と D からコントローラ / スタック間を接続するシェルフです。 または、シェルフにコントローラが接続されていない（コントローラ / スタック間の接続は、コントローラの SAS ポート A と C を介してスタックの論理的な最上位に接続されているため）。

. ホットアドするIOM12 / IOM12BシェルフをIOM6スタックに追加する場合、IOM6シェルフスタックに他のIOM12 / IOM12Bシェルフがないように、該当する手順を実行します。
+

NOTE: ケーブルの接続を解除してから再接続し、ケーブルを別のケーブルに交換する場合は、70秒以上待機する必要があります。

+
それ以外の場合は、手順 3 に進みます。

+
[cols="2*"]
|===
| IOM6 スタック接続の状態 | 作業 


 a| 
マルチパス HA 、マルチパス、またはコントローラを論理的に最後のシェルフに接続したシングルパス HA （ストレッチ MetroCluster 構成を含む）
 a| 
.. 最後の IOM6 シェルフの IOM A の円形のポートからコントローラまたはブリッジへのコントローラ / スタック間ケーブルを外します。
+
コントローラポートをメモします。

+
ケーブルを脇に置きます。不要になりました。

+
それ以外の場合は、手順 e に進みます

.. 最後のIOM6シェルフのIOM Aの円形のポート（手順A）と新しいIOM12 / 12BのIOMAシェルフのIOM Aポート1をケーブル接続します。
+
SAS 銅線の QSFP-miniSAS HD ケーブルを使用します。

.. 別のIOM12 / IOM12Bシェルフをホットアドする場合は、ケーブル接続したシェルフのIOM12 / IOM12BシェルフのIOM Aポート3と次のIOM12 / IOM12BシェルフのIOM Aポート1を間で接続します。
+
SAS 銅線 Mini-SAS HD / Mini-SAS HD 間ケーブルを使用します。

+
それ以外の場合は、次の手順に進みます。

.. コントローラまたはブリッジ（手順 a ）の同じポートを新しい最後の IOM12 シェルフの IOM A ポート 3 にケーブル接続して、コントローラ / スタック間の接続を再確立します。
+
コントローラのポートタイプに応じて、 SAS 銅線の QSFP-miniSAS HD ケーブルまたは Mini-SAS HD / Mini-SAS HD ケーブルを使用します。

.. IOM B についても手順 a~d を繰り返します
+
それ以外の場合は、手順 4 に進みます。





 a| 
MetroCluster 構成でのブリッジ接続
 a| 
.. 最後の IOM6 シェルフの IOM A の円形のポートからブリッジへの一番下のブリッジ / スタック間ケーブルを外します。
+
ブリッジポートをメモします。

+
ケーブルを脇に置きます。不要になりました。

+
それ以外の場合は、手順 e に進みます

.. 最後の IOM6 シェルフの IOM A の円形のポート（手順 a から）と新しい IOM12 シェルフの IOM A ポート 1 をシェルフ / シェルフ間の接続をケーブル接続します。
+
SAS 銅線の QSFP-miniSAS HD ケーブルを使用します。

.. 別のIOM12 / IOM12Bシェルフをホットアドする場合は、ケーブル接続したシェルフのIOM12 / IOM12BシェルフのIOM Aポート3と次のIOM12 / IOM12BシェルフのIOM Aポート1を間で接続します。
+
SAS 銅線 Mini-SAS HD / Mini-SAS HD 間ケーブルを使用します。

+
それ以外の場合は、次の手順に進みます。

.. 手順 b と c を繰り返して、 IOM B のシェルフ / シェルフ間をケーブル接続します
.. ブリッジの同じポート（手順 a ）を新しい最後の IOM12 シェルフの IOM A ポート 3 にケーブル接続して、下部のブリッジ / スタック間の接続を再確立します。
+
コントローラのポートタイプに応じて、 SAS 銅線の QSFP-miniSAS HD ケーブルまたは Mini-SAS HD / Mini-SAS HD ケーブルを使用します。

.. 手順 4. に進みます。




 a| 
シングルパス HA またはシングルパス。論理的に最後のシェルフへのコントローラ接続はありません
 a| 
.. 最後のIOM6シェルフのIOM Aの円形のポートと新しいIOM12 / IOM12BシェルフのIOM Aポート1をケーブル接続します。
+
SAS 銅線の QSFP-miniSAS HD ケーブルを使用します。

.. IOM B について、上記の手順を繰り返します
.. IOM12 / IOM12Bシェルフをもう1台ホットアドする場合は、手順AとBを繰り返します
+
それ以外の場合は、手順 4 に進みます。



|===
. ホットアドするIOM12 / IOM12Bシェルフを既存の混在スタックに追加する場合は、次の手順を実行します。つまり、1つ以上のIOM12 / IOM12Bシェルフがスタックにすでに存在する場合です。
+

NOTE: ケーブルの接続を解除してから再接続し、ケーブルを交換する場合は、70秒以上待ってから行うようにしてください。

+
[cols="2*"]
|===
| 混在スタック接続の状況 | 作業 


 a| 
マルチパス HA 、マルチパス、またはコントローラを論理的に最後のシェルフに接続したシングルパス HA 、または MetroCluster 構成のブリッジ接続
 a| 
.. コントローラ/スタック間のケーブルを最後のIOM12 / IOM12BシェルフのIOM Aポート3から新しい最後のIOM12 / IOM12Bシェルフの同じポートに移動します。
.. 1台のIOM12 / IOM12Bシェルフをホットアドする場合は、古い最後のIOM12 / 12BシェルフのIOM Aポート3と新しい最後のIOM12 / IOM12BシェルフのIOM Aポート1をシェルフ間で接続します。
+
SAS 銅線 Mini-SAS HD / Mini-SAS HD 間ケーブルを使用します。

+
それ以外の場合は、次の手順に進みます。

.. 複数のIOM12 / IOM12Bシェルフをホットアドする場合は、古い最後のIOM12 / IOM12BシェルフのIOM Aポート3と次のIOM12 / IOM12BシェルフのIOM Aポート1をケーブル接続し、この手順を他のIOM12 / IOM12Bシェルフの場合は繰り返します。
+
追加の SAS 銅線 Mini-SAS HD / Mini-SAS HD 間ケーブルを使用します。

+
それ以外の場合は、次の手順に進みます。

.. IOM B についても手順 a~c を繰り返します
+
それ以外の場合は、手順 4 に進みます。





 a| 
MetroCluster 構成でのブリッジ接続
 a| 
.. 下部のブリッジ/スタック間ケーブルを、最後のIOM12 / IOM12Bシェルフの古いポートから新しい最後のIOM12 / IOM12Bシェルフの同じポートに移動します。
.. 古い最後のIOM12 / IOM12BシェルフのIOM Aポート3と次のIOM12 / IOM12BシェルフのIOM Aポート1をケーブル接続し、この手順を追加のIOM12 / IOM12Bシェルフに対して繰り返します。
+
SAS 銅線 Mini-SAS HD / Mini-SAS HD 間ケーブルを使用します。

.. 古い最後のIOM12 / IOM12BシェルフのIOM Bポート3と次のIOM12 / IOM12BシェルフのIOM Bポート1をケーブル接続し、この手順を追加のIOM12 / IOM12Bシェルフに対して繰り返します。
.. 手順 4. に進みます。




 a| 
シングルパス HA またはシングルパス。論理的に最後のシェルフへのコントローラ接続はありません
 a| 
.. 最後のIOM12 / IOM12BシェルフのIOM Aポート3と最後のIOM12 / IOM12BシェルフのIOM Aポート1をケーブル接続します。
+
SAS 銅線 Mini-SAS HD / Mini-SAS HD 間ケーブルを使用します。

.. IOM B について、上記の手順を繰り返します
.. IOM12 / IOM12Bシェルフをもう1台ホットアドする場合は、手順AとBを繰り返します
+
それ以外の場合は、手順 4 に進みます。



|===
. SAS 接続が正しくケーブル接続されていることを確認します。
+
ケーブル接続エラーが発生した場合は、表示される対処方法に従ってください。

+
https://mysupport.netapp.com/site/tools/tool-eula/activeiq-configadvisor["ネットアップのダウンロード： Config Advisor"]

. この手順の準備作業として自動ドライブ割り当てを無効にした場合は、ドライブ所有権を手動で割り当ててから、必要に応じて自動ドライブ割り当てを再度有効にする必要があります。
+
それ以外の場合は、この手順を使用します。

+
<<ホットアドを完了します>>

+

NOTE: すべての MetroCluster 構成で手動でドライブを割り当てる必要があります。





== ホットアドを完了します

[role="lead"]
IOM12 / IOM12BシェルフをIOM6シェルフのスタックにホットアドする準備の一環として自動ドライブ割り当てを無効にした場合、ドライブ所有権を手動で割り当ててから、必要に応じて自動ドライブ割り当てを再度有効にする必要があります。

.作業を開始する前に
システムの指示に従って、シェルフのケーブル接続を完了しておく必要があります。

<<ホットアド用のシェルフをケーブル接続します>>

.手順
. 所有権が未設定のドライブをすべて表示します。「 storage disk show -container-type unassigned 」
+
HA ペアを使用している場合、このコマンドはどちらのコントローラモジュールでも入力できます。

. 各ドライブを割り当てます。「 storage disk assign -disk disk_name -owner_owner_name _ 」
+
HA ペアを使用している場合、このコマンドはどちらのコントローラモジュールでも入力できます。

+
ワイルドカード文字を使用して、一度に複数のドライブを割り当てることができます。

. 必要に応じて自動ドライブ割り当てを再度有効にします。「 storage disk option modify -node node_name -autoassign on
+
HA ペアを使用する場合は、両方のコントローラモジュールで自動ドライブ割り当てを再度有効にする必要があります。


